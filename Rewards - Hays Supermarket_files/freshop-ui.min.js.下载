//fix device issues
//This fixes an issue with Samsung devices incorrectly calling document.getElementsByClassName.ToString
Function.prototype.ToString=function(){return this.toString()},function(){var $,jQuery,_,dateFns,NProgress,oldNProgress=window.NProgress,showdown,oldShowdown=window.showdown,S,oldS=window.S,numeral,oldNumeral=window.numeral,Lockr,oldLockr=window.Lockr,bugsnag,oldBugsnag=window.bugsnag,fpUtil,fpConstants,fpEvent,fpService,fpClient,fpConfig,fpUi,fp=window.fp,Mk,Nk,R1,S1,T1,U1,X1;function V1(){return""===S1.hash||"#"===S1.hash}function Y1(e,t){for(var n=0;n<e.length;n+=1)if(!1===t(e[n],n,e))return}function Z1(e){for(var t=[],n=0,i=e.length;n<i;n++)t=t.concat(e[n]);return t}function $1(n,e,i){if(!n.length)return i();var r=0;!function t(){e(n[r],function(e){e||!1===e?(i(e),i=function(){}):(r+=1)===n.length?i():t()})}()}function _1(e,t,n){for(var i in n=e,t)if(t.hasOwnProperty(i)&&(n=t[i](e))!==e)break;return n===e?"([._a-zA-Z0-9-]+)":n}function a2(e,t){for(var n,i=0,r="";n=e.substr(i).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)i=n.index+n[0].length,n[0]=n[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),r+=e.substr(0,n.index)+n[0];var a,o,s=(e=r+=e.substr(i)).match(/:([^\/]+)/gi);if(s){o=s.length;for(var l=0;l<o;l++)e="::"===(a=s[l]).slice(0,2)?a.slice(1):e.replace(a,_1(a,t))}return e}function b2(e,t,n,i){var r,a=0,o=0,s=0;n=(n||"(").toString(),i=(i||")").toString();for(r=0;r<e.length;r++){var l=e[r];if(l.indexOf(n,a)>l.indexOf(i,a)||~l.indexOf(n,a)&&!~l.indexOf(i,a)||!~l.indexOf(n,a)&&~l.indexOf(i,a)){if(o=l.indexOf(n,a),s=l.indexOf(i,a),~o&&!~s||!~o&&~s)e=[e.slice(0,(r||1)+1).join(t)].concat(e.slice((r||1)+1));a=(o<s?s:o)+1,r=0}else a=0}return e}delete window.fp,fp.isDev()&&(window._fp=fp),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).bugsnag=e()}}(function(){function t(e,t,n){for(var i=n,r=0,a=e.length;r<a;r++)i=t(i,e[r],r,e);return i}function n(e){return e<10?"0"+e:e}var a=!{toString:null}.propertyIsEnumerable("toString"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=function(e,r){return t(e,function(e,t,n,i){return e.concat(r(t,n,i))},[])},i=t,r=function(e,r){return t(e,function(e,t,n,i){return r(t,n,i)?e.concat(t):e},[])},s=function(e,r){return t(e,function(e,t,n,i){return!0===e||t===r},!1)},l=function(e){var t=[],n=void 0;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);if(!a)return t;for(var i=0,r=o.length;i<r;i++)Object.prototype.hasOwnProperty.call(e,o[i])&&t.push(o[i]);return t},c=function(e){return"[object Array]"===Object.prototype.toString.call(e)},u=function(){var e=new Date;return e.getUTCFullYear()+"-"+n(e.getUTCMonth()+1)+"-"+n(e.getUTCDate())+"T"+n(e.getUTCHours())+":"+n(e.getUTCMinutes())+":"+n(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};var d=u,f=(p.prototype.toJSON=function(){return{type:this.type,name:this.name,timestamp:this.timestamp,metaData:this.metaData}},p);function p(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"[anonymous]",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"manual",i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:d();!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),this.type=n,this.name=e,this.metaData=t,this.timestamp=i}f.prototype.toJSON.forceDecirc=!0;function h(e){return g(["undefined","number"],typeof e)&&parseInt(""+e,10)===e&&0<e}var m=f,g=s,v={},_=r,y=i,b=l,S=c;v.schema={apiKey:{defaultValue:function(){return null},message:"(string) apiKey is required",validate:function(e){return"string"==typeof e&&e.length}},appVersion:{defaultValue:function(){return null},message:"(string) appVersion should have a value if supplied",validate:function(e){return null===e||"string"==typeof e&&e.length}},autoNotify:{defaultValue:function(){return!0},message:"(boolean) autoNotify should be true or false",validate:function(e){return!0===e||!1===e}},beforeSend:{defaultValue:function(){return[]},message:"(array[Function]) beforeSend should only contain functions",validate:function(e){return"function"==typeof e||S(e)&&_(e,function(e){return"function"==typeof e}).length===e.length}},endpoint:{defaultValue:function(){return"//notify.bugsnag.com"},message:"(string) endpoint should be set",validate:function(){return!0}},notifyReleaseStages:{defaultValue:function(){return null},message:"(array[string]) notifyReleaseStages should only contain strings",validate:function(e){return null===e||S(e)&&_(e,function(e){return"string"==typeof e}).length===e.length}},releaseStage:{defaultValue:function(){return"production"},message:"(string) releaseStage should be set",validate:function(e){return"string"==typeof e&&e.length}},maxBreadcrumbs:{defaultValue:function(){return 20},message:"(number) maxBreadcrumbs must be a number (≤40) if specified",validate:function(e){return 0===e||h(e)&&(void 0===e||e<=40)}},autoBreadcrumbs:{defaultValue:function(){return!0},message:"(boolean) autoBreadcrumbs should be true or false",validate:function(e){return"boolean"==typeof e}}},v.mergeDefaults=function(n,i){if(!n||!i)throw new Error("schema.mergeDefaults(opts, schema): opts and schema objects are required");return y(b(i),function(e,t){return e[t]=void 0!==n[t]?n[t]:i[t].defaultValue(),e},{})},v.validate=function(n,i){if(!n||!i)throw new Error("schema.mergeDefaults(opts, schema): opts and schema objects are required");var e=y(b(i),function(e,t){return i[t].validate(n[t])?e:e.concat({key:t,message:i[t].message,value:n[t]})},[]);return{valid:!e.length,errors:e}};function w(e){return!(!e||!e.stack&&!e.stacktrace&&!e["opera#sourceloc"])}var C={};!function(e,t){"use strict";"object"==typeof C?C=t():e.StackFrame=t()}(this,function(){"use strict";function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}function i(e){return e.charAt(0).toUpperCase()+e.substring(1)}function e(e){return function(){return this[e]}}var t=["isConstructor","isEval","isNative","isToplevel"],r=["columnNumber","lineNumber"],a=["fileName","functionName","source"],o=t.concat(r,a,["args"]);function s(e){if(e instanceof Object)for(var t=0;t<o.length;t++)e.hasOwnProperty(o[t])&&void 0!==e[o[t]]&&this["set"+i(o[t])](e[o[t]])}s.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof s)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new s(e)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(n(this.getLineNumber())?":"+this.getLineNumber():"")+(n(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var l=0;l<t.length;l++)s.prototype["get"+i(t[l])]=e(t[l]),s.prototype["set"+i(t[l])]=function(t){return function(e){this[t]=Boolean(e)}}(t[l]);for(var c=0;c<r.length;c++)s.prototype["get"+i(r[c])]=e(r[c]),s.prototype["set"+i(r[c])]=function(t){return function(e){if(!n(e))throw new TypeError(t+" must be a Number");this[t]=Number(e)}}(r[c]);for(var u=0;u<a.length;u++)s.prototype["get"+i(a[u])]=e(a[u]),s.prototype["set"+i(a[u])]=function(t){return function(e){this[t]=String(e)}}(a[u]);return s});var x={};!function(e,t){"use strict";"object"==typeof x?x=t(C):e.ErrorStackParser=t(e.StackFrame)}(this,function(s){"use strict";var t=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,i=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(n)},this).map(function(e){-1<e.indexOf("(eval ")&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(t.pop()),i=t.join(" ")||void 0,r=-1<["eval","<anonymous>"].indexOf(n[0])?void 0:n[0];return new s({functionName:i,fileName:r,lineNumber:n[1],columnNumber:n[2],source:e})},this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter(function(e){return!e.match(i)},this).map(function(e){if(-1<e.indexOf(" > eval")&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new s({functionName:e});var t=e.split("@"),n=this.extractLocation(t.pop()),i=t.join("@")||void 0;return new s({functionName:i,fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:e})},this)},parseOpera:function(e){return!e.stacktrace||-1<e.message.indexOf("\n")&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),i=[],r=2,a=n.length;r<a;r+=2){var o=t.exec(n[r]);o&&i.push(new s({fileName:o[2],lineNumber:o[1],source:n[r]}))}return i},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),i=[],r=0,a=n.length;r<a;r+=2){var o=t.exec(n[r]);o&&i.push(new s({functionName:o[3]||void 0,fileName:o[2],lineNumber:o[1],source:n[r]}))}return i},parseOpera11:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this).map(function(e){var t,n=e.split("@"),i=this.extractLocation(n.pop()),r=n.shift()||"",a=r.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;r.match(/\(([^\)]*)\)/)&&(t=r.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var o=void 0===t||"[arguments not available]"===t?void 0:t.split(",");return new s({functionName:a,args:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:e})},this)}}});var E={};!function(e,t){"use strict";"object"==typeof E?E=t(C):e.StackGenerator=t(e.StackFrame)}(this,function(o){return{backtrace:function(e){var t=[],n=10;"object"==typeof e&&"number"==typeof e.maxStackSize&&(n=e.maxStackSize);for(var i=arguments.callee;i&&t.length<n&&i.arguments;){for(var r=new Array(i.arguments.length),a=0;a<r.length;++a)r[a]=i.arguments[a];/function(?:\s+([\w$]+))+\s*\(/.test(i.toString())?t.push(new o({functionName:RegExp.$1||void 0,args:r})):t.push(new o({args:r}));try{i=i.caller}catch(e){break}}return t}}});var T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};var I=i,M=r,D=(k.prototype.ignore=function(){this._ignored=!0},k.prototype.isIgnored=function(){return this._ignored},k.prototype.updateMetaData=function(e,t,n){var i;if(!e)return this;var r=void 0;return null===(arguments.length<=1?void 0:t)?this.removeMetaData(e):null===(arguments.length<=2?void 0:n)?this.removeMetaData(e,arguments.length<=1?void 0:t,arguments.length<=2?void 0:n):("object"==typeof(arguments.length<=1?void 0:t)&&(r=arguments.length<=1?void 0:t),"string"==typeof(arguments.length<=1?void 0:t)&&((i={})[arguments.length<=1?void 0:t]=arguments.length<=2?void 0:n,r=i),r&&(this.metaData[e]||(this.metaData[e]={}),this.metaData[e]=T({},this.metaData[e],r)),this)},k.prototype.removeMetaData=function(e,t){return"string"!=typeof e||(t?this.metaData[e]&&delete this.metaData[e][t]:delete this.metaData[e]),this},k.prototype.toJSON=function(){return{payloadVersion:"4",exceptions:[{errorClass:this.errorClass,message:this.errorMessage,stacktrace:this.stacktrace,type:"browserjs"}],severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,breadcrumbs:this.breadcrumbs,context:this.context,user:this.user,metaData:this.metaData,groupingHash:this.groupingHash,request:this.request}},k);function k(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:A();!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k),this.__isBugsnagReport=!0,this._ignored=!1,this._handledState=i,this.app=void 0,this.apiKey=void 0,this.breadcrumbs=[],this.context=void 0,this.device=void 0,this.errorClass=P(e,"[no error class]"),this.errorMessage=P(t,"[no error message]"),this.groupingHash=void 0,this.metaData={},this.request=void 0,this.severity=this._handledState.severity,this.stacktrace=I(n,function(t,e){var n=O(e);try{return"{}"===JSON.stringify(n)?t:t.concat(n)}catch(e){return t}},[]),this.user=void 0}D.prototype.toJSON.forceDecirc=!0;var O=function(e){var t={file:e.fileName,method:U(e.functionName),lineNumber:e.lineNumber,columnNumber:e.columnNumber,code:void 0,inProject:void 0};return!t.lineNumber||t.file||t.method||(t.file="global code"),t},U=function(e){return/^global code$/i.test(e)?"global code":e},A=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},P=function(e,t){return"string"==typeof e&&e?e:t};D.getStacktrace=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return w(e)?x.parse(e).slice(t):M(E.backtrace(),function(e){return-1===(e.functionName||"").indexOf("StackGenerator$$")}).slice(1+n)},D.ensureReport=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(t.__isBugsnagReport)return t;try{var i=D.getStacktrace(t,e,1+n);return new D(t.name,t.message,i)}catch(e){return new D(t.name,t.message,[])}};var $=D,L=j;function j(e){return null===e||"object"!=typeof e||"function"==typeof e.toJSON&&!e.toJSON.forceDecirc||function e(t,n,i,r){var a,o,s,l,c,u;{if("object"!=typeof t||null===t)return;if(t instanceof R)return void t.count++;if("function"==typeof t.toJSON&&!t.toJSON.forceDecirc)return;if(r){for(l=0,c=!1,u=i.length;l<u;l++)if(i[l]===t){c=!0;break}if(c)return void(r[n]=new R(t,n,r))}}i.push(t);a=[];for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&a.push(d);o=a.length;s=0;for(;s<o;s++)n=a[s],e(t[n],n,i,t);i.pop()}(e,"",[],null),JSON.stringify(e)}function R(e,t,n){this.val=e,this.k=t,this.parent=n,this.count=1}j.default=j,R.prototype.toJSON=function(){return 0==--this.count&&(this.parent[this.k]=this.val),"[Circular]"};var N=function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}};var F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function q(){}var H=e,z=i,B=s,W=c,V=(G.prototype.configure=function(e){var t=0<arguments.length&&void 0!==e?e:{};this.config=v.mergeDefaults(F({},this.config,t),this.configSchema);var n=v.validate(this.config,this.configSchema);if(1!=!n.valid)return"function"==typeof this.config.beforeSend&&(this.config.beforeSend=[this.config.beforeSend]),null!==this.config.appVersion&&(this.app.version=this.config.appVersion),this._configured=!0,this._logger.debug("Loaded!"),this;var i=new Error("Bugsnag configuration error");throw i.errors=H(n.errors,function(e){return e.key+" "+e.message+" \n  "+e.value}),i},G.prototype.use=function(e){return this.plugins.push(e),e.init(this)},G.prototype.transport=function(e){return this._transport=e,this},G.prototype.logger=function(e){return this._logger=e,this},G.prototype.leaveBreadcrumb=function(e,t,n,i){if(!this._configured)throw new Error("Bugsnag must be configured before calling leaveBreadcrumb()");if(n="string"==typeof n?n:void 0,i="string"==typeof i?i:void 0,t="object"==typeof t&&null!==t?t:void 0,"string"==typeof(e=e||void 0)||t){var r=new m(e,t,n,i),a=L(r),o=this.breadcrumbs[this.breadcrumbs.length-1];if(!o||a!==L(o))return this.breadcrumbs.push(r),this.breadcrumbs.length>this.config.maxBreadcrumbs&&(this.breadcrumbs=this.breadcrumbs.slice(this.breadcrumbs.length-this.config.maxBreadcrumbs)),this}},G.prototype.notify=function(e,t){var n=1<arguments.length&&void 0!==t?t:{};if(!this._configured)throw new Error("Bugsnag must be configured before calling report()");var i=this.app&&"string"==typeof this.app.releaseStage?this.app.releaseStage:this.config.releaseStage,r=Y(e,n,this._logger),a=r.err,o=r.errorFramesToSkip,s=r._opts;s&&(n=s),a||(this._logger.warn('Usage error. notify() called with no "error" parameter'),a=new Error('Bugsnag usage error. notify() called with no "error" parameter')),"object"==typeof n&&null!==n||(n={});var l=$.ensureReport(a,o,1);if(l.app=F({releaseStage:i},l.app,this.app),l.context=l.context||n.context||this.context||void 0,l.device=F({},l.device,this.device,n.device),l.request=F({},l.request,this.request,n.request),l.user=F({},l.user,this.user,n.user),l.metaData=F({},l.metaData,this.metaData,n.metaData),l.breadcrumbs=this.breadcrumbs.slice(0),void 0!==n.severity&&(l.severity=n.severity,l._handledState.severityReason={type:"userSpecifiedSeverity"}),W(this.config.notifyReleaseStages)&&!B(this.config.notifyReleaseStages,i))return this._logger.warn("Report not sent due to releaseStage/notifyReleaseStages configuration"),!1;var c=l.severity,u=[].concat(n.beforeSend).concat(this.config.beforeSend);return z(u,function(e,t){return!0===e||"function"==typeof t&&!1===t(l)||!!l.isIgnored()},!1)?(this._logger.debug("Report not sent due to beforeSend callback"),!1):(this.config.autoBreadcrumbs&&this.leaveBreadcrumb(l.errorClass,{errorClass:l.errorClass,errorMessage:l.errorMessage,severity:l.severity,stacktrace:l.stacktrace},"error"),c!==l.severity&&(l._handledState.severityReason={type:"userCallbackSetSeverity"}),this._transport.sendReport(this._logger,this.config,{apiKey:l.apiKey||this.config.apiKey,notifier:this.notifier,events:[l]}),!0)},G);function G(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v.schema,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,G),!e)throw new Error("new BugsnagClient(notifier, configSchema) requires `notifier` argument");if(!e.name||!e.version||!e.url)throw new Error("new BugsnagClient(notifier, configSchema) - `notifier` requires: `{ name, version, url }`");this.notifier=e,this.configSchema=t,this._configured=!1,this._transport={name:"NULL_TRANSPORT",sendSession:q,sendReport:q},this._logger={debug:q,info:q,warn:q,error:q},this.plugins=[],this.session=n,this.breadcrumbs=[],this.app={},this.context=void 0,this.device=void 0,this.metaData=void 0,this.request=void 0,this.user={},this.BugsnagReport=$,this.BugsnagBreadcrumb=m}var Y=function(e,t,n){var i=void 0,r=0,a=void 0;switch(typeof e){case"string":"string"==typeof t?(n.warn("Usage error. notify() called with (string, string) but expected (error, object)"),i=new Error("Bugsnag usage error. notify() called with (string, string) but expected (error, object)"),a={metaData:{notifier:{notifyArgs:[e,t]}}}):(i=new Error(String(e)),r+=2);break;case"number":case"boolean":i=new Error(String(e));break;case"function":n.warn('Usage error. notify() called with a function as "error" parameter'),i=new Error('Bugsnag usage error. notify() called with a function as "error" parameter');break;case"object":null!==e&&(N(e)||e.__isBugsnagReport)?i=e:null!==e&&K(e)?((i=new Error(e.message||e.errorMessage)).name=e.name||e.errorClass,r+=2):(n.warn('Usage error. notify() called with an unsupported object as "error" parameter. Supply an Error or { name, message } object.'),i=new Error('Bugsnag usage error. notify() called with an unsupported object as "error" parameter. Supply an Error or { name, message } object.'))}return{err:i,errorFramesToSkip:r,_opts:a}},K=function(e){return!("string"!=typeof e.name&&"string"!=typeof e.errorClass||"string"!=typeof e.message&&"string"!=typeof e.errorMessage)},Q=V,Z={init:function(t){var n=0;t.config.beforeSend.push(function(e){if(n>=t.config.maxEvents)return e.ignore();n++}),t.refresh=function(){n=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"(number) maxEvents must be a positive integer ≤100",validate:function(e){return h(e)&&e<100}}}},X={releaseStage:{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"},message:"(string) releaseStage should be set",validate:function(e){return"string"==typeof e&&e.length}}},J=e,ee={init:function(a){J(te,function(i){var r=console[i];console[i]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.leaveBreadcrumb("Console output",{severity:/^group/.test(i)?"log":i,message:J(t,function(e){var t=String(e);if("[object Object]"!==t)return t;try{t=JSON.stringify(e,null,2)}catch(e){}return t}).join("\n")},"log"),r.apply(console,t)},console[i]._restore=function(){console[i]=r}})},destroy:function(){return te.forEach(function(e){"function"==typeof console[e]._restore&&console[e]._restore()})},configSchema:{consoleBreadcrumbsEnabled:{defaultValue:function(){},validate:function(e){return!0===e||!1===e||void 0===e},message:"(boolean) consoleBreadcrumbsEnabled should be true or false"}}},te=r(["log","debug","info","warn","error"],function(e){return"undefined"!=typeof console&&"function"==typeof console[e]}),ne={init:function(e){e.config.beforeSend.push(function(e){e.context||(e.context=window.location.pathname)})}},ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},re=u,ae={init:function(e){e.config.beforeSend.push(function(e){e.device=ie({time:re(),locale:navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage||navigator.language,userAgent:navigator.userAgent},e.device)})}},oe=i,se={init:function(e){function s(){return document.documentElement.outerHTML}var l="",c=!1;l=s(),document.onreadystatechange=function(){"interactive"===document.readyState&&(l=s(),c=!0)},e.config.beforeSend.push(function(e){var i=e.stacktrace[0];if(!i||!i.file||!i.lineNumber)return i;if(i.file.replace(/#.*$/)!==window.location.href.replace(/#.*$/))return i;c&&l||(l=s());var t=["\x3c!-- DOCUMENT START --\x3e"].concat(l.split("\n")),n=le(t,i.lineNumber-1),r=n.script,a=n.start,o=oe(r,function(e,t,n){return 10<Math.abs(a+n+1-i.lineNumber)||(e[""+(a+n+1)]=t),e},{});i.code=o,e.updateMetaData("script",{content:r.join("\n")})})}},le=function(e,t){for(var n=t;n<e.length&&!/<\/script>/.test(e[n]);)n++;for(var i=n;0<n&&!/<script.*>/.test(e[n]);)n--;var r=n,a=e.slice(r,i+1);return a[0]=a[0].replace(/^.*<script.*>/,""),a[a.length-1]=a[a.length-1].replace(/<\/script>.*$/,""),{script:a,start:r}},ce={init:function(i){"addEventListener"in window&&window.addEventListener("click",function(e){var t=void 0,n=void 0;try{t=ue(e.target),n=function e(t){var n=[t.tagName];t.id&&n.push("#"+t.id);t.className&&t.className.length&&n.push("."+t.className.split(" ").join("."));if(!document.querySelectorAll||!Array.prototype.indexOf)return n.join("");try{if(1===document.querySelectorAll(n.join("")).length)return n.join("")}catch(e){return n.join("")}if(1<t.parentNode.childNodes.length){var i=Array.prototype.indexOf.call(t.parentNode.childNodes,t)+1;n.push(":nth-child("+i+")")}if(1===document.querySelectorAll(n.join("")).length)return n.join("");if(t.parentNode)return e(t.parentNode)+" > "+n.join("");return n.join("")}(e.target)}catch(e){n=t="[hidden]",i._logger.log("Cross domain error when tracking click event. See https://docs.bugsnag.com/platforms/browsers/faq/#3-cross-origin-script-errors")}i.leaveBreadcrumb("UI click",{targetText:t,targetSelector:n},"user")},!0)},configSchema:{interactionBreadcrumbsEnabled:{defaultValue:function(){},validate:function(e){return!0===e||!1===e||void 0===e},message:"(boolean) interactionBreadcrumbsEnabled should be true or false"}}},ue=function(e){var t=e.textContent||e.innerText||"";return t||"submit"!==e.type&&"button"!==e.type||(t=e.value),function(e,t){return e&&e.length<=t?e:e.slice(0,t-"(...)".length)+"(...)"}(t=t.replace(/^\s+|\s+$/g,""),140)};function de(e){var t=L(e);if(1e6<t.length&&(delete e.events[0].metaData,e.events[0].metaData={notifier:"WARNING!\nThe serialized payload was "+t.length/1e6+"MB. The limit is 1MB.\nreport.metaData was stripped to make the payload of a deliverable size."},1e6<(t=L(e)).length))throw new Error("payload exceeded 1MB limit");return t}var fe,pe={init:function(n){if("addEventListener"in window){function e(e){return function(){return n.leaveBreadcrumb(e,{},"navigation")}}window.addEventListener("pagehide",e("Page hidden"),!0),window.addEventListener("pageshow",e("Page shown"),!0),window.addEventListener("load",e("Page loaded"),!0),window.document.addEventListener("DOMContentLoaded",e("DOMContentLoaded"),!0),window.addEventListener("load",function(){return window.addEventListener("popstate",e("Navigated back"),!0)}),window.addEventListener("hashchange",function(e){var t=e.oldURL?{from:he(e.oldURL),to:he(e.newURL),state:window.history.state}:{to:he(window.location.href)};n.leaveBreadcrumb("Hash changed",t,"navigation")},!0),window.history.replaceState&&me(n,window.history,"replaceState"),window.history.pushState&&me(n,window.history,"pushState"),n.leaveBreadcrumb("Bugsnag loaded",{},"navigation")}},destroy:function(){window.history.replaceState._restore(),window.history.pushState._restore()},configSchema:{navigationBreadcrumbsEnabled:{defaultValue:function(){},validate:function(e){return!0===e||!1===e||void 0===e},message:"(boolean) navigationBreadcrumbsEnabled should be true or false"}}},he=function(e){var t=document.createElement("A");return t.href=e,""+t.pathname+t.search+t.hash},me=function(i,r,a){var o=r[a];r[a]=function(e,t,n){i.leaveBreadcrumb("History "+a,function(e,t,n){var i=he(window.location.href);return{title:t,state:e,prevState:window.history.state,to:n||i,from:i}}(e,t,n),"navigation"),"function"==typeof i.refresh&&i.refresh(),o.call(r,e,t,n)},r[a]._restore=function(){r[a]=o}},ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ve={init:function(e){e.config.beforeSend.push(function(e){e.request&&e.request.url||(e.request=ge({},e.request,{url:window.location.href}))})}},_e={init:function(a){"onunhandledrejection"in window&&window.addEventListener("unhandledrejection",function(e){var t=e.reason,n={severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},i=void 0;if(t&&w(t))i=new a.BugsnagReport(t.name,t.message,x.parse(t),n);else{var r=new Error("string"==typeof t?t:"Unhandled promise rejection");r.type="UnhandledRejection",(i=new a.BugsnagReport(r.type,r.message,x.parse(r),n)).updateMetaData("promise","rejection reason",t)}a.notify(i)})}},ye={init:function(c){var u=window.onerror;window.onerror=function(e,t,n,i,r){if(0===n&&/Script error\.?/.test(e))c._logger.warn("Ignoring cross-domain or eval script error. See https://docs.bugsnag.com/platforms/browsers/faq/#3-cross-origin-script-errors");else{var a={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},o=void 0;if(r)o=new c.BugsnagReport(r.name,r.message,be(c.BugsnagReport.getStacktrace(r),t,n,i),a);else if("object"!=typeof e||null===e||t||n||i||r)(o=new c.BugsnagReport("window.onerror",e,be(c.BugsnagReport.getStacktrace(r,1),t,n,i),a)).updateMetaData("window onerror",{event:e});else{var s=e.type?"Event: "+e.type:"window.onerror",l=e.message||e.detail||"";(o=new c.BugsnagReport(s,l,c.BugsnagReport.getStacktrace(new Error,1).slice(1),a)).updateMetaData("window onerror",{event:e})}c.notify(o),"function"==typeof u&&u(e,t,n,i,r)}}}},be=function(e,t,n,i){var r=e[0];return r&&(r.fileName||r.setFileName(t),r.lineNumber||r.setLineNumber(n),r.columnNumber||(void 0!==i?r.setColumnNumber(i):window.event&&window.event.errorCharacter&&r.setColumnNumber(window.event&&window.event.errorCharacter))),e},Se={name:"XDomainRequest",sendReport:function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},r=e.endpoint,a=new window.XDomainRequest;a.onload=function(){i(null,a.responseText)},a.open("POST",r);try{a.send(de(n))}catch(e){t.error(e)}}},we={name:"XMLHttpRequest",sendReport:function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},r=e.endpoint,a=new window.XMLHttpRequest;a.onreadystatechange=function(){a.readyState===window.XMLHttpRequest.DONE&&i(null,a.responseText)},a.open("POST",r),a.setRequestHeader("content-type","application/json");try{a.send(de(n))}catch(e){t.error(e)}}},Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xe=e,Ee=i,Te=l,Ie=Ce({},v.schema,X),Me={"window onerror":ye,"unhandled rejection":_e,device:ae,context:ne,request:ve,throttle:Z,"console breadcrumbs":ee,"navigation breadcrumbs":pe,"interaction breadcrumbs":ce,"inline script content":se},De={XDomainRequest:Se,XMLHttpRequest:we};fe=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];"string"==typeof e&&(e={apiKey:e});var n=Ee([].concat(xe(Te(Me),function(e){return Me[e]})).concat(t),function(e,t){return t.configSchema?Ce({},e,t.configSchema):e},Ie),i=new Q({name:"Bugsnag JavaScript",version:"4.0.3",url:"https://github.com/bugsnag/bugsnag-js"},n);if(i.transport(window.XDomainRequest?De.XDomainRequest:De.XMLHttpRequest),"undefined"!=typeof console&&"function"==typeof console.debug){var r=ke();i.logger(r)}try{i.configure(e)}catch(e){throw i._logger.warn(e),e.errors&&xe(e.errors,i._logger.warn),e}return i.use(Me.device),i.use(Me.context),i.use(Me.request),i.use(Me["inline script content"]),i.use(Me.throttle),!1!==i.config.autoNotify&&(i.use(Me["window onerror"]),i.use(Me["unhandled rejection"])),Oe(i.config,"navigationBreadcrumbsEnabled")&&i.use(Me["navigation breadcrumbs"]),Oe(i.config,"interactionBreadcrumbsEnabled")&&i.use(Me["interaction breadcrumbs"]),Oe(i.config,"consoleBreadcrumbsEnabled",!1)&&i.use(Me["console breadcrumbs"]),xe(t,function(e){return i.use(e)}),i};var ke=function(){var n={},i=console.log;return xe(["debug","info","warn","error"],function(e){var t=console[e];n[e]="function"==typeof t?t.bind(console,"[bugsnag]"):i.bind(console,"[bugsnag]")}),n},Oe=function(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return"boolean"==typeof e[t]?e[t]:e.autoBreadcrumbs&&(n||!/^dev(elopment)?$/.test(e.releaseStage))};return fe.default=fe}),
/**
 * Copyright 2016 Google Inc. All Rights Reserved.
 *
 * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.
 *
 *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document
 *
 */
function(m,g){"use strict";if("IntersectionObserver"in m&&"IntersectionObserverEntry"in m&&"intersectionRatio"in m.IntersectionObserverEntry.prototype)"isIntersecting"in m.IntersectionObserverEntry.prototype||Object.defineProperty(m.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}});else{var t=[];e.prototype.THROTTLE_TIMEOUT=100,e.prototype.POLL_INTERVAL=null,e.prototype.USE_MUTATION_OBSERVER=!0,e.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},e.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},e.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},e.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},e.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},e.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},e.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(n(m,"resize",this._checkForIntersections,!0),n(g,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in m&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(g,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},e.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,i(m,"resize",this._checkForIntersections,!0),i(g,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},e.prototype._checkForIntersections=function(){var s=this._rootIsInDom(),l=s?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(e){var t=e.element,n=v(t),i=this._rootContainsTarget(t),r=e.entry,a=s&&i&&this._computeTargetAndRootIntersection(t,l),o=e.entry=new c({time:m.performance&&performance.now&&performance.now(),target:t,boundingClientRect:n,rootBounds:l,intersectionRect:a});r?s&&i?this._hasCrossedThreshold(r,o)&&this._queuedEntries.push(o):r&&r.isIntersecting&&this._queuedEntries.push(o):this._queuedEntries.push(o)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},e.prototype._computeTargetAndRootIntersection=function(e,t){if("none"!=m.getComputedStyle(e).display){for(var n,i,r,a,o,s,l,c,u=v(e),d=_(e),f=!1;!f;){var p=null,h=1==d.nodeType?m.getComputedStyle(d):{};if("none"==h.display)return;if(d==this.root||d==g?(f=!0,p=t):d!=g.body&&d!=g.documentElement&&"visible"!=h.overflow&&(p=v(d)),p&&(n=p,i=u,void 0,r=Math.max(n.top,i.top),a=Math.min(n.bottom,i.bottom),o=Math.max(n.left,i.left),s=Math.min(n.right,i.right),c=a-r,!(u=0<=(l=s-o)&&0<=c&&{top:r,bottom:a,left:o,right:s,width:l,height:c})))break;d=_(d)}return u}},e.prototype._getRootRect=function(){var e;if(this.root)e=v(this.root);else{var t=g.documentElement,n=g.body;e={top:0,left:0,right:t.clientWidth||n.clientWidth,width:t.clientWidth||n.clientWidth,bottom:t.clientHeight||n.clientHeight,height:t.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(e)},e.prototype._expandRectByRootMargin=function(n){var e=this._rootMarginValues.map(function(e,t){return"px"==e.unit?e.value:e.value*(t%2?n.width:n.height)/100}),t={top:n.top-e[0],right:n.right+e[1],bottom:n.bottom+e[2],left:n.left-e[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},e.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==i)for(var r=0;r<this.thresholds.length;r++){var a=this.thresholds[r];if(a==n||a==i||a<n!=a<i)return!0}},e.prototype._rootIsInDom=function(){return!this.root||r(g,this.root)},e.prototype._rootContainsTarget=function(e){return r(this.root||g,e)},e.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},e.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},m.IntersectionObserver=e,m.IntersectionObserverEntry=c}function c(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,i=this.intersectionRect,r=i.width*i.height;this.intersectionRatio=n?Number((r/n).toFixed(4)):this.isIntersecting?1:0}function e(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=function(e,t){var n=null;return function(){n=n||setTimeout(function(){e(),n=null},t)}}(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function n(e,t,n,i){"function"==typeof e.addEventListener?e.addEventListener(t,n,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function i(e,t,n,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function v(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function r(e,t){for(var n=t;n;){if(n==e)return!0;n=_(n)}return!1}function _(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t&&t.assignedSlot?t.assignedSlot.parentNode:t}}(window,document),
/*! lozad.js - v1.15.0 - 2020-05-23
* https://github.com/ApoorvSaxena/lozad.js
* Copyright (c) 2020 Apoorv Saxena; Licensed MIT */
Mk=fp,Nk=function(){"use strict";var l="undefined"!=typeof document&&document.documentMode,c={rootMargin:"0px",threshold:0,load:function(e){if("picture"===e.nodeName.toLowerCase()){var t=document.createElement("img");l&&e.getAttribute("data-iesrc")&&(t.src=e.getAttribute("data-iesrc")),e.getAttribute("data-alt")&&(t.alt=e.getAttribute("data-alt")),e.append(t)}if("video"===e.nodeName.toLowerCase()&&!e.getAttribute("data-src")&&e.children){for(var n=e.children,i=void 0,r=0;r<=n.length-1;r++)(i=n[r].getAttribute("data-src"))&&(n[r].src=i);e.load()}e.getAttribute("data-poster")&&(e.poster=e.getAttribute("data-poster")),e.getAttribute("data-src")&&(e.src=e.getAttribute("data-src")),e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset"));var a=",";if(e.getAttribute("data-background-delimiter")&&(a=e.getAttribute("data-background-delimiter")),e.getAttribute("data-background-image"))e.style.backgroundImage="url('"+e.getAttribute("data-background-image").split(a).join("'),url('")+"')";else if(e.getAttribute("data-background-image-set")){var o=e.getAttribute("data-background-image-set").split(a),s=o[0].substr(0,o[0].indexOf(" "))||o[0];s=-1===s.indexOf("url(")?"url("+s+")":s,1===o.length?e.style.backgroundImage=s:e.setAttribute("style",(e.getAttribute("style")||"")+"background-image: "+s+"; background-image: -webkit-image-set("+o+"); background-image: image-set("+o+")")}e.getAttribute("data-toggle-class")&&e.classList.toggle(e.getAttribute("data-toggle-class"))},loaded:function(){}};function u(e){e.setAttribute("data-loaded",!0)}function d(e){return"true"===e.getAttribute("data-loaded")}return function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=Object.assign({},c,e),i=t.root,r=t.rootMargin,a=t.threshold,o=t.load,s=t.loaded,l=void 0;return"undefined"!=typeof window&&window.IntersectionObserver&&(l=new IntersectionObserver(function(n,i){return function(e,t){e.forEach(function(e){(0<e.intersectionRatio||e.isIntersecting)&&(t.unobserve(e.target),d(e.target)||(n(e.target),u(e.target),i(e.target)))})}}(o,s),{root:i,rootMargin:r,threshold:a})),{observe:function(){for(var e=function(e,t){var n=1<arguments.length&&void 0!==t?t:document;return e instanceof Element?[e]:e instanceof NodeList?e:n.querySelectorAll(e)}(n,i),t=0;t<e.length;t++)d(e[t])||(l?l.observe(e[t]):(o(e[t]),u(e[t]),s(e[t])))},triggerLoad:function(e){d(e)||(o(e),u(e),s(e))},observer:l}}},"object"==typeof exports&&"undefined"!=typeof module?module.exports=Nk():"function"==typeof define&&define.amd?define(Nk):Mk.lozad=Nk(),
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
function(){function e(s){return function(e,t,n,i){t=y(t,i,4);var r=!T(e)&&_.keys(e),a=(r||e).length,o=0<s?0:a-1;return arguments.length<3&&(n=e[r?r[o]:o],o+=s),function(e,t,n,i,r,a){for(;0<=r&&r<a;r+=s){var o=i?i[r]:r;n=t(n,e[o],o,e)}return n}(e,t,n,r,o,a)}}function t(a){return function(e,t,n){t=b(t,n);for(var i=E(e),r=0<a?0:i-1;0<=r&&r<i;r+=a)if(t(e[r],r,e))return r;return-1}}function n(a,o,s){return function(e,t,n){var i=0,r=E(e);if("number"==typeof n)0<a?i=0<=n?n:Math.max(n+r,i):r=0<=n?Math.min(n+1,r):n+r+1;else if(s&&n&&r)return e[n=s(e,t)]===t?n:-1;if(t!=t)return 0<=(n=o(d.call(e,i,r),_.isNaN))?n+i:-1;for(n=0<a?i:r-1;0<=n&&n<r;n+=a)if(e[n]===t)return n;return-1}}function i(e,t){var n=O.length,i=e.constructor,r=_.isFunction(i)&&i.prototype||l,a="constructor";for(_.has(e,a)&&!_.contains(t,a)&&t.push(a);n--;)(a=O[n])in e&&e[a]!==r[a]&&!_.contains(t,a)&&t.push(a)}function r(){}var a=this,o=a._,s=Array.prototype,l=Object.prototype,c=Function.prototype,u=s.push,d=s.slice,f=l.toString,p=l.hasOwnProperty,h=Array.isArray,m=Object.keys,g=c.bind,v=Object.create,_=function(e){return e instanceof _?e:this instanceof _?void(this._wrapped=e):new _(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):a._=_,_.VERSION="1.8.3";var y=function(r,a,e){if(void 0===a)return r;switch(null==e?3:e){case 1:return function(e){return r.call(a,e)};case 2:return function(e,t){return r.call(a,e,t)};case 3:return function(e,t,n){return r.call(a,e,t,n)};case 4:return function(e,t,n,i){return r.call(a,e,t,n,i)}}return function(){return r.apply(a,arguments)}},b=function(e,t,n){return null==e?_.identity:_.isFunction(e)?y(e,t,n):_.isObject(e)?_.matcher(e):_.property(e)};_.iteratee=function(e,t){return b(e,t,1/0)};function S(l,c){return function(e){var t=arguments.length;if(t<2||null==e)return e;for(var n=1;n<t;n++)for(var i=arguments[n],r=l(i),a=r.length,o=0;o<a;o++){var s=r[o];c&&void 0!==e[s]||(e[s]=i[s])}return e}}function w(e){if(!_.isObject(e))return{};if(v)return v(e);r.prototype=e;var t=new r;return r.prototype=null,t}function C(t){return function(e){return null==e?void 0:e[t]}}var x=Math.pow(2,53)-1,E=C("length"),T=function(e){var t=E(e);return"number"==typeof t&&0<=t&&t<=x};_.each=_.forEach=function(e,t,n){var i,r;if(t=y(t,n),T(e))for(i=0,r=e.length;i<r;i++)t(e[i],i,e);else{var a=_.keys(e);for(i=0,r=a.length;i<r;i++)t(e[a[i]],a[i],e)}return e},_.map=_.collect=function(e,t,n){t=b(t,n);for(var i=!T(e)&&_.keys(e),r=(i||e).length,a=Array(r),o=0;o<r;o++){var s=i?i[o]:o;a[o]=t(e[s],s,e)}return a},_.reduce=_.foldl=_.inject=e(1),_.reduceRight=_.foldr=e(-1),_.find=_.detect=function(e,t,n){var i;return void 0!==(i=T(e)?_.findIndex(e,t,n):_.findKey(e,t,n))&&-1!==i?e[i]:void 0},_.filter=_.select=function(e,i,t){var r=[];return i=b(i,t),_.each(e,function(e,t,n){i(e,t,n)&&r.push(e)}),r},_.reject=function(e,t,n){return _.filter(e,_.negate(b(t)),n)},_.every=_.all=function(e,t,n){t=b(t,n);for(var i=!T(e)&&_.keys(e),r=(i||e).length,a=0;a<r;a++){var o=i?i[a]:a;if(!t(e[o],o,e))return!1}return!0},_.some=_.any=function(e,t,n){t=b(t,n);for(var i=!T(e)&&_.keys(e),r=(i||e).length,a=0;a<r;a++){var o=i?i[a]:a;if(t(e[o],o,e))return!0}return!1},_.contains=_.includes=_.include=function(e,t,n,i){return T(e)||(e=_.values(e)),"number"==typeof n&&!i||(n=0),0<=_.indexOf(e,t,n)},_.invoke=function(e,n){var i=d.call(arguments,2),r=_.isFunction(n);return _.map(e,function(e){var t=r?n:e[n];return null==t?t:t.apply(e,i)})},_.pluck=function(e,t){return _.map(e,_.property(t))},_.where=function(e,t){return _.filter(e,_.matcher(t))},_.findWhere=function(e,t){return _.find(e,_.matcher(t))},_.max=function(e,i,t){var n,r,a=-1/0,o=-1/0;if(null==i&&null!=e)for(var s=0,l=(e=T(e)?e:_.values(e)).length;s<l;s++)n=e[s],a<n&&(a=n);else i=b(i,t),_.each(e,function(e,t,n){r=i(e,t,n),(o<r||r===-1/0&&a===-1/0)&&(a=e,o=r)});return a},_.min=function(e,i,t){var n,r,a=1/0,o=1/0;if(null==i&&null!=e)for(var s=0,l=(e=T(e)?e:_.values(e)).length;s<l;s++)(n=e[s])<a&&(a=n);else i=b(i,t),_.each(e,function(e,t,n){((r=i(e,t,n))<o||1/0===r&&1/0===a)&&(a=e,o=r)});return a},_.shuffle=function(e){for(var t,n=T(e)?e:_.values(e),i=n.length,r=Array(i),a=0;a<i;a++)(t=_.random(0,a))!==a&&(r[a]=r[t]),r[t]=n[a];return r},_.sample=function(e,t,n){return null==t||n?(T(e)||(e=_.values(e)),e[_.random(e.length-1)]):_.shuffle(e).slice(0,Math.max(0,t))},_.sortBy=function(e,i,t){return i=b(i,t),_.pluck(_.map(e,function(e,t,n){return{value:e,index:t,criteria:i(e,t,n)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(i<n||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index}),"value")};function I(o){return function(i,r,e){var a={};return r=b(r,e),_.each(i,function(e,t){var n=r(e,t,i);o(a,e,n)}),a}}_.groupBy=I(function(e,t,n){_.has(e,n)?e[n].push(t):e[n]=[t]}),_.indexBy=I(function(e,t,n){e[n]=t}),_.countBy=I(function(e,t,n){_.has(e,n)?e[n]++:e[n]=1}),_.toArray=function(e){return e?_.isArray(e)?d.call(e):T(e)?_.map(e,_.identity):_.values(e):[]},_.size=function(e){return null==e?0:T(e)?e.length:_.keys(e).length},_.partition=function(e,i,t){i=b(i,t);var r=[],a=[];return _.each(e,function(e,t,n){(i(e,t,n)?r:a).push(e)}),[r,a]},_.first=_.head=_.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:_.initial(e,e.length-t)},_.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},_.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:_.rest(e,Math.max(0,e.length-t))},_.rest=_.tail=_.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},_.compact=function(e){return _.filter(e,_.identity)};var M=function(e,t,n,i){for(var r=[],a=0,o=i||0,s=E(e);o<s;o++){var l=e[o];if(T(l)&&(_.isArray(l)||_.isArguments(l))){t||(l=M(l,t,n));var c=0,u=l.length;for(r.length+=u;c<u;)r[a++]=l[c++]}else n||(r[a++]=l)}return r};_.flatten=function(e,t){return M(e,t,!1)},_.without=function(e){return _.difference(e,d.call(arguments,1))},_.uniq=_.unique=function(e,t,n,i){_.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=b(n,i));for(var r=[],a=[],o=0,s=E(e);o<s;o++){var l=e[o],c=n?n(l,o,e):l;t?(o&&a===c||r.push(l),a=c):n?_.contains(a,c)||(a.push(c),r.push(l)):_.contains(r,l)||r.push(l)}return r},_.union=function(){return _.uniq(M(arguments,!0,!0))},_.intersection=function(e){for(var t=[],n=arguments.length,i=0,r=E(e);i<r;i++){var a=e[i];if(!_.contains(t,a)){for(var o=1;o<n&&_.contains(arguments[o],a);o++);o===n&&t.push(a)}}return t},_.difference=function(e){var t=M(arguments,!0,!0,1);return _.filter(e,function(e){return!_.contains(t,e)})},_.zip=function(){return _.unzip(arguments)},_.unzip=function(e){for(var t=e&&_.max(e,E).length||0,n=Array(t),i=0;i<t;i++)n[i]=_.pluck(e,i);return n},_.object=function(e,t){for(var n={},i=0,r=E(e);i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},_.findIndex=t(1),_.findLastIndex=t(-1),_.sortedIndex=function(e,t,n,i){for(var r=(n=b(n,i,1))(t),a=0,o=E(e);a<o;){var s=Math.floor((a+o)/2);n(e[s])<r?a=s+1:o=s}return a},_.indexOf=n(1,_.findIndex,_.sortedIndex),_.lastIndexOf=n(-1,_.findLastIndex),_.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),a=0;a<i;a++,e+=n)r[a]=e;return r};function D(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var a=w(e.prototype),o=e.apply(a,r);return _.isObject(o)?o:a}_.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,d.call(arguments,1));if(!_.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),i=function(){return D(e,i,t,this,n.concat(d.call(arguments)))};return i},_.partial=function(r){var a=d.call(arguments,1),o=function(){for(var e=0,t=a.length,n=Array(t),i=0;i<t;i++)n[i]=a[i]===_?arguments[e++]:a[i];for(;e<arguments.length;)n.push(arguments[e++]);return D(r,o,this,this,n)};return o},_.bindAll=function(e){var t,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(t=1;t<i;t++)e[n=arguments[t]]=_.bind(e[n],e);return e},_.memoize=function(i,r){var a=function(e){var t=a.cache,n=""+(r?r.apply(this,arguments):e);return _.has(t,n)||(t[n]=i.apply(this,arguments)),t[n]};return a.cache={},a},_.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},_.defer=_.partial(_.delay,_,1),_.throttle=function(n,i,r){var a,o,s,l=null,c=0;r=r||{};function u(){c=!1===r.leading?0:_.now(),l=null,s=n.apply(a,o),l||(a=o=null)}return function(){var e=_.now();c||!1!==r.leading||(c=e);var t=i-(e-c);return a=this,o=arguments,t<=0||i<t?(l&&(clearTimeout(l),l=null),c=e,s=n.apply(a,o),l||(a=o=null)):l||!1===r.trailing||(l=setTimeout(u,t)),s}},_.debounce=function(t,n,i){var r,a,o,s,l,c=function(){var e=_.now()-s;e<n&&0<=e?r=setTimeout(c,n-e):(r=null,i||(l=t.apply(o,a),r||(o=a=null)))};return function(){o=this,a=arguments,s=_.now();var e=i&&!r;return r=r||setTimeout(c,n),e&&(l=t.apply(o,a),o=a=null),l}},_.wrap=function(e,t){return _.partial(t,e)},_.negate=function(e){return function(){return!e.apply(this,arguments)}},_.compose=function(){var n=arguments,i=n.length-1;return function(){for(var e=i,t=n[i].apply(this,arguments);e--;)t=n[e].call(this,t);return t}},_.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},_.before=function(e,t){var n;return function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},_.once=_.partial(_.before,2);var k=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];_.keys=function(e){if(!_.isObject(e))return[];if(m)return m(e);var t=[];for(var n in e)_.has(e,n)&&t.push(n);return k&&i(e,t),t},_.allKeys=function(e){if(!_.isObject(e))return[];var t=[];for(var n in e)t.push(n);return k&&i(e,t),t},_.values=function(e){for(var t=_.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i},_.mapObject=function(e,t,n){t=b(t,n);for(var i,r=_.keys(e),a=r.length,o={},s=0;s<a;s++)o[i=r[s]]=t(e[i],i,e);return o},_.pairs=function(e){for(var t=_.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i},_.invert=function(e){for(var t={},n=_.keys(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t},_.functions=_.methods=function(e){var t=[];for(var n in e)_.isFunction(e[n])&&t.push(n);return t.sort()},_.extend=S(_.allKeys),_.extendOwn=_.assign=S(_.keys),_.findKey=function(e,t,n){t=b(t,n);for(var i,r=_.keys(e),a=0,o=r.length;a<o;a++)if(t(e[i=r[a]],i,e))return i},_.pick=function(e,t,n){var i,r,a={},o=e;if(null==o)return a;_.isFunction(t)?(r=_.allKeys(o),i=y(t,n)):(r=M(arguments,!1,!1,1),i=function(e,t,n){return t in n},o=Object(o));for(var s=0,l=r.length;s<l;s++){var c=r[s],u=o[c];i(u,c,o)&&(a[c]=u)}return a},_.omit=function(e,t,n){if(_.isFunction(t))t=_.negate(t);else{var i=_.map(M(arguments,!1,!1,1),String);t=function(e,t){return!_.contains(i,t)}}return _.pick(e,t,n)},_.defaults=S(_.allKeys,!0),_.create=function(e,t){var n=w(e);return t&&_.extendOwn(n,t),n},_.clone=function(e){return _.isObject(e)?_.isArray(e)?e.slice():_.extend({},e):e},_.tap=function(e,t){return t(e),e},_.isMatch=function(e,t){var n=_.keys(t),i=n.length;if(null==e)return!i;for(var r=Object(e),a=0;a<i;a++){var o=n[a];if(t[o]!==r[o]||!(o in r))return!1}return!0};var U=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof _&&(e=e._wrapped),t instanceof _&&(t=t._wrapped);var r=f.call(e);if(r!==f.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var a="[object Array]"===r;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(_.isFunction(o)&&o instanceof o&&_.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),a){if((l=e.length)!==t.length)return!1;for(;l--;)if(!U(e[l],t[l],n,i))return!1}else{var c,u=_.keys(e);if(l=u.length,_.keys(t).length!==l)return!1;for(;l--;)if(c=u[l],!_.has(t,c)||!U(e[c],t[c],n,i))return!1}return n.pop(),i.pop(),!0};_.isEqual=function(e,t){return U(e,t)},_.isEmpty=function(e){return null==e||(T(e)&&(_.isArray(e)||_.isString(e)||_.isArguments(e))?0===e.length:0===_.keys(e).length)},_.isElement=function(e){return!(!e||1!==e.nodeType)},_.isArray=h||function(e){return"[object Array]"===f.call(e)},_.isObject=function(e){var t=typeof e;return"function"==t||"object"==t&&!!e},_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){_["is"+t]=function(e){return f.call(e)==="[object "+t+"]"}}),_.isArguments(arguments)||(_.isArguments=function(e){return _.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(_.isFunction=function(e){return"function"==typeof e||!1}),_.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},_.isNaN=function(e){return _.isNumber(e)&&e!==+e},_.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===f.call(e)},_.isNull=function(e){return null===e},_.isUndefined=function(e){return void 0===e},_.has=function(e,t){return null!=e&&p.call(e,t)},_.noConflict=function(){return a._=o,this},_.identity=function(e){return e},_.constant=function(e){return function(){return e}},_.noop=function(){},_.property=C,_.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},_.matcher=_.matches=function(t){return t=_.extendOwn({},t),function(e){return _.isMatch(e,t)}},_.times=function(e,t,n){var i=Array(Math.max(0,e));t=y(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i},_.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},_.now=Date.now||function(){return(new Date).getTime()};function A(t){function n(e){return t[e]}var e="(?:"+_.keys(t).join("|")+")",i=RegExp(e),r=RegExp(e,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,n):e}}var P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$=_.invert(P);_.escape=A(P),_.unescape=A($),_.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),_.isFunction(i)?i.call(e):i};var L=0;_.uniqueId=function(e){var t=++L+"";return e?e+t:t},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};function j(e){return"\\"+N[e]}var R=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\u2028|\u2029/g;_.template=function(a,e,t){!e&&t&&(e=t),e=_.defaults({},e,_.templateSettings);var n=RegExp([(e.escape||R).source,(e.interpolate||R).source,(e.evaluate||R).source].join("|")+"|$","g"),o=0,s="__p+='";a.replace(n,function(e,t,n,i,r){return s+=a.slice(o,r).replace(F,j),o=r+e.length,t?s+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var i=new Function(e.variable||"obj","_",s)}catch(e){throw e.source=s,e}function r(e){return i.call(this,e,_)}var l=e.variable||"obj";return r.source="function("+l+"){\n"+s+"}",r},_.chain=function(e){var t=_(e);return t._chain=!0,t};function q(e,t){return e._chain?_(t).chain():t}_.mixin=function(n){_.each(_.functions(n),function(e){var t=_[e]=n[e];_.prototype[e]=function(){var e=[this._wrapped];return u.apply(e,arguments),q(this,t.apply(_,e))}})},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=s[t];_.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],q(this,e)}}),_.each(["concat","join","slice"],function(e){var t=s[e];_.prototype[e]=function(){return q(this,t.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}.call(this),
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";function m(e){return null!=e&&e===e.window}var t=[],x=C.document,i=Object.getPrototypeOf,s=t.slice,g=t.concat,l=t.push,r=t.indexOf,n={},a=n.toString,v=n.hasOwnProperty,o=v.toString,c=o.call(Object),_={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},u={type:!0,src:!0,noModule:!0};function b(e,t,n){var i,r=(t=t||x).createElement("script");if(r.text=e,n)for(i in u)n[i]&&(r[i]=n[i]);t.head.appendChild(r).parentNode.removeChild(r)}function S(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[a.call(e)]||"object":typeof e}var E=function(e,t){return new E.fn.init(e,t)},d=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function f(e){var t=!!e&&"length"in e&&e.length,n=S(e);return!y(e)&&!m(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}E.fn=E.prototype={jquery:"3.3.1",constructor:E,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return E.each(this,e)},map:function(n){return this.pushStack(E.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:t.sort,splice:t.splice},E.extend=E.fn.extend=function(){var e,t,n,i,r,a,o=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[s]||{},s++),"object"==typeof o||y(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=o[t],o!==(i=e[t])&&(c&&i&&(E.isPlainObject(i)||(r=Array.isArray(i)))?(a=r?(r=!1,n&&Array.isArray(n)?n:[]):n&&E.isPlainObject(n)?n:{},o[t]=E.extend(c,a,i)):void 0!==i&&(o[t]=i));return o},E.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==a.call(e))&&(!(t=i(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&o.call(n)===c)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){b(e)},each:function(e,t){var n,i=0;if(f(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(d,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(f(Object(e))?E.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:r.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,a=e.length,o=!n;r<a;r++)!t(e[r],r)!=o&&i.push(e[r]);return i},map:function(e,t,n){var i,r,a=0,o=[];if(f(e))for(i=e.length;a<i;a++)null!=(r=t(e[a],a,n))&&o.push(r);else for(a in e)null!=(r=t(e[a],a,n))&&o.push(r);return g.apply([],o)},guid:1,support:_}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=t[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var p=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(n){function d(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(65536+i):String.fromCharCode(i>>10|55296,1023&i|56320)}function r(){w()}var e,p,b,a,o,h,f,m,S,l,c,w,C,s,x,g,u,v,_,E="sizzle"+1*new Date,y=n.document,T=0,i=0,I=oe(),M=oe(),D=oe(),k=function(e,t){return e===t&&(c=!0),0},O={}.hasOwnProperty,t=[],U=t.pop,A=t.push,P=t.push,$=t.slice,L=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+R+"*("+N+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+R+"*\\]",q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",H=new RegExp(R+"+","g"),z=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),B=new RegExp("^"+R+"*,"+R+"*"),W=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),V=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),G=new RegExp(q),Y=new RegExp("^"+N+"$"),K={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=_e(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{P.apply(t=$.call(y.childNodes),y.childNodes),t[y.childNodes.length].nodeType}catch(e){P={apply:t.length?function(e,t){A.apply(e,$.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ae(e,t,n,i){var r,a,o,s,l,c,u,d=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!i&&((t?t.ownerDocument||t:y)!==C&&w(t),t=t||C,x)){if(11!==f&&(l=J.exec(e)))if(r=l[1]){if(9===f){if(!(o=t.getElementById(r)))return n;if(o.id===r)return n.push(o),n}else if(d&&(o=d.getElementById(r))&&_(t,o)&&o.id===r)return n.push(o),n}else{if(l[2])return P.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&p.getElementsByClassName&&t.getElementsByClassName)return P.apply(n,t.getElementsByClassName(r)),n}if(p.qsa&&!D[e+" "]&&(!g||!g.test(e))){if(1!==f)d=t,u=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(ne,ie):t.setAttribute("id",s=E),a=(c=h(e)).length;a--;)c[a]="#"+s+" "+ve(c[a]);u=c.join(","),d=ee.test(e)&&me(t.parentNode)||t}if(u)try{return P.apply(n,d.querySelectorAll(u)),n}catch(e){}finally{s===E&&t.removeAttribute("id")}}}return m(e.replace(z,"$1"),t,n,i)}function oe(){var i=[];return function e(t,n){return i.push(t+" ")>b.cacheLength&&delete e[i.shift()],e[t+" "]=n}}function se(e){return e[E]=!0,e}function le(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var n=e.split("|"),i=n.length;i--;)b.attrHandle[n[i]]=t}function ue(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function fe(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function pe(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&re(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function he(o){return se(function(a){return a=+a,se(function(e,t){for(var n,i=o([],e.length,a),r=i.length;r--;)e[n=i[r]]&&(e[n]=!(t[n]=e[n]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in p=ae.support={},o=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},w=ae.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:y;return i!==C&&9===i.nodeType&&i.documentElement&&(s=(C=i).documentElement,x=!o(C),y!==C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",r,!1):n.attachEvent&&n.attachEvent("onunload",r)),p.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),p.getElementsByTagName=le(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),p.getElementsByClassName=X.test(C.getElementsByClassName),p.getById=le(function(e){return s.appendChild(e).id=E,!C.getElementsByName||!C.getElementsByName(E).length}),p.getById?(b.filter.ID=function(e){var t=e.replace(te,d);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&x){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,d);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&x){var n,i,r,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(r=t.getElementsByName(e),i=0;a=r[i++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),b.find.TAG=p.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):p.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,a=t.getElementsByTagName(e);if("*"!==e)return a;for(;n=a[r++];)1===n.nodeType&&i.push(n);return i},b.find.CLASS=p.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&x)return t.getElementsByClassName(e)},u=[],g=[],(p.qsa=X.test(C.querySelectorAll))&&(le(function(e){s.appendChild(e).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+R+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+R+"*(?:value|"+j+")"),e.querySelectorAll("[id~="+E+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+E+"+*").length||g.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+R+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),s.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(p.matchesSelector=X.test(v=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&le(function(e){p.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),u.push("!=",q)}),g=g.length&&new RegExp(g.join("|")),u=u.length&&new RegExp(u.join("|")),t=X.test(s.compareDocumentPosition),_=t||X.test(s.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!p.sortDetached&&t.compareDocumentPosition(e)===n?e===C||e.ownerDocument===y&&_(y,e)?-1:t===C||t.ownerDocument===y&&_(y,t)?1:l?L(l,e)-L(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,i=0,r=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!r||!a)return e===C?-1:t===C?1:r?-1:a?1:l?L(l,e)-L(l,t):0;if(r===a)return ue(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[i]===s[i];)i++;return i?ue(o[i],s[i]):o[i]===y?-1:s[i]===y?1:0}),C},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==C&&w(e),t=t.replace(V,"='$1']"),p.matchesSelector&&x&&!D[t+" "]&&(!u||!u.test(t))&&(!g||!g.test(t)))try{var n=v.call(e,t);if(n||p.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<ae(t,C,null,[e]).length},ae.contains=function(e,t){return(e.ownerDocument||e)!==C&&w(e),_(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==C&&w(e);var n=b.attrHandle[t.toLowerCase()],i=n&&O.call(b.attrHandle,t.toLowerCase())?n(e,t,!x):void 0;return void 0!==i?i:p.attributes||!x?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},ae.escape=function(e){return(e+"").replace(ne,ie)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],i=0,r=0;if(c=!p.detectDuplicates,l=!p.sortStable&&e.slice(0),e.sort(k),c){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return l=null,e},a=ae.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=a(t);return n},(b=ae.selectors={cacheLength:50,createPseudo:se,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,d),e[3]=(e[3]||e[4]||e[5]||"").replace(te,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=I[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&I(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(e){var t=ae.attr(e,n);return null==t?"!="===i:!i||(t+="","="===i?t===r:"!="===i?t!==r:"^="===i?r&&0===t.indexOf(r):"*="===i?r&&-1<t.indexOf(r):"$="===i?r&&t.slice(-r.length)===r:"~="===i?-1<(" "+t.replace(H," ")+" ").indexOf(r):"|="===i&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(h,e,t,m,g){var v="nth"!==h.slice(0,3),_="last"!==h.slice(-4),y="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var i,r,a,o,s,l,c=v!=_?"nextSibling":"previousSibling",u=e.parentNode,d=y&&e.nodeName.toLowerCase(),f=!n&&!y,p=!1;if(u){if(v){for(;c;){for(o=e;o=o[c];)if(y?o.nodeName.toLowerCase()===d:1===o.nodeType)return!1;l=c="only"===h&&!l&&"nextSibling"}return!0}if(l=[_?u.firstChild:u.lastChild],_&&f){for(p=(s=(i=(r=(a=(o=u)[E]||(o[E]={}))[o.uniqueID]||(a[o.uniqueID]={}))[h]||[])[0]===T&&i[1])&&i[2],o=s&&u.childNodes[s];o=++s&&o&&o[c]||(p=s=0)||l.pop();)if(1===o.nodeType&&++p&&o===e){r[h]=[T,s,p];break}}else if(f&&(p=s=(i=(r=(a=(o=e)[E]||(o[E]={}))[o.uniqueID]||(a[o.uniqueID]={}))[h]||[])[0]===T&&i[1]),!1===p)for(;(o=++s&&o&&o[c]||(p=s=0)||l.pop())&&((y?o.nodeName.toLowerCase()!==d:1!==o.nodeType)||!++p||(f&&((r=(a=o[E]||(o[E]={}))[o.uniqueID]||(a[o.uniqueID]={}))[h]=[T,p]),o!==e)););return(p-=g)===m||p%m==0&&0<=p/m}}},PSEUDO:function(e,a){var t,o=b.pseudos[e]||b.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return o[E]?o(a):1<o.length?(t=[e,e,"",a],b.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,t){for(var n,i=o(e,a),r=i.length;r--;)e[n=L(e,i[r])]=!(t[n]=i[r])}):function(e){return o(e,0,t)}):o}},pseudos:{not:se(function(e){var i=[],r=[],s=f(e.replace(z,"$1"));return s[E]?se(function(e,t,n,i){for(var r,a=s(e,null,i,[]),o=e.length;o--;)(r=a[o])&&(e[o]=!(t[o]=r))}):function(e,t,n){return i[0]=e,s(i,null,n,r),i[0]=null,!r.pop()}}),has:se(function(t){return function(e){return 0<ae(t,e).length}}),contains:se(function(t){return t=t.replace(te,d),function(e){return-1<(e.textContent||e.innerText||a(e)).indexOf(t)}}),lang:se(function(n){return Y.test(n||"")||ae.error("unsupported lang: "+n),n=n.replace(te,d).toLowerCase(),function(e){var t;do{if(t=x?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===s},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:pe(!1),disabled:pe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var i=n<0?n+t:n;0<=--i;)e.push(i);return e}),gt:he(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=fe(e);function ge(){}function ve(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function _e(s,e,t){var l=e.dir,c=e.next,u=c||l,d=t&&"parentNode"===u,f=i++;return e.first?function(e,t,n){for(;e=e[l];)if(1===e.nodeType||d)return s(e,t,n);return!1}:function(e,t,n){var i,r,a,o=[T,f];if(n){for(;e=e[l];)if((1===e.nodeType||d)&&s(e,t,n))return!0}else for(;e=e[l];)if(1===e.nodeType||d)if(r=(a=e[E]||(e[E]={}))[e.uniqueID]||(a[e.uniqueID]={}),c&&c===e.nodeName.toLowerCase())e=e[l]||e;else{if((i=r[u])&&i[0]===T&&i[1]===f)return o[2]=i[2];if((r[u]=o)[2]=s(e,t,n))return!0}return!1}}function ye(r){return 1<r.length?function(e,t,n){for(var i=r.length;i--;)if(!r[i](e,t,n))return!1;return!0}:r[0]}function be(e,t,n,i,r){for(var a,o=[],s=0,l=e.length,c=null!=t;s<l;s++)(a=e[s])&&(n&&!n(a,i,r)||(o.push(a),c&&t.push(s)));return o}function Se(p,h,m,g,v,e){return g&&!g[E]&&(g=Se(g)),v&&!v[E]&&(v=Se(v,e)),se(function(e,t,n,i){var r,a,o,s=[],l=[],c=t.length,u=e||function(e,t,n){for(var i=0,r=t.length;i<r;i++)ae(e,t[i],n);return n}(h||"*",n.nodeType?[n]:n,[]),d=!p||!e&&h?u:be(u,s,p,n,i),f=m?v||(e?p:c||g)?[]:t:d;if(m&&m(d,f,n,i),g)for(r=be(f,l),g(r,[],n,i),a=r.length;a--;)(o=r[a])&&(f[l[a]]=!(d[l[a]]=o));if(e){if(v||p){if(v){for(r=[],a=f.length;a--;)(o=f[a])&&r.push(d[a]=o);v(null,f=[],r,i)}for(a=f.length;a--;)(o=f[a])&&-1<(r=v?L(e,o):s[a])&&(e[r]=!(t[r]=o))}}else f=be(f===t?f.splice(c,f.length):f),v?v(null,t,f,i):P.apply(t,f)})}function we(e){for(var r,t,n,i=e.length,a=b.relative[e[0].type],o=a||b.relative[" "],s=a?1:0,l=_e(function(e){return e===r},o,!0),c=_e(function(e){return-1<L(r,e)},o,!0),u=[function(e,t,n){var i=!a&&(n||t!==S)||((r=t).nodeType?l(e,t,n):c(e,t,n));return r=null,i}];s<i;s++)if(t=b.relative[e[s].type])u=[_e(ye(u),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[E]){for(n=++s;n<i&&!b.relative[e[n].type];n++);return Se(1<s&&ye(u),1<s&&ve(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(z,"$1"),t,s<n&&we(e.slice(s,n)),n<i&&we(e=e.slice(n)),n<i&&ve(e))}u.push(t)}return ye(u)}function Ce(g,v){function e(e,t,n,i,r){var a,o,s,l=0,c="0",u=e&&[],d=[],f=S,p=e||y&&b.find.TAG("*",r),h=T+=null==f?1:Math.random()||.1,m=p.length;for(r&&(S=t===C||t||r);c!==m&&null!=(a=p[c]);c++){if(y&&a){for(o=0,t||a.ownerDocument===C||(w(a),n=!x);s=g[o++];)if(s(a,t||C,n)){i.push(a);break}r&&(T=h)}_&&((a=!s&&a)&&l--,e&&u.push(a))}if(l+=c,_&&c!==l){for(o=0;s=v[o++];)s(u,d,t,n);if(e){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=U.call(i));d=be(d)}P.apply(i,d),r&&!e&&0<d.length&&1<l+v.length&&ae.uniqueSort(i)}return r&&(T=h,S=f),u}var _=0<v.length,y=0<g.length;return _?se(e):e}return ge.prototype=b.filters=b.pseudos,b.setFilters=new ge,h=ae.tokenize=function(e,t){var n,i,r,a,o,s,l,c=M[e+" "];if(c)return t?0:c.slice(0);for(o=e,s=[],l=b.preFilter;o;){for(a in n&&!(i=B.exec(o))||(i&&(o=o.slice(i[0].length)||o),s.push(r=[])),n=!1,(i=W.exec(o))&&(n=i.shift(),r.push({value:n,type:i[0].replace(z," ")}),o=o.slice(n.length)),b.filter)!(i=K[a].exec(o))||l[a]&&!(i=l[a](i))||(n=i.shift(),r.push({value:n,type:a,matches:i}),o=o.slice(n.length));if(!n)break}return t?o.length:o?ae.error(e):M(e,s).slice(0)},f=ae.compile=function(e,t){var n,i=[],r=[],a=D[e+" "];if(!a){for(n=(t=t||h(e)).length;n--;)(a=we(t[n]))[E]?i.push(a):r.push(a);(a=D(e,Ce(r,i))).selector=e}return a},m=ae.select=function(e,t,n,i){var r,a,o,s,l,c="function"==typeof e&&e,u=!i&&h(e=c.selector||e);if(n=n||[],1===u.length){if(2<(a=u[0]=u[0].slice(0)).length&&"ID"===(o=a[0]).type&&9===t.nodeType&&x&&b.relative[a[1].type]){if(!(t=(b.find.ID(o.matches[0].replace(te,d),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(r=K.needsContext.test(e)?0:a.length;r--&&(o=a[r],!b.relative[s=o.type]);)if((l=b.find[s])&&(i=l(o.matches[0].replace(te,d),ee.test(a[0].type)&&me(t.parentNode)||t))){if(a.splice(r,1),!(e=i.length&&ve(a)))return P.apply(n,i),n;break}}return(c||f(e,u))(i,t,!x,n,!t||ee.test(e)&&me(t.parentNode)||t),n},p.sortStable=E.split("").sort(k).join("")===E,p.detectDuplicates=!!c,w(),p.sortDetached=le(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),p.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ce(j,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),ae}(C);E.find=p,E.expr=p.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=p.uniqueSort,E.text=p.getText,E.isXMLDoc=p.isXML,E.contains=p.contains,E.escapeSelector=p.escape;function h(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&E(e).is(n))break;i.push(e)}return i}function w(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var T=E.expr.match.needsContext;function I(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var M=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,n,i){return y(n)?E.grep(e,function(e,t){return!!n.call(e,t,e)!==i}):n.nodeType?E.grep(e,function(e){return e===n!==i}):"string"!=typeof n?E.grep(e,function(e){return-1<r.call(n,e)!==i}):E.filter(n,e,i)}E.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?E.find.matchesSelector(i,e)?[i]:[]:E.find.matches(e,E.grep(t,function(e){return 1===e.nodeType}))},E.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(E(e).filter(function(){for(t=0;t<i;t++)if(E.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)E.find(e,r[t],n);return 1<i?E.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&T.test(e)?E(e):e||[],!1).length}});var k,O=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||k,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(E):E.makeArray(e,this);if(!(i="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:O.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:x,!0)),M.test(i[1])&&E.isPlainObject(t))for(i in t)y(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=x.getElementById(i[2]))&&(this[0]=r,this.length=1),this}).prototype=E.fn,k=E(x);var U=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}E.fn.extend({has:function(e){var t=E(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(E.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,a=[],o="string"!=typeof e&&E(e);if(!T.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?-1<o.index(n):1===n.nodeType&&E.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(1<a.length?E.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?r.call(E(e),this[0]):r.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return w((e.parentNode||{}).firstChild,e)},children:function(e){return w(e.firstChild)},contents:function(e){return I(e,"iframe")?e.contentDocument:(I(e,"template")&&(e=e.content||e),E.merge([],e.childNodes))}},function(i,r){E.fn[i]=function(e,t){var n=E.map(this,r,e);return"Until"!==i.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=E.filter(t,n)),1<this.length&&(A[i]||E.uniqueSort(n),U.test(i)&&n.reverse()),this.pushStack(n)}});var $=/[^\x20\t\r\n\f]+/g;function L(e){return e}function j(e){throw e}function R(e,t,n,i){var r;try{e&&y(r=e.promise)?r.call(e).done(t).fail(n):e&&y(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}E.Callbacks=function(i){i="string"==typeof i?function(e){var n={};return E.each(e.match($)||[],function(e,t){n[t]=!0}),n}(i):E.extend({},i);function n(){for(a=a||i.once,t=r=!0;s.length;l=-1)for(e=s.shift();++l<o.length;)!1===o[l].apply(e[0],e[1])&&i.stopOnFalse&&(l=o.length,e=!1);i.memory||(e=!1),r=!1,a&&(o=e?[]:"")}var r,e,t,a,o=[],s=[],l=-1,c={add:function(){return o&&(e&&!r&&(l=o.length-1,s.push(e)),function n(e){E.each(e,function(e,t){y(t)?i.unique&&c.has(t)||o.push(t):t&&t.length&&"string"!==S(t)&&n(t)})}(arguments),e&&!r&&n()),this},remove:function(){return E.each(arguments,function(e,t){for(var n;-1<(n=E.inArray(t,o,n));)o.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<E.inArray(e,o):0<o.length},empty:function(){return o=o&&[],this},disable:function(){return a=s=[],o=e="",this},disabled:function(){return!o},lock:function(){return a=s=[],e||r||(o=e=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],s.push(t),r||n()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!t}};return c},E.extend({Deferred:function(e){var a=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var r=arguments;return E.Deferred(function(i){E.each(a,function(e,t){var n=y(r[t[4]])&&r[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&y(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[t[0]+"With"](this,n?[e]:arguments)})}),r=null}).promise()},then:function(t,n,i){var l=0;function c(r,a,o,s){return function(){function e(){var e,t;if(!(r<l)){if((e=o.apply(n,i))===a.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,y(t)?s?t.call(e,c(l,a,L,s),c(l,a,j,s)):(l++,t.call(e,c(l,a,L,s),c(l,a,j,s),c(l,a,L,a.notifyWith))):(o!==L&&(n=void 0,i=[e]),(s||a.resolveWith)(n,i))}}var n=this,i=arguments,t=s?e:function(){try{e()}catch(e){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(e,t.stackTrace),l<=r+1&&(o!==j&&(n=void 0,i=[e]),a.rejectWith(n,i))}};r?t():(E.Deferred.getStackHook&&(t.stackTrace=E.Deferred.getStackHook()),C.setTimeout(t))}}return E.Deferred(function(e){a[0][3].add(c(0,e,y(i)?i:L,e.notifyWith)),a[1][3].add(c(0,e,y(t)?t:L)),a[2][3].add(c(0,e,y(n)?n:j))}).promise()},promise:function(e){return null!=e?E.extend(e,o):o}},s={};return E.each(a,function(e,t){var n=t[2],i=t[5];o[t[1]]=n.add,i&&n.add(function(){r=i},a[3-e][2].disable,a[3-e][3].disable,a[0][2].lock,a[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),o.promise(s),e&&e.call(s,s),s},when:function(e){function t(t){return function(e){r[t]=this,a[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,a)}}var n=arguments.length,i=n,r=Array(i),a=s.call(arguments),o=E.Deferred();if(n<=1&&(R(e,o.done(t(i)).resolve,o.reject,!n),"pending"===o.state()||y(a[i]&&a[i].then)))return o.then();for(;i--;)R(a[i],t(i),o.reject);return o.promise()}});var N=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&N.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},E.readyException=function(e){C.setTimeout(function(){throw e})};var F=E.Deferred();function q(){x.removeEventListener("DOMContentLoaded",q),C.removeEventListener("load",q),E.ready()}E.fn.ready=function(e){return F.then(e).catch(function(e){E.readyException(e)}),this},E.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0)!==e&&0<--E.readyWait||F.resolveWith(x,[E])}}),E.ready.then=F.then,"complete"===x.readyState||"loading"!==x.readyState&&!x.documentElement.doScroll?C.setTimeout(E.ready):(x.addEventListener("DOMContentLoaded",q),C.addEventListener("load",q));var H=function(e,t,n,i,r,a,o){var s=0,l=e.length,c=null==n;if("object"===S(n))for(s in r=!0,n)H(e,t,s,n[s],!0,a,o);else if(void 0!==i&&(r=!0,y(i)||(o=!0),c&&(t=o?(t.call(e,i),null):(c=t,function(e,t,n){return c.call(E(e),n)})),t))for(;s<l;s++)t(e[s],n,o?i:i.call(e[s],s,t(e[s],n)));return r?e:c?t.call(e):l?t(e[0],n):a},z=/^-ms-/,B=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function V(e){return e.replace(z,"ms-").replace(B,W)}function G(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function Y(){this.expando=E.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[V(t)]=n;else for(i in t)r[V(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(V):(t=V(t))in i?[t]:t.match($)||[]).length;for(;n--;)delete i[t[n]]}void 0!==t&&!E.isEmptyObject(i)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var K=new Y,Q=new Y,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,X=/[A-Z]/g;function J(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(X,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Z.test(e)?JSON.parse(e):e)}(n)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}E.extend({hasData:function(e){return Q.hasData(e)||K.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return K.access(e,t,n)},_removeData:function(e,t){K.remove(e,t)}}),E.fn.extend({data:function(n,e){var t,i,r,a=this[0],o=a&&a.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){Q.set(this,n)}):H(this,function(e){var t;if(a&&void 0===e)return void 0!==(t=Q.get(a,n))?t:void 0!==(t=J(a,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(r=Q.get(a),1===a.nodeType&&!K.get(a,"hasDataAttrs"))){for(t=o.length;t--;)o[t]&&0===(i=o[t].name).indexOf("data-")&&(i=V(i.slice(5)),J(a,i,r[i]));K.set(a,"hasDataAttrs",!0)}return r},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),E.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=K.get(e,t),n&&(!i||Array.isArray(n)?i=K.access(e,t,E.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=E.queue(e,t),i=n.length,r=n.shift(),a=E._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete a.stop,r.call(e,function(){E.dequeue(e,t)},a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return K.get(e,n)||K.access(e,n,{empty:E.Callbacks("once memory").add(function(){K.remove(e,[t+"queue",n])})})}}),E.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?E.queue(this[0],t):void 0===n?this:this.each(function(){var e=E.queue(this,t,n);E._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&E.dequeue(this,t)})},dequeue:function(e){return this.each(function(){E.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--r||a.resolveWith(o,[o])}var i,r=1,a=E.Deferred(),o=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=K.get(o[s],e+"queueHooks"))&&i.empty&&(r++,i.empty.add(n));return n(),a.promise(t)}});function ee(e,t,n,i){var r,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in r=n.apply(e,i||[]),t)e.style[a]=o[a];return r}var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],re=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&E.contains(e.ownerDocument,e)&&"none"===E.css(e,"display")};function ae(e,t,n,i){var r,a,o=20,s=i?function(){return i.cur()}:function(){return E.css(e,t,"")},l=s(),c=n&&n[3]||(E.cssNumber[t]?"":"px"),u=(E.cssNumber[t]||"px"!==c&&+l)&&ne.exec(E.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;o--;)E.style(e,t,u+c),(1-a)*(1-(a=s()/l||.5))<=0&&(o=0),u/=a;u*=2,E.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}var oe={};function se(e,t){for(var n,i,r,a,o,s,l,c=[],u=0,d=e.length;u<d;u++)(i=e[u]).style&&(n=i.style.display,t?("none"===n&&(c[u]=K.get(i,"display")||null,c[u]||(i.style.display="")),""===i.style.display&&re(i)&&(c[u]=(l=o=a=void 0,o=(r=i).ownerDocument,s=r.nodeName,(l=oe[s])||(a=o.body.appendChild(o.createElement(s)),l=E.css(a,"display"),a.parentNode.removeChild(a),"none"===l&&(l="block"),oe[s]=l)))):"none"!==n&&(c[u]="none",K.set(i,"display",n)));for(u=0;u<d;u++)null!=c[u]&&(e[u].style.display=c[u]);return e}E.fn.extend({show:function(){return se(this,!0)},hide:function(){return se(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){re(this)?E(this).show():E(this).hide()})}});var le=/^(?:checkbox|radio)$/i,ce=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ue=/^$|^module$|\/(?:java|ecma)script/i,de={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function fe(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&I(e,t)?E.merge([e],n):n}function pe(e,t){for(var n=0,i=e.length;n<i;n++)K.set(e[n],"globalEval",!t||K.get(t[n],"globalEval"))}de.optgroup=de.option,de.tbody=de.tfoot=de.colgroup=de.caption=de.thead,de.th=de.td;var he,me,ge=/<|&#?\w+;/;function ve(e,t,n,i,r){for(var a,o,s,l,c,u,d=t.createDocumentFragment(),f=[],p=0,h=e.length;p<h;p++)if((a=e[p])||0===a)if("object"===S(a))E.merge(f,a.nodeType?[a]:a);else if(ge.test(a)){for(o=o||d.appendChild(t.createElement("div")),s=(ce.exec(a)||["",""])[1].toLowerCase(),l=de[s]||de._default,o.innerHTML=l[1]+E.htmlPrefilter(a)+l[2],u=l[0];u--;)o=o.lastChild;E.merge(f,o.childNodes),(o=d.firstChild).textContent=""}else f.push(t.createTextNode(a));for(d.textContent="",p=0;a=f[p++];)if(i&&-1<E.inArray(a,i))r&&r.push(a);else if(c=E.contains(a.ownerDocument,a),o=fe(d.appendChild(a),"script"),c&&pe(o),n)for(u=0;a=o[u++];)ue.test(a.type||"")&&n.push(a);return d}he=x.createDocumentFragment().appendChild(x.createElement("div")),(me=x.createElement("input")).setAttribute("type","radio"),me.setAttribute("checked","checked"),me.setAttribute("name","t"),he.appendChild(me),_.checkClone=he.cloneNode(!0).cloneNode(!0).lastChild.checked,he.innerHTML="<textarea>x</textarea>",_.noCloneChecked=!!he.cloneNode(!0).lastChild.defaultValue;var _e=x.documentElement,ye=/^key/,be=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Se=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Ce(){return!1}function xe(){try{return x.activeElement}catch(e){}}function Ee(e,t,n,i,r,a){var o,s;if("object"==typeof t){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)Ee(e,s,n,i,t[s],a);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Ce;else if(!r)return e;return 1===a&&(o=r,(r=function(e){return E().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=E.guid++)),e.each(function(){E.event.add(this,t,r,i,n)})}E.event={global:{},add:function(t,e,n,i,r){var a,o,s,l,c,u,d,f,p,h,m,g=K.get(t);if(g)for(n.handler&&(n=(a=n).handler,r=a.selector),r&&E.find.matchesSelector(_e,r),n.guid||(n.guid=E.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||(o=g.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match($)||[""]).length;c--;)p=m=(s=Se.exec(e[c])||[])[1],h=(s[2]||"").split(".").sort(),p&&(d=E.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,d=E.event.special[p]||{},u=E.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:h.join(".")},a),(f=l[p])||((f=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,i,h,o)||t.addEventListener&&t.addEventListener(p,o)),d.add&&(d.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,u):f.push(u),E.event.global[p]=!0)},remove:function(e,t,n,i,r){var a,o,s,l,c,u,d,f,p,h,m,g=K.hasData(e)&&K.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match($)||[""]).length;c--;)if(p=m=(s=Se.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),p){for(d=E.event.special[p]||{},f=l[p=(i?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=f.length;a--;)u=f[a],!r&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(f.splice(a,1),u.selector&&f.delegateCount--,d.remove&&d.remove.call(e,u));o&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,h,g.handle)||E.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)E.event.remove(e,p+t[c],n,i,!0);E.isEmptyObject(l)&&K.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,a,o,s=E.event.fix(e),l=new Array(arguments.length),c=(K.get(this,"events")||{})[s.type]||[],u=E.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(o=E.event.handlers.call(this,s,c),t=0;(r=o[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(a=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(a.namespace)||(s.handleObj=a,s.data=a.data,void 0!==(i=((E.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,l))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,i,r,a,o,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(a=[],o={},n=0;n<l;n++)void 0===o[r=(i=t[n]).selector+" "]&&(o[r]=i.needsContext?-1<E(r,this).index(c):E.find(r,this,null,[c]).length),o[r]&&a.push(i);a.length&&s.push({elem:c,handlers:a})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[E.expando]?e:new E.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==xe()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===xe()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&I(this,"input"))return this.click(),!1},_default:function(e){return I(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Ce,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Ce,isPropagationStopped:Ce,isImmediatePropagationStopped:Ce,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ye.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&be.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},E.event.addProp),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){E.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||E.contains(this,n))||(e.type=i.origType,t=i.handler.apply(this,arguments),e.type=r),t}}}),E.fn.extend({on:function(e,t,n,i){return Ee(this,e,t,n,i)},one:function(e,t,n,i){return Ee(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,E(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ce),this.each(function(){E.event.remove(this,e,n,t)});for(r in e)this.off(r,t,e[r]);return this}});var Te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ie=/<script|<style|<link/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,De=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ke(e,t){return I(e,"table")&&I(11!==t.nodeType?t:t.firstChild,"tr")&&E(e).children("tbody")[0]||e}function Oe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ue(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ae(e,t){var n,i,r,a,o,s,l,c;if(1===t.nodeType){if(K.hasData(e)&&(a=K.access(e),o=K.set(t,a),c=a.events))for(r in delete o.handle,o.events={},c)for(n=0,i=c[r].length;n<i;n++)E.event.add(t,r,c[r][n]);Q.hasData(e)&&(s=Q.access(e),l=E.extend({},s),Q.set(t,l))}}function Pe(n,i,r,a){i=g.apply([],i);var e,t,o,s,l,c,u=0,d=n.length,f=d-1,p=i[0],h=y(p);if(h||1<d&&"string"==typeof p&&!_.checkClone&&Me.test(p))return n.each(function(e){var t=n.eq(e);h&&(i[0]=p.call(this,e,t.html())),Pe(t,i,r,a)});if(d&&(t=(e=ve(i,n[0].ownerDocument,!1,n,a)).firstChild,1===e.childNodes.length&&(e=t),t||a)){for(s=(o=E.map(fe(e,"script"),Oe)).length;u<d;u++)l=e,u!==f&&(l=E.clone(l,!0,!0),s&&E.merge(o,fe(l,"script"))),r.call(n[u],l,u);if(s)for(c=o[o.length-1].ownerDocument,E.map(o,Ue),u=0;u<s;u++)l=o[u],ue.test(l.type||"")&&!K.access(l,"globalEval")&&E.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?E._evalUrl&&E._evalUrl(l.src):b(l.textContent.replace(De,""),c,l))}return n}function $e(e,t,n){for(var i,r=t?E.filter(t,e):e,a=0;null!=(i=r[a]);a++)n||1!==i.nodeType||E.cleanData(fe(i)),i.parentNode&&(n&&E.contains(i.ownerDocument,i)&&pe(fe(i,"script")),i.parentNode.removeChild(i));return e}E.extend({htmlPrefilter:function(e){return e.replace(Te,"<$1></$2>")},clone:function(e,t,n){var i,r,a,o,s,l,c,u=e.cloneNode(!0),d=E.contains(e.ownerDocument,e);if(!(_.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||E.isXMLDoc(e)))for(o=fe(u),i=0,r=(a=fe(e)).length;i<r;i++)s=a[i],l=o[i],void 0,"input"===(c=l.nodeName.toLowerCase())&&le.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(a=a||fe(e),o=o||fe(u),i=0,r=a.length;i<r;i++)Ae(a[i],o[i]);else Ae(e,u);return 0<(o=fe(u,"script")).length&&pe(o,!d&&fe(e,"script")),u},cleanData:function(e){for(var t,n,i,r=E.event.special,a=0;void 0!==(n=e[a]);a++)if(G(n)){if(t=n[K.expando]){if(t.events)for(i in t.events)r[i]?E.event.remove(n,i):E.removeEvent(n,i,t.handle);n[K.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),E.fn.extend({detach:function(e){return $e(this,e,!0)},remove:function(e){return $e(this,e)},text:function(e){return H(this,function(e){return void 0===e?E.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Pe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ke(this,e).appendChild(e)})},prepend:function(){return Pe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ke(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(fe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return E.clone(this,e,t)})},html:function(e){return H(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ie.test(e)&&!de[(ce.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(E.cleanData(fe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Pe(this,arguments,function(e){var t=this.parentNode;E.inArray(this,n)<0&&(E.cleanData(fe(this)),t&&t.replaceChild(e,this))},n)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,o){E.fn[e]=function(e){for(var t,n=[],i=E(e),r=i.length-1,a=0;a<=r;a++)t=a===r?this:this.clone(!0),E(i[a])[o](t),l.apply(n,t.get());return this.pushStack(n)}});var Le,je,Re,Ne,Fe,qe,He,ze=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Be=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},We=new RegExp(ie.join("|"),"i");function Ve(){if(He){qe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",He.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",_e.appendChild(qe).appendChild(He);var e=C.getComputedStyle(He);Le="1%"!==e.top,Fe=12===Ge(e.marginLeft),He.style.right="60%",Ne=36===Ge(e.right),je=36===Ge(e.width),He.style.position="absolute",Re=36===He.offsetWidth||"absolute",_e.removeChild(qe),He=null}}function Ge(e){return Math.round(parseFloat(e))}function Ye(e,t,n){var i,r,a,o,s=e.style;return(n=n||Be(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||E.contains(e.ownerDocument,e)||(o=E.style(e,t)),!_.pixelBoxStyles()&&ze.test(o)&&We.test(t)&&(i=s.width,r=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=i,s.minWidth=r,s.maxWidth=a)),void 0!==o?o+"":o}function Ke(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}qe=x.createElement("div"),(He=x.createElement("div")).style&&(He.style.backgroundClip="content-box",He.cloneNode(!0).style.backgroundClip="",_.clearCloneStyle="content-box"===He.style.backgroundClip,E.extend(_,{boxSizingReliable:function(){return Ve(),je},pixelBoxStyles:function(){return Ve(),Ne},pixelPosition:function(){return Ve(),Le},reliableMarginLeft:function(){return Ve(),Fe},scrollboxSize:function(){return Ve(),Re}}));var Qe=/^(none|table(?!-c[ea]).+)/,Ze=/^--/,Xe={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"},et=["Webkit","Moz","ms"],tt=x.createElement("div").style;function nt(e){var t=E.cssProps[e];return t=t||(E.cssProps[e]=function(e){if(e in tt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=et.length;n--;)if((e=et[n]+t)in tt)return e}(e)||e)}function it(e,t,n){var i=ne.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function rt(e,t,n,i,r,a){var o="width"===t?1:0,s=0,l=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=E.css(e,n+ie[o],!0,r)),i?("content"===n&&(l-=E.css(e,"padding"+ie[o],!0,r)),"margin"!==n&&(l-=E.css(e,"border"+ie[o]+"Width",!0,r))):(l+=E.css(e,"padding"+ie[o],!0,r),"padding"!==n?l+=E.css(e,"border"+ie[o]+"Width",!0,r):s+=E.css(e,"border"+ie[o]+"Width",!0,r));return!i&&0<=a&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-s-.5))),l}function at(e,t,n){var i=Be(e),r=Ye(e,t,i),a="border-box"===E.css(e,"boxSizing",!1,i),o=a;if(ze.test(r)){if(!n)return r;r="auto"}return o=o&&(_.boxSizingReliable()||r===e.style[t]),"auto"!==r&&(parseFloat(r)||"inline"!==E.css(e,"display",!1,i))||(r=e["offset"+t[0].toUpperCase()+t.slice(1)],o=!0),(r=parseFloat(r)||0)+rt(e,t,n||(a?"border":"content"),o,i,r)+"px"}function ot(e,t,n,i,r){return new ot.prototype.init(e,t,n,i,r)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ye(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,o,s=V(t),l=Ze.test(t),c=e.style;if(l||(t=nt(s)),o=E.cssHooks[t]||E.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(e,!1,i))?r:c[t];"string"===(a=typeof n)&&(r=ne.exec(n))&&r[1]&&(n=ae(e,t,r),a="number"),null!=n&&n==n&&("number"===a&&(n+=r&&r[3]||(E.cssNumber[s]?"":"px")),_.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var r,a,o,s=V(t);return Ze.test(t)||(t=nt(s)),(o=E.cssHooks[t]||E.cssHooks[s])&&"get"in o&&(r=o.get(e,!0,n)),void 0===r&&(r=Ye(e,t,i)),"normal"===r&&t in Je&&(r=Je[t]),""===n||n?(a=parseFloat(r),!0===n||isFinite(a)?a||0:r):r}}),E.each(["height","width"],function(e,s){E.cssHooks[s]={get:function(e,t,n){if(t)return!Qe.test(E.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?at(e,s,n):ee(e,Xe,function(){return at(e,s,n)})},set:function(e,t,n){var i,r=Be(e),a="border-box"===E.css(e,"boxSizing",!1,r),o=n&&rt(e,s,n,a,r);return a&&_.scrollboxSize()===r.position&&(o-=Math.ceil(e["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(r[s])-rt(e,s,"border",!1,r)-.5)),o&&(i=ne.exec(t))&&"px"!==(i[3]||"px")&&(e.style[s]=t,t=E.css(e,s)),it(0,t,o)}}}),E.cssHooks.marginLeft=Ke(_.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ye(e,"marginLeft"))||e.getBoundingClientRect().left-ee(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),E.each({margin:"",padding:"",border:"Width"},function(r,a){E.cssHooks[r+a]={expand:function(e){for(var t=0,n={},i="string"==typeof e?e.split(" "):[e];t<4;t++)n[r+ie[t]+a]=i[t]||i[t-2]||i[0];return n}},"margin"!==r&&(E.cssHooks[r+a].set=it)}),E.fn.extend({css:function(e,t){return H(this,function(e,t,n){var i,r,a={},o=0;if(Array.isArray(t)){for(i=Be(e),r=t.length;o<r;o++)a[t[o]]=E.css(e,t[o],!1,i);return a}return void 0!==n?E.style(e,t,n):E.css(e,t)},e,t,1<arguments.length)}}),((E.Tween=ot).prototype={constructor:ot,init:function(e,t,n,i,r,a){this.elem=e,this.prop=n,this.easing=r||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(E.cssNumber[n]?"":"px")},cur:function(){var e=ot.propHooks[this.prop];return e&&e.get?e.get(this):ot.propHooks._default.get(this)},run:function(e){var t,n=ot.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ot.propHooks._default.set(this),this}}).init.prototype=ot.prototype,(ot.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[E.cssProps[e.prop]]&&!E.cssHooks[e.prop]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=ot.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=ot.prototype.init,E.fx.step={};var st,lt,ct,ut,dt=/^(?:toggle|show|hide)$/,ft=/queueHooks$/;function pt(){lt&&(!1===x.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(pt):C.setTimeout(pt,E.fx.interval),E.fx.tick())}function ht(){return C.setTimeout(function(){st=void 0}),st=Date.now()}function mt(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=ie[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function gt(e,t,n){for(var i,r=(vt.tweeners[t]||[]).concat(vt.tweeners["*"]),a=0,o=r.length;a<o;a++)if(i=r[a].call(n,t,e))return i}function vt(a,e,t){var n,o,i=0,r=vt.prefilters.length,s=E.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=st||ht(),t=Math.max(0,c.startTime+c.duration-e),n=1-(t/c.duration||0),i=0,r=c.tweens.length;i<r;i++)c.tweens[i].run(n);return s.notifyWith(a,[c,n,t]),n<1&&r?t:(r||s.notifyWith(a,[c,1,0]),s.resolveWith(a,[c]),!1)},c=s.promise({elem:a,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},t),originalProperties:e,originalOptions:t,startTime:st||ht(),duration:t.duration,tweens:[],createTween:function(e,t){var n=E.Tween(a,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var t=0,n=e?c.tweens.length:0;if(o)return this;for(o=!0;t<n;t++)c.tweens[t].run(1);return e?(s.notifyWith(a,[c,1,0]),s.resolveWith(a,[c,e])):s.rejectWith(a,[c,e]),this}}),u=c.props;for(!function(e,t){var n,i,r,a,o;for(n in e)if(r=t[i=V(n)],a=e[n],Array.isArray(a)&&(r=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),(o=E.cssHooks[i])&&"expand"in o)for(n in a=o.expand(a),delete e[i],a)n in e||(e[n]=a[n],t[n]=r);else t[i]=r}(u,c.opts.specialEasing);i<r;i++)if(n=vt.prefilters[i].call(c,a,u,c.opts))return y(n.stop)&&(E._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return E.map(u,gt,c),y(c.opts.start)&&c.opts.start.call(a,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),E.fx.timer(E.extend(l,{elem:a,anim:c,queue:c.opts.queue})),c}E.Animation=E.extend(vt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ae(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){for(var n,i=0,r=(e=y(e)?(t=e,["*"]):e.match($)).length;i<r;i++)n=e[i],vt.tweeners[n]=vt.tweeners[n]||[],vt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,a,o,s,l,c,u,d="width"in t||"height"in t,f=this,p={},h=e.style,m=e.nodeType&&re(e),g=K.get(e,"fxshow");for(i in n.queue||(null==(o=E._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,f.always(function(){f.always(function(){o.unqueued--,E.queue(e,"fx").length||o.empty.fire()})})),t)if(r=t[i],dt.test(r)){if(delete t[i],a=a||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||E.style(e,i)}if((l=!E.isEmptyObject(t))||!E.isEmptyObject(p))for(i in d&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(c=g&&g.display)&&(c=K.get(e,"display")),"none"===(u=E.css(e,"display"))&&(c?u=c:(se([e],!0),c=e.style.display||c,u=E.css(e,"display"),se([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===E.css(e,"float")&&(l||(f.done(function(){h.display=c}),null==c&&(u=h.display,c="none"===u?"":u)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=K.access(e,"fxshow",{display:c}),a&&(g.hidden=!m),m&&se([e],!0),f.done(function(){for(i in m||se([e]),K.remove(e,"fxshow"),p)E.style(e,i,p[i])})),l=gt(m?g[i]:0,i,f),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?vt.prefilters.unshift(e):vt.prefilters.push(e)}}),E.speed=function(e,t,n){var i=e&&"object"==typeof e?E.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return E.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in E.fx.speeds?i.duration=E.fx.speeds[i.duration]:i.duration=E.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&E.dequeue(this,i.queue)},i},E.fn.extend({fadeTo:function(e,t,n,i){return this.filter(re).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,e,n,i){function r(){var e=vt(this,E.extend({},t),o);(a||K.get(this,"finish"))&&e.stop(!0)}var a=E.isEmptyObject(t),o=E.speed(e,n,i);return r.finish=r,a||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(r,e,a){function o(e){var t=e.stop;delete e.stop,t(a)}return"string"!=typeof r&&(a=e,e=r,r=void 0),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",n=E.timers,i=K.get(this);if(t)i[t]&&i[t].stop&&o(i[t]);else for(t in i)i[t]&&i[t].stop&&ft.test(t)&&o(i[t]);for(t=n.length;t--;)n[t].elem!==this||null!=r&&n[t].queue!==r||(n[t].anim.stop(a),e=!1,n.splice(t,1));!e&&a||E.dequeue(this,r)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var e,t=K.get(this),n=t[o+"queue"],i=t[o+"queueHooks"],r=E.timers,a=n?n.length:0;for(t.finish=!0,E.queue(this,o,[]),i&&i.stop&&i.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===o&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<a;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),E.each(["toggle","show","hide"],function(e,i){var r=E.fn[i];E.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(mt(i,!0),e,t,n)}}),E.each({slideDown:mt("show"),slideUp:mt("hide"),slideToggle:mt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){E.fn[e]=function(e,t,n){return this.animate(i,e,t,n)}}),E.timers=[],E.fx.tick=function(){var e,t=0,n=E.timers;for(st=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||E.fx.stop(),st=void 0},E.fx.timer=function(e){E.timers.push(e),E.fx.start()},E.fx.interval=13,E.fx.start=function(){lt||(lt=!0,pt())},E.fx.stop=function(){lt=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(i,e){return i=E.fx&&E.fx.speeds[i]||i,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,i);t.stop=function(){C.clearTimeout(n)}})},ct=x.createElement("input"),ut=x.createElement("select").appendChild(x.createElement("option")),ct.type="checkbox",_.checkOn=""!==ct.value,_.optSelected=ut.selected,(ct=x.createElement("input")).value="t",ct.type="radio",_.radioValue="t"===ct.value;var _t,yt=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return H(this,E.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){E.removeAttr(this,e)})}}),E.extend({attr:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?E.prop(e,t,n):(1===a&&E.isXMLDoc(e)||(r=E.attrHooks[t.toLowerCase()]||(E.expr.match.bool.test(t)?_t:void 0)),void 0!==n?null===n?void E.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=E.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!_.radioValue&&"radio"===t&&I(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match($);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),_t={set:function(e,t,n){return!1===t?E.removeAttr(e,n):e.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),function(e,t){var o=yt[t]||E.find.attr;yt[t]=function(e,t,n){var i,r,a=t.toLowerCase();return n||(r=yt[a],yt[a]=i,i=null!=o(e,t,n)?a:null,yt[a]=r),i}});var bt=/^(?:input|select|textarea|button)$/i,St=/^(?:a|area)$/i;function wt(e){return(e.match($)||[]).join(" ")}function Ct(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match($)||[]}E.fn.extend({prop:function(e,t){return H(this,E.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[E.propFix[e]||e]})}}),E.extend({prop:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&E.isXMLDoc(e)||(t=E.propFix[t]||t,r=E.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||St.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),_.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this}),E.fn.extend({addClass:function(t){var e,n,i,r,a,o,s,l=0;if(y(t))return this.each(function(e){E(this).addClass(t.call(this,e,Ct(this)))});if((e=xt(t)).length)for(;n=this[l++];)if(r=Ct(n),i=1===n.nodeType&&" "+wt(r)+" "){for(o=0;a=e[o++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");r!==(s=wt(i))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,r,a,o,s,l=0;if(y(t))return this.each(function(e){E(this).removeClass(t.call(this,e,Ct(this)))});if(!arguments.length)return this.attr("class","");if((e=xt(t)).length)for(;n=this[l++];)if(r=Ct(n),i=1===n.nodeType&&" "+wt(r)+" "){for(o=0;a=e[o++];)for(;-1<i.indexOf(" "+a+" ");)i=i.replace(" "+a+" "," ");r!==(s=wt(i))&&n.setAttribute("class",s)}return this},toggleClass:function(r,t){var a=typeof r,o="string"==a||Array.isArray(r);return"boolean"==typeof t&&o?t?this.addClass(r):this.removeClass(r):y(r)?this.each(function(e){E(this).toggleClass(r.call(this,e,Ct(this),t),t)}):this.each(function(){var e,t,n,i;if(o)for(t=0,n=E(this),i=xt(r);e=i[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==r&&"boolean"!=a||((e=Ct(this))&&K.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===r?"":K.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+wt(Ct(n))+" ").indexOf(t))return!0;return!1}});var Et=/\r/g;E.fn.extend({val:function(n){var i,e,r,t=this[0];return arguments.length?(r=y(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?n.call(this,e,E(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=E.map(t,function(e){return null==e?"":e+""})),(i=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,t,"value")||(this.value=t))})):t?(i=E.valHooks[t.type]||E.valHooks[t.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(Et,""):null==e?"":e:void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:wt(E.text(e))}},select:{get:function(e){var t,n,i,r=e.options,a=e.selectedIndex,o="select-one"===e.type,s=o?null:[],l=o?a+1:r.length;for(i=a<0?l:o?a:0;i<l;i++)if(((n=r[i]).selected||i===a)&&!n.disabled&&(!n.parentNode.disabled||!I(n.parentNode,"optgroup"))){if(t=E(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,a=E.makeArray(t),o=r.length;o--;)((i=r[o]).selected=-1<E.inArray(E.valHooks.option.get(i),a))&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<E.inArray(E(e).val(),t)}},_.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),_.focusin="onfocusin"in C;function Tt(e){e.stopPropagation()}var It=/^(?:focusinfocus|focusoutblur)$/;E.extend(E.event,{trigger:function(e,t,n,i){var r,a,o,s,l,c,u,d,f=[n||x],p=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(a=d=o=n=n||x,3!==n.nodeType&&8!==n.nodeType&&!It.test(p+E.event.triggered)&&(-1<p.indexOf(".")&&(p=(h=p.split(".")).shift(),h.sort()),l=p.indexOf(":")<0&&"on"+p,(e=e[E.expando]?e:new E.Event(p,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:E.makeArray(t,[e]),u=E.event.special[p]||{},i||!u.trigger||!1!==u.trigger.apply(n,t))){if(!i&&!u.noBubble&&!m(n)){for(s=u.delegateType||p,It.test(s+p)||(a=a.parentNode);a;a=a.parentNode)f.push(a),o=a;o===(n.ownerDocument||x)&&f.push(o.defaultView||o.parentWindow||C)}for(r=0;(a=f[r++])&&!e.isPropagationStopped();)d=a,e.type=1<r?s:u.bindType||p,(c=(K.get(a,"events")||{})[e.type]&&K.get(a,"handle"))&&c.apply(a,t),(c=l&&a[l])&&c.apply&&G(a)&&(e.result=c.apply(a,t),!1===e.result&&e.preventDefault());return e.type=p,i||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(f.pop(),t)||!G(n)||l&&y(n[p])&&!m(n)&&((o=n[l])&&(n[l]=null),E.event.triggered=p,e.isPropagationStopped()&&d.addEventListener(p,Tt),n[p](),e.isPropagationStopped()&&d.removeEventListener(p,Tt),E.event.triggered=void 0,o&&(n[l]=o)),e.result}},simulate:function(e,t,n){var i=E.extend(new E.Event,n,{type:e,isSimulated:!0});E.event.trigger(i,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each(function(){E.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return E.event.trigger(e,t,n,!0)}}),_.focusin||E.each({focus:"focusin",blur:"focusout"},function(n,i){function r(e){E.event.simulate(i,e.target,E.event.fix(e))}E.event.special[i]={setup:function(){var e=this.ownerDocument||this,t=K.access(e,i);t||e.addEventListener(n,r,!0),K.access(e,i,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=K.access(e,i)-1;t?K.access(e,i,t):(e.removeEventListener(n,r,!0),K.remove(e,i))}}});var Mt=C.location,Dt=Date.now(),kt=/\?/;E.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+e),t};var Ot=/\[\]$/,Ut=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;function $t(n,e,i,r){var t;if(Array.isArray(e))E.each(e,function(e,t){i||Ot.test(n)?r(n,t):$t(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,r)});else if(i||"object"!==S(e))r(n,e);else for(t in e)$t(n+"["+t+"]",e[t],i,r)}E.param=function(e,t){function n(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)}var i,r=[];if(Array.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,function(){n(this.name,this.value)});else for(i in e)$t(i,e[i],t,n);return r.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&Pt.test(this.nodeName)&&!At.test(e)&&(this.checked||!le.test(e))}).map(function(e,t){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,function(e){return{name:t.name,value:e.replace(Ut,"\r\n")}}):{name:t.name,value:n.replace(Ut,"\r\n")}}).get()}});var Lt=/%20/g,jt=/#.*$/,Rt=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ft=/^(?:GET|HEAD)$/,qt=/^\/\//,Ht={},zt={},Bt="*/".concat("*"),Wt=x.createElement("a");function Vt(a){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,i=0,r=e.toLowerCase().match($)||[];if(y(t))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(a[n]=a[n]||[]).unshift(t)):(a[n]=a[n]||[]).push(t)}}function Gt(t,r,a,o){var s={},l=t===zt;function c(e){var i;return s[e]=!0,E.each(t[e]||[],function(e,t){var n=t(r,a,o);return"string"!=typeof n||l||s[n]?l?!(i=n):void 0:(r.dataTypes.unshift(n),c(n),!1)}),i}return c(r.dataTypes[0])||!s["*"]&&c("*")}function Yt(e,t){var n,i,r=E.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i=i||{})[n]=t[n]);return i&&E.extend(!0,e,i),e}Wt.href=Mt.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Yt(Yt(e,E.ajaxSettings),t):Yt(E.ajaxSettings,e)},ajaxPrefilter:Vt(Ht),ajaxTransport:Vt(zt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var u,d,f,n,p,i,h,m,r,a,g=E.ajaxSetup({},t),v=g.context||g,_=g.context&&(v.nodeType||v.jquery)?E(v):E.event,y=E.Deferred(),b=E.Callbacks("once memory"),S=g.statusCode||{},o={},s={},l="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n)for(n={};t=Nt.exec(f);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return h?f:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,o[e]=t),this},overrideMimeType:function(e){return null==h&&(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)w.always(e[w.status]);else for(t in e)S[t]=[S[t],e[t]];return this},abort:function(e){var t=e||l;return u&&u.abort(t),c(0,t),this}};if(y.promise(w),g.url=((e||g.url||Mt.href)+"").replace(qt,Mt.protocol+"//"),g.type=t.method||t.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match($)||[""],null==g.crossDomain){i=x.createElement("a");try{i.href=g.url,i.href=i.href,g.crossDomain=Wt.protocol+"//"+Wt.host!=i.protocol+"//"+i.host}catch(e){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=E.param(g.data,g.traditional)),Gt(Ht,g,t,w),h)return w;for(r in(m=E.event&&g.global)&&0==E.active++&&E.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Ft.test(g.type),d=g.url.replace(jt,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(Lt,"+")):(a=g.url.slice(d.length),g.data&&(g.processData||"string"==typeof g.data)&&(d+=(kt.test(d)?"&":"?")+g.data,delete g.data),!1===g.cache&&(d=d.replace(Rt,"$1"),a=(kt.test(d)?"&":"?")+"_="+Dt+++a),g.url=d+a),g.ifModified&&(E.lastModified[d]&&w.setRequestHeader("If-Modified-Since",E.lastModified[d]),E.etag[d]&&w.setRequestHeader("If-None-Match",E.etag[d])),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&w.setRequestHeader("Content-Type",g.contentType),w.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Bt+"; q=0.01":""):g.accepts["*"]),g.headers)w.setRequestHeader(r,g.headers[r]);if(g.beforeSend&&(!1===g.beforeSend.call(v,w,g)||h))return w.abort();if(l="abort",b.add(g.complete),w.done(g.success),w.fail(g.error),u=Gt(zt,g,t,w)){if(w.readyState=1,m&&_.trigger("ajaxSend",[w,g]),h)return w;g.async&&0<g.timeout&&(p=C.setTimeout(function(){w.abort("timeout")},g.timeout));try{h=!1,u.send(o,c)}catch(e){if(h)throw e;c(-1,e)}}else c(-1,"No Transport");function c(e,t,n,i){var r,a,o,s,l,c=t;h||(h=!0,p&&C.clearTimeout(p),u=void 0,f=i||"",w.readyState=0<e?4:0,r=200<=e&&e<300||304===e,n&&(s=function(e,t,n){for(var i,r,a,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)a=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}o=o||r}a=a||o}if(a)return a!==l[0]&&l.unshift(a),n[a]}(g,w,n)),s=function(e,t,n,i){var r,a,o,s,l,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(a=u.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=u.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=c[l+" "+a]||c["* "+a]))for(r in c)if((s=r.split(" "))[1]===a&&(o=c[l+" "+s[0]]||c["* "+s[0]])){!0===o?o=c[r]:!0!==c[r]&&(a=s[0],u.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(g,s,w,r),r?(g.ifModified&&((l=w.getResponseHeader("Last-Modified"))&&(E.lastModified[d]=l),(l=w.getResponseHeader("etag"))&&(E.etag[d]=l)),204===e||"HEAD"===g.type?c="nocontent":304===e?c="notmodified":(c=s.state,a=s.data,r=!(o=s.error))):(o=c,!e&&c||(c="error",e<0&&(e=0))),w.status=e,w.statusText=(t||c)+"",r?y.resolveWith(v,[a,c,w]):y.rejectWith(v,[w,c,o]),w.statusCode(S),S=void 0,m&&_.trigger(r?"ajaxSuccess":"ajaxError",[w,g,r?a:o]),b.fireWith(v,[w,c]),m&&(_.trigger("ajaxComplete",[w,g]),--E.active||E.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,n){return E.get(e,t,n,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],function(e,r){E[r]=function(e,t,n,i){return y(t)&&(i=i||n,n=t,t=void 0),E.ajax(E.extend({url:e,type:r,dataType:i,data:t,success:n},E.isPlainObject(e)&&e))}}),E._evalUrl=function(e){return E.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},E.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=E(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return y(n)?this.each(function(e){E(this).wrapInner(n.call(this,e))}):this.each(function(){var e=E(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=y(t);return this.each(function(e){E(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){E(this).replaceWith(this.childNodes)}),this}}),E.expr.pseudos.hidden=function(e){return!E.expr.pseudos.visible(e)},E.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Kt={0:200,1223:204},Qt=E.ajaxSettings.xhr();_.cors=!!Qt&&"withCredentials"in Qt,_.ajax=Qt=!!Qt,E.ajaxTransport(function(r){var a,o;if(_.cors||Qt&&!r.crossDomain)return{send:function(e,t){var n,i=r.xhr();if(i.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)i.setRequestHeader(n,e[n]);a=function(e){return function(){a&&(a=o=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===e?i.abort():"error"===e?"number"!=typeof i.status?t(0,"error"):t(i.status,i.statusText):t(Kt[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=a(),o=i.onerror=i.ontimeout=a("error"),void 0!==i.onabort?i.onabort=o:i.onreadystatechange=function(){4===i.readyState&&C.setTimeout(function(){a&&o()})},a=a("abort");try{i.send(r.hasContent&&r.data||null)}catch(e){if(a)throw e}},abort:function(){a&&a()}}}),E.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),E.ajaxTransport("script",function(n){var i,r;if(n.crossDomain)return{send:function(e,t){i=E("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(e){i.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),x.head.appendChild(i[0])},abort:function(){r&&r()}}});var Zt,Xt=[],Jt=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||E.expando+"_"+Dt++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",function(e,t,n){var i,r,a,o=!1!==e.jsonp&&(Jt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jt.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(Jt,"$1"+i):!1!==e.jsonp&&(e.url+=(kt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||E.error(i+" was not called"),a[0]},e.dataTypes[0]="json",r=C[i],C[i]=function(){a=arguments},n.always(function(){void 0===r?E(C).removeProp(i):C[i]=r,e[i]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(i)),a&&y(r)&&r(a[0]),a=r=void 0}),"script"}),_.createHTMLDocument=((Zt=x.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Zt.childNodes.length),E.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(_.createHTMLDocument?((i=(t=x.implementation.createHTMLDocument("")).createElement("base")).href=x.location.href,t.head.appendChild(i)):t=x),a=!n&&[],(r=M.exec(e))?[t.createElement(r[1])]:(r=ve([e],t,a),a&&a.length&&E(a).remove(),E.merge([],r.childNodes)));var i,r,a},E.fn.load=function(e,t,n){var i,r,a,o=this,s=e.indexOf(" ");return-1<s&&(i=wt(e.slice(s)),e=e.slice(0,s)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<o.length&&E.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){a=arguments,o.html(i?E("<div>").append(E.parseHTML(e)).find(i):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){E.fn[t]=function(e){return this.on(t,e)}}),E.expr.pseudos.animated=function(t){return E.grep(E.timers,function(e){return t===e.elem}).length},E.offset={setOffset:function(e,t,n){var i,r,a,o,s,l,c=E.css(e,"position"),u=E(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),a=E.css(e,"top"),l=E.css(e,"left"),r=("absolute"===c||"fixed"===c)&&-1<(a+l).indexOf("auto")?(o=(i=u.position()).top,i.left):(o=parseFloat(a)||0,parseFloat(l)||0),y(t)&&(t=t.call(e,n,E.extend({},s))),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):u.css(d)}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){E.offset.setOffset(this,t,e)});var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===E.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===E.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=E(e).offset()).top+=E.css(e,"borderTopWidth",!0),r.left+=E.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-E.css(i,"marginTop",!0),left:t.left-r.left-E.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===E.css(e,"position");)e=e.offsetParent;return e||_e})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var a="pageYOffset"===r;E.fn[t]=function(e){return H(this,function(e,t,n){var i;if(m(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===n)return i?i[r]:e[t];i?i.scrollTo(a?i.pageXOffset:n,a?n:i.pageYOffset):e[t]=n},t,e,arguments.length)}}),E.each(["top","left"],function(e,n){E.cssHooks[n]=Ke(_.pixelPosition,function(e,t){if(t)return t=Ye(e,n),ze.test(t)?E(e).position()[n]+"px":t})}),E.each({Height:"height",Width:"width"},function(o,s){E.each({padding:"inner"+o,content:s,"":"outer"+o},function(i,a){E.fn[a]=function(e,t){var n=arguments.length&&(i||"boolean"!=typeof e),r=i||(!0===e||!0===t?"margin":"border");return H(this,function(e,t,n){var i;return m(e)?0===a.indexOf("outer")?e["inner"+o]:e.document.documentElement["client"+o]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+o],i["scroll"+o],e.body["offset"+o],i["offset"+o],i["client"+o])):void 0===n?E.css(e,t,r):E.style(e,t,n,r)},s,n?e:void 0,n)}})}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){E.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),E.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),E.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),E.proxy=function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return i=s.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(s.call(arguments)))}).guid=e.guid=e.guid||E.guid++,r},E.holdReady=function(e){e?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=I,E.isFunction=y,E.isWindow=m,E.camelCase=V,E.type=S,E.now=Date.now,E.isNumeric=function(e){var t=E.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return E});var en=C.jQuery,tn=C.$;return E.noConflict=function(e){return C.$===E&&(C.$=tn),e&&C.jQuery===E&&(C.jQuery=en),E},e||(C.jQuery=C.$=E),E}),R1="object"==typeof exports?exports:fp||window,S1=document.location,T1="#!",U1=new RegExp("^(#!*/|#!*|/)"),X1=R1.Router=function(e){if(!(this instanceof X1))return new X1(e);this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),this.mount(e||{})},X1.prototype.init=function(e){var i=this;if(this.handler=function(e){var t=e&&e.newURL||window.location.hash,n=!0===i.history?i.getPath():t.replace(new RegExp(".*#!*"),"");i.dispatch("on","/"===n.charAt(0)?n:"/"+n)},this.listener={mode:"modern",hash:S1.hash,history:!1,check:function(){var e=S1.hash;e!=this.hash&&(this.hash=e,this.onHashChanged())},fire:function(){"modern"===this.mode?!0===this.history?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(t,e){var n=this;function i(e){t(e)}if(this.history=e,this.onChange=i,"onhashchange"in window&&(void 0===document.documentMode||7<document.documentMode))!0===this.history?setTimeout(function(){$(window).off("popstate",i).on("popstate",i)},500):$(window).off("hashchange",i).on("hashchange",i),this.mode="modern";else{var r=document.createElement("iframe");r.id="state-frame",r.style.display="none",document.body.appendChild(r),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&n.check()}),window.setInterval(function(){n.check()},50),this.onHashChanged=i,this.mode="legacy"}return this.mode},destroy:function(e){$(window).off("popstate",this.onChange).off("change",this.onChange)},setHash:function(e){return"legacy"===this.mode&&this.writeFrame(e),!0===this.history?(window.history.pushState({},document.title,e),this.fire()):S1.hash=T1.replace("#","")+("/"===e[0]?e:"/"+e),this},writeFrame:function(e){var t=document.getElementById("state-frame"),n=t.contentDocument||t.contentWindow.document;n.open(),n.write("<script>_hash = '"+e+"'; onload = parent.listener.syncHash;<script>"),n.close()},syncHash:function(){var e=this._hash;return e!=S1.hash&&(S1.hash=e),this},onHashChanged:function(){}},this.listener.init(this.handler,this.history),!1===this.history)V1()?e&&"/"!=e?S1.hash=e:i.dispatch("on","/"):V1()||i.dispatch("on","/"+S1.hash.replace(U1,""));else{var t=V1()&&e?e:V1()?null:S1.hash.replace(new RegExp("^#!*"),"");t&&window.history.replaceState({},document.title,t),!t&&!0!==this.run_in_init||this.handler()}return this},X1.prototype.explode=function(){var e=!0===this.history?this.getPath():S1.hash;return"/"===(e=e.replace(U1,"")).charAt(0)&&(e=e.slice(0)),e.slice(0,e.length).split("/")},X1.prototype.setRoute=function(e,t,n){var i=this.explode();return"number"==typeof e&&"string"==typeof t?i[e]=t:"string"==typeof n?i.splice(e,t,s):i=[e],this.listener.setHash(i.join("/")),i},X1.prototype.insertEx=function(e,t,n,i){var r,a;return"once"===e&&(r=n,a=!(e="on"),n=function(){if(!a)return a=!0,r.apply(this,arguments)}),this._insert(e,t,n,i)},X1.prototype.getRoute=function(e){var t=e;if("number"==typeof e)t=this.explode()[e];else if("string"==typeof e){t=this.explode().indexOf(e)}else t=this.explode();return t},X1.prototype.destroy=function(){return this.listener.destroy(this.handler),this},X1.prototype.getPath=function(){var e=window.location.pathname;return"/"!==e.substr(0,1)&&(e="/"+e),e},X1.prototype.configure=function(e){e=e||{};for(var t=0;t<this.methods.length;t++)this._methods[this.methods[t]]=!0;return this.recurse=e.recurse||this.recurse||!1,this.async=e.async||!1,this.delimiter=e.delimiter||"/",this.strict=void 0===e.strict||e.strict,this.notfound=e.notfound,this.resource=e.resource,this.history=e.html5history&&this.historySupport||!1,this.run_in_init=!0===this.history&&!1!==e.run_handler_in_init,this.every={after:e.after||null,before:e.before||null,on:e.on||null},this},X1.prototype.param=function(e,t){":"!==e[0]&&(e=":"+e);var n=new RegExp(e,"g");return this.params[e]=function(e){return e.replace(n,t.source||t)},this},X1.prototype.on=X1.prototype.route=function(t,n,i){var r=this;return i||"function"!=typeof n||(i=n,n=t,t="on"),Array.isArray(n)?n.forEach(function(e){r.on(t,e,i)}):(n.source&&(n=n.source.replace(/\\\//gi,"/")),Array.isArray(t)?t.forEach(function(e){r.on(e.toLowerCase(),n,i)}):(n=b2(n=n.split(new RegExp(this.delimiter)),this.delimiter),void this.insert(t,this.scope.concat(n),i)))},X1.prototype.path=function(e,t){var n=this.scope.length;e.source&&(e=e.source.replace(/\\\//gi,"/")),e=b2(e=e.split(new RegExp(this.delimiter)),this.delimiter),this.scope=this.scope.concat(e),t.call(this,this),this.scope.splice(n,e.length)},X1.prototype.dispatch=function(e,t,n){var i,r=this,a=this.traverse(e,t,this.routes,""),o=this._invoked;if(this._invoked=!0,!a||0===a.length)return this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:e,path:t},n),!1;function s(){r.last=a.after,r.invoke(r.runlist(a),r,n)}return"forward"===this.recurse&&(a=a.reverse()),(i=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last])&&0<i.length&&o?this.async?this.invoke(i,this,s):(this.invoke(i,this),s()):s(),!0},X1.prototype.invoke=function(n,i,e){var r,t=this;this.async?$1(n,r=function(e,t){if(Array.isArray(e))return $1(e,r,t);"function"==typeof e&&e.apply(i,(n.captures||[]).concat(t))},function(){e&&e.apply(i,arguments)}):Y1(n,r=function(e){return Array.isArray(e)?Y1(e,r):"function"==typeof e?e.apply(i,n.captures||[]):void("string"==typeof e&&t.resource&&t.resource[e].apply(i,n.captures||[]))})},X1.prototype.traverse=function(e,t,n,i,r){var a,o,s,l,c=[];function u(e){if(!r)return e;var t=function e(t){for(var n=[],i=0;i<t.length;i++)n[i]=Array.isArray(t[i])?e(t[i]):t[i];return n}(e);return t.matched=e.matched,t.captures=e.captures,t.after=e.after.filter(r),function e(t){for(var n=t.length-1;0<=n;n--)Array.isArray(t[n])?(e(t[n]),0===t[n].length&&t.splice(n,1)):r(t[n])||t.splice(n,1)}(t),t}if(t===this.delimiter&&n[e])return(l=[[n.before,n[e]].filter(Boolean)]).after=[n.after].filter(Boolean),l.matched=!0,l.captures=[],u(l);for(var d in n)if(n.hasOwnProperty(d)&&(!this._methods[d]||this._methods[d]&&"object"==typeof n[d]&&!Array.isArray(n[d]))){if(a=o=i+this.delimiter+d,this.strict||(o+="["+this.delimiter+"]?"),!(s=t.match(new RegExp("^"+o))))continue;if(s[0]&&s[0]==t&&n[d][e])return(l=[[n[d].before,n[d][e]].filter(Boolean)]).after=[n[d].after].filter(Boolean),l.matched=!0,l.captures=s.slice(1),this.recurse&&n===this.routes&&(l.push([n.before,n.on].filter(Boolean)),l.after=l.after.concat([n.after].filter(Boolean))),u(l);if((l=this.traverse(e,t,n[d],a)).matched)return 0<l.length&&(c=c.concat(l)),this.recurse&&(c.push([n[d].before,n[d].on].filter(Boolean)),l.after=l.after.concat([n[d].after].filter(Boolean)),n===this.routes&&(c.push([n.before,n.on].filter(Boolean)),l.after=l.after.concat([n.after].filter(Boolean)))),c.matched=!0,c.captures=l.captures,c.after=l.after,u(c)}return!1},X1.prototype.insert=function(e,t,n,i){var r,a,o,s;if(t=t.filter(function(e){return e&&0<e.length}),i=i||this.routes,(s=t.shift())&&-1==s.indexOf(".*[")&&/\:|\*/.test(s)&&!/\\d|\\w/.test(s)&&(s=a2(s,this.params)),0<t.length)return i[s]=i[s]||{},this.insert(e,t,n,i[s]);if(s||t.length||i!==this.routes){if(r=typeof i[s],a=Array.isArray(i[s]),i[s]&&!a&&"object"==r)switch(typeof i[s][e]){case"function":return void(i[s][e]=[i[s][e],n]);case"object":return void i[s][e].push(n);case"undefined":return void(i[s][e]=n)}else if("undefined"==r)return(o={})[e]=n,void(i[s]=o);throw new Error("Invalid route context: "+r)}switch(typeof i[e]){case"function":return void(i[e]=[i[e],n]);case"object":return void i[e].push(n);case"undefined":return void(i[e]=n)}},X1.prototype.remove=function(e,t,n,i){var r,a,o;if(t=t.filter(function(e){return e&&0<e.length}),i=i||this.routes,(o=t.shift())&&0!=o.indexOf("^.*")&&/\:|\*/.test(o)&&!/\\d|\\w/.test(o)&&(o=a2(o,this.params)),0<t.length&&i[o])return this.remove(e,t,n,i[o]);if(o||t.length||i!==this.routes){if(r=typeof i[o],a=Array.isArray(i[o]),i[o]&&!a&&"object"==r)switch(typeof i[o][e]){case"function":return;case"object":for(s=i[o][e],l=0;l<s.length;l++)if(s[l]==n)return void s.splice(l,1);return;case"undefined":return void delete i[o][e]}else if("undefined"==r)return void delete i[o]}else switch(typeof i[e]){case"function":return;case"object":for(var s=i[o][e],l=0;l<s.length;l++)if(s[l]==n)return void s.splice(l,1);return;case"undefined":return void delete i[e]}},X1.prototype.runlist=function(e){var t=this.every&&this.every.before?[this.every.before].concat(Z1(e)):Z1(e);return this.every&&this.every.on&&t.push(this.every.on),t.captures=e.captures,t.source=e.source,t},X1.prototype.mount=function(s,e){if(s&&"object"==typeof s&&!Array.isArray(s)){var l=this;for(var t in e=e||[],Array.isArray(e)||(e=e.split(l.delimiter)),s)s.hasOwnProperty(t)&&n(t,e.slice(0))}function n(e,t){var n=e,i=e.split(l.delimiter),r=typeof s[e],a=""===i[0]||!l._methods[i[0]],o=a?"on":n;if(a&&(n=n.slice((n.match(new RegExp("^"+l.delimiter))||[""])[0].length),i.shift()),a&&"object"==r&&!Array.isArray(s[e]))return t=t.concat(i),void l.mount(s[e],t);a&&(t=b2(t=t.concat(n.split(l.delimiter)),l.delimiter)),l.insert(o,t,s[e])}},X1.prototype.unmount=function(s,e){if(s&&"object"==typeof s&&!Array.isArray(s)){var l=this;for(var t in e=e||[],Array.isArray(e)||(e=e.split(l.delimiter)),s)s.hasOwnProperty(t)&&n(t,e.slice(0))}function n(e,t){var n=e,i=e.split(l.delimiter),r=typeof s[e],a=""===i[0]||!l._methods[i[0]],o=a?"on":n;if(a&&(n=n.slice((n.match(new RegExp("^"+l.delimiter))||[""])[0].length),i.shift()),a&&"object"==r&&!Array.isArray(s[e]))return t=t.concat(i),void l.unmount(s[e],t);a&&(t=b2(t=t.concat(n.split(l.delimiter)),l.delimiter)),l.remove(o,t,s[e])}},function a(o,s,l){function c(t,e){if(!s[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[t]={exports:{}};o[t][0].call(r.exports,function(e){return c(o[t][1][e]||e)},r,r.exports,a,o,s,l)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){var o=36e5,s=6e4,a=/[T ]/,l=/:/,c=/^(\d{4})-?/,u=/^([+-]\d{4,6})-/,d=/^-(\d{2})$/,f=/^-?(\d{3})$/,p=/^-?(\d{2})-?(\d{2})$/,h=/^-?W(\d{2})$/,m=/^-?W(\d{2})-?(\d{1})$/,g=/^(\d{2}([.,]\d*)?)$/,v=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,_=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,y=/([Z+-].*)$/,b=/^(Z)$/,S=/^([+-])(\d{2})$/,w=/^([+-])(\d{2}):?(\d{2})$/;function C(e){var t,n;if(!(n=c.exec(e)||u.exec(e)))return null;var i,r,a,o=n[1];if(t=parseInt(o,10),0===(e=e.slice(o.length)).length)return(r=new Date(0)).setUTCFullYear(t),r;if(i=d.exec(e))return r=new Date(0),a=parseInt(i[1],10)-1,r.setUTCFullYear(t,a),r;if(i=f.exec(e)){r=new Date(0);var s=parseInt(i[1],10);return r.setUTCFullYear(t,0,s),r}if(i=p.exec(e)){r=new Date(0),a=parseInt(i[1],10)-1;var l=parseInt(i[2],10);return r.setUTCFullYear(t,a,l),r}return(i=h.exec(e))?x(t,parseInt(i[1],10)-1):(i=m.exec(e))?x(t,parseInt(i[1],10)-1,parseInt(i[2],10)-1):null}function x(e,t,n){t=t||0,n=n||0;var i=new Date(0);i.setUTCFullYear(e,0,4);var r=7*t+n+1-i.getUTCDay();return i.setUTCDate(i.getUTCDate()+r),i}fp.dateFns={format:e("date-fns/format"),formatDistance:e("date-fns/formatDistance"),parse:function(e){if(this.isDate(e))return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var t=function(e){var t,n={},i=e.split(a);t=l.test(i[0])?(n.date=null,i[0]):(n.date=i[0],i[1]);if(t){var r=y.exec(t);r?(n.time=t.replace(r[1],""),n.timezone=r[1]):n.time=t}return n}(e),n=C(t.date);if(n){var i=function(e,t){t=t||C(e.date);var n,i,r,a=0;t&&(n=t.getTime(),e.time&&(a=function(e){var t,n,i;if(t=g.exec(e))return(n=parseFloat(t[1].replace(",",".")))%24*o;if(t=v.exec(e))return n=parseInt(t[1],10),i=parseFloat(t[2].replace(",",".")),n%24*o+i*s;if(t=_.exec(e)){n=parseInt(t[1],10),i=parseInt(t[2],10);var r=parseFloat(t[3].replace(",","."));return n%24*o+i*s+1e3*r}return null}(e.time)),i=e.timezone?r=function(e){var t,n;if(t=b.exec(e))return 0;if(t=S.exec(e))return n=60*parseInt(t[2],10),"+"===t[1]?-n:n;if(t=w.exec(e))return n=60*parseInt(t[2],10)+parseInt(t[3],10),"+"===t[1]?-n:n}(e.timezone):(i=new Date(n+a).getTimezoneOffset(),new Date(n+a+i*s).getTimezoneOffset()));return{timestamp:n,time:a,offset:i||0,parsedOffset:r}}(t,n);return new Date(i.timestamp+i.time+i.offset*s)}return new Date(e)},isDate:e("date-fns/isDate"),isValid:e("date-fns/isValid"),isToday:e("date-fns/isToday"),isTomorrow:e("date-fns/isTomorrow"),setMonth:e("date-fns/setMonth"),addYears:e("date-fns/addYears"),addDays:e("date-fns/addDays"),addHours:e("date-fns/addHours"),addMinutes:e("date-fns/addMinutes"),addSeconds:e("date-fns/addSeconds"),subDays:e("date-fns/subDays"),subHours:e("date-fns/subHours"),subMinutes:e("date-fns/subMinutes"),subSeconds:e("date-fns/subSeconds"),subMilliseconds:e("date-fns/subMilliseconds"),differenceInHours:e("date-fns/differenceInHours"),differenceInMinutes:e("date-fns/differenceInMinutes"),differenceInSeconds:e("date-fns/differenceInSeconds"),differenceInMilliseconds:e("date-fns/differenceInMilliseconds"),startOfDay:e("date-fns/startOfDay"),endOfDay:e("date-fns/endOfDay"),endOfMonth:e("date-fns/endOfMonth")}},{"date-fns/addDays":21,"date-fns/addHours":22,"date-fns/addMinutes":24,"date-fns/addSeconds":26,"date-fns/addYears":27,"date-fns/differenceInHours":30,"date-fns/differenceInMilliseconds":31,"date-fns/differenceInMinutes":32,"date-fns/differenceInSeconds":34,"date-fns/endOfDay":35,"date-fns/endOfMonth":36,"date-fns/format":37,"date-fns/formatDistance":38,"date-fns/isDate":40,"date-fns/isToday":42,"date-fns/isTomorrow":43,"date-fns/isValid":44,"date-fns/setMonth":55,"date-fns/startOfDay":56,"date-fns/subDays":57,"date-fns/subHours":58,"date-fns/subMilliseconds":59,"date-fns/subMinutes":60,"date-fns/subSeconds":61}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=e<0?"-":"",i=Math.abs(e).toString();for(;i.length<t;)i="0"+i;return n+i},t.exports=n.default},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})t.hasOwnProperty(n)&&(e[n]=t[n]);return e},t.exports=n.default},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,r.default)({},e)};var i,r=(i=e("../assign/index.js"))&&i.__esModule?i:{default:i};t.exports=n.default},{"../assign/index.js":3}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=u(e("../lightFormatters/index.js")),r=u(e("../../../_lib/getUTCDayOfYear/index.js")),o=u(e("../../../_lib/getUTCISOWeek/index.js")),i=u(e("../../../_lib/getUTCISOWeekYear/index.js")),s=u(e("../../../_lib/getUTCWeek/index.js")),l=u(e("../../../_lib/getUTCWeekYear/index.js")),c=u(e("../../addLeadingZeros/index.js"));function u(e){return e&&e.__esModule?e:{default:e}}var d="midnight",f="noon",p="morning",h="afternoon",m="evening",g="night";function v(e,t){var n=0<e?"-":"+",i=Math.abs(e),r=Math.floor(i/60),a=i%60;if(0==a)return n+String(r);var o=t||"";return n+String(r)+o+(0,c.default)(a,2)}function _(e,t){return e%60!=0?y(e,t):(0<e?"-":"+")+(0,c.default)(Math.abs(e)/60,2)}function y(e,t){var n=t||"",i=0<e?"-":"+",r=Math.abs(e);return i+(0,c.default)(Math.floor(r/60),2)+n+(0,c.default)(r%60,2)}var b={G:function(e,t,n){var i=0<e.getUTCFullYear()?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if("yo"!==t)return a.default.y(e,t);var i=e.getUTCFullYear(),r=0<i?i:1-i;return n.ordinalNumber(r,{unit:"year"})},Y:function(e,t,n,i){var r=(0,l.default)(e,i),a=0<r?r:1-r;if("YY"!==t)return"Yo"===t?n.ordinalNumber(a,{unit:"year"}):(0,c.default)(a,t.length);var o=a%100;return(0,c.default)(o,2)},R:function(e,t){var n=(0,i.default)(e);return(0,c.default)(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return(0,c.default)(n,t.length)},Q:function(e,t,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return(0,c.default)(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return(0,c.default)(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){var i=e.getUTCMonth();switch(t){case"M":case"MM":return a.default.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return(0,c.default)(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){var r=(0,s.default)(e,i);return"wo"===t?n.ordinalNumber(r,{unit:"week"}):(0,c.default)(r,t.length)},I:function(e,t,n){var i=(0,o.default)(e);return"Io"===t?n.ordinalNumber(i,{unit:"week"}):(0,c.default)(i,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):a.default.d(e,t)},D:function(e,t,n){var i=(0,r.default)(e);return"Do"===t?n.ordinalNumber(i,{unit:"dayOfYear"}):(0,c.default)(i,t.length)},E:function(e,t,n){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){var r=e.getUTCDay(),a=(r-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return(0,c.default)(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){var r=e.getUTCDay(),a=(r-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return(0,c.default)(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){var i=e.getUTCDay(),r=0===i?7:i;switch(t){case"i":return String(r);case"ii":return(0,c.default)(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){var i=1<=e.getUTCHours()/12?"pm":"am";switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){var i,r=e.getUTCHours();switch(i=12===r?f:0===r?d:1<=r/12?"pm":"am",t){case"b":case"bb":case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){var i,r=e.getUTCHours();switch(i=17<=r?m:12<=r?h:4<=r?p:g,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"!==t)return a.default.h(e,t);var i=e.getUTCHours()%12;return 0===i&&(i=12),n.ordinalNumber(i,{unit:"hour"})},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):a.default.H(e,t)},K:function(e,t,n){var i=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(i,{unit:"hour"}):(0,c.default)(i,t.length)},k:function(e,t,n){var i=e.getUTCHours();return 0===i&&(i=24),"ko"===t?n.ordinalNumber(i,{unit:"hour"}):(0,c.default)(i,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):a.default.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):a.default.s(e,t)},S:function(e,t){return a.default.S(e,t)},X:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return _(r);case"XXXX":case"XX":return y(r);case"XXXXX":case"XXX":default:return y(r,":")}},x:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();switch(t){case"x":return _(r);case"xxxx":case"xx":return y(r);case"xxxxx":case"xxx":default:return y(r,":")}},O:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+v(r,":");case"OOOO":default:return"GMT"+y(r,":")}},z:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+v(r,":");case"zzzz":default:return"GMT"+y(r,":")}},t:function(e,t,n,i){var r=i._originalDate||e,a=Math.floor(r.getTime()/1e3);return(0,c.default)(a,t.length)},T:function(e,t,n,i){var r=(i._originalDate||e).getTime();return(0,c.default)(r,t.length)}};n.default=b,t.exports=n.default},{"../../../_lib/getUTCDayOfYear/index.js":9,"../../../_lib/getUTCISOWeek/index.js":10,"../../../_lib/getUTCISOWeekYear/index.js":11,"../../../_lib/getUTCWeek/index.js":12,"../../../_lib/getUTCWeekYear/index.js":13,"../../addLeadingZeros/index.js":2,"../lightFormatters/index.js":6}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,a=(i=e("../../addLeadingZeros/index.js"))&&i.__esModule?i:{default:i};var r={y:function(e,t){var n=e.getUTCFullYear(),i=0<n?n:1-n;return(0,a.default)("yy"===t?i%100:i,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):(0,a.default)(n+1,2)},d:function(e,t){return(0,a.default)(e.getUTCDate(),t.length)},a:function(e,t){var n=1<=e.getUTCHours()/12?"pm":"am";switch(t){case"a":case"aa":case"aaa":return n.toUpperCase();case"aaaaa":return n[0];case"aaaa":default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return(0,a.default)(e.getUTCHours()%12||12,t.length)},H:function(e,t){return(0,a.default)(e.getUTCHours(),t.length)},m:function(e,t){return(0,a.default)(e.getUTCMinutes(),t.length)},s:function(e,t){return(0,a.default)(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,i=e.getUTCMilliseconds(),r=Math.floor(i*Math.pow(10,n-3));return(0,a.default)(r,t.length)}};n.default=r,t.exports=n.default},{"../../addLeadingZeros/index.js":2}],7:[function(e,t,n){"use strict";function o(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function s(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={p:s,P:function(e,t){var n,i=e.match(/(P+)(p+)?/),r=i[1],a=i[2];if(!a)return o(e,t);switch(r){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",o(r,t)).replace("{{time}}",s(a,t))}};n.default=i,t.exports=n.default},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=new Date(e.getTime()),n=Math.ceil(t.getTimezoneOffset());t.setSeconds(0,0);var i=0<n?(r+a(t))%r:a(t);return n*r+i};var r=6e4;function a(e){return e.getTime()%r}t.exports=n.default},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,o.default)(1,arguments);var t=(0,a.default)(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var i=t.getTime(),r=n-i;return Math.floor(r/s)+1};var a=i(e("../../toDate/index.js")),o=i(e("../requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}var s=864e5;t.exports=n.default},{"../../toDate/index.js":62,"../requiredArgs/index.js":15}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,o.default)(1,arguments);var t=(0,i.default)(e),n=(0,r.default)(t).getTime()-(0,a.default)(t).getTime();return Math.round(n/l)+1};var i=s(e("../../toDate/index.js")),r=s(e("../startOfUTCISOWeek/index.js")),a=s(e("../startOfUTCISOWeekYear/index.js")),o=s(e("../requiredArgs/index.js"));function s(e){return e&&e.__esModule?e:{default:e}}var l=6048e5;t.exports=n.default},{"../../toDate/index.js":62,"../requiredArgs/index.js":15,"../startOfUTCISOWeek/index.js":16,"../startOfUTCISOWeekYear/index.js":17}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,c.default)(1,arguments);var t=(0,s.default)(e),n=t.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(n+1,0,4),i.setUTCHours(0,0,0,0);var r=(0,l.default)(i),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var o=(0,l.default)(a);return t.getTime()>=r.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1};var s=i(e("../../toDate/index.js")),l=i(e("../startOfUTCISOWeek/index.js")),c=i(e("../requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../../toDate/index.js":62,"../requiredArgs/index.js":15,"../startOfUTCISOWeek/index.js":16}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,s.default)(1,arguments);var n=(0,r.default)(e),i=(0,a.default)(n,t).getTime()-(0,o.default)(n,t).getTime();return Math.round(i/l)+1};var r=i(e("../../toDate/index.js")),a=i(e("../startOfUTCWeek/index.js")),o=i(e("../startOfUTCWeekYear/index.js")),s=i(e("../requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}var l=6048e5;t.exports=n.default},{"../../toDate/index.js":62,"../requiredArgs/index.js":15,"../startOfUTCWeek/index.js":18,"../startOfUTCWeekYear/index.js":19}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,g.default)(1,arguments);var n=(0,h.default)(e,t),i=n.getUTCFullYear(),r=t||{},a=r.locale,o=a&&a.options&&a.options.firstWeekContainsDate,s=null==o?1:(0,p.default)(o),l=null==r.firstWeekContainsDate?s:(0,p.default)(r.firstWeekContainsDate);if(!(1<=l&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(i+1,0,l),c.setUTCHours(0,0,0,0);var u=(0,m.default)(c,t),d=new Date(0);d.setUTCFullYear(i,0,l),d.setUTCHours(0,0,0,0);var f=(0,m.default)(d,t);return n.getTime()>=u.getTime()?i+1:n.getTime()>=f.getTime()?i:i-1};var p=i(e("../toInteger/index.js")),h=i(e("../../toDate/index.js")),m=i(e("../startOfUTCWeek/index.js")),g=i(e("../requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../../toDate/index.js":62,"../requiredArgs/index.js":15,"../startOfUTCWeek/index.js":18,"../toInteger/index.js":20}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isProtectedDayOfYearToken=function(e){return-1!==i.indexOf(e)},n.isProtectedWeekYearToken=function(e){return-1!==r.indexOf(e)},n.throwProtectedError=function(e,t,n){{if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}};var i=["D","DD"],r=["YY","YYYY"]},{}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(t.length<e)throw new TypeError(e+" argument"+(1<e?"s":"")+" required, but only "+t.length+" present")},t.exports=n.default},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,a.default)(1,arguments);var t=(0,r.default)(e),n=t.getUTCDay(),i=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t};var r=i(e("../../toDate/index.js")),a=i(e("../requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../../toDate/index.js":62,"../requiredArgs/index.js":15}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,a.default)(1,arguments);var t=(0,i.default)(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),(0,r.default)(n)};var i=o(e("../getUTCISOWeekYear/index.js")),r=o(e("../startOfUTCISOWeek/index.js")),a=o(e("../requiredArgs/index.js"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../getUTCISOWeekYear/index.js":11,"../requiredArgs/index.js":15,"../startOfUTCISOWeek/index.js":16}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,f.default)(1,arguments);var n=t||{},i=n.locale,r=i&&i.options&&i.options.weekStartsOn,a=null==r?0:(0,u.default)(r),o=null==n.weekStartsOn?a:(0,u.default)(n.weekStartsOn);if(!(0<=o&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=(0,d.default)(e),l=s.getUTCDay(),c=(l<o?7:0)+l-o;return s.setUTCDate(s.getUTCDate()-c),s.setUTCHours(0,0,0,0),s};var u=i(e("../toInteger/index.js")),d=i(e("../../toDate/index.js")),f=i(e("../requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../../toDate/index.js":62,"../requiredArgs/index.js":15,"../toInteger/index.js":20}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,f.default)(1,arguments);var n=t||{},i=n.locale,r=i&&i.options&&i.options.firstWeekContainsDate,a=null==r?1:(0,c.default)(r),o=null==n.firstWeekContainsDate?a:(0,c.default)(n.firstWeekContainsDate),s=(0,u.default)(e,t),l=new Date(0);return l.setUTCFullYear(s,0,o),l.setUTCHours(0,0,0,0),(0,d.default)(l,t)};var c=i(e("../toInteger/index.js")),u=i(e("../getUTCWeekYear/index.js")),d=i(e("../startOfUTCWeek/index.js")),f=i(e("../requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../getUTCWeekYear/index.js":13,"../requiredArgs/index.js":15,"../startOfUTCWeek/index.js":18,"../toInteger/index.js":20}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);if(isNaN(t))return t;return t<0?Math.ceil(t):Math.floor(t)},t.exports=n.default},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,o.default)(2,arguments);var n=(0,a.default)(e),i=(0,r.default)(t);if(isNaN(i))return new Date(NaN);return i&&n.setDate(n.getDate()+i),n};var r=i(e("../_lib/toInteger/index.js")),a=i(e("../toDate/index.js")),o=i(e("../_lib/requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../_lib/toInteger/index.js":20,"../toDate/index.js":62}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(2,arguments);var n=(0,i.default)(t);return(0,r.default)(e,n*s)};var i=o(e("../_lib/toInteger/index.js")),r=o(e("../addMilliseconds/index.js")),a=o(e("../_lib/requiredArgs/index.js"));function o(e){return e&&e.__esModule?e:{default:e}}var s=36e5;t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../_lib/toInteger/index.js":20,"../addMilliseconds/index.js":23}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,o.default)(2,arguments);var n=(0,a.default)(e).getTime(),i=(0,r.default)(t);return new Date(n+i)};var r=i(e("../_lib/toInteger/index.js")),a=i(e("../toDate/index.js")),o=i(e("../_lib/requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../_lib/toInteger/index.js":20,"../toDate/index.js":62}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(2,arguments);var n=(0,i.default)(t);return(0,r.default)(e,n*s)};var i=o(e("../_lib/toInteger/index.js")),r=o(e("../addMilliseconds/index.js")),a=o(e("../_lib/requiredArgs/index.js"));function o(e){return e&&e.__esModule?e:{default:e}}var s=6e4;t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../_lib/toInteger/index.js":20,"../addMilliseconds/index.js":23}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,c.default)(2,arguments);var n=(0,l.default)(e),i=(0,s.default)(t);if(isNaN(i))return new Date(NaN);if(!i)return n;var r=n.getDate(),a=new Date(n.getTime());a.setMonth(n.getMonth()+i+1,0);var o=a.getDate();return o<=r?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)};var s=i(e("../_lib/toInteger/index.js")),l=i(e("../toDate/index.js")),c=i(e("../_lib/requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../_lib/toInteger/index.js":20,"../toDate/index.js":62}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(2,arguments);var n=(0,i.default)(t);return(0,r.default)(e,1e3*n)};var i=o(e("../_lib/toInteger/index.js")),r=o(e("../addMilliseconds/index.js")),a=o(e("../_lib/requiredArgs/index.js"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../_lib/toInteger/index.js":20,"../addMilliseconds/index.js":23}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(2,arguments);var n=(0,i.default)(t);return(0,r.default)(e,12*n)};var i=o(e("../_lib/toInteger/index.js")),r=o(e("../addMonths/index.js")),a=o(e("../_lib/requiredArgs/index.js"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../_lib/toInteger/index.js":20,"../addMonths/index.js":25}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,o.default)(2,arguments);var n=(0,a.default)(e),i=(0,a.default)(t),r=n.getTime()-i.getTime();return r<0?-1:0<r?1:r};var a=i(e("../toDate/index.js")),o=i(e("../_lib/requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../toDate/index.js":62}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,s.default)(2,arguments);var n=(0,o.default)(e),i=(0,o.default)(t),r=n.getFullYear()-i.getFullYear(),a=n.getMonth()-i.getMonth();return 12*r+a};var o=i(e("../toDate/index.js")),s=i(e("../_lib/requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../toDate/index.js":62}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,r.default)(2,arguments);var n=(0,i.default)(e,t)/o;return 0<n?Math.floor(n):Math.ceil(n)};var i=a(e("../differenceInMilliseconds/index.js")),r=a(e("../_lib/requiredArgs/index.js"));function a(e){return e&&e.__esModule?e:{default:e}}var o=36e5;t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../differenceInMilliseconds/index.js":31}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(2,arguments);var n=(0,r.default)(e),i=(0,r.default)(t);return n.getTime()-i.getTime()};var r=i(e("../toDate/index.js")),a=i(e("../_lib/requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../toDate/index.js":62}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,r.default)(2,arguments);var n=(0,i.default)(e,t)/o;return 0<n?Math.floor(n):Math.ceil(n)};var i=a(e("../differenceInMilliseconds/index.js")),r=a(e("../_lib/requiredArgs/index.js"));function a(e){return e&&e.__esModule?e:{default:e}}var o=6e4;t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../differenceInMilliseconds/index.js":31}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,d.default)(2,arguments);var n=(0,l.default)(e),i=(0,l.default)(t),r=(0,u.default)(n,i),a=Math.abs((0,c.default)(n,i));n.setMonth(n.getMonth()-r*a);var o=(0,u.default)(n,i)===-r,s=r*(a-o);return 0==s?0:s};var l=i(e("../toDate/index.js")),c=i(e("../differenceInCalendarMonths/index.js")),u=i(e("../compareAsc/index.js")),d=i(e("../_lib/requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../compareAsc/index.js":28,"../differenceInCalendarMonths/index.js":29,"../toDate/index.js":62}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,r.default)(2,arguments);var n=(0,i.default)(e,t)/1e3;return 0<n?Math.floor(n):Math.ceil(n)};var i=a(e("../differenceInMilliseconds/index.js")),r=a(e("../_lib/requiredArgs/index.js"));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../differenceInMilliseconds/index.js":31}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,r.default)(1,arguments);var t=(0,i.default)(e);return t.setHours(23,59,59,999),t};var i=a(e("../toDate/index.js")),r=a(e("../_lib/requiredArgs/index.js"));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../toDate/index.js":62}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,r.default)(1,arguments);var t=(0,i.default)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t};var i=a(e("../toDate/index.js")),r=a(e("../_lib/requiredArgs/index.js"));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../toDate/index.js":62}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(i,r,e){(0,E.default)(2,arguments);var t=String(r),a=e||{},o=a.locale||v.default,n=o.options&&o.options.firstWeekContainsDate,s=null==n?1:(0,x.default)(n),l=null==a.firstWeekContainsDate?s:(0,x.default)(a.firstWeekContainsDate);if(!(1<=l&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=o.options&&o.options.weekStartsOn,u=null==c?0:(0,x.default)(c),d=null==a.weekStartsOn?u:(0,x.default)(a.weekStartsOn);if(!(0<=d&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var f=(0,y.default)(i);if(!(0,g.default)(f))throw new RangeError("Invalid time value");var p=(0,w.default)(f),h=(0,_.default)(f,p),m={firstWeekContainsDate:l,weekStartsOn:d,locale:o,_originalDate:f};return t.match(I).map(function(e){var t=e[0];return"p"!==t&&"P"!==t?e:(0,S.default[t])(e,o.formatLong,m)}).join("").match(T).map(function(e){if("''"===e)return"'";var t=e[0];if("'"===t)return function(e){return e.match(M)[1].replace(D,"'")}(e);var n=b.default[t];if(n)return!a.useAdditionalWeekYearTokens&&(0,C.isProtectedWeekYearToken)(e)&&(0,C.throwProtectedError)(e,r,i),!a.useAdditionalDayOfYearTokens&&(0,C.isProtectedDayOfYearToken)(e)&&(0,C.throwProtectedError)(e,r,i),n(h,e,o.localize,m);if(t.match(k))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return e}).join("")};var g=i(e("../isValid/index.js")),v=i(e("../locale/en-US/index.js")),_=i(e("../subMilliseconds/index.js")),y=i(e("../toDate/index.js")),b=i(e("../_lib/format/formatters/index.js")),S=i(e("../_lib/format/longFormatters/index.js")),w=i(e("../_lib/getTimezoneOffsetInMilliseconds/index.js")),C=e("../_lib/protectedTokens/index.js"),x=i(e("../_lib/toInteger/index.js")),E=i(e("../_lib/requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}var T=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,I=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,M=/^'([^]*?)'?$/,D=/''/g,k=/[a-zA-Z]/;t.exports=n.default},{"../_lib/format/formatters/index.js":5,"../_lib/format/longFormatters/index.js":7,"../_lib/getTimezoneOffsetInMilliseconds/index.js":8,"../_lib/protectedTokens/index.js":14,"../_lib/requiredArgs/index.js":15,"../_lib/toInteger/index.js":20,"../isValid/index.js":44,"../locale/en-US/index.js":54,"../subMilliseconds/index.js":59,"../toDate/index.js":62}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){(0,E.default)(2,arguments);var i=n||{},r=i.locale||S.default;if(!r.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=(0,_.default)(e,t);if(isNaN(a))throw new RangeError("Invalid time value");var o,s,l=(0,C.default)(i);l.addSuffix=Boolean(i.addSuffix),s=0<(l.comparison=a)?(o=(0,w.default)(t),(0,w.default)(e)):(o=(0,w.default)(e),(0,w.default)(t));var c,u=(0,b.default)(s,o),d=((0,x.default)(s)-(0,x.default)(o))/1e3,f=Math.round((u-d)/60);{if(f<2)return i.includeSeconds?u<5?r.formatDistance("lessThanXSeconds",5,l):u<10?r.formatDistance("lessThanXSeconds",10,l):u<20?r.formatDistance("lessThanXSeconds",20,l):u<40?r.formatDistance("halfAMinute",null,l):u<60?r.formatDistance("lessThanXMinutes",1,l):r.formatDistance("xMinutes",1,l):0===f?r.formatDistance("lessThanXMinutes",1,l):r.formatDistance("xMinutes",f,l);if(f<45)return r.formatDistance("xMinutes",f,l);if(f<90)return r.formatDistance("aboutXHours",1,l);if(f<T){var p=Math.round(f/60);return r.formatDistance("aboutXHours",p,l)}if(f<I)return r.formatDistance("xDays",1,l);if(f<M){var h=Math.round(f/T);return r.formatDistance("xDays",h,l)}if(f<D)return c=Math.round(f/M),r.formatDistance("aboutXMonths",c,l)}{if((c=(0,y.default)(s,o))<12){var m=Math.round(f/M);return r.formatDistance("xMonths",m,l)}var g=c%12,v=Math.floor(c/12);return g<3?r.formatDistance("aboutXYears",v,l):g<9?r.formatDistance("overXYears",v,l):r.formatDistance("almostXYears",v+1,l)}};var _=i(e("../compareAsc/index.js")),y=i(e("../differenceInMonths/index.js")),b=i(e("../differenceInSeconds/index.js")),S=i(e("../locale/en-US/index.js")),w=i(e("../toDate/index.js")),C=i(e("../_lib/cloneObject/index.js")),x=i(e("../_lib/getTimezoneOffsetInMilliseconds/index.js")),E=i(e("../_lib/requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}var T=1440,I=2520,M=43200,D=86400;t.exports=n.default},{"../_lib/cloneObject/index.js":4,"../_lib/getTimezoneOffsetInMilliseconds/index.js":8,"../_lib/requiredArgs/index.js":15,"../compareAsc/index.js":28,"../differenceInMonths/index.js":33,"../differenceInSeconds/index.js":34,"../locale/en-US/index.js":54,"../toDate/index.js":62}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,o.default)(1,arguments);var t=(0,a.default)(e),n=t.getFullYear(),i=t.getMonth(),r=new Date(0);return r.setFullYear(n,i+1,0),r.setHours(0,0,0,0),r.getDate()};var a=i(e("../toDate/index.js")),o=i(e("../_lib/requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../toDate/index.js":62}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,r.default)(1,arguments),e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)};var i,r=(i=e("../_lib/requiredArgs/index.js"))&&i.__esModule?i:{default:i};t.exports=n.default},{"../_lib/requiredArgs/index.js":15}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(2,arguments);var n=(0,r.default)(e),i=(0,r.default)(t);return n.getTime()===i.getTime()};var r=i(e("../startOfDay/index.js")),a=i(e("../_lib/requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../startOfDay/index.js":56}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,r.default)(1,arguments),(0,i.default)(e,Date.now())};var i=a(e("../isSameDay/index.js")),r=a(e("../_lib/requiredArgs/index.js"));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../isSameDay/index.js":41}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,a.default)(1,arguments),(0,r.default)(e,(0,i.default)(Date.now(),1))};var i=o(e("../addDays/index.js")),r=o(e("../isSameDay/index.js")),a=o(e("../_lib/requiredArgs/index.js"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../addDays/index.js":21,"../isSameDay/index.js":41}],44:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,r.default)(1,arguments);var t=(0,i.default)(e);return!isNaN(t)};var i=a(e("../toDate/index.js")),r=a(e("../_lib/requiredArgs/index.js"));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../toDate/index.js":62}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(i){return function(e){var t=e||{},n=t.width?String(t.width):i.defaultWidth;return i.formats[n]||i.formats[i.defaultWidth]}},t.exports=n.default},{}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(l){return function(e,t){var n,i=t||{};if("formatting"===(i.context?String(i.context):"standalone")&&l.formattingValues){var r=l.defaultFormattingWidth||l.defaultWidth,a=i.width?String(i.width):r;n=l.formattingValues[a]||l.formattingValues[r]}else{var o=l.defaultWidth,s=i.width?String(i.width):l.defaultWidth;n=l.values[s]||l.values[o]}return n[l.argumentCallback?l.argumentCallback(e):e]}},t.exports=n.default},{}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(u){return function(e,t){var n=String(e),i=t||{},r=i.width,a=r&&u.matchPatterns[r]||u.matchPatterns[u.defaultMatchWidth],o=n.match(a);if(!o)return null;var s,l=o[0],c=r&&u.parsePatterns[r]||u.parsePatterns[u.defaultParseWidth];return s="[object Array]"===Object.prototype.toString.call(c)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(c,function(e){return e.test(l)}):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(c,function(e){return e.test(l)}),s=u.valueCallback?u.valueCallback(s):s,{value:s=i.valueCallback?i.valueCallback(s):s,rest:n.slice(l.length)}}},t.exports=n.default},{}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(l){return function(e,t){var n=String(e),i=t||{},r=n.match(l.matchPattern);if(!r)return null;var a=r[0],o=n.match(l.parsePattern);if(!o)return null;var s=l.valueCallback?l.valueCallback(o[0]):o[0];return{value:s=i.valueCallback?i.valueCallback(s):s,rest:n.slice(a.length)}}},t.exports=n.default},{}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var i;n=n||{},i="string"==typeof r[e]?r[e]:1===t?r[e].one:r[e].other.replace("{{count}}",t);if(n.addSuffix)return 0<n.comparison?"in "+i:i+" ago";return i};var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};t.exports=n.default},{}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("../../../_lib/buildFormatLongFn/index.js"))&&i.__esModule?i:{default:i};var a={date:(0,r.default)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,r.default)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,r.default)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};n.default=a,t.exports=n.default},{"../../../_lib/buildFormatLongFn/index.js":45}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,i){return r[e]};var r={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};t.exports=n.default},{}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("../../../_lib/buildLocalizeFn/index.js"))&&i.__esModule?i:{default:i};var a={ordinalNumber:function(e,t){var n=Number(e),i=n%100;if(20<i||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:(0,r.default)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,r.default)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:(0,r.default)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,r.default)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,r.default)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};n.default=a,t.exports=n.default},{"../../../_lib/buildLocalizeFn/index.js":46}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=a(e("../../../_lib/buildMatchPatternFn/index.js")),r=a(e("../../../_lib/buildMatchFn/index.js"));function a(e){return e&&e.__esModule?e:{default:e}}var o={ordinalNumber:(0,i.default)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,r.default)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,r.default)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,r.default)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,r.default)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,r.default)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};n.default=o,t.exports=n.default},{"../../../_lib/buildMatchFn/index.js":47,"../../../_lib/buildMatchPatternFn/index.js":48}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=l(e("./_lib/formatDistance/index.js")),r=l(e("./_lib/formatLong/index.js")),a=l(e("./_lib/formatRelative/index.js")),o=l(e("./_lib/localize/index.js")),s=l(e("./_lib/match/index.js"));function l(e){return e&&e.__esModule?e:{default:e}}var c={code:"en-US",formatDistance:i.default,formatLong:r.default,formatRelative:a.default,localize:o.default,match:s.default,options:{weekStartsOn:0,firstWeekContainsDate:1}};n.default=c,t.exports=n.default},{"./_lib/formatDistance/index.js":49,"./_lib/formatLong/index.js":50,"./_lib/formatRelative/index.js":51,"./_lib/localize/index.js":52,"./_lib/match/index.js":53}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,d.default)(2,arguments);var n=(0,c.default)(e),i=(0,l.default)(t),r=n.getFullYear(),a=n.getDate(),o=new Date(0);o.setFullYear(r,i,15),o.setHours(0,0,0,0);var s=(0,u.default)(o);return n.setMonth(i,Math.min(a,s)),n};var l=i(e("../_lib/toInteger/index.js")),c=i(e("../toDate/index.js")),u=i(e("../getDaysInMonth/index.js")),d=i(e("../_lib/requiredArgs/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../_lib/toInteger/index.js":20,"../getDaysInMonth/index.js":39,"../toDate/index.js":62}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,r.default)(1,arguments);var t=(0,i.default)(e);return t.setHours(0,0,0,0),t};var i=a(e("../toDate/index.js")),r=a(e("../_lib/requiredArgs/index.js"));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../toDate/index.js":62}],57:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(2,arguments);var n=(0,i.default)(t);return(0,r.default)(e,-n)};var i=o(e("../_lib/toInteger/index.js")),r=o(e("../addDays/index.js")),a=o(e("../_lib/requiredArgs/index.js"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../_lib/toInteger/index.js":20,"../addDays/index.js":21}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(2,arguments);var n=(0,i.default)(t);return(0,r.default)(e,-n)};var i=o(e("../_lib/toInteger/index.js")),r=o(e("../addHours/index.js")),a=o(e("../_lib/requiredArgs/index.js"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../_lib/toInteger/index.js":20,"../addHours/index.js":22}],59:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(2,arguments);var n=(0,i.default)(t);return(0,r.default)(e,-n)};var i=o(e("../_lib/toInteger/index.js")),r=o(e("../addMilliseconds/index.js")),a=o(e("../_lib/requiredArgs/index.js"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../_lib/toInteger/index.js":20,"../addMilliseconds/index.js":23}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(2,arguments);var n=(0,i.default)(t);return(0,r.default)(e,-n)};var i=o(e("../_lib/toInteger/index.js")),r=o(e("../addMinutes/index.js")),a=o(e("../_lib/requiredArgs/index.js"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../_lib/toInteger/index.js":20,"../addMinutes/index.js":24}],61:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(2,arguments);var n=(0,i.default)(t);return(0,r.default)(e,-n)};var i=o(e("../_lib/toInteger/index.js")),r=o(e("../addSeconds/index.js")),a=o(e("../_lib/requiredArgs/index.js"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"../_lib/requiredArgs/index.js":15,"../_lib/toInteger/index.js":20,"../addSeconds/index.js":26}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,r.default)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))};var i,r=(i=e("../_lib/requiredArgs/index.js"))&&i.__esModule?i:{default:i};t.exports=n.default},{"../_lib/requiredArgs/index.js":15}]},{},[1]);
/*
 * JSS v0.6 - JavaScript Stylesheets
 * https://github.com/Box9/jss
 *
 * Copyright (c) 2011, David Tang
 * MIT Licensed (http://www.opensource.org/licenses/mit-license.php)
 */
var jss=function(){var o,i=/((?:\.|#)[^\.\s#]+)((?:\.|#)[^\.\s#]+)/g,s=/(::)(before|after|first-line|first-letter|selection)/,l=/([^:])(:)(before|after|first-line|first-letter|selection)/;function a(e,t){var n=e.cssRules||e.rules||[],i=[];t=t.toLowerCase();for(var r=0;r<n.length;r++){var a=n[r].selectorText;!a||a!=t&&a!=m(t)&&a!=g(t)||i.push({sheet:e,index:r,style:n[r].style})}return i}function r(e,t){var n=e.cssRules||e.rules||[],i=n.length;return function(e,t,n,i){var r,a;if(s.exec(t))a=d(r=t);else{if(!l.exec(t))return!1;r=u(t),a=t}o||(c(e,r,i),n.length<=i&&(o=!0));o&&c(e,a,i);return!0}(e,t,n,i)||c(e,t,i),{sheet:e,index:i,style:n[i].style}}function c(e,t,n){e.insertRule?e.insertRule(t+" { }",n):e.addRule(t,null,n)}function u(e){return e.replace(l,function(e,t,n,i){return t+"::"+i})}function d(e){return e.replace(s,function(e,t,n){return":"+n})}function f(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function p(e){for(var t={},n=0;n<e.length;n++)f(t,h(e[n].style));return t}function h(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=e[e[n].replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})];return t}function m(e){for(var t="",n=0;null!=(match=i.exec(e))&&""!==match[0];)t+=e.substring(n,match.index),t+=e.substr(match.index+match[1].length,match[2].length),t+=e.substr(match.index,match[1].length),n=match.index+match[0].length;return t+=e.substr(n)}function g(e){return s.exec(e)?d(e):e}function v(e,t){for(var n in t){var i=t[n],r=i.indexOf(" !important");e.style.removeProperty(n),0<r?e.style.setProperty(n,i.substr(0,r),"important"):e.style.setProperty(n,i)}}function _(e){var t={};for(var n in e)t[n.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})]=e[n];return t}function t(e){this.doc=e,this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.sheets=this.doc.styleSheets||[]}t.prototype={get:function(e){if(!this.defaultSheet)return{};if(e)return p(a(this.defaultSheet,e));var t=function(e){for(var t=e.cssRules||e.rules||[],n={},i=0;i<t.length;i++){var r=u(t[i].selectorText);n[r]||(n[r]=[]),n[r].push({sheet:e,index:i,style:t[i].style})}return n}(this.defaultSheet);for(e in t)t[e]=p(t[e]);return t},getAll:function(e){for(var t={},n=0;n<this.sheets.length;n++)f(t,p(a(this.sheets[n],e)));return t},set:function(e,t){this.defaultSheet||(this.defaultSheet=this._createSheet()),t=_(t);var n=a(this.defaultSheet,e);n.length||(n=[r(this.defaultSheet,e)]);for(var i=0;i<n.length;i++)v(n[i],t)},remove:function(e){if(this.defaultSheet){if(!e)return this._removeSheet(this.defaultSheet),void delete this.defaultSheet;for(var t,n,i=a(this.defaultSheet,e),r=0;r<i.length;r++)t=i[r],n=void 0,(n=t.sheet).deleteRule?n.deleteRule(t.index):n.removeRule&&n.removeRule(t.index);return i.length}},_createSheet:function(){var e=this.doc.createElement("style");return e.type="text/css",e.rel="stylesheet",this.head.appendChild(e),e.sheet},_removeSheet:function(e){var t=e.ownerNode;t.parentNode.removeChild(t)}};var e=new t(document);return e.forDocument=function(e){return new t(e)},e}(),Rra,Sra,LEa,MEa,AIa,BIa,$Ja,_Ja,aKa,kKa,xRa,yRa,k9a,l9a,sjb,tjb,ujb,vjb,fnb,lyb,dzb,ezb,fzb,NFb,OFb,MFb,hRb,iRb,OSb,PSb,QSb,RSb,SSb,HTb,JTb,XTb,YTb,ZTb,p2b,q2b;function zRa(e){if(yRa[e])return yRa[e].exports;var t=yRa[e]={i:e,l:!1,exports:{}};return xRa[e].call(t.exports,t,t.exports,zRa),t.l=!0,t.exports}function lIb(e){return e}function mIb(e){return"string"==typeof e?e.toLowerCase():e}function PFb(e){if(this.__googleLoaderTimeoutId||e){clearTimeout(this.__googleLoaderTimeoutId),delete this.__googleLoaderTimeoutId;function t(e){clearTimeout(n),e=_.getObject(e),i.latitude=_.isObject(e.coords)?e.coords.latitude:e.latitude,i.longitude=_.isObject(e.coords)?e.coords.longitude:e.longitude,fpUtil.__deferredGoogleLoader&&(fpUtil.__deferredGoogleLoader.resolve(i),delete fpUtil.__deferredGoogleLoader)}var n,i={};window.google&&google.loader&&google.loader.ClientLocation?t(google.loader.ClientLocation):navigator.geolocation&&("https:"==window.location.protocol||fp.isLocal())?(navigator.geolocation.getCurrentPosition(t,t,{enableHighAccuracy:!1,maximumAge:36e5,timeout:this.__clientLocationTimeout}),this.__clientLocationTimeout&&(n=_.delay(t,this.__clientLocationTimeout))):t()}}"undefined"!=typeof module&&module.exports&&(module.exports=jss),Rra=this,Sra=function(){var u,d,o={};o.version="0.2.0";var t,n,f=o.settings={minimum:.08,easing:"linear",positionUsing:"",speed:350,trickle:!0,trickleSpeed:250,showSpinner:!0,barSelector:'[data-role="loading-bar"]',spinnerSelector:'[data-role="spinner"]',parent:"body",template:'<div class="fp-nprogress-bar" data-role="loading-bar"><div class="fp-nprogress-peg"></div></div><div class="fp-nprogress-spinner" data-role="spinner"><div class="fp-nprogress-spinner-icon"></div></div>'};function s(e,t,n){return e<t?t:n<e?n:e}function l(e,t,n,i){var r,a,o=function(e){return 100*(-1+e)}(e),s=window.getComputedStyle(i,null);if("translate3d"===f.positionUsing||"translate"===f.positionUsing){if(!fp.bowser.chrome){var l=s?s.getPropertyValue(h("transform")):null;l&&(a=l.replace(/^\w*\(/,"").replace(")","").split(/\s*,\s*/)[4],(null!=d&&a<d||null!=u&&o<u)&&(o=u))}r={transform:f.positionUsing+"("+o+"%,0,0)"}}else{var c=s?s.getPropertyValue("margin-left"):null;null!=c&&(a=parseFloat(c),null!=d&&a<d&&(o=u)),r={"margin-left":o+"%"}}return r.transition="all "+t+"ms "+n,u=o,d=a,r}o.configure=function(e){var t,n;for(t in e)void 0!==(n=e[t])&&e.hasOwnProperty(t)&&(f[t]=n);return this},o.status=null,o.set=function(t){var e=o.isStarted();t=s(t,f.minimum,1),o.status=1===t?null:t;var n=o.render(!e),i=n.querySelector(f.barSelector),r=f.speed,a=f.easing;return n.offsetWidth,c(function(e){g(i,l(t,r,a,i)),1===t?(g(n,{transition:"none",opacity:1}),n.offsetWidth,setTimeout(function(){g(n,{transition:"all "+r+"ms linear",opacity:0}),setTimeout(function(){o.remove(),e()},r)},r)):setTimeout(e,r)}),this},o.isStarted=function(){return"number"==typeof o.status},o.start=function(){o.status||(u=d=null,o.set(0));var e=function(){setTimeout(function(){o.status&&(o.trickle(),e())},f.trickleSpeed)};return f.trickle&&e(),this},o.done=function(e){return e||o.status?o.inc(.3+.5*Math.random()).set(1):this},o.inc=function(e){var t=o.status;return t?1<t?void 0:("number"!=typeof e&&(e=0<=t&&t<.25?(3*Math.random()+3)/100:.25<=t&&t<.65?3*Math.random()/100:.65<=t&&t<.9?2*Math.random()/100:.9<=t&&t<.99?.005:0),t=s(t+e,0,.994),o.set(t)):o.start()},o.trickle=function(){return o.inc()},n=t=0,o.promise=function(e){return e&&"resolved"!==e.state()&&(0===n&&o.start(),t++,n++,e.always(function(){0===--n?(t=0,o.done()):o.set((t-n)/t)})),this},o.render=function(e){if(o.isRendered())return this.progress;""===f.positionUsing&&(f.positionUsing=o.getPositioningCSS()),_(document.documentElement,"fp-nprogress-busy");var t=document.createElement("div");t.innerHTML=f.template;var n,i=t.querySelector(f.barSelector),r=e?0:o.status||0,a=document.querySelector(f.parent);return g(i,l(r,f.speed,f.easing,i)),f.showSpinner||(n=t.querySelector(f.spinnerSelector))&&b(n),a!=document.body&&_(a,"fp-nprogress-custom-parent"),a.appendChild(t),_(t,"fp-nprogress"),this.progress=t},o.remove=function(){e(document.documentElement,"fp-nprogress-busy"),e(document.querySelector(f.parent),"fp-nprogress-custom-parent"),this.progress&&b(this.progress),delete this.progress},o.isRendered=function(){return null!=this.progress},o.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var i,c=(i=[],function(e){i.push(e),1==i.length&&r()});function r(){var e=i.shift();e&&e(r)}var a=["Webkit","O","Moz","ms"],p={};function h(e){return e=function(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}(e),p[e]||(p[e]=function(e){var t=document.body.style;if(e in t)return e;for(var n,i=a.length,r=e.charAt(0).toUpperCase()+e.slice(1);i--;)if((n=a[i]+r)in t)return n;return e}(e))}function m(e,t,n){t=h(t),e.style[t]=n}var g=function(e,t){var n,i,r=arguments;if(2==r.length)for(n in t)void 0!==(i=t[n])&&t.hasOwnProperty(n)&&m(e,n,i);else m(e,r[1],r[2])};function v(e,t){return 0<=("string"==typeof e?e:y(e)).indexOf(" "+t+" ")}function _(e,t){var n=y(e),i=n+t;v(n,t)||(e.className=i.substring(1))}function e(e,t){var n,i=y(e);v(e,t)&&(n=i.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function y(e){return(" "+(e&&e.className||"")+" ").replace(/\s+/gi," ")}function b(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return o},"function"==typeof define&&define.amd?define(Sra):"object"==typeof exports?module.exports=Sra():Rra.NProgress=Sra(),
/*! showdown 13-05-2016 */
function(){function t(e){"use strict";var t={omitExtraWLInCodeBlocks:{default:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{default:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{default:!1,describe:"Specify a prefix to generated header ids",type:"string"},headerLevelStart:{default:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{default:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{default:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},literalMidWordUnderscores:{default:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},strikethrough:{default:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{default:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{default:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{default:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{default:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{default:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"}};if(!1===e)return JSON.parse(JSON.stringify(t));var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i].default);return n}function c(e,t){"use strict";var n=t?"Error in "+t+" extension->":"Error in unnamed extension",i={valid:!0,error:""};_.helper.isArray(e)||(e=[e]);for(var r=0;r<e.length;++r){var a=n+" sub-extension "+r+": ",o=e[r];if("object"!=typeof o)return i.valid=!1,i.error=a+"must be an object, but "+typeof o+" given",i;if(!_.helper.isString(o.type))return i.valid=!1,i.error=a+'property "type" must be a string, but '+typeof o.type+" given",i;var s=o.type=o.type.toLowerCase();if("language"===s&&(s=o.type="lang"),"html"===s&&(s=o.type="output"),"lang"!==s&&"output"!==s&&"listener"!==s)return i.valid=!1,i.error=a+"type "+s+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',i;if("listener"===s){if(_.helper.isUndefined(o.listeners))return i.valid=!1,i.error=a+'. Extensions of type "listener" must have a property called "listeners"',i}else if(_.helper.isUndefined(o.filter)&&_.helper.isUndefined(o.regex))return i.valid=!1,i.error=a+s+' extensions must define either a "regex" property or a "filter" method',i;if(o.listeners){if("object"!=typeof o.listeners)return i.valid=!1,i.error=a+'"listeners" property must be an object but '+typeof o.listeners+" given",i;for(var l in o.listeners)if(o.listeners.hasOwnProperty(l)&&"function"!=typeof o.listeners[l])return i.valid=!1,i.error=a+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+l+" must be a function but "+typeof o.listeners[l]+" given",i}if(o.filter){if("function"!=typeof o.filter)return i.valid=!1,i.error=a+'"filter" must be a function, but '+typeof o.filter+" given",i}else if(o.regex){if(_.helper.isString(o.regex)&&(o.regex=new RegExp(o.regex,"g")),!o.regex instanceof RegExp)return i.valid=!1,i.error=a+'"regex" property must either be a string or a RegExp object, but '+typeof o.regex+" given",i;if(_.helper.isUndefined(o.replace))return i.valid=!1,i.error=a+'"regex" extensions must implement a replace string or function',i}}return i}function a(e,t){"use strict";return"~E"+t.charCodeAt(0)+"E"}var _={},n={},u={},d=t(!0),f={github:{omitExtraWLInCodeBlocks:!0,prefixHeaderId:"user-content-",simplifiedAutoLink:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0},vanilla:t(!0)};_.helper={},_.extensions={},_.setOption=function(e,t){"use strict";return d[e]=t,this},_.getOption=function(e){"use strict";return d[e]},_.getOptions=function(){"use strict";return d},_.resetOptions=function(){"use strict";d=t(!0)},_.setFlavor=function(e){"use strict";if(f.hasOwnProperty(e)){var t=f[e];for(var n in t)t.hasOwnProperty(n)&&(d[n]=t[n])}},_.getDefaultOptions=function(e){"use strict";return t(e)},_.subParser=function(e,t){"use strict";if(_.helper.isString(e)){if(void 0===t){if(n.hasOwnProperty(e))return n[e];throw Error("SubParser named "+e+" not registered!")}n[e]=t}},_.extension=function(e,t){"use strict";if(!_.helper.isString(e))throw Error("Extension 'name' must be a string");if(e=_.helper.stdExtName(e),_.helper.isUndefined(t)){if(!u.hasOwnProperty(e))throw Error("Extension named "+e+" is not registered!");return u[e]}"function"==typeof t&&(t=t()),_.helper.isArray(t)||(t=[t]);var n=c(t,e);if(!n.valid)throw Error(n.error);u[e]=t},_.getAllExtensions=function(){"use strict";return u},_.removeExtension=function(e){"use strict";delete u[e]},_.resetExtensions=function(){"use strict";u={}},_.validateExtension=function(e){"use strict";var t=c(e,null);return!!t.valid||(console.warn(t.error),!1)},_.hasOwnProperty("helper")||(_.helper={}),_.helper.isString=function(e){"use strict";return"string"==typeof e||e instanceof String},_.helper.isFunction=function(e){"use strict";return e&&"[object Function]"==={}.toString.call(e)},_.helper.forEach=function(e,t){"use strict";if("function"==typeof e.forEach)e.forEach(t);else for(var n=0;n<e.length;n++)t(e[n],n,e)},_.helper.isArray=function(e){"use strict";return e.constructor===Array},_.helper.isUndefined=function(e){"use strict";return void 0===e},_.helper.stdExtName=function(e){"use strict";return e.replace(/[_-]||\s/g,"").toLowerCase()},_.helper.escapeCharactersCallback=a,_.helper.escapeCharacters=function(e,t,n){"use strict";var i="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(i="\\\\"+i);var r=new RegExp(i,"g");return e.replace(r,a)};function p(e,t,n,i){"use strict";var r,a,o,s,l,c=i||"",u=-1<c.indexOf("g"),d=new RegExp(t+"|"+n,"g"+c.replace(/g/g,"")),f=new RegExp(t,c.replace(/g/g,"")),p=[];do{for(r=0;o=d.exec(e);)if(f.test(o[0]))r++||(s=(a=d.lastIndex)-o[0].length);else if(r&&!--r){l=o.index+o[0].length;var h={left:{start:s,end:a},match:{start:a,end:o.index},right:{start:o.index,end:l},wholeMatch:{start:s,end:l}};if(p.push(h),!u)return p}}while(r&&(d.lastIndex=a));return p}_.helper.matchRecursiveRegExp=function(e,t,n,i){"use strict";for(var r=p(e,t,n,i),a=[],o=0;o<r.length;++o)a.push([e.slice(r[o].wholeMatch.start,r[o].wholeMatch.end),e.slice(r[o].match.start,r[o].match.end),e.slice(r[o].left.start,r[o].left.end),e.slice(r[o].right.start,r[o].right.end)]);return a},_.helper.replaceRecursiveRegExp=function(e,t,n,i,r){"use strict";if(!_.helper.isFunction(t)){var a=t;t=function(){return a}}var o=p(e,n,i,r),s=e,l=o.length;if(0<l){var c=[];0!==o[0].wholeMatch.start&&c.push(e.slice(0,o[0].wholeMatch.start));for(var u=0;u<l;++u)c.push(t(e.slice(o[u].wholeMatch.start,o[u].wholeMatch.end),e.slice(o[u].match.start,o[u].match.end),e.slice(o[u].left.start,o[u].left.end),e.slice(o[u].right.start,o[u].right.end))),u<l-1&&c.push(e.slice(o[u].wholeMatch.end,o[u+1].wholeMatch.start));o[l-1].wholeMatch.end<e.length&&c.push(e.slice(o[l-1].wholeMatch.end)),s=c.join("")}return s},_.helper.isUndefined(console)&&(console={warn:function(e){"use strict";alert(e)},log:function(e){"use strict";alert(e)},error:function(e){"use strict";throw e}}),_.Converter=function(n){"use strict";function i(e,t){if(t=t||null,_.helper.isString(e)){if(t=e=_.helper.stdExtName(e),_.extensions[e])return console.warn("DEPRECATION WARNING: "+e+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(e,t){"function"==typeof e&&(e=e(new _.Converter)),_.helper.isArray(e)||(e=[e]);var n=c(e,t);if(!n.valid)throw Error(n.error);for(var i=0;i<e.length;++i)switch(e[i].type){case"lang":o.push(e[i]);break;case"output":s.push(e[i]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(_.extensions[e],e);if(_.helper.isUndefined(u[e]))throw Error('Extension "'+e+'" could not be loaded. It was either not found or is not a valid extension.');e=u[e]}"function"==typeof e&&(e=e()),_.helper.isArray(e)||(e=[e]);var n=c(e,t);if(!n.valid)throw Error(n.error);for(var i=0;i<e.length;++i){switch(e[i].type){case"lang":o.push(e[i]);break;case"output":s.push(e[i])}if(e[i].hasOwnProperty(l))for(var r in e[i].listeners)e[i].listeners.hasOwnProperty(r)&&a(r,e[i].listeners[r])}}function a(e,t){if(!_.helper.isString(e))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof e+" given");if("function"!=typeof t)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof t+" given");l.hasOwnProperty(e)||(l[e]=[]),l[e].push(t)}var r={},o=[],s=[],l={};(function(){for(var e in n=n||{},d)d.hasOwnProperty(e)&&(r[e]=d[e]);if("object"!=typeof n)throw Error("Converter expects the passed parameter to be an object, but "+typeof n+" was passed instead.");for(var t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);r.extensions&&_.helper.forEach(r.extensions,i)})(),this._dispatch=function(e,t,n,i){if(l.hasOwnProperty(e))for(var r=0;r<l[e].length;++r){var a=l[e][r](e,t,this,n,i);a&&void 0!==a&&(t=a)}return t},this.listen=function(e,t){return a(e,t),this},this.makeHtml=function(t){if(!t)return t;var n={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:o,outputModifiers:s,converter:this,ghCodeBlocks:[]};return t="\n\n"+(t=(t=(t=(t=t.replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n"))+"\n\n",t=_.subParser("detab")(t,r,n),t=_.subParser("stripBlankLines")(t,r,n),_.helper.forEach(o,function(e){t=_.subParser("runExtension")(e,t,r,n)}),t=_.subParser("hashPreCodeTags")(t,r,n),t=_.subParser("githubCodeBlocks")(t,r,n),t=_.subParser("hashHTMLBlocks")(t,r,n),t=_.subParser("hashHTMLSpans")(t,r,n),t=_.subParser("stripLinkDefinitions")(t,r,n),t=_.subParser("blockGamut")(t,r,n),t=_.subParser("unhashHTMLSpans")(t,r,n),t=(t=(t=_.subParser("unescapeSpecialChars")(t,r,n)).replace(/~D/g,"$$")).replace(/~T/g,"~"),_.helper.forEach(s,function(e){t=_.subParser("runExtension")(e,t,r,n)}),t},this.setOption=function(e,t){r[e]=t},this.getOption=function(e){return r[e]},this.getOptions=function(){return r},this.addExtension=function(e,t){i(e,t=t||null)},this.useExtension=function(e){i(e)},this.setFlavor=function(e){if(f.hasOwnProperty(e)){var t=f[e];for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n])}},this.removeExtension=function(e){_.helper.isArray(e)||(e=[e]);for(var t=0;t<e.length;++t){for(var n=e[t],i=0;i<o.length;++i)o[i]===n&&o[i].splice(i,1);for(;0<s.length;++i)s[0]===n&&s[0].splice(i,1)}},this.getAllExtensions=function(){return{language:o,output:s}}},_.subParser("anchors",function(e,t,p){"use strict";function n(e,t,n,i,r,a,o,s){_.helper.isUndefined(s)&&(s=""),e=t;var l=n,c=i.toLowerCase(),u=r,d=s;if(!u)if(u="#"+(c=c||l.toLowerCase().replace(/ ?\n/g," ")),_.helper.isUndefined(p.gUrls[c])){if(!(-1<e.search(/\(\s*\)$/m)))return e;u=""}else u=p.gUrls[c],_.helper.isUndefined(p.gTitles[c])||(d=p.gTitles[c]);var f='<a href="'+(u=_.helper.escapeCharacters(u,"*_",!1))+'"';return""!==d&&null!==d&&(d=d.replace(/"/g,"&quot;"),f+=' title="'+(d=_.helper.escapeCharacters(d,"*_",!1))+'"'),f+">"+l+"</a>"}return e=(e=(e=(e=p.converter._dispatch("anchors.before",e,t,p)).replace(/(\[((?:\[[^\]]*]|[^\[\]])*)][ ]?(?:\n[ ]*)?\[(.*?)])()()()()/g,n)).replace(/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,n)).replace(/(\[([^\[\]]+)])()()()()()/g,n),p.converter._dispatch("anchors.after",e,t,p)}),_.subParser("autoLinks",function(e,t,n){"use strict";function i(e,t){var n=_.subParser("unescapeSpecialChars")(t);return _.subParser("encodeEmailAddress")(n)}return e=(e=(e=n.converter._dispatch("autoLinks.before",e,t,n)).replace(/<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)>/gi,'<a href="$1">$1</a>')).replace(/<(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,i),t.simplifiedAutoLink&&(e=(e=e.replace(/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+)(?=\s|$)(?!["<>])/gi,'<a href="$1">$1</a>')).replace(/(?:^|[ \n\t])([A-Za-z0-9!#$%&'*+-/=?^_`\{|}~\.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?:$|[ \n\t])/gi,i)),n.converter._dispatch("autoLinks.after",e,t,n)}),_.subParser("blockGamut",function(e,t,n){"use strict";e=n.converter._dispatch("blockGamut.before",e,t,n),e=_.subParser("blockQuotes")(e,t,n),e=_.subParser("headers")(e,t,n);var i=_.subParser("hashBlock")("<hr />",t,n);return e=(e=(e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,i)).replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,i)).replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,i),e=_.subParser("lists")(e,t,n),e=_.subParser("codeBlocks")(e,t,n),e=_.subParser("tables")(e,t,n),e=_.subParser("hashHTMLBlocks")(e,t,n),e=_.subParser("paragraphs")(e,t,n),n.converter._dispatch("blockGamut.after",e,t,n)}),_.subParser("blockQuotes",function(e,i,r){"use strict";return e=(e=r.converter._dispatch("blockQuotes.before",e,i,r)).replace(/((^[ \t]{0,3}>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,t){var n=t;return n=(n=(n=n.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""),n=_.subParser("githubCodeBlocks")(n,i,r),n=(n=(n=_.subParser("blockGamut")(n,i,r)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var n=t;return(n=n.replace(/^  /gm,"~0")).replace(/~0/g,"")}),_.subParser("hashBlock")("<blockquote>\n"+n+"\n</blockquote>",i,r)}),r.converter._dispatch("blockQuotes.after",e,i,r)}),_.subParser("codeBlocks",function(e,o,s){"use strict";e=s.converter._dispatch("codeBlocks.before",e,o,s);return e=(e=(e+="~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(e,t,n){var i=t,r=n,a="\n";return i=_.subParser("outdent")(i),i=_.subParser("encodeCode")(i),i=(i=(i=_.subParser("detab")(i)).replace(/^\n+/g,"")).replace(/\n+$/g,""),o.omitExtraWLInCodeBlocks&&(a=""),i="<pre><code>"+i+a+"</code></pre>",_.subParser("hashBlock")(i,o,s)+r})).replace(/~0/,""),s.converter._dispatch("codeBlocks.after",e,o,s)}),_.subParser("codeSpans",function(e,t,n){"use strict";return e=(e=n.converter._dispatch("codeSpans.before",e,t,n)).replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,t,n,i){var r=i;return r=(r=r.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),t+"<code>"+(r=_.subParser("encodeCode")(r))+"</code>"}),n.converter._dispatch("codeSpans.after",e,t,n)}),_.subParser("detab",function(e){"use strict";return(e=(e=(e=(e=e.replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"~A~B")).replace(/~B(.+?)~A/g,function(e,t){for(var n=t,i=4-n.length%4,r=0;r<i;r++)n+=" ";return n})).replace(/~A/g,"    ")).replace(/~B/g,"")}),_.subParser("encodeAmpsAndAngles",function(e){"use strict";return(e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?\$!])/gi,"&lt;")}),_.subParser("encodeBackslashEscapes",function(e){"use strict";return(e=e.replace(/\\(\\)/g,_.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+-.!])/g,_.helper.escapeCharactersCallback)}),_.subParser("encodeCode",function(e){"use strict";return e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),_.helper.escapeCharacters(e,"*_{}[]\\",!1)}),_.subParser("encodeEmailAddress",function(e){"use strict";var n=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return(e='<a href="'+(e=(e="mailto:"+e).replace(/./g,function(e){if("@"===e)e=n[Math.floor(2*Math.random())](e);else if(":"!==e){var t=Math.random();e=.9<t?n[2](e):.45<t?n[1](e):n[0](e)}return e}))+'">'+e+"</a>").replace(/">.+:/g,'">')}),_.subParser("escapeSpecialCharsWithinTagAttributes",function(e){"use strict";return e.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return _.helper.escapeCharacters(t,"\\`*_",!1)})}),_.subParser("githubCodeBlocks",function(e,r,a){"use strict";return r.ghCodeBlocks?(e=a.converter._dispatch("githubCodeBlocks.before",e,r,a),e=(e=(e+="~0").replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(e,t,n){var i=r.omitExtraWLInCodeBlocks?"":"\n";return n=_.subParser("encodeCode")(n),n="<pre><code"+(t?' class="'+t+" language-"+t+'"':"")+">"+(n=(n=(n=_.subParser("detab")(n)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+i+"</code></pre>",n=_.subParser("hashBlock")(n,r,a),"\n\n~G"+(a.ghCodeBlocks.push({text:e,codeblock:n})-1)+"G\n\n"})).replace(/~0/,""),a.converter._dispatch("githubCodeBlocks.after",e,r,a)):e}),_.subParser("hashBlock",function(e,t,n){"use strict";return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(n.gHtmlBlocks.push(e)-1)+"K\n\n"}),_.subParser("hashElement",function(e,t,i){"use strict";return function(e,t){var n=t;return n=(n=(n=n.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),"\n\n~K"+(i.gHtmlBlocks.push(n)-1)+"K\n\n"}}),_.subParser("hashHTMLBlocks",function(e,t,a){"use strict";for(var n=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],i=function(e,t,n,i){var r=e;return-1!==n.search(/\bmarkdown\b/)&&(r=n+a.converter.makeHtml(t)+i),"\n\n~K"+(a.gHtmlBlocks.push(r)-1)+"K\n\n"},r=0;r<n.length;++r)e=_.helper.replaceRecursiveRegExp(e,i,"^(?: |\\t){0,3}<"+n[r]+"\\b[^>]*>","</"+n[r]+">","gim");return(e=(e=e.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,_.subParser("hashElement")(e,t,a))).replace(/(<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,_.subParser("hashElement")(e,t,a))).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,_.subParser("hashElement")(e,t,a))}),_.subParser("hashHTMLSpans",function(e,t,n){"use strict";for(var i=_.helper.matchRecursiveRegExp(e,"<code\\b[^>]*>","</code>","gi"),r=0;r<i.length;++r)e=e.replace(i[r][0],"~L"+(n.gHtmlSpans.push(i[r][0])-1)+"L");return e}),_.subParser("unhashHTMLSpans",function(e,t,n){"use strict";for(var i=0;i<n.gHtmlSpans.length;++i)e=e.replace("~L"+i+"L",n.gHtmlSpans[i]);return e}),_.subParser("hashPreCodeTags",function(e,t,a){"use strict";return _.helper.replaceRecursiveRegExp(e,function(e,t,n,i){var r=n+_.subParser("encodeCode")(t)+i;return"\n\n~G"+(a.ghCodeBlocks.push({text:e,codeblock:r})-1)+"G\n\n"},"^(?: |\\t){0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^(?: |\\t){0,3}</code>\\s*</pre>","gim")}),_.subParser("headers",function(e,s,l){"use strict";function c(e){var t,n=e.replace(/[^\w]/g,"").toLowerCase();return l.hashLinkCounts[n]?t=n+"-"+l.hashLinkCounts[n]++:(t=n,l.hashLinkCounts[n]=1),!0===i&&(i="section"),_.helper.isString(i)?i+t:t}e=l.converter._dispatch("headers.before",e,s,l);var i=s.prefixHeaderId,u=isNaN(parseInt(s.headerLevelStart))?1:parseInt(s.headerLevelStart),t=s.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,n=s.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;return e=(e=(e=e.replace(t,function(e,t){var n=_.subParser("spanGamut")(t,s,l),i=s.noHeaderId?"":' id="'+c(t)+'"',r="<h"+u+i+">"+n+"</h"+u+">";return _.subParser("hashBlock")(r,s,l)})).replace(n,function(e,t){var n=_.subParser("spanGamut")(t,s,l),i=s.noHeaderId?"":' id="'+c(t)+'"',r=u+1,a="<h"+r+i+">"+n+"</h"+r+">";return _.subParser("hashBlock")(a,s,l)})).replace(/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm,function(e,t,n){var i=_.subParser("spanGamut")(n,s,l),r=s.noHeaderId?"":' id="'+c(n)+'"',a=u-1+t.length,o="<h"+a+r+">"+i+"</h"+a+">";return _.subParser("hashBlock")(o,s,l)}),l.converter._dispatch("headers.after",e,s,l)}),_.subParser("images",function(e,t,f){"use strict";function n(e,t,n,i,r,a,o,s){var l=f.gUrls,c=f.gTitles,u=f.gDimensions;if(n=n.toLowerCase(),s=s||"",""===i||null===i){if(""!==n&&null!==n||(n=t.toLowerCase().replace(/ ?\n/g," ")),i="#"+n,_.helper.isUndefined(l[n]))return e;i=l[n],_.helper.isUndefined(c[n])||(s=c[n]),_.helper.isUndefined(u[n])||(r=u[n].width,a=u[n].height)}t=t.replace(/"/g,"&quot;"),t=_.helper.escapeCharacters(t,"*_",!1);var d='<img src="'+(i=_.helper.escapeCharacters(i,"*_",!1))+'" alt="'+t+'"';return s&&(s=s.replace(/"/g,"&quot;"),d+=' title="'+(s=_.helper.escapeCharacters(s,"*_",!1))+'"'),r&&a&&(d+=' width="'+(r="*"===r?"auto":r)+'"',d+=' height="'+(a="*"===a?"auto":a)+'"'),d+" />"}return e=(e=(e=f.converter._dispatch("images.before",e,t,f)).replace(/!\[(.*?)][ ]?(?:\n[ ]*)?\[(.*?)]()()()()()/g,n)).replace(/!\[(.*?)]\s?\([ \t]*()<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(['"])(.*?)\6[ \t]*)?\)/g,n),f.converter._dispatch("images.after",e,t,f)}),_.subParser("italicsAndBold",function(e,t,n){"use strict";return e=n.converter._dispatch("italicsAndBold.before",e,t,n),e=t.literalMidWordUnderscores?(e=(e=(e=e.replace(/(^|\s|>|\b)__(?=\S)([^]+?)__(?=\b|<|\s|$)/gm,"$1<strong>$2</strong>")).replace(/(^|\s|>|\b)_(?=\S)([^]+?)_(?=\b|<|\s|$)/gm,"$1<em>$2</em>")).replace(/(\*\*)(?=\S)([^\r]*?\S[*]*)\1/g,"<strong>$2</strong>")).replace(/(\*)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"):(e=e.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>")).replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"),n.converter._dispatch("italicsAndBold.after",e,t,n)}),_.subParser("lists",function(e,u,d){"use strict";function s(e,t){d.gListLevel++,e=e.replace(/\n{2,}$/,"\n");var c=/\n[ \t]*\n(?!~0)/.test(e+="~0");return e=(e=e.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(e,t,n,i,r,a,o){o=o&&""!==o.trim();var s=_.subParser("outdent")(r,u,d),l="";return a&&u.tasklists&&(l=' class="task-list-item" style="list-style-type: none;"',s=s.replace(/^[ \t]*\[(x|X| )?]/m,function(){var e='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return o&&(e+=" checked"),e+">"})),"\n<li"+l+">"+(s=t||-1<s.search(/\n{2,}/)?(s=_.subParser("githubCodeBlocks")(s,u,d),_.subParser("blockGamut")(s,u,d)):(s=(s=_.subParser("lists")(s,u,d)).replace(/\n$/,""),c?_.subParser("paragraphs")(s,u,d):_.subParser("spanGamut")(s,u,d)))+"</li>\n"})).replace(/~0/g,""),d.gListLevel--,t&&(e=e.replace(/\s+$/,"")),e}function r(e,i,r){var a="ul"===i?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,t=[],o="";if(-1!==e.search(a)){!function e(t){var n=t.search(a);-1!==n?(o+="\n\n<"+i+">"+s(t.slice(0,n),!!r)+"</"+i+">\n\n",a="ul"===(i="ul"===i?"ol":"ul")?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,e(t.slice(n))):o+="\n\n<"+i+">"+s(t,!!r)+"</"+i+">\n\n"}(e);for(var n=0;n<t.length;++n);}else o="\n\n<"+i+">"+s(e,!!r)+"</"+i+">\n\n";return o}e=d.converter._dispatch("lists.before",e,u,d),e+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return e=(e=d.gListLevel?e.replace(t,function(e,t,n){return r(t,-1<n.search(/[*+-]/g)?"ul":"ol",!0)}):(t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,e.replace(t,function(e,t,n,i){return r(n,-1<i.search(/[*+-]/g)?"ul":"ol")}))).replace(/~0/,""),d.converter._dispatch("lists.after",e,u,d)}),_.subParser("outdent",function(e){"use strict";return(e=e.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")}),_.subParser("paragraphs",function(e,t,n){"use strict";for(var i=(e=(e=(e=n.converter._dispatch("paragraphs.before",e,t,n)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),r=[],a=i.length,o=0;o<a;o++){var s=i[o];0<=s.search(/~(K|G)(\d+)\1/g)||(s=(s=_.subParser("spanGamut")(s,t,n)).replace(/^([ \t]*)/g,"<p>"),s+="</p>"),r.push(s)}for(a=r.length,o=0;o<a;o++){for(var l="",c=r[o],u=!1;0<=c.search(/~(K|G)(\d+)\1/);){var d=RegExp.$1,f=RegExp.$2;l=(l="K"===d?n.gHtmlBlocks[f]:u?_.subParser("encodeCode")(n.ghCodeBlocks[f].text):n.ghCodeBlocks[f].codeblock).replace(/\$/g,"$$$$"),c=c.replace(/(\n\n)?~(K|G)\d+\2(\n\n)?/,l),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(c)&&(u=!0)}r[o]=c}return e=(e=(e=r.join("\n\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),n.converter._dispatch("paragraphs.after",e,t,n)}),_.subParser("runExtension",function(e,t,n,i){"use strict";if(e.filter)t=e.filter(t,i.converter,n);else if(e.regex){var r=e.regex;!r instanceof RegExp&&(r=new RegExp(r,"g")),t=t.replace(r,e.replace)}return t}),_.subParser("spanGamut",function(e,t,n){"use strict";return e=n.converter._dispatch("spanGamut.before",e,t,n),e=_.subParser("codeSpans")(e,t,n),e=_.subParser("escapeSpecialCharsWithinTagAttributes")(e,t,n),e=_.subParser("encodeBackslashEscapes")(e,t,n),e=_.subParser("images")(e,t,n),e=_.subParser("anchors")(e,t,n),e=_.subParser("autoLinks")(e,t,n),e=_.subParser("encodeAmpsAndAngles")(e,t,n),e=_.subParser("italicsAndBold")(e,t,n),e=(e=_.subParser("strikethrough")(e,t,n)).replace(/  +\n/g," <br />\n"),n.converter._dispatch("spanGamut.after",e,t,n)}),_.subParser("strikethrough",function(e,t,n){"use strict";return t.strikethrough&&(e=(e=n.converter._dispatch("strikethrough.before",e,t,n)).replace(/(?:~T){2}([\s\S]+?)(?:~T){2}/g,"<del>$1</del>"),e=n.converter._dispatch("strikethrough.after",e,t,n)),e}),_.subParser("stripBlankLines",function(e){"use strict";return e.replace(/^[ \t]+$/gm,"")}),_.subParser("stripLinkDefinitions",function(e,s,l){"use strict";return(e=(e+="~0").replace(/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=~0))/gm,function(e,t,n,i,r,a,o){return t=t.toLowerCase(),l.gUrls[t]=_.subParser("encodeAmpsAndAngles")(n),a?a+o:(o&&(l.gTitles[t]=o.replace(/"|'/g,"&quot;")),s.parseImgDimensions&&i&&r&&(l.gDimensions[t]={width:i,height:r}),"")})).replace(/~0/,"")}),_.subParser("tables",function(e,g,v){"use strict";if(!g.tables)return e;return e=(e=v.converter._dispatch("tables.before",e,g,v)).replace(/^[ \t]{0,3}\|?.+\|.+\n[ \t]{0,3}\|?[ \t]*:?[ \t]*(?:-|=){3,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:-|=){3,}[^]+?(?:\n\n|~0)/gm,function(e){var t,n=e.split("\n");for(t=0;t<n.length;++t)/^[ \t]{0,3}\|/.test(n[t])&&(n[t]=n[t].replace(/^[ \t]{0,3}\|/,"")),/\|[ \t]*$/.test(n[t])&&(n[t]=n[t].replace(/\|[ \t]*$/,""));var i,r,a,o,s,l=n[0].split("|").map(function(e){return e.trim()}),c=n[1].split("|").map(function(e){return e.trim()}),u=[],d=[],f=[],p=[];for(n.shift(),n.shift(),t=0;t<n.length;++t)""!==n[t].trim()&&u.push(n[t].split("|").map(function(e){return e.trim()}));if(l.length<c.length)return e;for(t=0;t<c.length;++t)f.push((i=c[t],/^:[ \t]*---*$/.test(i)?' style="text-align:left;"':/^---*[ \t]*:[ \t]*$/.test(i)?' style="text-align:right;"':/^:[ \t]*---*[ \t]*:$/.test(i)?' style="text-align:center;"':""));for(t=0;t<l.length;++t)_.helper.isUndefined(f[t])&&(f[t]=""),d.push((r=l[t],a=f[t],o=void 0,o="",r=r.trim(),g.tableHeaderId&&(o=' id="'+r.replace(/ /g,"_").toLowerCase()+'"'),"<th"+o+a+">"+(r=_.subParser("spanGamut")(r,g,v))+"</th>\n"));for(t=0;t<u.length;++t){for(var h=[],m=0;m<d.length;++m)_.helper.isUndefined(u[t][m]),h.push((s=u[t][m],"<td"+f[m]+">"+_.subParser("spanGamut")(s,g,v)+"</td>\n"));p.push(h)}return function(e,t){for(var n="<table>\n<thead>\n<tr>\n",i=e.length,r=0;r<i;++r)n+=e[r];for(n+="</tr>\n</thead>\n<tbody>\n",r=0;r<t.length;++r){n+="<tr>\n";for(var a=0;a<i;++a)n+=t[r][a];n+="</tr>\n"}return n+"</tbody>\n</table>\n"}(d,p)}),v.converter._dispatch("tables.after",e,g,v)}),_.subParser("unescapeSpecialChars",function(e){"use strict";return e.replace(/~E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)})});"undefined"!=typeof module&&module.exports?module.exports=_:"function"==typeof define&&define.amd?define(function(){"use strict";return _}):this.showdown=_}.call(this),function(){"use strict";var r={},t={"Á":"A","Ă":"A","Ắ":"A","Ặ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ǎ":"A","Â":"A","Ấ":"A","Ậ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ä":"A","Ǟ":"A","Ȧ":"A","Ǡ":"A","Ạ":"A","Ȁ":"A","À":"A","Ả":"A","Ȃ":"A","Ā":"A","Ą":"A","Å":"A","Ǻ":"A","Ḁ":"A","Ⱥ":"A","Ã":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ḃ":"B","Ḅ":"B","Ɓ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ć":"C","Č":"C","Ç":"C","Ḉ":"C","Ĉ":"C","Ċ":"C","Ƈ":"C","Ȼ":"C","Ď":"D","Ḑ":"D","Ḓ":"D","Ḋ":"D","Ḍ":"D","Ɗ":"D","Ḏ":"D","ǲ":"D","ǅ":"D","Đ":"D","Ƌ":"D","Ǳ":"DZ","Ǆ":"DZ","É":"E","Ĕ":"E","Ě":"E","Ȩ":"E","Ḝ":"E","Ê":"E","Ế":"E","Ệ":"E","Ề":"E","Ể":"E","Ễ":"E","Ḙ":"E","Ë":"E","Ė":"E","Ẹ":"E","Ȅ":"E","È":"E","Ẻ":"E","Ȇ":"E","Ē":"E","Ḗ":"E","Ḕ":"E","Ę":"E","Ɇ":"E","Ẽ":"E","Ḛ":"E","Ꝫ":"ET","Ḟ":"F","Ƒ":"F","Ǵ":"G","Ğ":"G","Ǧ":"G","Ģ":"G","Ĝ":"G","Ġ":"G","Ɠ":"G","Ḡ":"G","Ǥ":"G","Ḫ":"H","Ȟ":"H","Ḩ":"H","Ĥ":"H","Ⱨ":"H","Ḧ":"H","Ḣ":"H","Ḥ":"H","Ħ":"H","Í":"I","Ĭ":"I","Ǐ":"I","Î":"I","Ï":"I","Ḯ":"I","İ":"I","Ị":"I","Ȉ":"I","Ì":"I","Ỉ":"I","Ȋ":"I","Ī":"I","Į":"I","Ɨ":"I","Ĩ":"I","Ḭ":"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS","Ĵ":"J","Ɉ":"J","Ḱ":"K","Ǩ":"K","Ķ":"K","Ⱪ":"K","Ꝃ":"K","Ḳ":"K","Ƙ":"K","Ḵ":"K","Ꝁ":"K","Ꝅ":"K","Ĺ":"L","Ƚ":"L","Ľ":"L","Ļ":"L","Ḽ":"L","Ḷ":"L","Ḹ":"L","Ⱡ":"L","Ꝉ":"L","Ḻ":"L","Ŀ":"L","Ɫ":"L","ǈ":"L","Ł":"L","Ǉ":"LJ","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ń":"N","Ň":"N","Ņ":"N","Ṋ":"N","Ṅ":"N","Ṇ":"N","Ǹ":"N","Ɲ":"N","Ṉ":"N","Ƞ":"N","ǋ":"N","Ñ":"N","Ǌ":"NJ","Ó":"O","Ŏ":"O","Ǒ":"O","Ô":"O","Ố":"O","Ộ":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ö":"O","Ȫ":"O","Ȯ":"O","Ȱ":"O","Ọ":"O","Ő":"O","Ȍ":"O","Ò":"O","Ỏ":"O","Ơ":"O","Ớ":"O","Ợ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ȏ":"O","Ꝋ":"O","Ꝍ":"O","Ō":"O","Ṓ":"O","Ṑ":"O","Ɵ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Õ":"O","Ṍ":"O","Ṏ":"O","Ȭ":"O","Ƣ":"OI","Ꝏ":"OO","Ɛ":"E","Ɔ":"O","Ȣ":"OU","Ṕ":"P","Ṗ":"P","Ꝓ":"P","Ƥ":"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q","Ŕ":"R","Ř":"R","Ŗ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ȑ":"R","Ȓ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C","Ǝ":"E","Ś":"S","Ṥ":"S","Š":"S","Ṧ":"S","Ş":"S","Ŝ":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṩ":"S","ẞ":"SS","Ť":"T","Ţ":"T","Ṱ":"T","Ț":"T","Ⱦ":"T","Ṫ":"T","Ṭ":"T","Ƭ":"T","Ṯ":"T","Ʈ":"T","Ŧ":"T","Ɐ":"A","Ꞁ":"L","Ɯ":"M","Ʌ":"V","Ꜩ":"TZ","Ú":"U","Ŭ":"U","Ǔ":"U","Û":"U","Ṷ":"U","Ü":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ǖ":"U","Ṳ":"U","Ụ":"U","Ű":"U","Ȕ":"U","Ù":"U","Ủ":"U","Ư":"U","Ứ":"U","Ự":"U","Ừ":"U","Ử":"U","Ữ":"U","Ȗ":"U","Ū":"U","Ṻ":"U","Ų":"U","Ů":"U","Ũ":"U","Ṹ":"U","Ṵ":"U","Ꝟ":"V","Ṿ":"V","Ʋ":"V","Ṽ":"V","Ꝡ":"VY","Ẃ":"W","Ŵ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẁ":"W","Ⱳ":"W","Ẍ":"X","Ẋ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ẏ":"Y","Ỵ":"Y","Ỳ":"Y","Ƴ":"Y","Ỷ":"Y","Ỿ":"Y","Ȳ":"Y","Ɏ":"Y","Ỹ":"Y","Ź":"Z","Ž":"Z","Ẑ":"Z","Ⱬ":"Z","Ż":"Z","Ẓ":"Z","Ȥ":"Z","Ẕ":"Z","Ƶ":"Z","Ĳ":"IJ","Œ":"OE","ᴀ":"A","ᴁ":"AE","ʙ":"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F","ɢ":"G","ʛ":"G","ʜ":"H","ɪ":"I","ʁ":"R","ᴊ":"J","ᴋ":"K","ʟ":"L","ᴌ":"L","ᴍ":"M","ɴ":"N","ᴏ":"O","ɶ":"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P","ʀ":"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W","ʏ":"Y","ᴢ":"Z","á":"a","ă":"a","ắ":"a","ặ":"a","ằ":"a","ẳ":"a","ẵ":"a","ǎ":"a","â":"a","ấ":"a","ậ":"a","ầ":"a","ẩ":"a","ẫ":"a","ä":"a","ǟ":"a","ȧ":"a","ǡ":"a","ạ":"a","ȁ":"a","à":"a","ả":"a","ȃ":"a","ā":"a","ą":"a","ᶏ":"a","ẚ":"a","å":"a","ǻ":"a","ḁ":"a","ⱥ":"a","ã":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ḃ":"b","ḅ":"b","ɓ":"b","ḇ":"b","ᵬ":"b","ᶀ":"b","ƀ":"b","ƃ":"b","ɵ":"o","ć":"c","č":"c","ç":"c","ḉ":"c","ĉ":"c","ɕ":"c","ċ":"c","ƈ":"c","ȼ":"c","ď":"d","ḑ":"d","ḓ":"d","ȡ":"d","ḋ":"d","ḍ":"d","ɗ":"d","ᶑ":"d","ḏ":"d","ᵭ":"d","ᶁ":"d","đ":"d","ɖ":"d","ƌ":"d","ı":"i","ȷ":"j","ɟ":"j","ʄ":"j","ǳ":"dz","ǆ":"dz","é":"e","ĕ":"e","ě":"e","ȩ":"e","ḝ":"e","ê":"e","ế":"e","ệ":"e","ề":"e","ể":"e","ễ":"e","ḙ":"e","ë":"e","ė":"e","ẹ":"e","ȅ":"e","è":"e","ẻ":"e","ȇ":"e","ē":"e","ḗ":"e","ḕ":"e","ⱸ":"e","ę":"e","ᶒ":"e","ɇ":"e","ẽ":"e","ḛ":"e","ꝫ":"et","ḟ":"f","ƒ":"f","ᵮ":"f","ᶂ":"f","ǵ":"g","ğ":"g","ǧ":"g","ģ":"g","ĝ":"g","ġ":"g","ɠ":"g","ḡ":"g","ᶃ":"g","ǥ":"g","ḫ":"h","ȟ":"h","ḩ":"h","ĥ":"h","ⱨ":"h","ḧ":"h","ḣ":"h","ḥ":"h","ɦ":"h","ẖ":"h","ħ":"h","ƕ":"hv","í":"i","ĭ":"i","ǐ":"i","î":"i","ï":"i","ḯ":"i","ị":"i","ȉ":"i","ì":"i","ỉ":"i","ȋ":"i","ī":"i","į":"i","ᶖ":"i","ɨ":"i","ĩ":"i","ḭ":"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is","ǰ":"j","ĵ":"j","ʝ":"j","ɉ":"j","ḱ":"k","ǩ":"k","ķ":"k","ⱪ":"k","ꝃ":"k","ḳ":"k","ƙ":"k","ḵ":"k","ᶄ":"k","ꝁ":"k","ꝅ":"k","ĺ":"l","ƚ":"l","ɬ":"l","ľ":"l","ļ":"l","ḽ":"l","ȴ":"l","ḷ":"l","ḹ":"l","ⱡ":"l","ꝉ":"l","ḻ":"l","ŀ":"l","ɫ":"l","ᶅ":"l","ɭ":"l","ł":"l","ǉ":"lj","ſ":"s","ẜ":"s","ẛ":"s","ẝ":"s","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ᵯ":"m","ᶆ":"m","ń":"n","ň":"n","ņ":"n","ṋ":"n","ȵ":"n","ṅ":"n","ṇ":"n","ǹ":"n","ɲ":"n","ṉ":"n","ƞ":"n","ᵰ":"n","ᶇ":"n","ɳ":"n","ñ":"n","ǌ":"nj","ó":"o","ŏ":"o","ǒ":"o","ô":"o","ố":"o","ộ":"o","ồ":"o","ổ":"o","ỗ":"o","ö":"o","ȫ":"o","ȯ":"o","ȱ":"o","ọ":"o","ő":"o","ȍ":"o","ò":"o","ỏ":"o","ơ":"o","ớ":"o","ợ":"o","ờ":"o","ở":"o","ỡ":"o","ȏ":"o","ꝋ":"o","ꝍ":"o","ⱺ":"o","ō":"o","ṓ":"o","ṑ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","õ":"o","ṍ":"o","ṏ":"o","ȭ":"o","ƣ":"oi","ꝏ":"oo","ɛ":"e","ᶓ":"e","ɔ":"o","ᶗ":"o","ȣ":"ou","ṕ":"p","ṗ":"p","ꝓ":"p","ƥ":"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q","ʠ":"q","ɋ":"q","ꝗ":"q","ŕ":"r","ř":"r","ŗ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ȑ":"r","ɾ":"r","ᵳ":"r","ȓ":"r","ṟ":"r","ɼ":"r","ᵲ":"r","ᶉ":"r","ɍ":"r","ɽ":"r","ↄ":"c","ꜿ":"c","ɘ":"e","ɿ":"r","ś":"s","ṥ":"s","š":"s","ṧ":"s","ş":"s","ŝ":"s","ș":"s","ṡ":"s","ṣ":"s","ṩ":"s","ʂ":"s","ᵴ":"s","ᶊ":"s","ȿ":"s","ɡ":"g","ß":"ss","ᴑ":"o","ᴓ":"o","ᴝ":"u","ť":"t","ţ":"t","ṱ":"t","ț":"t","ȶ":"t","ẗ":"t","ⱦ":"t","ṫ":"t","ṭ":"t","ƭ":"t","ṯ":"t","ᵵ":"t","ƫ":"t","ʈ":"t","ŧ":"t","ᵺ":"th","ɐ":"a","ᴂ":"ae","ǝ":"e","ᵷ":"g","ɥ":"h","ʮ":"h","ʯ":"h","ᴉ":"i","ʞ":"k","ꞁ":"l","ɯ":"m","ɰ":"m","ᴔ":"oe","ɹ":"r","ɻ":"r","ɺ":"r","ⱹ":"r","ʇ":"t","ʌ":"v","ʍ":"w","ʎ":"y","ꜩ":"tz","ú":"u","ŭ":"u","ǔ":"u","û":"u","ṷ":"u","ü":"u","ǘ":"u","ǚ":"u","ǜ":"u","ǖ":"u","ṳ":"u","ụ":"u","ű":"u","ȕ":"u","ù":"u","ủ":"u","ư":"u","ứ":"u","ự":"u","ừ":"u","ử":"u","ữ":"u","ȗ":"u","ū":"u","ṻ":"u","ų":"u","ᶙ":"u","ů":"u","ũ":"u","ṹ":"u","ṵ":"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v","ṿ":"v","ʋ":"v","ᶌ":"v","ⱱ":"v","ṽ":"v","ꝡ":"vy","ẃ":"w","ŵ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẁ":"w","ⱳ":"w","ẘ":"w","ẍ":"x","ẋ":"x","ᶍ":"x","ý":"y","ŷ":"y","ÿ":"y","ẏ":"y","ỵ":"y","ỳ":"y","ƴ":"y","ỷ":"y","ỿ":"y","ȳ":"y","ẙ":"y","ɏ":"y","ỹ":"y","ź":"z","ž":"z","ẑ":"z","ʑ":"z","ⱬ":"z","ż":"z","ẓ":"z","ȥ":"z","ẕ":"z","ᵶ":"z","ᶎ":"z","ʐ":"z","ƶ":"z","ɀ":"z","ﬀ":"ff","ﬃ":"ffi","ﬄ":"ffl","ﬁ":"fi","ﬂ":"fl","ĳ":"ij","œ":"oe","ﬆ":"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x"};function n(e,t){e.s=null!=t?"string"==typeof t?t:t.toString():t,null!=(e.orig=t)?e.__defineGetter__?e.__defineGetter__("length",function(){return e.s.length}):e.length=t.length:e.length=-1}function p(e){n(this,e)}var o=String.prototype,i=p.prototype={between:function(e,t){var n=this.s,i=n.indexOf(e),r=n.indexOf(t,i+e.length);return-1==r&&null!=t?new this.constructor(""):-1==r&&null==t?new this.constructor(n.substring(i+e.length)):new this.constructor(n.slice(i+e.length,r))},camelize:function(){var e=this.trim().s.replace(/(\-|_|\s)+(.)?/g,function(e,t,n){return n?n.toUpperCase():""});return new this.constructor(e)},capitalize:function(){return new this.constructor(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(e){return this.s.charAt(e)},chompLeft:function(e){var t=this.s;return 0===t.indexOf(e)?(t=t.slice(e.length),new this.constructor(t)):this},chompRight:function(e){if(this.endsWith(e)){var t=this.s;return t=t.slice(0,t.length-e.length),new this.constructor(t)}return this},collapseWhitespace:function(){var e=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new this.constructor(e)},contains:function(e){return 0<=this.s.indexOf(e)},count:function(e){for(var t=0,n=this.s.indexOf(e);0<=n;)t+=1,n=this.s.indexOf(e,n+1);return t},dasherize:function(){var e=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new this.constructor(e)},latinise:function(){var e=this.replace(/[^A-Za-z0-9\[\] ]/g,function(e){return t[e]||e});return new this.constructor(e)},decodeHtmlEntities:function(){var e=this.s;return e=e.replace(/&#(\d+);?/g,function(e,t){return String.fromCharCode(t)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(e,t){return String.fromCharCode(parseInt(t,16))}).replace(/&([^;\W]+;?)/g,function(e,t){var n=t.replace(/;$/,""),i=r[t]||t.match(/;$/)&&r[n];return"number"==typeof i?String.fromCharCode(i):"string"==typeof i?i:e}),new this.constructor(e)},endsWith:function(e){var t=this.s.length-e.length;return 0<=t&&this.s.indexOf(e,t)===t},escapeHTML:function(){return new this.constructor(this.s.replace(/[&<>"']/g,function(e){return"&"+u[e]+";"}))},ensureLeft:function(e){var t=this.s;return 0===t.indexOf(e)?this:new this.constructor(e+t)},ensureRight:function(e){var t=this.s;return this.endsWith(e)?this:new this.constructor(t+e)},humanize:function(){if(null===this.s||void 0===this.s)return new this.constructor("");var e=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new this.constructor(e)},isAlpha:function(){return!/[^a-z\xDF-\xFF]|^$/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xDF-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return null===this.s||void 0===this.s||/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(e){if(0<=e){var t=this.s.substr(0,e);return new this.constructor(t)}return this.right(-e)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(e,t){if(null==t&&(t=" "),this.s.length>=e)return new this.constructor(this.s);e-=this.s.length;var n=Array(Math.ceil(e/2)+1).join(t),i=Array(Math.floor(e/2)+1).join(t);return new this.constructor(n+this.s+i)},padLeft:function(e,t){return null==t&&(t=" "),this.s.length>=e?new this.constructor(this.s):new this.constructor(Array(e-this.s.length+1).join(t)+this.s)},padRight:function(e,t){return null==t&&(t=" "),this.s.length>=e?new this.constructor(this.s):new this.constructor(this.s+Array(e-this.s.length+1).join(t))},parseCSV:function(e,t,n,i){e=e||",",n=n||"\\",void 0===t&&(t='"');function r(e){return d.s.charAt(e)}var a=0,o=[],s=[],l=this.s.length,c=!1,u=!1,d=this;if(void 0!==i)var f=[];for(t||(c=!0);a<l;){var p=r(a);switch(p){case n:if(c&&(n!==t||r(a+1)===t)){a+=1,o.push(r(a));break}if(n!==t)break;case t:c=!c;break;case e:u=u&&(c=!1),c&&t?o.push(p):(s.push(o.join("")),o.length=0);break;case i:u?(u=c=!1,s.push(o.join("")),f.push(s),s=[],o.length=0):c?o.push(p):f&&(s.push(o.join("")),f.push(s),s=[],o.length=0);break;case" ":c&&o.push(p);break;default:c?o.push(p):p!==t&&(o.push(p),u=c=!0)}a+=1}return s.push(o.join("")),f?(f.push(s),f):s},replaceAll:function(e,t){var n=this.s.split(e).join(t);return new this.constructor(n)},strip:function(){for(var e=this.s,t=0,n=arguments.length;t<n;t++)e=e.split(arguments[t]).join("");return new this.constructor(e)},right:function(e){if(0<=e){var t=this.s.substr(this.s.length-e,e);return new this.constructor(t)}return this.left(-e)},setValue:function(e){return n(this,e),this},slugify:function(){var e=new p(new p(this.s).latinise().s.replace(/[^\w\s-]/g,"").toLowerCase()).dasherize().s;return"-"===e.charAt(0)&&(e=e.substr(1)),new this.constructor(e)},startsWith:function(e){return 0===this.s.lastIndexOf(e,0)},stripPunctuation:function(){return new this.constructor(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var t=this.s;return function(e,t){var n,i=[];for(n=0;n<e.length;n++)i.push(e[n]),t&&t.call(e,e[n],n)}(0<arguments.length?arguments:[""],function(e){t=t.replace(RegExp("</?"+e+"[^<>]*>","gi"),"")}),new this.constructor(t)},template:function(n,i,r){var a=this.s,e=(r=r||l.TMPL_CLOSE,(i=i||l.TMPL_OPEN).replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$")),t=r.replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$"),o=new RegExp(e+"(.+?)"+t,"g");return(a.match(o)||[]).forEach(function(e){var t=e.substring(i.length,e.length-r.length);void 0!==n[t]&&(a=a.replace(e,n[t]))}),new this.constructor(a)},times:function(e){return new this.constructor(new Array(e+1).join(this.s))},toBoolean:function(){if("string"!=typeof this.orig)return!0===this.orig||1===this.orig;var e=this.s.toLowerCase();return"true"===e||"yes"===e||"on"===e||"1"===e},toFloat:function(e){var t=parseFloat(this.s);return e?parseFloat(t.toFixed(e)):t},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var e;return e=void 0===o.trim?this.s.replace(/(^\s*|\s*$)/g,""):this.s.trim(),new this.constructor(e)},trimLeft:function(){var e;return e=o.trimLeft?this.s.trimLeft():this.s.replace(/(^\s*)/g,""),new this.constructor(e)},trimRight:function(){var e;return e=o.trimRight?this.s.trimRight():this.s.replace(/\s+$/,""),new this.constructor(e)},truncate:function(e,t){var n=this.s;if(e=~~e,t=t||"...",n.length<=e)return new this.constructor(n);var i=n.slice(0,e+1).replace(/.(?=\W*\w*$)/g,function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "});return((i=i.slice(i.length-2).match(/\w\w/)?i.replace(/\s*\S+$/,""):new p(i.slice(0,i.length-1)).trimRight().s)+t).length>n.length?new p(n):new p(n.slice(0,i.length)+t)},toCSV:function(){var e=",",t='"',n="\\",i=!0,r=!1,a=[];if("object"==typeof arguments[0]?(e=arguments[0].delimiter||e,e=arguments[0].separator||e,t=arguments[0].qualifier||t,i=!!arguments[0].encloseNumbers,n=arguments[0].escape||n,r=!!arguments[0].keys):"string"==typeof arguments[0]&&(e=arguments[0]),"string"==typeof arguments[1]&&(t=arguments[1]),null===arguments[1]&&(t=null),this.orig instanceof Array)a=this.orig;else for(var o in this.orig)this.orig.hasOwnProperty(o)&&(r?a.push(o):a.push(this.orig[o]));for(var s,l=n+t,c=[],u=0;u<a.length;++u){var d=null!==(s=t)&&""!==s;if("number"==typeof a[u]&&(d&=i),d&&c.push(t),null!==a[u]&&void 0!==a[u]){var f=new p(a[u]).replaceAll(t,l).s;c.push(f)}else c.push("");d&&c.push(t),e&&c.push(e)}return c.length=c.length-1,new this.constructor(c.join(""))},toString:function(){return this.s},underscore:function(){var e=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();return new p(this.s.charAt(0)).isUpper()&&(e="_"+e),new this.constructor(e)},unescapeHTML:function(){return new this.constructor(this.s.replace(/\&([^;]+);/g,function(e,t){var n;return t in c?c[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):e}))},valueOf:function(){return this.s.valueOf()},wrapHTML:function(e,t){var n=this.s,i=null==e?"span":e,r="";if("object"==typeof t)for(var a in t)r+=" "+a+'="'+new this.constructor(t[a]).escapeHTML()+'"';return n="".concat("<",i,r,">",this,"</",i,">"),new this.constructor(n)}},a=[];var s=function(){for(var e=function(){var e=[];{if(Object.getOwnPropertyNames)return(e=Object.getOwnPropertyNames(o)).splice(e.indexOf("valueOf"),1),e.splice(e.indexOf("toString"),1),e;var t={};for(var n in String.prototype)t[n]=n;for(var n in Object.prototype)delete t[n];for(var n in t)e.push(n);return e}}(),t={},n=0;n<e.length;++n){var i=e[n],r=o[i];try{var a=typeof r.apply("teststring",[]);t[i]=a}catch(e){}}return t}();for(var e in s)!function(e){var t=o[e];"function"==typeof t&&(i[e]||("string"===s[e]?i[e]=function(){return new this.constructor(t.apply(this,arguments))}:i[e]=t))}(e);function l(e){return null==e&&(e=""),new p(e)}i.repeat=i.times,i.include=i.contains,i.toInteger=i.toInt,i.toBool=i.toBoolean,i.decodeHTMLEntities=i.decodeHtmlEntities,i.constructor=p,l.extendPrototype=function(){for(var e in i)!function(e){var t=i[e];o.hasOwnProperty(e)||(a.push(e),o[e]=function(){return String.prototype.s=this,t.apply(this,arguments)})}(e)},l.restorePrototype=function(){for(var e=0;e<a.length;++e)delete String.prototype[a[e]];a.length=0},l.VERSION="2.1.0",l.TMPL_OPEN="{{",l.TMPL_CLOSE="}}",l.ENTITIES=r,l.fn=i,l.mixin=function(e){for(var t in e)i[t]=e[t]},"undefined"!=typeof module&&void 0!==module.exports?module.exports=l:"function"==typeof define&&define.amd?define([],function(){return l}):window.S=l;var c={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},u={};for(var d in c)u[c[d]]=d;r={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}.call(this),LEa=this,MEa=function(){function a(e,t){this._input=e,this._value=t}var _,o,l,c,e,s={},y={},t={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},u={currentLocale:t.currentLocale,zeroFormat:t.zeroFormat,nullFormat:t.nullFormat,defaultFormat:t.defaultFormat,scalePercentBy100:t.scalePercentBy100};return(_=function(e){var t,n,i,r;if(_.isNumeral(e))t=e.value();else if(0===e||void 0===e)t=0;else if(null===e||o.isNaN(e))t=null;else if("string"==typeof e)if(u.zeroFormat&&e===u.zeroFormat)t=0;else if(u.nullFormat&&e===u.nullFormat||!e.replace(/[^0-9]+/g,"").length)t=null;else{for(n in s)if((r="function"==typeof s[n].regexps.unformat?s[n].regexps.unformat():s[n].regexps.unformat)&&e.match(r)){i=s[n].unformat;break}t=(i=i||_._.stringToNumber)(e)}else t=Number(e)||null;return new a(e,t)}).version="2.0.6",_.isNumeral=function(e){return e instanceof a},_._=o={numberToFormat:function(e,t,n){var i,r,a,o,s,l,c,u,d=y[_.options.currentLocale],f=!1,p=!1,h="",m="",g=!1;if(e=e||0,r=Math.abs(e),_._.includes(t,"(")?(f=!0,t=t.replace(/[\(|\)]/g,"")):(_._.includes(t,"+")||_._.includes(t,"-"))&&(s=_._.includes(t,"+")?t.indexOf("+"):e<0?t.indexOf("-"):-1,t=t.replace(/[\+|\-]/g,"")),_._.includes(t,"a")&&(i=!!(i=t.match(/a(k|m|b|t)?/))&&i[1],_._.includes(t," a")&&(h=" "),t=t.replace(new RegExp(h+"a[kmbt]?"),""),1e12<=r&&!i||"t"===i?(h+=d.abbreviations.trillion,e/=1e12):r<1e12&&1e9<=r&&!i||"b"===i?(h+=d.abbreviations.billion,e/=1e9):r<1e9&&1e6<=r&&!i||"m"===i?(h+=d.abbreviations.million,e/=1e6):(r<1e6&&1e3<=r&&!i||"k"===i)&&(h+=d.abbreviations.thousand,e/=1e3)),_._.includes(t,"[.]")&&(p=!0,t=t.replace("[.]",".")),a=e.toString().split(".")[0],o=t.split(".")[1],l=t.indexOf(","),u=(t.split(".")[0].split(",")[0].match(/0/g)||[]).length,o?(a=(m=_._.includes(o,"[")?(o=(o=o.replace("]","")).split("["),_._.toFixed(e,o[0].length+o[1].length,n,o[1].length)):_._.toFixed(e,o.length,n)).split(".")[0],m=_._.includes(m,".")?d.delimiters.decimal+m.split(".")[1]:"",p&&0===Number(m.slice(1))&&(m="")):a=_._.toFixed(e,0,n),h&&!i&&1e3<=Number(a)&&h!==d.abbreviations.trillion)switch(a=String(Number(a)/1e3),h){case d.abbreviations.thousand:h=d.abbreviations.million;break;case d.abbreviations.million:h=d.abbreviations.billion;break;case d.abbreviations.billion:h=d.abbreviations.trillion}if(_._.includes(a,"-")&&(a=a.slice(1),g=!0),a.length<u)for(var v=u-a.length;0<v;v--)a="0"+a;return-1<l&&(a=a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+d.delimiters.thousands)),0===t.indexOf(".")&&(a=""),c=a+m+(h||""),f?c=(f&&g?"(":"")+c+(f&&g?")":""):0<=s?c=0===s?(g?"-":"+")+c:c+(g?"-":"+"):g&&(c="-"+c),c},stringToNumber:function(e){var t,n,i,r=y[u.currentLocale],a=e,o={thousand:3,million:6,billion:9,trillion:12};if(u.zeroFormat&&e===u.zeroFormat)n=0;else if(u.nullFormat&&e===u.nullFormat||!e.replace(/[^0-9]+/g,"").length)n=null;else{for(t in n=1,"."!==r.delimiters.decimal&&(e=e.replace(/\./g,"").replace(r.delimiters.decimal,".")),o)if(i=new RegExp("[^a-zA-Z]"+r.abbreviations[t]+"(?:\\)|(\\"+r.currency.symbol+")?(?:\\))?)?$"),a.match(i)){n*=Math.pow(10,o[t]);break}n*=(e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1,e=e.replace(/[^0-9\.]+/g,""),n*=Number(e)}return n},isNaN:function(e){return"number"==typeof e&&isNaN(e)},includes:function(e,t){return-1!==e.indexOf(t)},insert:function(e,t,n){return e.slice(0,n)+t+e.slice(n)},reduce:function(e,t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var n,i=Object(e),r=i.length>>>0,a=0;if(3===arguments.length)n=arguments[2];else{for(;a<r&&!(a in i);)a++;if(r<=a)throw new TypeError("Reduce of empty array with no initial value");n=i[a++]}for(;a<r;a++)a in i&&(n=t(n,i[a],a,i));return n},multiplier:function(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)},correctionFactor:function(){return Array.prototype.slice.call(arguments).reduce(function(e,t){var n=o.multiplier(t);return n<e?e:n},1)},toFixed:function(e,t,n,i){var r,a,o,s,l=e.toString().split("."),c=t-(i||0);return r=2===l.length?Math.min(Math.max(l[1].length,c),t):c,o=Math.pow(10,r),s=(n(e+"e+"+r)/o).toFixed(r),t-r<i&&(a=new RegExp("\\.?0{1,"+(i-(t-r))+"}$"),s=s.replace(a,"")),s}},_.options=u,_.formats=s,_.locales=y,_.locale=function(e){return e&&(u.currentLocale=e.toLowerCase()),u.currentLocale},_.localeData=function(e){if(!e)return y[u.currentLocale];if(e=e.toLowerCase(),!y[e])throw new Error("Unknown locale : "+e);return y[e]},_.reset=function(){for(var e in t)u[e]=t[e]},_.zeroFormat=function(e){u.zeroFormat="string"==typeof e?e:null},_.nullFormat=function(e){u.nullFormat="string"==typeof e?e:null},_.defaultFormat=function(e){u.defaultFormat="string"==typeof e?e:"0.0"},_.register=function(e,t,n){if(t=t.toLowerCase(),this[e+"s"][t])throw new TypeError(t+" "+e+" already registered.");return this[e+"s"][t]=n},_.validate=function(e,t){var n,i,r,a,o,s,l,c;if("string"!=typeof e&&(e+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",e)),(e=e.trim()).match(/^\d+$/))return!0;if(""===e)return!1;try{l=_.localeData(t)}catch(e){l=_.localeData(_.locale())}return r=l.currency.symbol,o=l.abbreviations,n=l.delimiters.decimal,i="."===l.delimiters.thousands?"\\.":l.delimiters.thousands,(null===(c=e.match(/^[^\d]+/))||(e=e.substr(1),c[0]===r))&&((null===(c=e.match(/[^\d]+$/))||(e=e.slice(0,-1),c[0]===o.thousand||c[0]===o.million||c[0]===o.billion||c[0]===o.trillion))&&(s=new RegExp(i+"{2}"),!e.match(/[^\d.,]/g)&&(!(2<(a=e.split(n)).length)&&(a.length<2?!!a[0].match(/^\d+.*\d$/)&&!a[0].match(s):1===a[0].length?!!a[0].match(/^\d+$/)&&!a[0].match(s)&&!!a[1].match(/^\d+$/):!!a[0].match(/^\d+.*\d$/)&&!a[0].match(s)&&!!a[1].match(/^\d+$/)))))},_.fn=a.prototype={clone:function(){return _(this)},format:function(e,t){var n,i,r,a=this._value,o=e||u.defaultFormat;if(t=t||Math.round,0===a&&null!==u.zeroFormat)i=u.zeroFormat;else if(null===a&&null!==u.nullFormat)i=u.nullFormat;else{for(n in s)if(o.match(s[n].regexps.format)){r=s[n].format;break}i=(r=r||_._.numberToFormat)(a,o,t)}return i},value:function(){return this._value},input:function(){return this._input},set:function(e){return this._value=Number(e),this},add:function(e){var r=o.correctionFactor.call(null,this._value,e);return this._value=o.reduce([this._value,e],function(e,t,n,i){return e+Math.round(r*t)},0)/r,this},subtract:function(e){var r=o.correctionFactor.call(null,this._value,e);return this._value=o.reduce([e],function(e,t,n,i){return e-Math.round(r*t)},Math.round(this._value*r))/r,this},multiply:function(e){return this._value=o.reduce([this._value,e],function(e,t,n,i){var r=o.correctionFactor(e,t);return Math.round(e*r)*Math.round(t*r)/Math.round(r*r)},1),this},divide:function(e){return this._value=o.reduce([this._value,e],function(e,t,n,i){var r=o.correctionFactor(e,t);return Math.round(e*r)/Math.round(t*r)}),this},difference:function(e){return Math.abs(_(this._value).subtract(e).value())}},_.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th"},currency:{symbol:"$"}}),_.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(e,t,n){var i,r=_._.includes(t," BPS")?" ":"";return e*=1e4,t=t.replace(/\s?BPS/,""),i=_._.numberToFormat(e,t,n),i=_._.includes(i,")")?((i=i.split("")).splice(-1,0,r+"BPS"),i.join("")):i+r+"BPS"},unformat:function(e){return+(1e-4*_._.stringToNumber(e)).toFixed(15)}}),c={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},e="("+(e=(l={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}).suffixes.concat(c.suffixes.filter(function(e){return l.suffixes.indexOf(e)<0})).join("|")).replace("B","B(?!PS)")+")",_.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(e)},format:function(e,t,n){var i,r,a,o=_._.includes(t,"ib")?c:l,s=_._.includes(t," b")||_._.includes(t," ib")?" ":"";for(t=t.replace(/\s?i?b/,""),i=0;i<=o.suffixes.length;i++)if(r=Math.pow(o.base,i),a=Math.pow(o.base,i+1),null===e||0===e||r<=e&&e<a){s+=o.suffixes[i],0<r&&(e/=r);break}return _._.numberToFormat(e,t,n)+s},unformat:function(e){var t,n,i=_._.stringToNumber(e);if(i){for(t=l.suffixes.length-1;0<=t;t--){if(_._.includes(e,l.suffixes[t])){n=Math.pow(l.base,t);break}if(_._.includes(e,c.suffixes[t])){n=Math.pow(c.base,t);break}}i*=n||1}return i}}),_.register("format","currency",{regexps:{format:/(\$)/},format:function(e,t,n){var i,r,a=_.locales[_.options.currentLocale],o={before:t.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:t.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(t=t.replace(/\s?\$\s?/,""),i=_._.numberToFormat(e,t,n),0<=e?(o.before=o.before.replace(/[\-\(]/,""),o.after=o.after.replace(/[\-\)]/,"")):e<0&&!_._.includes(o.before,"-")&&!_._.includes(o.before,"(")&&(o.before="-"+o.before),r=0;r<o.before.length;r++)switch(o.before[r]){case"$":i=_._.insert(i,a.currency.symbol,r);break;case" ":i=_._.insert(i," ",r+a.currency.symbol.length-1)}for(r=o.after.length-1;0<=r;r--)switch(o.after[r]){case"$":i=r===o.after.length-1?i+a.currency.symbol:_._.insert(i,a.currency.symbol,-(o.after.length-(1+r)));break;case" ":i=r===o.after.length-1?i+" ":_._.insert(i," ",-(o.after.length-(1+r)+a.currency.symbol.length-1))}return i}}),_.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(e,t,n){var i=("number"!=typeof e||_._.isNaN(e)?"0e+0":e.toExponential()).split("e");return t=t.replace(/e[\+|\-]{1}0/,""),_._.numberToFormat(Number(i[0]),t,n)+"e"+i[1]},unformat:function(e){var t=_._.includes(e,"e+")?e.split("e+"):e.split("e-"),n=Number(t[0]),i=Number(t[1]);return i=_._.includes(e,"e-")?i*=-1:i,_._.reduce([n,Math.pow(10,i)],function(e,t,n,i){var r=_._.correctionFactor(e,t);return e*r*(t*r)/(r*r)},1)}}),_.register("format","ordinal",{regexps:{format:/(o)/},format:function(e,t,n){var i=_.locales[_.options.currentLocale],r=_._.includes(t," o")?" ":"";return t=t.replace(/\s?o/,""),r+=i.ordinal(e),_._.numberToFormat(e,t,n)+r}}),_.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(e,t,n){var i,r=_._.includes(t," %")?" ":"";return _.options.scalePercentBy100&&(e*=100),t=t.replace(/\s?\%/,""),i=_._.numberToFormat(e,t,n),i=_._.includes(i,")")?((i=i.split("")).splice(-1,0,r+"%"),i.join("")):i+r+"%"},unformat:function(e){var t=_._.stringToNumber(e);return _.options.scalePercentBy100?.01*t:t}}),_.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(e,t,n){var i=Math.floor(e/60/60),r=Math.floor((e-60*i*60)/60),a=Math.round(e-60*i*60-60*r);return i+":"+(r<10?"0"+r:r)+":"+(a<10?"0"+a:a)},unformat:function(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*Number(t[0])*60,n+=60*Number(t[1]),n+=Number(t[2])):2===t.length&&(n+=60*Number(t[0]),n+=Number(t[1])),Number(n)}}),_},"function"==typeof define&&define.amd?define(MEa):"object"==typeof module&&module.exports?module.exports=MEa():LEa.numeral=MEa(),AIa=this,BIa=function(e,s){"use strict";return Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),s.prefix="",s._getPrefixedKey=function(e,t){return(t=t||{}).noPrefix?e:this.prefix+e},s.set=function(t,n,e){var i=this._getPrefixedKey(t,e);try{localStorage.setItem(i,JSON.stringify({data:n}))}catch(e){console&&console.warn("Lockr didn't successfully save the '{"+t+": "+n+"}' pair, because the localStorage is full.")}},s.get=function(e,t,n){var i,r=this._getPrefixedKey(e,n);try{i=JSON.parse(localStorage.getItem(r))}catch(e){i=localStorage[r]?{data:localStorage.getItem(r)}:null}return null===i?t:"object"==typeof i&&void 0!==i.data?i.data:t},s.sadd=function(t,n,e){var i,r=this._getPrefixedKey(t,e),a=s.smembers(t);if(-1<a.indexOf(n))return null;try{a.push(n),i=JSON.stringify({data:a}),localStorage.setItem(r,i)}catch(e){console.log(e),console&&console.warn("Lockr didn't successfully add the "+n+" to "+t+" set, because the localStorage is full.")}},s.smembers=function(e,t){var n,i=this._getPrefixedKey(e,t);try{n=JSON.parse(localStorage.getItem(i))}catch(e){n=null}return null===n?[]:n.data||[]},s.sismember=function(e,t,n){return-1<s.smembers(e).indexOf(t)},s.keys=function(){var t=[],e=Object.keys(localStorage);return 0===s.prefix.length?e:(e.forEach(function(e){-1!==e.indexOf(s.prefix)&&t.push(e.replace(s.prefix,""))}),t)},s.getAll=function(e){var t=s.keys();return e?t.reduce(function(e,t){var n={};return n[t]=s.get(t),e.push(n),e},[]):t.map(function(e){return s.get(e)})},s.srem=function(t,n,e){var i,r,a=this._getPrefixedKey(t,e),o=s.smembers(t,n);-1<(r=o.indexOf(n))&&o.splice(r,1),i=JSON.stringify({data:o});try{localStorage.setItem(a,i)}catch(e){console&&console.warn("Lockr couldn't remove the "+n+" from the set "+t)}},s.rm=function(e){var t=this._getPrefixedKey(e);localStorage.removeItem(t)},s.flush=function(){s.prefix.length?s.keys().forEach(function(e){localStorage.removeItem(s._getPrefixedKey(e))}):localStorage.clear()},s},"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports&&(exports=module.exports=BIa(AIa,exports)):"function"==typeof define&&define.amd?define(["exports"],function(e){AIa.Lockr=BIa(AIa,e)}):AIa.Lockr=BIa(AIa,{}),function(){$=jQuery=fp.$=window.jQuery.noConflict(!0),_=fp._=window._.noConflict(!0),dateFns=fp.dateFns,NProgress=fp.NProgress=window.NProgress,delete window.NProgress,oldNProgress&&(window.NProgress=oldNProgress,oldNProgress=void 0),showdown=fp.showdown=window.showdown,delete window.showdown,oldShowdown&&(window.showdown=oldShowdown,oldShowdown=void 0),S=fp.S=window.S,delete window.S,oldS&&(window.S=oldS,oldS=void 0),numeral=fp.numeral=window.numeral,delete window.numeral,oldNumeral&&(window.numeral=oldNumeral,oldNumeral=void 0),Lockr=fp.Lockr=window.Lockr,delete window.Lockr,oldLockr&&(window.Lockr=oldLockr,oldLockr=void 0);try{localStorage.setItem("fp","fp"),localStorage.removeItem("fp")}catch(e){Lockr=fp.Lockr={set:$.noop,get:$.noop,rm:$.noop,flush:$.noop}}$.jMaskGlobals={dataMask:!1,watchDataMask:!1},fp.jss=jss,bugsnag=window.bugsnag,delete window.bugsnag,oldBugsnag&&(window.bugsnag=oldBugsnag,oldBugsnag=void 0);var f=fp.isDev();if(bugsnag&&!f&&0==window.location.protocol.indexOf("http")){bugsnag.user=fp.notifier.user,bugsnag.metaData=fp.notifier.metaData;var p=_.map(["card_number","cardholder_name","cvv"],function(e){return new RegExp("[?&.]"+e+"=([^&#]*)")});fp.notifier=bugsnag({apiKey:fp.bugsnagApiKey,appVersion:"1.0.0",releaseStage:fp.isProd()?"production":f?"development":"staging",notifyReleaseStages:["development","staging","production"],metaData:fp.notifier.metaData,user:fp.notifier.user,beforeSend:function(e){var t=e.user,n=S(e.errorMessage),i=(e.errorClass||"").toLowerCase(),r=!0;if(fpUi.applyErrorMeta(e),t.id=fp.user.id,t.session=fp.session.token,t.selected_store_id=fp.getSelectedStoreId(),t.order_id=fp.session.preference.order_id,"apierror"!=i||e.metaData["meta data"].Status||(r=!1),!f&&r){if(n.contains("Watchers fired in the last 5 iterations")||n.contains("A 429 error has occurred")||"typeerror"==i&&n.contains("elt.parentNode")||"unhandledrejection"==i&&n.eq("Unhandled promise rejection"))return!1;var a=metaData["API Url"];if(a&&(_.each(p,function(e){a=a.replace(e,function(e,t){return e.substr(0,e.length-t.length)+"XXXXXXXXX"})}),metaData["API Url"]=a,metaData["API Base URL"]=a.split("?")[0],"aborterror"==i&&S(metaData["API Base URL"]).endsWith("products/ads")))return!1;if(!e.stacktrace)return!0;var o,s=new RegExp("https?://(www.)?[-a-zA-Z0-9@:%._+~#=]{2,256}","gmi"),l=S(window.location.hostname).toLowerCase(),c="freshop.com|cloudfront.net|stackpathdns.com|"+S(fp.assetCdnBaseUrl).trimRight("/").s+"|"+l.trimLeft("www.").replace(/([.])/g,"\\$1").s,u=new RegExp(c,"i");if(n.contains("CategoryError: More than one top level")&&(r=!1),r)if(l.contains("reasors.com")&&n.contains("Unexpected token '<'"))r=!1;else{var d=n.contains("unrecognized expression: #!/");_.find(e.stacktrace,function(e){return o=S(e.file),d&&o.contains("memphiscashsaver.com")?!(r=!1):o.contains("festfoods.com")?!(r=!1):(s.lastIndex=0,_.find(o.match(s),function(e){if(!e.match(u))return!(r=!1)}),!r)})}}return fp.isProd()&&!fp.getPrefCookie().log_error||(n.startsWith(e.errorClass+":")||(n=S(fpUtil.formatString("{0}: {1}",e.errorClass,n.s))),fp.logError(n.s),fp.log("metaData:",metaData)),r}})}}(),$Ja=fp,_Ja=!1,aKa=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,$Ja.Class=function(){},$Ja.Class.extend=function(e){var r=this.prototype;_Ja=!0;var t=new this;for(var n in _Ja=!1,e)t[n]="function"==typeof e[n]&&"function"==typeof r[n]&&aKa.test(e[n])?function(n,i){return function(){var e=this._super;this._super=r[n];var t=i.apply(this,arguments);return this._super=e,t}}(n,e[n]):e[n];function i(){!_Ja&&this.construct&&this.construct.apply(this,arguments)}return((i.prototype=t).constructor=i).extend=arguments.callee,i},
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
kKa=function(p){var i=/\+/g;function h(e){return g.raw?e:encodeURIComponent(e)}function m(e,t){var n=g.raw?e:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(i," ")),g.json?JSON.parse(e):e}catch(e){}}(e);return p.isFunction(t)?t(n):n}var g=p.cookie=function(e,t,n){if(void 0!==t&&!p.isFunction(t)){if("number"==typeof(n=p.extend({},g.defaults,n)).expires){var i=n.expires,r=n.expires=new Date;r.setTime(+r+864e5*i)}return document.cookie=[h(e),"=",function(e){return h(g.json?JSON.stringify(e):String(e))}(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}for(var a,o=e?void 0:{},s=document.cookie?document.cookie.split("; "):[],l=0,c=s.length;l<c;l++){var u=s[l].split("="),d=(a=u.shift(),g.raw?a:decodeURIComponent(a)),f=u.join("=");if(e&&e===d){o=m(f,t);break}e||void 0===(f=m(f))||(o[d]=f)}return o};g.defaults={},p.removeCookie=function(e,t){return void 0!==p.cookie(e)&&(p.cookie(e,"",p.extend({},t,{expires:-1})),!p.cookie(e))}},"function"==typeof define&&define.amd?define(["jquery"],kKa):"object"==typeof exports?kKa(require("jquery")):kKa($),
/*!
 * hoverIntent v1.8.1 // 2014.08.11 // jQuery v1.9.1+
 * http://briancherne.github.io/jquery-hoverIntent/
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007, 2014 Brian Cherne
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):jQuery&&!jQuery.fn.hoverIntent&&e(jQuery)}(function(l){"use strict";function c(e){r=e.pageX,a=e.pageY}var r,a,u={interval:100,sensitivity:6,timeout:0},d=0,f=function(e,t,n,i){if(Math.sqrt((n.pX-r)*(n.pX-r)+(n.pY-a)*(n.pY-a))<i.sensitivity)return t.off(n.event,c),delete n.timeoutId,n.isActive=!0,e.pageX=r,e.pageY=a,delete n.pX,delete n.pY,i.over.apply(t[0],[e]);n.pX=r,n.pY=a,n.timeoutId=setTimeout(function(){f(e,t,n,i)},i.interval)};l.fn.hoverIntent=function(e,t,n){var o=d++,s=l.extend({},u);l.isPlainObject(e)?(s=l.extend(s,e),l.isFunction(s.out)||(s.out=s.over)):s=l.isFunction(t)?l.extend(s,{over:e,out:t,selector:n}):l.extend(s,{over:e,out:e,selector:t});function i(e){var t=l.extend({},e),n=l(this),i=n.data("hoverIntent");i||n.data("hoverIntent",i={});var r=i[o];r||(i[o]=r={id:o}),r.timeoutId&&(r.timeoutId=clearTimeout(r.timeoutId));var a=r.event="mousemove.hoverIntent.hoverIntent"+o;if("mouseenter"===e.type){if(r.isActive)return;r.pX=t.pageX,r.pY=t.pageY,n.off(a,c).on(a,c),r.timeoutId=setTimeout(function(){f(t,n,r,s)},s.interval)}else{if(!r.isActive)return;n.off(a,c),r.timeoutId=setTimeout(function(){!function(e,t,n,i){delete t.data("hoverIntent")[n.id],i.apply(t[0],[e])}(t,n,r,s.out)},s.timeout)}}return this.on({"mouseenter.hoverIntent":i,"mouseleave.hoverIntent":i},s.selector)}}),function(){var l,r,c,e,t,n,i,a,o,s,u,d,f,p,h,m,g,v,_,y,b,S,w,C=[].slice,x=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};$.payment={},$.payment.fn={},$.fn.payment=function(){var e,t;return t=arguments[0],e=2<=arguments.length?C.call(arguments,1):[],$.payment.fn[t].apply(this,e)},e=/(\d{1,4})/g,$.payment.cards=c=[{type:"visaelectron",patterns:[4026,417500,4405,4508,4844,4913,4917],format:e,length:[16],cvcLength:[3],luhn:!0},{type:"maestro",patterns:[5018,502,503,56,58,639,6220,67],format:e,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"forbrugsforeningen",patterns:[600],format:e,length:[16],cvcLength:[3],luhn:!0},{type:"dankort",patterns:[5019],format:e,length:[16],cvcLength:[3],luhn:!0},{type:"visa",patterns:[4],format:e,length:[13,16],cvcLength:[3],luhn:!0},{type:"mastercard",patterns:[51,52,53,54,55,22,23,24,25,26,27],format:e,length:[16],cvcLength:[3],luhn:!0},{type:"amex",patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"dinersclub",patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",patterns:[60,64,65,622],format:e,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",patterns:[62,88],format:e,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"jcb",patterns:[35],format:e,length:[16],cvcLength:[3],luhn:!0}],l=function(e){var t,n,i,r,a,o,s;for(e=(e+"").replace(/\D/g,""),i=0,a=c.length;i<a;i++)for(r=0,o=(s=(t=c[i]).patterns).length;r<o;r++)if(n=s[r]+"",e.substr(0,n.length)===n)return t},r=function(e){var t,n,i;for(n=0,i=c.length;n<i;n++)if((t=c[n]).type===e)return t},d=function(e){var t,n,i,r,a,o;for(i=!0,a=r=0,o=(n=(e+"").split("").reverse()).length;a<o;a++)t=n[a],t=parseInt(t,10),(i=!i)&&(t*=2),9<t&&(t-=9),r+=t;return r%10==0},u=function(e){var t;return null!=e.prop("selectionStart")&&e.prop("selectionStart")!==e.prop("selectionEnd")||!(null==("undefined"!=typeof document&&null!==document&&null!=(t=document.selection)?t.createRange:void 0)||!document.selection.createRange().text)},S=function(e,t){var n,i;try{n=t.prop("selectionStart")}catch(e){e,n=null}if(i=t.val(),t.val(e),null!==n&&t.is(":focus"))return n===i.length&&(n=e.length),t.prop("selectionStart",n),t.prop("selectionEnd",n)},g=function(e){var t,n,i,r,a,o;for(null==e&&(e=""),"０１２３４５６７８９","0123456789",r="",a=0,o=(t=e.split("")).length;a<o;a++)n=t[a],-1<(i="０１２３４５６７８９".indexOf(n))&&(n="0123456789"[i]),r+=n;return r},m=function(n){return setTimeout(function(){var e,t;return t=(e=$(n.currentTarget)).val(),t=(t=g(t)).replace(/\D/g,""),S(t,e)})},p=function(n){return setTimeout(function(){var e,t;return t=(e=$(n.currentTarget)).val(),t=g(t),t=$.payment.formatCardNumber(t),S(t,e)})},i=function(e){var t,n,i,r,a,o,s;if(i=String.fromCharCode(e.which),/^\d+$/.test(i)&&(t=$(e.currentTarget),s=t.val(),n=l(s+i),r=(s.replace(/\D/g,"")+i).length,o=16,n&&(o=n.length[n.length.length-1]),!(o<=r||null!=t.prop("selectionStart")&&t.prop("selectionStart")!==s.length)))return(a=n&&"amex"===n.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/).test(s)?(e.preventDefault(),setTimeout(function(){return t.val(s+" "+i)})):a.test(s+i)?(e.preventDefault(),setTimeout(function(){return t.val(s+i+" ")})):void 0},t=function(e){var t,n;if(t=$(e.currentTarget),n=t.val(),8===e.which&&(null==t.prop("selectionStart")||t.prop("selectionStart")===n.length))return/\d\s$/.test(n)?(e.preventDefault(),setTimeout(function(){return t.val(n.replace(/\d\s$/,""))})):/\s\d?$/.test(n)?(e.preventDefault(),setTimeout(function(){return t.val(n.replace(/\d$/,""))})):void 0},h=function(n){return setTimeout(function(){var e,t;return t=(e=$(n.currentTarget)).val(),t=g(t),t=$.payment.formatExpiry(t),S(t,e)})},a=function(e){var n,t,i;if(t=String.fromCharCode(e.which),/^\d+$/.test(t))return n=$(e.currentTarget),i=n.val()+t,/^\d$/.test(i)&&"0"!==i&&"1"!==i?(e.preventDefault(),setTimeout(function(){return n.val("0"+i+" / ")})):/^\d\d$/.test(i)?(e.preventDefault(),setTimeout(function(){var e,t;return e=parseInt(i[0],10),2<(t=parseInt(i[1],10))&&0!==e?n.val("0"+e+" / "+t):n.val(i+" / ")})):void 0},o=function(e){var t,n,i;if(n=String.fromCharCode(e.which),/^\d+$/.test(n))return i=(t=$(e.currentTarget)).val(),/^\d\d$/.test(i)?t.val(i+" / "):void 0},s=function(e){var t,n,i;if("/"===(i=String.fromCharCode(e.which))||" "===i)return n=(t=$(e.currentTarget)).val(),/^\d$/.test(n)&&"0"!==n?t.val("0"+n+" / "):void 0},n=function(e){var t,n;if(t=$(e.currentTarget),n=t.val(),8===e.which&&(null==t.prop("selectionStart")||t.prop("selectionStart")===n.length))return/\d\s\/\s$/.test(n)?(e.preventDefault(),setTimeout(function(){return t.val(n.replace(/\d\s\/\s$/,""))})):void 0},f=function(n){return setTimeout(function(){var e,t;return t=(e=$(n.currentTarget)).val(),t=(t=g(t)).replace(/\D/g,"").slice(0,4),S(t,e)})},b=function(e){var t;return!(!e.metaKey&&!e.ctrlKey)||32!==e.which&&(0===e.which||(e.which<33||(t=String.fromCharCode(e.which),!!/[\d\s]/.test(t))))},_=function(e){var t,n,i,r;if(t=$(e.currentTarget),i=String.fromCharCode(e.which),/^\d+$/.test(i)&&!u(t))return r=(t.val()+i).replace(/\D/g,""),(n=l(r))?r.length<=n.length[n.length.length-1]:r.length<=16},y=function(e){var t,n;if(t=$(e.currentTarget),n=String.fromCharCode(e.which),/^\d+$/.test(n)&&!u(t))return!(6<(t.val()+n).replace(/\D/g,"").length)&&void 0},v=function(e){var t,n;if(t=$(e.currentTarget),n=String.fromCharCode(e.which),/^\d+$/.test(n)&&!u(t))return(t.val()+n).length<=4},w=function(e){var t,n,i,r,a;if(a=(t=$(e.currentTarget)).val(),r=$.payment.cardType(a)||"unknown",!t.hasClass(r))return n=function(){var e,t,n;for(n=[],e=0,t=c.length;e<t;e++)i=c[e],n.push(i.type);return n}(),t.removeClass("unknown"),t.removeClass(n.join(" ")),t.addClass(r),t.toggleClass("identified","unknown"!==r),t.trigger("payment.cardType",r)},$.payment.fn.formatCardCVC=function(){return this.on("keypress",b),this.on("keypress",v),this.on("paste",f),this.on("change",f),this.on("input",f),this},$.payment.fn.formatCardExpiry=function(){return this.on("keypress",b),this.on("keypress",y),this.on("keypress",a),this.on("keypress",s),this.on("keypress",o),this.on("keydown",n),this.on("change",h),this.on("input",h),this},$.payment.fn.formatCardNumber=function(){return this.on("keypress",b),this.on("keypress",_),this.on("keypress",i),this.on("keydown",t),this.on("keyup",w),this.on("paste",p),this.on("change",p),this.on("input",p),this.on("input",w),this},$.payment.fn.restrictNumeric=function(){return this.on("keypress",b),this.on("paste",m),this.on("change",m),this.on("input",m),this},$.payment.fn.cardExpiryVal=function(){return $.payment.cardExpiryVal($(this).val())},$.payment.cardExpiryVal=function(e){var t,n,i;return t=(i=e.split(/[\s\/]+/,2))[0],2===(null!=(n=i[1])?n.length:void 0)&&/^\d+$/.test(n)&&(n=(new Date).getFullYear().toString().slice(0,2)+n),{month:t=parseInt(t,10),year:n=parseInt(n,10)}},$.payment.fn.validateCardNumber=function(t,n){var i=this,r=$(this);function e(){var e=$.payment.validateCardNumber(r.val(),n);"function"==typeof t&&t.call(i,e)}return this.on("keypress",e),this.on("paste",e),this.on("change",e),this.on("input",e),e(),this},$.payment.validateCardNumber=function(e,t){var n,i;t=t instanceof Array?t:[];var r={valid:!1};return e=(e+"").replace(/\s+|-/g,""),/^\d+$/.test(e)&&(n=l(e))&&(r.valid=(i=e.length,0<=x.call(n.length,i)&&(!1===n.luhn||d(e))),r.valid&&t.length&&(r.valid=0<=x.call(t,n.type)),r.card=n),r},$.payment.validateCardExpiry=function(e,t){var n,i,r;return"object"==typeof e&&"month"in e&&(e=(r=e).month,t=r.year),!(!e||!t)&&(e=$.trim(e),t=$.trim(t),!!/^\d+$/.test(e)&&(!!/^\d+$/.test(t)&&(1<=e&&e<=12&&(2===t.length&&(t=t<70?"20"+t:"19"+t),4===t.length&&(i=new Date(t,e),n=new Date,i.setMonth(i.getMonth()-1),i.setMonth(i.getMonth()+1,1),n<i)))))},$.payment.validateCardCVC=function(e,t){var n,i;return e=$.trim(e),!!/^\d+$/.test(e)&&(null!=(n=r(t))?(i=e.length,0<=x.call(n.cvcLength,i)):3<=e.length&&e.length<=4)},$.payment.cardType=function(e){var t;return e&&(null!=(t=l(e))?t.type:void 0)||null},$.payment.formatCardNumber=function(e){var t,n,i,r;return e=e.replace(/\D/g,""),(t=l(e))?(i=t.length[t.length.length-1],e=e.slice(0,i),t.format.global?null!=(r=e.match(t.format))?r.join(" "):void 0:null!=(n=t.format.exec(e))?(n.shift(),(n=$.grep(n,function(e){return e})).join(" ")):void 0):e},$.payment.formatExpiry=function(e){var t,n,i,r;return(n=e.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/))?(t=n[1]||"",i=n[2]||"",0<(r=n[3]||"").length?i=" / ":" /"===i?(t=t.substring(0,1),i=""):2===t.length||0<i.length?i=" / ":1===t.length&&"0"!==t&&"1"!==t&&(t="0"+t,i=" / "),t+i+r):""}}.call(this),function(){"use strict";function e(x){x.fn._fadeIn=x.fn.fadeIn;var E=x.noop||function(){},T=/MSIE/.test(navigator.userAgent),I=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),M=(document.documentMode,x.isFunction(document.createElement("div").style.setExpression));x.blockUI=function(e){n(window,e)},x.unblockUI=function(e){O(window,e)},x.growlUI=function(e,t,n,i){var r=x('<div class="growlUI"></div>');e&&r.append("<h1>"+e+"</h1>"),t&&r.append("<h2>"+t+"</h2>"),void 0===n&&(n=3e3);function a(e){e=e||{},x.blockUI({message:r,fadeIn:void 0!==e.fadeIn?e.fadeIn:700,fadeOut:void 0!==e.fadeOut?e.fadeOut:1e3,timeout:void 0!==e.timeout?e.timeout:n,centerY:!1,showOverlay:!1,onUnblock:i,css:x.blockUI.defaults.growlCSS})}a();r.css("opacity");r.mouseover(function(){a({fadeIn:0,timeout:3e4});var e=x(".blockMsg");e.stop(),e.fadeTo(300,1)}).mouseout(function(){x(".blockMsg").fadeOut(1e3)})},x.fn.block=function(e){if(this[0]===window)return x.blockUI(e),this;var t=x.extend({},x.blockUI.defaults,e||{});return this.each(function(){var e=x(this);t.ignoreIfBlocked&&e.data("blockUI.isBlocked")||e.unblock({fadeOut:0})}),this.each(function(){"static"==x.css(this,"position")&&(this.style.position="relative",x(this).data("blockUI.static",!0)),this.style.zoom=1,n(this,e)})},x.fn.unblock=function(e){return this[0]===window?(x.unblockUI(e),this):this.each(function(){O(this,e)})},x.blockUI.version=2.7,x.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var D=null,k=[];function n(e,r){var t,n,a=e==window,i=r&&void 0!==r.message?r.message:void 0;if(!(r=x.extend({},x.blockUI.defaults,r||{})).ignoreIfBlocked||!x(e).data("blockUI.isBlocked")){if(r.overlayCSS=x.extend({},x.blockUI.defaults.overlayCSS,r.overlayCSS||{}),t=x.extend({},x.blockUI.defaults.css,r.css||{}),r.onOverlayClick&&(r.overlayCSS.cursor="pointer"),n=x.extend({},x.blockUI.defaults.themedCSS,r.themedCSS||{}),i=void 0===i?r.message:i,a&&D&&O(window,{fadeOut:0}),i&&"string"!=typeof i&&(i.parentNode||i.jquery)){var o=i.jquery?i[0]:i,s={};x(e).data("blockUI.history",s),s.el=o,s.parent=o.parentNode,s.display=o.style.display,s.position=o.style.position,s.parent&&s.parent.removeChild(o)}x(e).data("blockUI.onUnblock",r.onUnblock);var l,c,u,d,f=r.baseZ;l=T||r.forceIframe?x('<iframe class="blockUI" style="z-index:'+f+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+r.iframeSrc+'"></iframe>'):x('<div class="blockUI" style="display:none"></div>'),c=r.theme?x('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+f+++';display:none"></div>'):x('<div class="blockUI blockOverlay" style="z-index:'+f+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),r.theme&&a?(d='<div class="blockUI '+r.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(f+10)+';display:none;position:fixed">',r.title&&(d+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(r.title||"&nbsp;")+"</div>"),d+='<div class="ui-widget-content ui-dialog-content"></div>',d+="</div>"):r.theme?(d='<div class="blockUI '+r.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(f+10)+';display:none;position:absolute">',r.title&&(d+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(r.title||"&nbsp;")+"</div>"),d+='<div class="ui-widget-content ui-dialog-content"></div>',d+="</div>"):d=a?'<div class="blockUI '+r.blockMsgClass+' blockPage" style="z-index:'+(f+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+r.blockMsgClass+' blockElement" style="z-index:'+(f+10)+';display:none;position:absolute"></div>',u=x(d),i&&(r.theme?(u.css(n),u.addClass("ui-widget-content")):u.css(t)),r.theme||c.css(r.overlayCSS),c.css("position",a?"fixed":"absolute"),(T||r.forceIframe)&&l.css("opacity",0);var p=[l,c,u],h=x(a?"body":e);x.each(p,function(){this.appendTo(h)}),r.theme&&r.draggable&&x.fn.draggable&&u.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var m=M&&(!x.support.boxModel||0<x("object,embed",a?null:e).length);if(I||m){if(a&&r.allowBodyStretch&&x.support.boxModel&&x("html,body").css("height","100%"),(I||!x.support.boxModel)&&!a)var g=P(e,"borderTopWidth"),v=P(e,"borderLeftWidth"),_=g?"(0 - "+g+")":0,y=v?"(0 - "+v+")":0;x.each(p,function(e,t){var n=t[0].style;if(n.position="absolute",e<2)a?n.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+r.quirksmodeOffsetHack+') + "px"'):n.setExpression("height",'this.parentNode.offsetHeight + "px"'),a?n.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):n.setExpression("width",'this.parentNode.offsetWidth + "px"'),y&&n.setExpression("left",y),_&&n.setExpression("top",_);else if(r.centerY)a&&n.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),n.marginTop=0;else if(!r.centerY&&a){var i="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+(r.css&&r.css.top?parseInt(r.css.top,10):0)+') + "px"';n.setExpression("top",i)}})}if(i&&(r.theme?u.find(".ui-widget-content").append(i):u.append(i),(i.jquery||i.nodeType)&&x(i).show()),(T||r.forceIframe)&&r.showOverlay&&l.show(),r.fadeIn){var b=r.onBlock?r.onBlock:E,S=r.showOverlay&&!i?b:E,w=i?b:E;r.showOverlay&&c._fadeIn(r.fadeIn,S),i&&u._fadeIn(r.fadeIn,w)}else r.showOverlay&&c.show(),i&&u.show(),r.onBlock&&r.onBlock.bind(u)();if(U(1,e,r),a?(D=u[0],k=x(r.focusableElements,D),r.focusInput&&setTimeout(A,20)):function(e,t,n){var i=e.parentNode,r=e.style,a=(i.offsetWidth-e.offsetWidth)/2-P(i,"borderLeftWidth"),o=(i.offsetHeight-e.offsetHeight)/2-P(i,"borderTopWidth");t&&(r.left=0<a?a+"px":"0");n&&(r.top=0<o?o+"px":"0")}(u[0],r.centerX,r.centerY),r.timeout){var C=setTimeout(function(){a?x.unblockUI(r):x(e).unblock(r)},r.timeout);x(e).data("blockUI.timeout",C)}}}function O(e,t){var n,i,r=e==window,a=x(e),o=a.data("blockUI.history"),s=a.data("blockUI.timeout");s&&(clearTimeout(s),a.removeData("blockUI.timeout")),t=x.extend({},x.blockUI.defaults,t||{}),U(0,e,t),null===t.onUnblock&&(t.onUnblock=a.data("blockUI.onUnblock"),a.removeData("blockUI.onUnblock")),i=r?x("body").children().filter(".blockUI").add("body > .blockUI"):a.find(">.blockUI"),t.cursorReset&&(1<i.length&&(i[1].style.cursor=t.cursorReset),2<i.length&&(i[2].style.cursor=t.cursorReset)),r&&(D=k=null),t.fadeOut?(n=i.length,i.stop().fadeOut(t.fadeOut,function(){0==--n&&l(i,o,t,e)})):l(i,o,t,e)}function l(e,t,n,i){var r=x(i);if(!r.data("blockUI.isBlocked")){e.each(function(e,t){this.parentNode&&this.parentNode.removeChild(this)}),t&&t.el&&(t.el.style.display=t.display,t.el.style.position=t.position,t.el.style.cursor="default",t.parent&&t.parent.appendChild(t.el),r.removeData("blockUI.history")),r.data("blockUI.static")&&r.css("position","static"),"function"==typeof n.onUnblock&&n.onUnblock(i,n);var a=x(document.body),o=a.width(),s=a[0].style.width;a.width(o-1).width(o),a[0].style.width=s}}function U(e,t,n){var i=t==window,r=x(t);if((e||(!i||D)&&(i||r.data("blockUI.isBlocked")))&&(r.data("blockUI.isBlocked",e),i&&n.bindEvents&&(!e||n.showOverlay))){var a="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";e?x(document).on(a,n,o):x(document).off(a,o)}}function o(e){if("keydown"===e.type&&e.keyCode&&9==e.keyCode&&D&&e.data.constrainTabKey){var t=k,n=!e.shiftKey&&e.target===t[t.length-1],i=e.shiftKey&&e.target===t[0];if(n||i)return setTimeout(function(){A(i)},10),!1}var r=e.data,a=x(e.target);return a.hasClass("blockOverlay")&&r.onOverlayClick&&r.onOverlayClick(e),0<a.parents("div."+r.blockMsgClass).length||0===a.parents().children().filter("div.blockUI").length}function A(e){if(k){var t=k[!0===e?k.length-1:0];t&&t.focus()}}function P(e,t){return parseInt(x.css(e,t),10)||0}}"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e(jQuery)}(),function(c){"use strict";var i="readmore",n={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,beforeToggle:function(){},afterToggle:function(){}},a={},o=0;function s(e){var t=e.clone().css({height:"auto",width:e.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(e),n=t.outerHeight(),i=parseInt(t.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),r=e.data("defaultHeight");t.remove();var a=i||e.data("collapsedHeight")||r;e.data({expandedHeight:n,maxHeight:i,collapsedHeight:a}).css({maxHeight:"none"})}var r,l,u,d,f=(r=function(){c("[data-readmore]").each(function(){var e=c(this),t="true"===e.attr("aria-expanded");s(e),e.css({height:e.data(t?"expandedHeight":"collapsedHeight")})})},l=100,function(){var e=this,t=arguments,n=u&&!d;clearTimeout(d),d=setTimeout(function(){d=null,u||r.apply(e,t)},l),n&&r.apply(e,t)});function p(e,t){this.element=e,this.options=c.extend({},n,t),function(e){if(!a[e.selector]){var t=" ";e.embedCSS&&""!==e.blockCSS&&(t+=e.selector+" + [data-readmore-toggle], "+e.selector+"[data-readmore]{"+e.blockCSS+"}"),t+=e.selector+"[data-readmore]{transition: height "+e.speed+"ms;overflow: hidden;}",n=document,i=t,(r=n.createElement("style")).type="text/css",r.styleSheet?r.styleSheet.cssText=i:r.appendChild(n.createTextNode(i)),n.getElementsByTagName("head")[0].appendChild(r),a[e.selector]=!0}var n,i,r}(this.options),this._defaults=n,this._name=i,this.init(),c(window).on("load.readMore resize.readMore",f)}p.prototype={init:function(){var t=this,n=c(this.element);n.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),s(n);var e=n.data("collapsedHeight"),i=n.data("heightMargin");if(n.outerHeight(!0)<=e+i)return!0;var r=n.attr("id")||function(e){var t=++o;return String(null==e?"rmjs-":e)+t}(),a=t.options.startOpen?t.options.lessLink:t.options.moreLink;n.attr({"data-readmore":"","aria-expanded":!1,id:r}),n.after(c(a).on("click",function(e){t.toggle(this,n[0],e)}).attr({"data-readmore-toggle":"","aria-controls":r})),t.options.startOpen||n.css({height:e})},toggle:function(e,t,n){n&&n.preventDefault(),e=e||c('[aria-controls="'+this.element.id+'"]')[0],t=t||this.element;var i=this,r=c(t),a="",o="",s=!1,l=r.data("collapsedHeight");Math.round(r.height())<=l?(a=r.data("expandedHeight")+"px",o="lessLink",s=!0):(a=l,o="moreLink"),i.options.beforeToggle(e,t,!s),r.css({height:a}),r.on("transitionend",function(){i.options.afterToggle(e,t,s),c(this).attr({"aria-expanded":s}).off("transitionend")}),c(e).replaceWith(c(i.options[o]).on("click",function(e){i.toggle(this,t,e)}).attr({"data-readmore-toggle":"","aria-controls":r.attr("id")}))},destroy:function(){c(this.element).each(function(){var e=c(this);e.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),e.removeData()})}},c.fn.readmore=function(t){var n=arguments;return"object"==typeof(t=t||{})?this.each(function(){if(c.data(this,"plugin_"+i)){var e=c.data(this,"plugin_"+i);e.destroy.apply(e)}c.data(this,"plugin_"+i,new p(this,t))}):"string"==typeof t&&"_"!==t[0]&&"init"!==t?this.each(function(){var e=c.data(this,"plugin_"+i);e instanceof p&&"function"==typeof e[t]&&e[t].apply(e,Array.prototype.slice.call(n,1))}):void 0}}($),xRa=[function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.text=n.text||t,this.options=n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.encode=function(e,t,n){var i="";n=n||"";for(var r=0;r<e.length;r++)"L"==t[r]?i+=this.Lbinary[e[r]]:"G"==t[r]?i+=this.Gbinary[e[r]]:"R"==t[r]&&(i+=this.Rbinary[e[r]]),r<e.length-1&&(i+=n);return i},i);function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.startBin="101",this.endBin="101",this.middleBin="01010",this.Lbinary=["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],this.Gbinary=["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],this.Rbinary=["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"]}t.default=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=a.default),l.prototype.encode=function(){for(var e="110",t=0;t<this.data.length;t++){var n=parseInt(this.data[t]).toString(2);n=c(n,4-n.length);for(var i=0;i<n.length;i++)e+="0"==n[i]?"100":"110"}return{data:e+="1001",text:this.text}},l.prototype.valid=function(){return-1!==this.data.search(/^[0-9]+$/)},l);function l(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t))}function c(e,t){for(var n=0;n<t;n++)e="0"+e;return e}t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);for(n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&(i[n]=t[n]);return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=a.default),l.prototype.encode=function(){var e,t=this.bytes,n=t.shift()-105;return 103==n?e=this.nextA(t,1):104==n?e=this.nextB(t,1):105==n&&(e=this.nextC(t,1)),{text:this.text==this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:this.getEncoding(n)+e.result+this.getEncoding((e.checksum+n)%103)+this.getEncoding(106)}},l.prototype.getEncoding=function(e){return this.encodings[e]?(this.encodings[e]+1e3).toString(2):""},l.prototype.valid=function(){return-1!==this.data.search(/^[\x00-\x7F\xC8-\xD3]+$/)},l.prototype.nextA=function(e,t){if(e.length<=0)return{result:"",checksum:0};var n,i;if(200<=e[0])i=e[0]-105,e.shift(),n=99===i?this.nextC(e,t+1):100===i?this.nextB(e,t+1):(98===i&&(e[0]=95<e[0]?e[0]-96:e[0]),this.nextA(e,t+1));else{var r=e[0];i=r<32?r+64:r-32,e.shift(),n=this.nextA(e,t+1)}var a=i*t;return{result:this.getEncoding(i)+n.result,checksum:a+n.checksum}},l.prototype.nextB=function(e,t){if(e.length<=0)return{result:"",checksum:0};var n,i;n=200<=e[0]?(i=e[0]-105,e.shift(),99===i?this.nextC(e,t+1):101===i?this.nextA(e,t+1):(98===i&&(e[0]=e[0]<32?e[0]+96:e[0]),this.nextB(e,t+1))):(i=e[0]-32,e.shift(),this.nextB(e,t+1));var r=i*t;return{result:this.getEncoding(i)+n.result,checksum:r+n.checksum}},l.prototype.nextC=function(e,t){if(e.length<=0)return{result:"",checksum:0};var n,i;n=200<=e[0]?(i=e[0]-105,e.shift(),100===i?this.nextB(e,t+1):101===i?this.nextA(e,t+1):this.nextC(e,t+1)):(i=10*(e[0]-48)+e[1]-48,e.shift(),e.shift(),this.nextC(e,t+1));var r=i*t;return{result:this.getEncoding(i)+n.result,checksum:r+n.checksum}},l);function l(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e.substring(1),t));n.bytes=[];for(var i=0;i<e.length;++i)n.bytes.push(e.charCodeAt(i));return n.encodings=[740,644,638,176,164,100,224,220,124,608,604,572,436,244,230,484,260,254,650,628,614,764,652,902,868,836,830,892,844,842,752,734,590,304,112,94,416,128,122,672,576,570,464,422,134,496,478,142,910,678,582,768,762,774,880,862,814,896,890,818,914,602,930,328,292,200,158,68,62,424,412,232,218,76,74,554,616,978,556,146,340,212,182,508,268,266,956,940,938,758,782,974,400,310,118,512,506,960,954,502,518,886,966,668,680,692,5379],n}t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mod10=function(e){for(var t=0,n=0;n<e.length;n++){var i=parseInt(e[n]);(n+e.length)%2==0?t+=i:t+=2*i%10+Math.floor(2*i/10)}return(10-t%10)%10},t.mod11=function(e){for(var t=0,n=[2,3,4,5,6,7],i=0;i<e.length;i++){var r=parseInt(e[e.length-1-i]);t+=n[i%n.length]*r}return(11-t%11)%11}},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a,o=(n(s,a=Error),s);function s(e,t){i(this,s);var n=r(this,a.call(this));return n.name="InvalidInputException",n.symbology=e,n.input=t,n.message='"'+n.input+'" is not a valid input for '+n.symbology,n}var l,c=(n(u,l=Error),u);function u(){i(this,u);var e=r(this,l.call(this));return e.name="InvalidElementException",e.message="Not supported type to render on",e}var d,f=(n(p,d=Error),p);function p(){i(this,p);var e=r(this,d.call(this));return e.name="NoElementException",e.message="No element to render on.",e}t.InvalidInputException=o,t.InvalidElementException=c,t.NoElementException=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in t)t.hasOwnProperty(n)&&(n=t[n],"string"==typeof e[n]&&(e[n]=parseInt(e[n],10)));"string"==typeof e.displayValue&&(e.displayValue="false"!=e.displayValue);return e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};t.default=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTotalWidthOfEncodings=t.calculateEncodingAttributes=t.getBarcodePadding=t.getEncodingHeight=t.getMaximumHeightOfEncodings=void 0;var i,r=n(3),l=(i=r)&&i.__esModule?i:{default:i};function c(e,t){return t.height+(t.displayValue&&0<e.text.length?t.fontSize+t.textMargin:0)+t.marginTop+t.marginBottom}function u(e,t,n){if(n.displayValue&&t<e){if("center"==n.textAlign)return Math.floor((e-t)/2);if("left"==n.textAlign)return 0;if("right"==n.textAlign)return Math.floor(e-t)}return 0}function d(e,t,n){var i;return(i=void 0===n?document.createElement("canvas").getContext("2d"):n).font=t.fontOptions+" "+t.fontSize+"px "+t.font,i.measureText(e).width}t.getMaximumHeightOfEncodings=function(e){for(var t=0,n=0;n<e.length;n++)e[n].height>t&&(t=e[n].height);return t},t.getEncodingHeight=c,t.getBarcodePadding=u,t.calculateEncodingAttributes=function(e,t,n){for(var i=0;i<e.length;i++){var r=e[i],a=(0,l.default)(t,r.options),o=d(r.text,a,n),s=r.data.length*a.width;r.width=Math.ceil(Math.max(o,s)),r.height=c(r,a),r.barcodePadding=u(o,s,a)}},t.getTotalWidthOfEncodings=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].width;return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),r=n(19),a=n(26),o=n(29),s=n(28),l=n(34),c=n(36),u=n(35),d=n(27);t.default={CODE39:i.CODE39,CODE128:r.CODE128,CODE128A:r.CODE128A,CODE128B:r.CODE128B,CODE128C:r.CODE128C,EAN13:a.EAN13,EAN8:a.EAN8,EAN5:a.EAN5,EAN2:a.EAN2,UPC:a.UPC,ITF14:o.ITF14,ITF:s.ITF,MSI:l.MSI,MSI10:l.MSI10,MSI11:l.MSI11,MSI1010:l.MSI1010,MSI1110:l.MSI1110,pharmacode:c.pharmacode,codabar:u.codabar,GenericBarcode:d.GenericBarcode}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.handleCatch=function(e){if("InvalidInputException"!==e.name)throw e;if(this.api._options.valid===this.api._defaults.valid)throw e.message;this.api._options.valid(!1),this.api.render=function(){}},i.prototype.wrapBarcodeCall=function(e){try{var t=e.apply(void 0,arguments);return this.api._options.valid(!0),t}catch(e){return this.handleCatch(e),this.api}},i);function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.api=e}t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(37),a=(i=r)&&i.__esModule?i:{default:i},o=n(39),s=n(6);function l(e){if("string"==typeof e)return function(e){var t=document.querySelectorAll(e);{if(0===t.length)return;for(var n=[],i=0;i<t.length;i++)n.push(l(t[i]));return n}}(e);if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++)t.push(l(e[n]));return t}if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLImageElement)return function(e){var t=document.createElement("canvas");return{element:t,options:(0,a.default)(e),renderer:(0,o.getRendererClass)("canvas"),afterRender:function(){e.setAttribute("src",t.toDataURL())}}}(e);if("undefined"!=typeof SVGElement&&e instanceof SVGElement)return{element:e,options:(0,a.default)(e),renderer:(0,o.getRendererClass)("svg")};if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement)return{element:e,options:(0,a.default)(e),renderer:(0,o.getRendererClass)("canvas")};if(e.getContext)return{element:e,renderer:(0,o.getRendererClass)("canvas")};throw new s.InvalidElementException}t.default=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var i=[];return function e(t){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else t.text=t.text||"",t.data=t.data||"",i.push(t)}(e),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(4),a=(i=r)&&i.__esModule?i:{default:i};var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=a.default),l.prototype.valid=function(){return-1!==this.data.search(/^[\x00-\x5F\xC8-\xCF]+$/)},l);function l(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,String.fromCharCode(208)+e,t))}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(4),a=(i=r)&&i.__esModule?i:{default:i};var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=a.default),l.prototype.valid=function(){return-1!==this.data.search(/^[\x20-\x7F\xC8-\xCF]+$/)},l);function l(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,String.fromCharCode(209)+e,t))}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(4),a=(i=r)&&i.__esModule?i:{default:i};var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=a.default),l.prototype.valid=function(){return-1!==this.data.search(/^(\xCF*[0-9]{2}\xCF*)+$/)},l);function l(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,String.fromCharCode(210)+e,t))}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(4),a=(i=r)&&i.__esModule?i:{default:i};function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s,l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,s=a.default),c);function c(e,t){if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),-1!==e.search(/^[\x00-\x7F\xC8-\xD3]+$/))var n=o(this,s.call(this,function(e){var t,n=e.match(/^[\x00-\x5F\xC8-\xCF]*/)[0].length,i=e.match(/^[\x20-\x7F\xC8-\xCF]*/)[0].length;t=2<=e.match(/^(\xCF*[0-9]{2}\xCF*)*/)[0].length?String.fromCharCode(210)+f(e):i<n?String.fromCharCode(208)+u(e):String.fromCharCode(209)+d(e);return t=t.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(e,t){return String.fromCharCode(203)+t})}(e),t));else n=o(this,s.call(this,e,t));return o(n)}function u(e){var t=e.match(/^([\x00-\x5F\xC8-\xCF]+?)(([0-9]{2}){2,})([^0-9]|$)/);if(t)return t[1]+String.fromCharCode(204)+f(e.substring(t[1].length));var n=e.match(/^[\x00-\x5F\xC8-\xCF]+/);return n[0].length===e.length?e:n[0]+String.fromCharCode(205)+d(e.substring(n[0].length))}function d(e){var t=e.match(/^([\x20-\x7F\xC8-\xCF]+?)(([0-9]{2}){2,})([^0-9]|$)/);if(t)return t[1]+String.fromCharCode(204)+f(e.substring(t[1].length));var n=e.match(/^[\x20-\x7F\xC8-\xCF]+/);return n[0].length===e.length?e:n[0]+String.fromCharCode(206)+u(e.substring(n[0].length))}function f(e){var t=e.match(/^(\xCF*[0-9]{2}\xCF*)+/)[0],n=t.length;if(n===e.length)return e;var i=(e=e.substring(n)).match(/^[\x00-\x5F\xC8-\xCF]*/)[0].length;return e.match(/^[\x20-\x7F\xC8-\xCF]*/)[0].length<=i?t+String.fromCharCode(206)+u(e):t+String.fromCharCode(205)+d(e)}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CODE128C=t.CODE128B=t.CODE128A=t.CODE128=void 0;var i=s(n(18)),r=s(n(15)),a=s(n(16)),o=s(n(17));function s(e){return e&&e.__esModule?e:{default:e}}t.CODE128=i.default,t.CODE128A=r.default,t.CODE128B=a.default,t.CODE128C=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CODE39=void 0;var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=a.default),l.prototype.encode=function(){for(var e=d("*"),t=0;t<this.data.length;t++)e+=d(this.data[t])+"0";return{data:e+=d("*"),text:this.text}},l.prototype.valid=function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)},l);function l(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),e=e.toUpperCase(),t.mod43&&(e+=function(e){return c[e]}(function(e){for(var t=0,n=0;n<e.length;n++)t+=f(e[n]);return t%=43}(e))),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t))}var c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],u=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function d(e){return function(e){return u[e].toString(2)}(f(e))}function f(e){return c.indexOf(e)}t.CODE39=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(1)),i=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=i.default),l.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{13}$/)&&this.data[12]==c(this.data)},l.prototype.encode=function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()},l.prototype.getStructure=function(){return["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]},l.prototype.guardedEncoding=function(){var e=new a.default,t=[],n=this.getStructure()[this.data[0]],i=this.data.substr(1,6),r=this.data.substr(7,6);return this.options.displayValue&&t.push({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),t.push({data:"101",options:{height:this.guardHeight}}),t.push({data:e.encode(i,n),text:this.text.substr(1,6),options:{fontSize:this.fontSize}}),t.push({data:"01010",options:{height:this.guardHeight}}),t.push({data:e.encode(r,"RRRRRR"),text:this.text.substr(7,6),options:{fontSize:this.fontSize}}),t.push({data:"101",options:{height:this.guardHeight}}),this.options.lastChar&&this.options.displayValue&&(t.push({data:"00"}),t.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}})),t},l.prototype.flatEncoding=function(){var e=new a.default,t="",n=this.getStructure()[this.data[0]];return t+="101",t+=e.encode(this.data.substr(1,6),n),t+="01010",t+=e.encode(this.data.substr(7,6),"RRRRRR"),{data:t+="101",text:this.text}},l);function l(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),-1!==e.search(/^[0-9]{12}$/)&&(e+=c(e));var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t));return!t.flat&&t.fontSize>10*t.width?n.fontSize=10*t.width:n.fontSize=t.fontSize,n.guardHeight=t.height+n.fontSize/2+t.textMargin,n.lastChar=t.lastChar,n}function c(e){var t,n=0;for(t=0;t<12;t+=2)n+=parseInt(e[t]);for(t=1;t<12;t+=2)n+=3*parseInt(e[t]);return(10-n%10)%10}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=r.default),l.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{2}$/)},l.prototype.encode=function(){var e=new i.default,t=this.structure[parseInt(this.data)%4],n="1011";return{data:n+=e.encode(this.data,t,"01"),text:this.text}},l);function l(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t));return n.structure=["LL","LG","GL","GG"],n}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=r.default),l.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{5}$/)},l.prototype.encode=function(){var e=new i.default,t=this.checksum(),n="1011";return{data:n+=e.encode(this.data,this.structure[t],"01"),text:this.text}},l.prototype.checksum=function(){var e=0;return e+=3*parseInt(this.data[0]),e+=9*parseInt(this.data[1]),e+=3*parseInt(this.data[2]),e+=9*parseInt(this.data[3]),(e+=3*parseInt(this.data[4]))%10},l);function l(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t));return n.structure=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],n}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=i.default),l.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{8}$/)&&this.data[7]==c(this.data)},l.prototype.encode=function(){var e=new r.default,t="",n=this.data.substr(0,4),i=this.data.substr(4,4);return t+=e.startBin,t+=e.encode(n,"LLLL"),t+=e.middleBin,t+=e.encode(i,"RRRR"),{data:t+=e.endBin,text:this.text}},l);function l(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),-1!==e.search(/^[0-9]{7}$/)&&(e+=c(e)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t))}function c(e){var t,n=0;for(t=0;t<7;t+=2)n+=3*parseInt(e[t]);for(t=1;t<7;t+=2)n+=parseInt(e[t]);return(10-n%10)%10}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=r.default),l.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==c(this.data)},l.prototype.encode=function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()},l.prototype.flatEncoding=function(){var e=new i.default,t="";return t+="101",t+=e.encode(this.data.substr(0,6),"LLLLLL"),t+="01010",t+=e.encode(this.data.substr(6,6),"RRRRRR"),{data:t+="101",text:this.text}},l.prototype.guardedEncoding=function(){var e=new i.default,t=[];return this.displayValue&&t.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),t.push({data:"101"+e.encode(this.data[0],"L"),options:{height:this.guardHeight}}),t.push({data:e.encode(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),t.push({data:"01010",options:{height:this.guardHeight}}),t.push({data:e.encode(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),t.push({data:e.encode(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&t.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),t},l);function l(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),-1!==e.search(/^[0-9]{11}$/)&&(e+=c(e));var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t));return n.displayValue=t.displayValue,t.fontSize>10*t.width?n.fontSize=10*t.width:n.fontSize=t.fontSize,n.guardHeight=t.height+n.fontSize/2+t.textMargin,n}function c(e){var t,n=0;for(t=1;t<11;t+=2)n+=parseInt(e[t]);for(t=0;t<11;t+=2)n+=3*parseInt(e[t]);return(10-n%10)%10}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UPC=t.EAN2=t.EAN5=t.EAN8=t.EAN13=void 0;var i=l(n(21)),r=l(n(24)),a=l(n(23)),o=l(n(22)),s=l(n(25));function l(e){return e&&e.__esModule?e:{default:e}}t.EAN13=i.default,t.EAN8=r.default,t.EAN5=a.default,t.EAN2=o.default,t.UPC=s.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenericBarcode=void 0;var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=a.default),l.prototype.encode=function(){return{data:"10101010101010101010101010101010101010101",text:this.text}},l.prototype.valid=function(){return!0},l);function l(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t))}t.GenericBarcode=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITF=void 0;var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=a.default),l.prototype.valid=function(){return-1!==this.data.search(/^([0-9]{2})+$/)},l.prototype.encode=function(){for(var e="1010",t=0;t<this.data.length;t+=2)e+=this.calculatePair(this.data.substr(t,2));return{data:e+="11101",text:this.text}},l.prototype.calculatePair=function(e){for(var t="",n=this.binaryRepresentation[e[0]],i=this.binaryRepresentation[e[1]],r=0;r<5;r++)t+="1"==n[r]?"111":"1",t+="1"==i[r]?"000":"0";return t},l);function l(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t));return n.binaryRepresentation={0:"00110",1:"10001",2:"01001",3:"11000",4:"00101",5:"10100",6:"01100",7:"00011",8:"10010",9:"01010"},n}t.ITF=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITF14=void 0;var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=a.default),l.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{14}$/)&&this.data[13]==c(this.data)},l.prototype.encode=function(){for(var e="1010",t=0;t<14;t+=2)e+=this.calculatePair(this.data.substr(t,2));return{data:e+="11101",text:this.text}},l.prototype.calculatePair=function(e){for(var t="",n=this.binaryRepresentation[e[0]],i=this.binaryRepresentation[e[1]],r=0;r<5;r++)t+="1"==n[r]?"111":"1",t+="1"==i[r]?"000":"0";return t},l);function l(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),-1!==e.search(/^[0-9]{13}$/)&&(e+=c(e));var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t));return n.binaryRepresentation={0:"00110",1:"10001",2:"01001",3:"11000",4:"00101",5:"10100",6:"01100",7:"00011",8:"10010",9:"01010"},n}function c(e){for(var t=0,n=0;n<13;n++)t+=parseInt(e[n])*(3-n%2*2);return 10*Math.ceil(t/10)-t}t.ITF14=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2),a=(i=r)&&i.__esModule?i:{default:i},o=n(5);var s,l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,s=a.default),c);function c(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.call(this,e+(0,o.mod10)(e),t))}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2),a=(i=r)&&i.__esModule?i:{default:i},o=n(5);var s,l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,s=a.default),c);function c(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),e+=(0,o.mod10)(e),e+=(0,o.mod10)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.call(this,e,t))}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2),a=(i=r)&&i.__esModule?i:{default:i},o=n(5);var s,l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,s=a.default),c);function c(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.call(this,e+(0,o.mod11)(e),t))}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2),a=(i=r)&&i.__esModule?i:{default:i},o=n(5);var s,l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,s=a.default),c);function c(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),e+=(0,o.mod11)(e),e+=(0,o.mod10)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.call(this,e,t))}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MSI1110=t.MSI1010=t.MSI11=t.MSI10=t.MSI=void 0;var i=l(n(2)),r=l(n(30)),a=l(n(32)),o=l(n(31)),s=l(n(33));function l(e){return e&&e.__esModule?e:{default:e}}t.MSI=i.default,t.MSI10=r.default,t.MSI11=a.default,t.MSI1010=o.default,t.MSI1110=s.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codabar=void 0;var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=a.default),l.prototype.valid=function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)},l.prototype.encode=function(){for(var e=[],t=this.getEncodings(),n=0;n<this.data.length;n++)e.push(t[this.data.charAt(n)]),n!==this.data.length-1&&e.push("0");return{text:this.text,data:e.join("")}},l.prototype.getEncodings=function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"101100110011",A:"1011001001",B:"1010010011",C:"1001001011",D:"1010011001"}},l);function l(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),0===e.search(/^[0-9\-\$\:\.\+\/]+$/)&&(e="A"+e+"A");var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e.toUpperCase(),t));return n.text=n.options.text||n.text.replace(/[A-D]/g,""),n}t.codabar=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pharmacode=void 0;var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=a.default),l.prototype.encode=function(){for(var e=this.number,t="";!isNaN(e)&&0!=e;)e=e%2==0?(t="11100"+t,(e-2)/2):(t="100"+t,(e-1)/2);return{data:t=t.slice(0,-2),text:this.text}},l.prototype.valid=function(){return 3<=this.number&&this.number<=131070},l);function l(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t));return n.number=parseInt(e,10),n}t.pharmacode=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(7)),r=a(n(8));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t={};for(var n in r.default)r.default.hasOwnProperty(n)&&(e.hasAttribute("jsbarcode-"+n.toLowerCase())&&(t[n]=e.getAttribute("jsbarcode-"+n.toLowerCase())),e.hasAttribute("data-"+n.toLowerCase())&&(t[n]=e.getAttribute("data-"+n.toLowerCase())));return t.value=e.getAttribute("jsbarcode-value")||e.getAttribute("data-value"),t=(0,i.default)(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(3),a=(i=r)&&i.__esModule?i:{default:i},o=n(9);var s=(l.prototype.render=function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var e=0;e<this.encodings.length;e++){var t=(0,a.default)(this.options,this.encodings[e].options);this.drawCanvasBarcode(t,this.encodings[e]),this.drawCanvasText(t,this.encodings[e]),this.moveCanvasDrawing(this.encodings[e])}this.restoreCanvas()},l.prototype.prepareCanvas=function(){var e=this.canvas.getContext("2d");e.save(),(0,o.calculateEncodingAttributes)(this.encodings,this.options,e);var t=(0,o.getTotalWidthOfEncodings)(this.encodings),n=(0,o.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=t+this.options.marginLeft+this.options.marginRight,this.canvas.height=n,e.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(e.fillStyle=this.options.background,e.fillRect(0,0,this.canvas.width,this.canvas.height)),e.translate(this.options.marginLeft,0)},l.prototype.drawCanvasBarcode=function(e,t){var n,i=this.canvas.getContext("2d"),r=t.data;n="top"==e.textPosition?e.marginTop+e.fontSize+e.textMargin:e.marginTop,i.fillStyle=e.lineColor;for(var a=0;a<r.length;a++){var o=a*e.width+t.barcodePadding;"1"===r[a]?i.fillRect(o,n,e.width,e.height):r[a]&&i.fillRect(o,n,e.width,e.height*r[a])}},l.prototype.drawCanvasText=function(e,t){var n,i,r=this.canvas.getContext("2d"),a=e.fontOptions+" "+e.fontSize+"px "+e.font;e.displayValue&&(i="top"==e.textPosition?e.marginTop+e.fontSize-e.textMargin:e.height+e.textMargin+e.marginTop+e.fontSize,r.font=a,"left"==e.textAlign||0<t.barcodePadding?(n=0,r.textAlign="left"):"right"==e.textAlign?(n=t.width-1,r.textAlign="right"):(n=t.width/2,r.textAlign="center"),r.fillText(t.text,n,i))},l.prototype.moveCanvasDrawing=function(e){this.canvas.getContext("2d").translate(e.width,0)},l.prototype.restoreCanvas=function(){this.canvas.getContext("2d").restore()},l);function l(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.canvas=e,this.encodings=t,this.options=n}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRendererClass=void 0;var i=a(n(38)),r=a(n(40));function a(e){return e&&e.__esModule?e:{default:e}}t.getRendererClass=function(e){switch(e){case"canvas":return i.default;case"svg":return r.default;default:throw new Error("Invalid rederer")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(3),o=(i=r)&&i.__esModule?i:{default:i},a=n(9);var s="http://www.w3.org/2000/svg",l=(c.prototype.render=function(){var e,t=this.options.marginLeft;this.prepareSVG();for(var n=0;n<this.encodings.length;n++){var i=this.encodings[n],r=(0,o.default)(this.options,i.options),a=u(t,r.marginTop,this.svg);e=r,a.setAttribute("style","fill:"+e.lineColor+";"),this.drawSvgBarcode(a,r,i),this.drawSVGText(a,r,i),t+=i.width}},c.prototype.prepareSVG=function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,a.calculateEncodingAttributes)(this.encodings,this.options);var e=(0,a.getTotalWidthOfEncodings)(this.encodings),t=(0,a.getMaximumHeightOfEncodings)(this.encodings),n=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(n,t),this.options.background&&d(0,0,n,t,this.svg).setAttribute("style","fill:"+this.options.background+";")},c.prototype.drawSvgBarcode=function(e,t,n){var i,r=n.data;i="top"==t.textPosition?t.fontSize+t.textMargin:0;for(var a=0,o=0,s=0;s<r.length;s++)o=s*t.width+n.barcodePadding,"1"===r[s]?a++:0<a&&(d(o-t.width*a,i,t.width*a,t.height,e),a=0);0<a&&d(o-t.width*(a-1),i,t.width*a,t.height,e)},c.prototype.drawSVGText=function(e,t,n){var i=document.createElementNS(s,"text");if(t.displayValue){var r,a;i.setAttribute("style","font:"+t.fontOptions+" "+t.fontSize+"px "+t.font),a="top"==t.textPosition?t.fontSize-t.textMargin:t.height+t.textMargin+t.fontSize,"left"==t.textAlign||0<n.barcodePadding?(r=0,i.setAttribute("text-anchor","start")):"right"==t.textAlign?(r=n.width-1,i.setAttribute("text-anchor","end")):(r=n.width/2,i.setAttribute("text-anchor","middle")),i.setAttribute("x",r),i.setAttribute("y",a);var o=n.text;i.appendChild(document.createTextNode(o)),e.appendChild(i)}},c.prototype.setSvgAttributes=function(e,t){var n=this.svg;n.setAttribute("width",e+"px"),n.setAttribute("height",t+"px"),n.setAttribute("x","0px"),n.setAttribute("y","0px"),n.setAttribute("viewBox","0 0 "+e+" "+t),n.setAttribute("xmlns",s),n.setAttribute("version","1.1"),n.style.transform="translate(0,0)"},c);function c(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.svg=e,this.encodings=t,this.options=n}function u(e,t,n){var i=document.createElementNS(s,"g");return i.setAttribute("transform","translate("+e+", "+t+")"),n.appendChild(i),i}function d(e,t,n,i,r){var a=document.createElementNS(s,"rect");return a.setAttribute("x",e),a.setAttribute("y",t),a.setAttribute("width",n),a.setAttribute("height",i),r.appendChild(a),a}t.default=l},function(e,t,n){"use strict";var i=f(n(10)),l=f(n(3)),o=f(n(14)),r=f(n(12)),a=f(n(13)),c=f(n(7)),s=f(n(11)),u=n(6),d=f(n(8));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){var i=new h;if(void 0===e)throw Error("No element to render on was provided.");return i._renderProperties=(0,a.default)(e),i._encodings=[],i._options=d.default,i._errorHandler=new s.default(i),"object"==typeof n&&n.valid&&(i._options=(0,l.default)(i._options,n)),void 0!==t&&((n=n||{}).format||(n.format=_()),i.options(n)[n.format](t,n).render()),i}var h=function(){};for(var m in p.getModule=function(e){return i.default[e]},i.default)i.default.hasOwnProperty(m)&&g(i.default,m);function g(o,s){h.prototype[s]=h.prototype[s.toUpperCase()]=h.prototype[s.toLowerCase()]=function(i,r){var a=this;return a._errorHandler.wrapBarcodeCall(function(){var e=(0,l.default)(a._options,r);e=(0,c.default)(e);var t=o[s],n=v(i,t,e);return a._encodings.push(n),a})}}function v(e,t,n){var i=new t(e=""+e,n);if(!i.valid())throw new u.InvalidInputException(i.constructor.name,e);var r=i.encode();r=(0,o.default)(r);for(var a=0;a<r.length;a++)r[a].options=(0,l.default)(n,r[a].options);return r}function _(){return i.default.CODE128?"CODE128":Object.keys(i.default)[0]}function y(e,t,n){t=(0,o.default)(t);for(var i=0;i<t.length;i++)t[i].options=(0,l.default)(n,t[i].options),(0,r.default)(t[i].options);(0,r.default)(n),new e.renderer(e.element,t,n).render(),e.afterRender&&e.afterRender()}h.prototype.options=function(e){return this._options=(0,l.default)(this._options,e),this},h.prototype.blank=function(e){var t="0".repeat(e);return this._encodings.push({data:t}),this},h.prototype.init=function(){var t;if(this._renderProperties)for(var e in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){t=this._renderProperties[e];var n=(0,l.default)(this._options,t.options);"auto"==n.format&&(n.format=_()),this._errorHandler.wrapBarcodeCall(function(){var e=v(n.value,i.default[n.format.toUpperCase()],n);y(t,e,n)})}},h.prototype.render=function(){if(!this._renderProperties)throw new u.NoElementException;if(Array.isArray(this._renderProperties))for(var e=0;e<this._renderProperties.length;e++)y(this._renderProperties[e],this._encodings,this._options);else y(this._renderProperties,this._encodings,this._options);return this},h.prototype._defaults=d.default,void 0!==fp&&(fp.JsBarcode=p),void 0!==jQuery&&(jQuery.fn.JsBarcode=function(e,t){var n=[];return jQuery(this).each(function(){n.push(this)}),p(n,e,t)}),e.exports=p}],yRa={},zRa.m=xRa,zRa.c=yRa,zRa.i=function(e){return e},zRa.d=function(e,t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},zRa.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return zRa.d(t,"a",t),t},zRa.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},zRa.p="",zRa(zRa.s=41),
/* flatpickr v4.2.3, @license MIT */
k9a=this,l9a=function(e){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var G=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Y=function(e){return("0"+e).slice(-2)},K=function(e){return!0===e?1:0};function Q(n,i,r){var a;return void 0===r&&(r=!1),function(){var e=this,t=arguments;null!==a&&clearTimeout(a),a=window.setTimeout(function(){a=null,r||n.apply(e,t)},i),r&&!a&&n.apply(e,t)}}var Z=function(e){return e instanceof Array?e:[e]};function t(){}var _={D:t,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours(parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*K(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t){var n=parseInt(t);return new Date(e.getFullYear(),0,2+7*(n-1),0,0,0,0)},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours(parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:t,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},w:t,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},X={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},o={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[o.w(e,t,n)]},F:function(e,t,n){return ne(o.n(e,t,n)-1,!1,t)},G:function(e,t,n){return Y(o.h(e,t,n))},H:function(e){return Y(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[K(11<e.getHours())]},M:function(e,t){return ne(e.getMonth(),!0,t)},S:function(e){return Y(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(e){return Y(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return Y(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return Y(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},i={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(3<t&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"]},J=function(e){var t=e.config,r=void 0===t?y:t,n=e.l10n,a=void 0===n?i:n;return function(i,e){return void 0!==r.formatDate?r.formatDate(i,e):e.split("").map(function(e,t,n){return o[e]&&"\\"!==n[t-1]?o[e](i,a,r):"\\"!==e?e:""}).join("")}},ee=function(e){var t=e.config,g=void 0===t?y:t,n=e.l10n,v=void 0===n?i:n;return function(e,t,n){if(0===e||e){var i,r=e;if(e instanceof Date)i=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)i=new Date(e);else if("string"==typeof e){var a=t||(g||y).dateFormat,o=String(e).trim();if("today"===o)i=new Date,n=!0;else if(/Z$/.test(o)||/GMT$/.test(o))i=new Date(e);else if(g&&g.parseDate)i=g.parseDate(e,a);else{i=g&&g.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var s=void 0,l=[],c=0,u=0,d="";c<a.length;c++){var f=a[c],p="\\"===f,h="\\"===a[c-1]||p;if(X[f]&&!h){d+=X[f];var m=new RegExp(d).exec(e);m&&(s=!0)&&l["Y"!==f?"push":"unshift"]({fn:_[f],val:m[++u]})}else p||(d+=".");l.forEach(function(e){var t=e.fn,n=e.val;return i=t(i,n,v)||i})}i=s?i:void 0}}if(i instanceof Date)return!0===n&&i.setHours(0,0,0,0),i;g.errorHandler(new Error("Invalid date provided: "+r))}}};function te(e,t,n){return void 0===n&&(n=!0),!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}var ne=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},ie={DAY:864e5},y={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:console.warn,getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};function re(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function ae(e,t,n){var i=window.document.createElement(e);return t=t||"",n=n||"",i.className=t,void 0!==n&&(i.textContent=n),i}function oe(e,t){var n=ae("div","numInputWrapper"),i=ae("input","numInput "+e),r=ae("span","arrowUp"),a=ae("span","arrowDown");if(i.type="text",i.pattern="\\d*",void 0!==t)for(var o in t)i.setAttribute(o,t[o]);return n.appendChild(i),n.appendChild(r),n.appendChild(a),n}"function"!=typeof Object.assign&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=function(t){t&&Object.keys(t).forEach(function(e){return n[e]=t[e]})},r=0,a=e;r<a.length;r++){i(a[r])}return n});var se,le=300;function s(l,c){var p={};function u(e){return e.bind(p)}function d(e){p.config.noCalendar&&0===p.selectedDates.length&&(p.setDate(void 0!==p.config.minDate?new Date(p.config.minDate.getTime()):(new Date).setHours(p.config.defaultHour,p.config.defaultMinute,p.config.defaultSeconds,0),!1),f(),B()),function(e){e.preventDefault();var t="keydown"===e.type,n=e.target;void 0!==p.amPM&&e.target===p.amPM&&(p.amPM.textContent=p.l10n.amPM[K(p.amPM.textContent===p.l10n.amPM[0])]);var i=parseFloat(n.getAttribute("data-min")),r=parseFloat(n.getAttribute("data-max")),a=parseFloat(n.getAttribute("data-step")),o=parseInt(n.value,10),s=e.delta||(t?38===e.which?1:-1:Math.max(-1,Math.min(1,e.wheelDelta||-e.deltaY))||0),l=o+a*s;if(void 0!==n.value&&2===n.value.length){var c=n===p.hourElement,u=n===p.minuteElement;l<i?(l=r+l+K(!c)+(K(c)&&K(!p.amPM)),u&&_(void 0,-1,p.hourElement)):r<l&&(l=n===p.hourElement?l-r-K(!p.amPM):i,u&&_(void 0,1,p.hourElement)),p.amPM&&c&&(1===a?l+o===23:Math.abs(l-o)>a)&&(p.amPM.textContent=p.l10n.amPM[K(p.amPM.textContent===p.l10n.amPM[0])]),n.value=Y(l)}}(e),0!==p.selectedDates.length&&("input"!==e.type?(f(),B()):setTimeout(function(){f(),B()},le))}function f(){if(void 0!==p.hourElement&&void 0!==p.minuteElement){var e=(parseInt(p.hourElement.value.slice(-2),10)||0)%24,t=(parseInt(p.minuteElement.value,10)||0)%60,n=void 0!==p.secondElement?(parseInt(p.secondElement.value,10)||0)%60:0;void 0!==p.amPM&&(e=function(e,t){return e%12+12*K(t===p.l10n.amPM[1])}(e,p.amPM.textContent));var i=void 0!==p.config.minTime||p.config.minDate&&p.minDateHasTime&&p.latestSelectedDateObj&&0===te(p.latestSelectedDateObj,p.config.minDate,!0);if(void 0!==p.config.maxTime||p.config.maxDate&&p.maxDateHasTime&&p.latestSelectedDateObj&&0===te(p.latestSelectedDateObj,p.config.maxDate,!0)){var r=void 0!==p.config.maxTime?p.config.maxTime:p.config.maxDate;(e=Math.min(e,r.getHours()))===r.getHours()&&(t=Math.min(t,r.getMinutes()))}if(i){var a=void 0!==p.config.minTime?p.config.minTime:p.config.minDate;(e=Math.max(e,a.getHours()))===a.getHours()&&(t=Math.max(t,a.getMinutes()))}o(e,t,n)}}function h(e){var t=e||p.latestSelectedDateObj;t&&o(t.getHours(),t.getMinutes(),t.getSeconds())}function o(e,t,n){void 0!==p.latestSelectedDateObj&&p.latestSelectedDateObj.setHours(e%24,t,n||0,0),p.hourElement&&p.minuteElement&&!p.isMobile&&(p.hourElement.value=Y(p.config.time_24hr?e:(12+e)%12+12*K(e%12==0)),p.minuteElement.value=Y(t),void 0!==p.amPM&&(p.amPM.textContent=p.l10n.amPM[K(12<=e)]),void 0!==p.secondElement&&(p.secondElement.value=Y(n)))}function t(e){var t=parseInt(e.target.value)+(e.delta||0);4!==t.toString().length&&"Enter"!==e.key||(p.currentYearElement.blur(),/[^\d]/.test(t.toString())||I(t))}function a(t,n,i,r){return n instanceof Array?n.forEach(function(e){return a(t,e,i,r)}):t instanceof Array?t.forEach(function(e){return a(e,n,i,r)}):(t.addEventListener(n,i,r),void p._handlers.push({element:t,event:n,handler:i}))}function n(t){return function(e){1===e.which&&t(e)}}function m(){F("onChange")}function i(){p._animationLoop.forEach(function(e){return e()}),p._animationLoop=[]}function r(e){if(p.daysContainer&&1<p.daysContainer.childNodes.length)switch(e.animationName){case"fpSlideLeft":p.daysContainer.lastChild&&p.daysContainer.lastChild.classList.remove("slideLeftNew"),p.daysContainer.removeChild(p.daysContainer.firstChild),p.days=p.daysContainer.firstChild,i();break;case"fpSlideRight":p.daysContainer.firstChild&&p.daysContainer.firstChild.classList.remove("slideRightNew"),p.daysContainer.removeChild(p.daysContainer.lastChild),p.days=p.daysContainer.firstChild,i()}}function s(e){switch(e.animationName){case"fpSlideLeftNew":case"fpSlideRightNew":p.navigationCurrentMonth.classList.remove("slideLeftNew"),p.navigationCurrentMonth.classList.remove("slideRightNew");for(var t=p.navigationCurrentMonth;t.nextSibling&&/curr/.test(t.nextSibling.className);)p.monthNav.removeChild(t.nextSibling);for(;t.previousSibling&&/curr/.test(t.previousSibling.className);)p.monthNav.removeChild(t.previousSibling);p.oldCurMonth=void 0}}function g(e){var t=void 0!==e?p.parseDate(e):p.latestSelectedDateObj||(p.config.minDate&&p.config.minDate>p.now?p.config.minDate:p.config.maxDate&&p.config.maxDate<p.now?p.config.maxDate:p.now);try{void 0!==t&&(p.currentYear=t.getFullYear(),p.currentMonth=t.getMonth())}catch(e){e.message="Invalid date supplied: "+t,p.config.errorHandler(e)}p.redraw()}function v(e){~e.target.className.indexOf("arrow")&&_(e,e.target.classList.contains("arrowUp")?1:-1)}function _(e,t,n){var i=e&&e.target,r=n||i&&i.parentNode&&i.parentNode.firstChild,a=q("increment");a.delta=t,r&&r.dispatchEvent(a)}function y(e,t,n,i){var r=M(t,!0),a=ae("span","flatpickr-day "+e,t.getDate().toString());return a.dateObj=t,a.$i=i,a.setAttribute("aria-label",p.formatDate(t,p.config.ariaDateFormat)),0===te(t,p.now)&&(p.todayDateElem=a).classList.add("today"),r?(a.tabIndex=-1,H(t)&&(a.classList.add("selected"),p.selectedDateElem=a,"range"===p.config.mode&&(re(a,"startRange",p.selectedDates[0]&&0===te(t,p.selectedDates[0])),re(a,"endRange",p.selectedDates[1]&&0===te(t,p.selectedDates[1]))))):(a.classList.add("disabled"),p.selectedDates[0]&&p.minRangeDate&&t>p.minRangeDate&&t<p.selectedDates[0]?p.minRangeDate=t:p.selectedDates[0]&&p.maxRangeDate&&t<p.maxRangeDate&&t>p.selectedDates[0]&&(p.maxRangeDate=t)),"range"===p.config.mode&&(!function(e){return!("range"!==p.config.mode||p.selectedDates.length<2)&&(0<=te(e,p.selectedDates[0])&&te(e,p.selectedDates[1])<=0)}(t)||H(t)||a.classList.add("inRange"),1===p.selectedDates.length&&void 0!==p.minRangeDate&&void 0!==p.maxRangeDate&&(t<p.minRangeDate||t>p.maxRangeDate)&&a.classList.add("notAllowed")),p.weekNumbers&&"prevMonthDay"!==e&&n%7==1&&p.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+p.config.getWeek(t)+"</span>"),F("onDayCreate",a),a}function b(e,t){function n(){(r=r||p.days.childNodes[i]).focus(),"range"===p.config.mode&&k(r)}var i=e+t||0,r=void 0!==e?p.days.childNodes[i]:p.selectedDateElem||p.todayDateElem||p.days.childNodes[0];if(void 0===r&&0!==t)return 0<t?(p.changeMonth(1,!0,void 0,!0),i%=42):t<0&&(p.changeMonth(-1,!0,void 0,!0),i+=42),S(n);n()}function S(e){!0===p.config.animate?p._animationLoop.push(e):e()}function w(e){if(void 0!==p.daysContainer){var t=(new Date(p.currentYear,p.currentMonth,1).getDay()-p.l10n.firstDayOfWeek+7)%7,n="range"===p.config.mode,i=p.utils.getDaysInMonth((p.currentMonth-1+12)%12),r=p.utils.getDaysInMonth(),a=window.document.createDocumentFragment(),o=i+1-t,s=0;for(p.weekNumbers&&p.weekNumbers.firstChild&&(p.weekNumbers.textContent=""),n&&(p.minRangeDate=new Date(p.currentYear,p.currentMonth-1,o),p.maxRangeDate=new Date(p.currentYear,p.currentMonth+1,(42-t)%r));o<=i;o++,s++)a.appendChild(y("prevMonthDay",new Date(p.currentYear,p.currentMonth-1,o),o,s));for(o=1;o<=r;o++,s++)a.appendChild(y("",new Date(p.currentYear,p.currentMonth,o),o,s));for(var l=r+1;l<=42-t;l++,s++)a.appendChild(y("nextMonthDay",new Date(p.currentYear,p.currentMonth+1,l%r),l,s));n&&1===p.selectedDates.length&&a.childNodes[0]?(p._hidePrevMonthArrow=p._hidePrevMonthArrow||!!p.minRangeDate&&p.minRangeDate>a.childNodes[0].dateObj,p._hideNextMonthArrow=p._hideNextMonthArrow||!!p.maxRangeDate&&p.maxRangeDate<new Date(p.currentYear,p.currentMonth+1,1)):z();var c=ae("div","dayContainer");if(c.appendChild(a),p.config.animate&&void 0!==e)for(;1<p.daysContainer.childNodes.length;)p.daysContainer.removeChild(p.daysContainer.firstChild);else!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(p.daysContainer);e&&0<=e?p.daysContainer.appendChild(c):p.daysContainer.insertBefore(c,p.daysContainer.firstChild),p.days=p.daysContainer.childNodes[0]}}function C(){p.weekdayContainer||(p.weekdayContainer=ae("div","flatpickr-weekdays"));var e=p.l10n.firstDayOfWeek,t=p.l10n.weekdays.shorthand.slice();return 0<e&&e<t.length&&(t=t.splice(e,t.length).concat(t.splice(0,e))),p.weekdayContainer.innerHTML="\n    <span class=flatpickr-weekday>\n      "+t.join("</span><span class=flatpickr-weekday>")+"\n    </span>\n    ",p.weekdayContainer}function x(e,t,n,i){void 0===t&&(t=!0),void 0===n&&(n=p.config.animate),void 0===i&&(i=!1);var r=t?e:e-p.currentMonth;if(!(r<0&&p._hidePrevMonthArrow||0<r&&p._hideNextMonthArrow)){if(p.currentMonth+=r,(p.currentMonth<0||11<p.currentMonth)&&(p.currentYear+=11<p.currentMonth?1:-1,p.currentMonth=(p.currentMonth+12)%12,F("onYearChange")),w(n?r:void 0),!n)return F("onMonthChange"),z();var a=p.navigationCurrentMonth;if(r<0)for(;a.nextSibling&&/curr/.test(a.nextSibling.className);)p.monthNav.removeChild(a.nextSibling);else if(0<r)for(;a.previousSibling&&/curr/.test(a.previousSibling.className);)p.monthNav.removeChild(a.previousSibling);p.oldCurMonth=p.navigationCurrentMonth,p.navigationCurrentMonth=p.monthNav.insertBefore(p.oldCurMonth.cloneNode(!0),0<r?p.oldCurMonth.nextSibling:p.oldCurMonth);var o=p.daysContainer;if(o.firstChild&&o.lastChild&&(0<r?(o.firstChild.classList.add("slideLeft"),o.lastChild.classList.add("slideLeftNew"),p.oldCurMonth.classList.add("slideLeft"),p.navigationCurrentMonth.classList.add("slideLeftNew")):r<0&&(o.firstChild.classList.add("slideRightNew"),o.lastChild.classList.add("slideRight"),p.oldCurMonth.classList.add("slideRight"),p.navigationCurrentMonth.classList.add("slideRightNew"))),p.currentMonthElement=p.navigationCurrentMonth.firstChild,p.currentYearElement=p.navigationCurrentMonth.lastChild.childNodes[0],z(),p.oldCurMonth.firstChild&&(p.oldCurMonth.firstChild.textContent=ne(p.currentMonth-r,p.config.shorthandCurrentMonth,p.l10n)),S(function(){return F("onMonthChange")}),i&&document.activeElement&&document.activeElement.$i){var s=document.activeElement.$i;S(function(){b(s,0)})}}}function E(e){return!(!p.config.appendTo||!p.config.appendTo.contains(e))||p.calendarContainer.contains(e)}function T(t){if(p.isOpen&&!p.config.inline){var e=E(t.target),n=t.target===p.input||t.target===p.altInput||p.element.contains(t.target)||t.path&&t.path.indexOf&&(~t.path.indexOf(p.input)||~t.path.indexOf(p.altInput)),i="blur"===t.type?n&&t.relatedTarget&&!E(t.relatedTarget):!n&&!e,r=!p.config.ignoredFocusElements.some(function(e){return e.contains(t.target)});i&&r&&(p.close(),"range"===p.config.mode&&1===p.selectedDates.length&&(p.clear(!1),p.redraw()))}}function I(e){if(!(!e||p.currentYearElement.getAttribute("data-min")&&e<parseInt(p.currentYearElement.getAttribute("data-min"))||p.currentYearElement.getAttribute("data-max")&&e>parseInt(p.currentYearElement.getAttribute("data-max")))){var t=e,n=p.currentYear!==t;p.currentYear=t||p.currentYear,p.config.maxDate&&p.currentYear===p.config.maxDate.getFullYear()?p.currentMonth=Math.min(p.config.maxDate.getMonth(),p.currentMonth):p.config.minDate&&p.currentYear===p.config.minDate.getFullYear()&&(p.currentMonth=Math.max(p.config.minDate.getMonth(),p.currentMonth)),n&&(p.redraw(),F("onYearChange"))}}function M(e,t){void 0===t&&(t=!0);var n=p.parseDate(e,void 0,t);if(p.config.minDate&&n&&te(n,p.config.minDate,void 0!==t?t:!p.minDateHasTime)<0||p.config.maxDate&&n&&0<te(n,p.config.maxDate,void 0!==t?t:!p.maxDateHasTime))return!1;if(!p.config.enable.length&&!p.config.disable.length)return!0;if(void 0===n)return!1;for(var i=0<p.config.enable.length,r=i?p.config.enable:p.config.disable,a=0,o=void 0;a<r.length;a++){if("function"==typeof(o=r[a])&&o(n))return i;if(o instanceof Date&&void 0!==n&&o.getTime()===n.getTime())return i;if("string"==typeof o&&void 0!==n){var s=p.parseDate(o,void 0,!0);return s&&s.getTime()===n.getTime()?i:!i}if("object"==typeof o&&void 0!==n&&o.from&&o.to&&n.getTime()>=o.from.getTime()&&n.getTime()<=o.to.getTime())return i}return!i}function D(e){var t=e.target===p._input,n=E(e.target),i=p.config.allowInput,r=p.isOpen&&(!i||!t),a=p.config.inline&&t&&!i;if(13===e.keyCode&&t){if(i)return p.setDate(p._input.value,!0,e.target===p.altInput?p.config.altFormat:p.config.dateFormat),e.target.blur();p.open()}else if(n||r||a){var o=!!p.timeContainer&&p.timeContainer.contains(e.target);switch(e.keyCode){case 13:o?B():L(e);break;case 27:e.preventDefault(),p.close();break;case 8:case 46:t&&!p.config.allowInput&&p.clear();break;case 37:case 39:if(o)p.hourElement&&p.hourElement.focus();else if(e.preventDefault(),p.daysContainer){var s=39===e.keyCode?1:-1;e.ctrlKey?x(s,!0,void 0,!0):b(e.target.$i,s)}break;case 38:case 40:e.preventDefault();var l=40===e.keyCode?1:-1;p.daysContainer&&void 0!==e.target.$i?e.ctrlKey?(I(p.currentYear-l),b(e.target.$i,0)):o||b(e.target.$i,7*l):p.config.enableTime&&(!o&&p.hourElement&&p.hourElement.focus(),d(e),p._debouncedChange());break;case 9:e.target===p.hourElement?(e.preventDefault(),p.minuteElement.select()):e.target===p.minuteElement&&(p.secondElement||p.amPM)?(e.preventDefault(),void 0!==p.secondElement?p.secondElement.focus():void 0!==p.amPM&&p.amPM.focus()):e.target===p.secondElement&&p.amPM&&(e.preventDefault(),p.amPM.focus())}switch(e.key){case p.l10n.amPM[0].charAt(0):void 0!==p.amPM&&e.target===p.amPM&&(p.amPM.textContent=p.l10n.amPM[0],f(),B());break;case p.l10n.amPM[1].charAt(0):void 0!==p.amPM&&e.target===p.amPM&&(p.amPM.textContent=p.l10n.amPM[1],f(),B())}F("onKeyDown",e)}}function k(s){if(1===p.selectedDates.length&&s.classList.contains("flatpickr-day")&&!s.classList.contains("disabled")&&void 0!==p.minRangeDate&&void 0!==p.maxRangeDate){for(var l=s.dateObj,c=p.parseDate(p.selectedDates[0],void 0,!0),u=Math.min(l.getTime(),p.selectedDates[0].getTime()),d=Math.max(l.getTime(),p.selectedDates[0].getTime()),f=!1,e=u;e<d;e+=ie.DAY)if(!M(new Date(e))){f=!0;break}for(var t=function(e,t){var n=t.getTime(),i=n<p.minRangeDate.getTime()||n>p.maxRangeDate.getTime(),r=p.days.childNodes[e];if(i)return r.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){r.classList.remove(e)}),"continue";if(f&&!i)return"continue";["startRange","inRange","endRange","notAllowed"].forEach(function(e){r.classList.remove(e)});var a=Math.max(p.minRangeDate.getTime(),u),o=Math.min(p.maxRangeDate.getTime(),d);s.classList.add(l<p.selectedDates[0]?"startRange":"endRange"),c<l&&n===c.getTime()?r.classList.add("startRange"):l<c&&n===c.getTime()&&r.classList.add("endRange"),a<=n&&n<=o&&r.classList.add("inRange")},n=0,i=p.days.childNodes[n].dateObj;n<42;n++,i=p.days.childNodes[n]&&p.days.childNodes[n].dateObj)t(n,i)}}function O(){!p.isOpen||p.config.static||p.config.inline||P()}function U(i){return function(e){var t=p.config["_"+i+"Date"]=p.parseDate(e,p.config.dateFormat),n=p.config["_"+("min"===i?"max":"min")+"Date"];void 0!==t&&(p["min"===i?"minDateHasTime":"maxDateHasTime"]=0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()),p.selectedDates&&(p.selectedDates=p.selectedDates.filter(function(e){return M(e)}),p.selectedDates.length||"min"!==i||h(t),B()),p.daysContainer&&($(),void 0!==t?p.currentYearElement[i]=t.getFullYear().toString():p.currentYearElement.removeAttribute(i),p.currentYearElement.disabled=!!n&&void 0!==t&&n.getFullYear()===t.getFullYear())}}function A(){"object"!=typeof p.config.locale&&void 0===se.l10ns[p.config.locale]&&p.config.errorHandler(new Error("flatpickr: invalid locale "+p.config.locale)),p.l10n=G({},se.l10ns.default,"object"==typeof p.config.locale?p.config.locale:"default"!==p.config.locale?se.l10ns[p.config.locale]:void 0),X.K="("+p.l10n.amPM[0]+"|"+p.l10n.amPM[1]+"|"+p.l10n.amPM[0].toLowerCase()+"|"+p.l10n.amPM[1].toLowerCase()+")",p.formatDate=J(p)}function P(e){if(void 0!==p.calendarContainer){F("onPreCalendarPosition");var t=e||p._positionElement,n=Array.prototype.reduce.call(p.calendarContainer.children,function(e,t){return e+t.offsetHeight},0),i=p.calendarContainer.offsetWidth,r=p.config.position,a=t.getBoundingClientRect(),o=window.innerHeight-a.bottom,s="above"===r||"below"!==r&&o<n&&a.top>n,l=window.pageYOffset+a.top+(s?-n-2:t.offsetHeight+2);if(re(p.calendarContainer,"arrowTop",!s),re(p.calendarContainer,"arrowBottom",s),!p.config.inline){var c=window.pageXOffset+a.left,u=window.document.body.offsetWidth-a.right,d=c+i>window.document.body.offsetWidth;re(p.calendarContainer,"rightMost",d),p.config.static||(p.calendarContainer.style.top=l+"px",d?(p.calendarContainer.style.left="auto",p.calendarContainer.style.right=u+"px"):(p.calendarContainer.style.left=c+"px",p.calendarContainer.style.right="auto"))}}}function $(){p.config.noCalendar||p.isMobile||(C(),z(),w())}function L(e){e.preventDefault(),e.stopPropagation();var t=function e(t,n){return n(t)?t:t.parentNode?e(t.parentNode,n):void 0}(e.target,function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")&&!e.classList.contains("notAllowed")});if(void 0!==t){var n=t,i=p.latestSelectedDateObj=new Date(n.dateObj.getTime()),r=i.getMonth()!==p.currentMonth&&"range"!==p.config.mode;if(p.selectedDateElem=n,"single"===p.config.mode)p.selectedDates=[i];else if("multiple"===p.config.mode){var a=H(i);a?p.selectedDates.splice(parseInt(a),1):p.selectedDates.push(i)}else"range"===p.config.mode&&(2===p.selectedDates.length&&p.clear(),p.selectedDates.push(i),0!==te(i,p.selectedDates[0],!0)&&p.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()}));if(f(),r){var o=p.currentYear!==i.getFullYear();p.currentYear=i.getFullYear(),p.currentMonth=i.getMonth(),o&&F("onYearChange"),F("onMonthChange")}if(w(),p.config.minDate&&p.minDateHasTime&&p.config.enableTime&&0===te(i,p.config.minDate)&&h(p.config.minDate),B(),p.config.enableTime&&setTimeout(function(){return p.showTimeInput=!0},50),"range"===p.config.mode&&(1===p.selectedDates.length?(k(n),p._hidePrevMonthArrow=p._hidePrevMonthArrow||void 0!==p.minRangeDate&&p.minRangeDate>p.days.childNodes[0].dateObj,p._hideNextMonthArrow=p._hideNextMonthArrow||void 0!==p.maxRangeDate&&p.maxRangeDate<new Date(p.currentYear,p.currentMonth+1,1)):z()),r?S(function(){return p.selectedDateElem&&p.selectedDateElem.focus()}):b(n.$i,0),void 0!==p.hourElement&&setTimeout(function(){return void 0!==p.hourElement&&p.hourElement.select()},451),p.config.closeOnSelect){var s="single"===p.config.mode&&!p.config.enableTime,l="range"===p.config.mode&&2===p.selectedDates.length&&!p.config.enableTime;(s||l)&&(p._input.focus(),-1===window.navigator.userAgent.indexOf("MSIE")?p.close():setTimeout(p.close,0))}m()}}p.parseDate=ee(p),p._animationLoop=[],p._handlers=[],p._bind=a,p._setHoursFromDate=h,p.changeMonth=x,p.changeYear=I,p.clear=function(e){void 0===e&&(e=!0);p.input.value="",p.altInput&&(p.altInput.value="");p.mobileInput&&(p.mobileInput.value="");p.selectedDates=[],p.latestSelectedDateObj=void 0,p.showTimeInput=!1,p.config.enableTime&&(void 0!==p.config.minDate?h(p.config.minDate):o(p.config.defaultHour,p.config.defaultMinute,p.config.defaultSeconds));p.redraw(),e&&F("onChange")},p.close=function(){p.isOpen=!1,p.isMobile||(p.calendarContainer.classList.remove("open"),p._input.classList.remove("active"));F("onClose")},p._createElement=ae,p.destroy=function(){void 0!==p.config&&F("onDestroy");for(var e=p._handlers.length;e--;){var t=p._handlers[e];t.element.removeEventListener(t.event,t.handler)}p._handlers=[],p.mobileInput?(p.mobileInput.parentNode&&p.mobileInput.parentNode.removeChild(p.mobileInput),p.mobileInput=void 0):p.calendarContainer&&p.calendarContainer.parentNode&&p.calendarContainer.parentNode.removeChild(p.calendarContainer);p.altInput&&(p.input.type="text",p.altInput.parentNode&&p.altInput.parentNode.removeChild(p.altInput),delete p.altInput);p.input&&(p.input.type=p.input._type,p.input.classList.remove("flatpickr-input"),p.input.removeAttribute("readonly"),p.input.value="");["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(e){try{delete p[e]}catch(e){}})},p.isEnabled=M,p.jumpToDate=g,p.open=function(e,t){void 0===t&&(t=p._input);if(p.isMobile)return e&&(e.preventDefault(),e.target&&e.target.blur()),setTimeout(function(){void 0!==p.mobileInput&&p.mobileInput.click()},0),void F("onOpen");if(p._input.disabled||p.config.inline)return;var n=p.isOpen;p.isOpen=!0,n||(p.calendarContainer.classList.add("open"),p._input.classList.add("active"),F("onOpen"),P(t))},p.redraw=$,p.set=function(e,t){null!==e&&"object"==typeof e?Object.assign(p.config,e):(p.config[e]=t,void 0!==j[e]&&j[e].forEach(function(e){return e()}));p.redraw(),g()},p.setDate=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=p.config.dateFormat);if(0!==e&&!e)return p.clear(t);R(e,n),p.showTimeInput=0<p.selectedDates.length,p.latestSelectedDateObj=p.selectedDates[0],p.redraw(),g(),h(),B(t),t&&F("onChange")},p.toggle=function(){if(p.isOpen)return p.close();p.open()};var j={locale:[A]};function R(e,t){var n=[];if(e instanceof Array)n=e.map(function(e){return p.parseDate(e,t)});else if(e instanceof Date||"number"==typeof e)n=[p.parseDate(e,t)];else if("string"==typeof e)switch(p.config.mode){case"single":n=[p.parseDate(e,t)];break;case"multiple":n=e.split(p.config.conjunction).map(function(e){return p.parseDate(e,t)});break;case"range":n=e.split(p.l10n.rangeSeparator).map(function(e){return p.parseDate(e,t)})}else p.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));p.selectedDates=n.filter(function(e){return e instanceof Date&&M(e,!1)}),p.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()})}function N(e){return e.map(function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?p.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:p.parseDate(e.from,void 0),to:p.parseDate(e.to,void 0)}:e}).filter(function(e){return e})}function F(e,t){var n=p.config[e];if(void 0!==n&&0<n.length)for(var i=0;n[i]&&i<n.length;i++)n[i](p.selectedDates,p.input.value,p,t);"onChange"===e&&(p.input.dispatchEvent(q("change")),p.input.dispatchEvent(q("input")))}function q(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function H(e){for(var t=0;t<p.selectedDates.length;t++)if(0===te(p.selectedDates[t],e))return""+t;return!1}function z(){p.config.noCalendar||p.isMobile||!p.monthNav||(p.currentMonthElement.textContent=ne(p.currentMonth,p.config.shorthandCurrentMonth,p.l10n)+" ",p.currentYearElement.value=p.currentYear.toString(),p._hidePrevMonthArrow=void 0!==p.config.minDate&&(p.currentYear===p.config.minDate.getFullYear()?p.currentMonth<=p.config.minDate.getMonth():p.currentYear<p.config.minDate.getFullYear()),p._hideNextMonthArrow=void 0!==p.config.maxDate&&(p.currentYear===p.config.maxDate.getFullYear()?p.currentMonth+1>p.config.maxDate.getMonth():p.currentYear>p.config.maxDate.getFullYear()))}function B(e){if(void 0===e&&(e=!0),!p.selectedDates.length)return p.clear(e);void 0!==p.mobileInput&&p.mobileFormatStr&&(p.mobileInput.value=void 0!==p.latestSelectedDateObj?p.formatDate(p.latestSelectedDateObj,p.mobileFormatStr):"");var t="range"!==p.config.mode?p.config.conjunction:p.l10n.rangeSeparator;p.input.value=p.selectedDates.map(function(e){return p.formatDate(e,p.config.dateFormat)}).join(t),void 0!==p.altInput&&(p.altInput.value=p.selectedDates.map(function(e){return p.formatDate(e,p.config.altFormat)}).join(t)),!1!==e&&F("onValueUpdate")}function W(e){e.preventDefault();var t=p.currentYearElement.parentNode&&p.currentYearElement.parentNode.contains(e.target);if(e.target===p.currentMonthElement||t){var n=function(e){return 0<=(e.wheelDelta||-e.deltaY)?1:-1}(e);t?(I(p.currentYear+n),e.target.value=p.currentYear.toString()):p.changeMonth(n,!0,!1)}}function V(e){var t=p.prevMonthNav.contains(e.target),n=p.nextMonthNav.contains(e.target);t||n?x(t?-1:1):e.target===p.currentYearElement?(e.preventDefault(),p.currentYearElement.select()):"arrowUp"===e.target.className?p.changeYear(p.currentYear+1):"arrowDown"===e.target.className&&p.changeYear(p.currentYear-1)}return function(){p.element=p.input=l,p.isOpen=!1,function(){var e=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],t=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"];p.config=G({},se.defaultConfig);var n=G({},c,JSON.parse(JSON.stringify(l.dataset||{}))),i={};p.config.parseDate=n.parseDate,p.config.formatDate=n.formatDate,Object.defineProperty(p.config,"enable",{get:function(){return p.config._enable||[]},set:function(e){p.config._enable=N(e)}}),Object.defineProperty(p.config,"disable",{get:function(){return p.config._disable||[]},set:function(e){p.config._disable=N(e)}}),!n.dateFormat&&n.enableTime&&(i.dateFormat=n.noCalendar?"H:i"+(n.enableSeconds?":S":""):se.defaultConfig.dateFormat+" H:i"+(n.enableSeconds?":S":""));n.altInput&&n.enableTime&&!n.altFormat&&(i.altFormat=n.noCalendar?"h:i"+(n.enableSeconds?":S K":" K"):se.defaultConfig.altFormat+" h:i"+(n.enableSeconds?":S":"")+" K");Object.defineProperty(p.config,"minDate",{get:function(){return p.config._minDate},set:U("min")}),Object.defineProperty(p.config,"maxDate",{get:function(){return p.config._maxDate},set:U("max")});function r(t){return function(e){p.config["min"===t?"_minTime":"_maxTime"]=p.parseDate(e,"H:i")}}Object.defineProperty(p.config,"minTime",{get:function(){return p.config._minTime},set:r("min")}),Object.defineProperty(p.config,"maxTime",{get:function(){return p.config._maxTime},set:r("max")}),Object.assign(p.config,i,n);for(var a=0;a<e.length;a++)p.config[e[a]]=!0===p.config[e[a]]||"true"===p.config[e[a]];for(a=t.length;a--;)void 0!==p.config[t[a]]&&(p.config[t[a]]=Z(p.config[t[a]]||[]).map(u));for(a=0;a<p.config.plugins.length;a++){var o=p.config.plugins[a](p)||{};for(var s in o)~t.indexOf(s)?p.config[s]=Z(o[s]).map(u).concat(p.config[s]):void 0===n[s]&&(p.config[s]=o[s])}p.isMobile=!p.config.disableMobile&&!p.config.inline&&"single"===p.config.mode&&!p.config.disable.length&&!p.config.enable.length&&!p.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),F("onParseConfig")}(),A(),function(){if(p.input=p.config.wrap?l.querySelector("[data-input]"):l,!p.input)return p.config.errorHandler(new Error("Invalid input element specified"));p.input._type=p.input.type,p.input.type="text",p.input.classList.add("flatpickr-input"),p._input=p.input,p.config.altInput&&(p.altInput=ae(p.input.nodeName,p.input.className+" "+p.config.altInputClass),p._input=p.altInput,p.altInput.placeholder=p.input.placeholder,p.altInput.disabled=p.input.disabled,p.altInput.required=p.input.required,p.altInput.type="text",p.input.type="hidden",!p.config.static&&p.input.parentNode&&p.input.parentNode.insertBefore(p.altInput,p.input.nextSibling));p.config.allowInput||p._input.setAttribute("readonly","readonly");p._positionElement=p.config.positionElement||p._input}(),function(){p.selectedDates=[],p.now=new Date;var e=p.config.defaultDate||p.input.value;e&&R(e,p.config.dateFormat);var t=p.selectedDates.length?p.selectedDates[0]:p.config.minDate&&p.config.minDate.getTime()>p.now.getTime()?p.config.minDate:p.config.maxDate&&p.config.maxDate.getTime()<p.now.getTime()?p.config.maxDate:p.now;p.currentYear=t.getFullYear(),p.currentMonth=t.getMonth(),p.selectedDates.length&&(p.latestSelectedDateObj=p.selectedDates[0]);void 0!==p.config.minTime&&(p.config.minTime=p.parseDate(p.config.minTime,"H:i"));void 0!==p.config.maxTime&&(p.config.maxTime=p.parseDate(p.config.maxTime,"H:i"));p.minDateHasTime=!!p.config.minDate&&(0<p.config.minDate.getHours()||0<p.config.minDate.getMinutes()||0<p.config.minDate.getSeconds()),p.maxDateHasTime=!!p.config.maxDate&&(0<p.config.maxDate.getHours()||0<p.config.maxDate.getMinutes()||0<p.config.maxDate.getSeconds()),Object.defineProperty(p,"showTimeInput",{get:function(){return p._showTimeInput},set:function(e){p._showTimeInput=e,p.calendarContainer&&re(p.calendarContainer,"showTimeInput",e),p.isOpen&&P()}})}(),p.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=p.currentMonth),void 0===t&&(t=p.currentYear),1===e&&(t%4==0&&t%100!=0||t%400==0)?29:p.l10n.daysInMonth[e]}},p.isMobile||function(){var e=window.document.createDocumentFragment();if(p.calendarContainer=ae("div","flatpickr-calendar"),p.calendarContainer.tabIndex=-1,!p.config.noCalendar){if(e.appendChild(function(){var e=window.document.createDocumentFragment();p.monthNav=ae("div","flatpickr-month"),p.prevMonthNav=ae("span","flatpickr-prev-month"),p.prevMonthNav.innerHTML=p.config.prevArrow,p.currentMonthElement=ae("span","cur-month"),p.currentMonthElement.title=p.l10n.scrollTitle;var t=oe("cur-year",{tabindex:"-1"});p.currentYearElement=t.childNodes[0],p.currentYearElement.title=p.l10n.scrollTitle,p.config.minDate&&p.currentYearElement.setAttribute("data-min",p.config.minDate.getFullYear().toString());p.config.maxDate&&(p.currentYearElement.setAttribute("data-max",p.config.maxDate.getFullYear().toString()),p.currentYearElement.disabled=!!p.config.minDate&&p.config.minDate.getFullYear()===p.config.maxDate.getFullYear());return p.nextMonthNav=ae("span","flatpickr-next-month"),p.nextMonthNav.innerHTML=p.config.nextArrow,p.navigationCurrentMonth=ae("div","flatpickr-current-month"),p.navigationCurrentMonth.appendChild(p.currentMonthElement),p.navigationCurrentMonth.appendChild(t),e.appendChild(p.prevMonthNav),e.appendChild(p.navigationCurrentMonth),e.appendChild(p.nextMonthNav),p.monthNav.appendChild(e),Object.defineProperty(p,"_hidePrevMonthArrow",{get:function(){return p.__hidePrevMonthArrow},set:function(e){p.__hidePrevMonthArrow!==e&&(p.prevMonthNav.style.display=e?"none":"block"),p.__hidePrevMonthArrow=e}}),Object.defineProperty(p,"_hideNextMonthArrow",{get:function(){return p.__hideNextMonthArrow},set:function(e){p.__hideNextMonthArrow!==e&&(p.nextMonthNav.style.display=e?"none":"block"),p.__hideNextMonthArrow=e}}),z(),p.monthNav}()),p.innerContainer=ae("div","flatpickr-innerContainer"),p.config.weekNumbers){var t=function(){p.calendarContainer.classList.add("hasWeeks");var e=ae("div","flatpickr-weekwrapper");e.appendChild(ae("span","flatpickr-weekday",p.l10n.weekAbbreviation));var t=ae("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}(),n=t.weekWrapper,i=t.weekNumbers;p.innerContainer.appendChild(n),p.weekNumbers=i,p.weekWrapper=n}p.rContainer=ae("div","flatpickr-rContainer"),p.rContainer.appendChild(C()),p.daysContainer||(p.daysContainer=ae("div","flatpickr-days"),p.daysContainer.tabIndex=-1),w(),p.rContainer.appendChild(p.daysContainer),p.innerContainer.appendChild(p.rContainer),e.appendChild(p.innerContainer)}p.config.enableTime&&e.appendChild(function(){p.calendarContainer.classList.add("hasTime"),p.config.noCalendar&&p.calendarContainer.classList.add("noCalendar");p.timeContainer=ae("div","flatpickr-time"),p.timeContainer.tabIndex=-1;var e=ae("span","flatpickr-time-separator",":"),t=oe("flatpickr-hour");p.hourElement=t.childNodes[0];var n=oe("flatpickr-minute");p.minuteElement=n.childNodes[0],p.hourElement.tabIndex=p.minuteElement.tabIndex=-1,p.hourElement.value=Y(p.latestSelectedDateObj?p.latestSelectedDateObj.getHours():p.config.time_24hr?p.config.defaultHour:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(p.config.defaultHour)),p.minuteElement.value=Y(p.latestSelectedDateObj?p.latestSelectedDateObj.getMinutes():p.config.defaultMinute),p.hourElement.setAttribute("data-step",p.config.hourIncrement.toString()),p.minuteElement.setAttribute("data-step",p.config.minuteIncrement.toString()),p.hourElement.setAttribute("data-min",p.config.time_24hr?"0":"1"),p.hourElement.setAttribute("data-max",p.config.time_24hr?"23":"12"),p.minuteElement.setAttribute("data-min","0"),p.minuteElement.setAttribute("data-max","59"),p.hourElement.title=p.minuteElement.title=p.l10n.scrollTitle,p.timeContainer.appendChild(t),p.timeContainer.appendChild(e),p.timeContainer.appendChild(n),p.config.time_24hr&&p.timeContainer.classList.add("time24hr");if(p.config.enableSeconds){p.timeContainer.classList.add("hasSeconds");var i=oe("flatpickr-second");p.secondElement=i.childNodes[0],p.secondElement.value=Y(p.latestSelectedDateObj?p.latestSelectedDateObj.getSeconds():p.config.defaultSeconds),p.secondElement.setAttribute("data-step",p.minuteElement.getAttribute("data-step")),p.secondElement.setAttribute("data-min",p.minuteElement.getAttribute("data-min")),p.secondElement.setAttribute("data-max",p.minuteElement.getAttribute("data-max")),p.timeContainer.appendChild(ae("span","flatpickr-time-separator",":")),p.timeContainer.appendChild(i)}p.config.time_24hr||(p.amPM=ae("span","flatpickr-am-pm",p.l10n.amPM[K(11<(p.latestSelectedDateObj?p.hourElement.value:p.config.defaultHour))]),p.amPM.title=p.l10n.toggleTitle,p.amPM.tabIndex=-1,p.timeContainer.appendChild(p.amPM));return p.timeContainer}());re(p.calendarContainer,"rangeMode","range"===p.config.mode),re(p.calendarContainer,"animate",p.config.animate),p.calendarContainer.appendChild(e);var r=void 0!==p.config.appendTo&&p.config.appendTo.nodeType;if((p.config.inline||p.config.static)&&(p.calendarContainer.classList.add(p.config.inline?"inline":"static"),p.config.inline&&(!r&&p.element.parentNode?p.element.parentNode.insertBefore(p.calendarContainer,p._input.nextSibling):void 0!==p.config.appendTo&&p.config.appendTo.appendChild(p.calendarContainer)),p.config.static)){var a=ae("div","flatpickr-wrapper");p.element.parentNode&&p.element.parentNode.insertBefore(a,p.element),a.appendChild(p.element),p.altInput&&a.appendChild(p.altInput),a.appendChild(p.calendarContainer)}p.config.static||p.config.inline||(void 0!==p.config.appendTo?p.config.appendTo:window.document.body).appendChild(p.calendarContainer)}(),function(){p.config.wrap&&["open","close","toggle","clear"].forEach(function(t){Array.prototype.forEach.call(p.element.querySelectorAll("[data-"+t+"]"),function(e){return a(e,"click",p[t])})});if(p.isMobile)return function(){var e=p.config.enableTime?p.config.noCalendar?"time":"datetime-local":"date";p.mobileInput=ae("input",p.input.className+" flatpickr-mobile"),p.mobileInput.step=p.input.getAttribute("step")||"any",p.mobileInput.tabIndex=1,p.mobileInput.type=e,p.mobileInput.disabled=p.input.disabled,p.mobileInput.placeholder=p.input.placeholder,p.mobileFormatStr="datetime-local"==e?"Y-m-d\\TH:i:S":"date"==e?"Y-m-d":"H:i:S",p.selectedDates.length&&(p.mobileInput.defaultValue=p.mobileInput.value=p.formatDate(p.selectedDates[0],p.mobileFormatStr));p.config.minDate&&(p.mobileInput.min=p.formatDate(p.config.minDate,"Y-m-d"));p.config.maxDate&&(p.mobileInput.max=p.formatDate(p.config.maxDate,"Y-m-d"));p.input.type="hidden",void 0!==p.altInput&&(p.altInput.type="hidden");try{p.input.parentNode&&p.input.parentNode.insertBefore(p.mobileInput,p.input.nextSibling)}catch(e){}a(p.mobileInput,"change",function(e){p.setDate(e.target.value,!1,p.mobileFormatStr),F("onChange"),F("onClose")})}();var e=Q(O,50);p._debouncedChange=Q(m,le),"range"===p.config.mode&&p.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&a(p.daysContainer,"mouseover",function(e){return k(e.target)});a(window.document.body,"keydown",D),p.config.static||a(p._input,"keydown",D);p.config.inline||p.config.static||a(window,"resize",e);void 0!==window.ontouchstart&&a(window.document.body,"touchstart",T);a(window.document.body,"mousedown",n(T)),a(window.document.body,"focus",T,{capture:!0}),!0===p.config.clickOpens&&(a(p._input,"focus",p.open),a(p._input,"mousedown",n(p.open)));void 0!==p.daysContainer&&(a(p.monthNav,"wheel",W),a(p.monthNav,"mousedown",n(V)),a(p.monthNav,["keyup","increment"],t),a(p.daysContainer,"mousedown",n(L)),p.config.animate&&(a(p.daysContainer,["webkitAnimationEnd","animationend"],r),a(p.monthNav,["webkitAnimationEnd","animationend"],s)));if(void 0!==p.timeContainer&&void 0!==p.minuteElement&&void 0!==p.hourElement){a(p.timeContainer,["wheel","input","increment"],d),a(p.timeContainer,"mousedown",n(v)),a(p.timeContainer,["wheel","input","increment"],p._debouncedChange,{passive:!0}),a([p.hourElement,p.minuteElement],["focus","click"],function(e){return e.target.select()}),void 0!==p.secondElement&&a(p.secondElement,"focus",function(){return p.secondElement&&p.secondElement.select()}),void 0!==p.amPM&&a(p.amPM,"mousedown",n(function(e){d(e),m()}))}}(),(p.selectedDates.length||p.config.noCalendar)&&(p.config.enableTime&&h(p.config.noCalendar?p.latestSelectedDateObj||p.config.minDate:void 0),B(!1)),p.showTimeInput=0<p.selectedDates.length||p.config.noCalendar,void 0!==p.weekWrapper&&void 0!==p.daysContainer&&(p.calendarContainer.style.width=p.daysContainer.offsetWidth+p.weekWrapper.offsetWidth+"px");var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!p.isMobile&&e&&P(),F("onReady")}(),p}function n(e,t){for(var n=Array.prototype.slice.call(e),i=[],r=0;r<n.length;r++){var a=n[r];try{if(null!==a.getAttribute("data-fp-omit"))continue;void 0!==a._flatpickr&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=s(a,t||{}),i.push(a._flatpickr)}catch(e){console.error(e)}}return 1===i.length?i[0]:i}"undefined"!=typeof HTMLElement&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return n(this,e)},HTMLElement.prototype.flatpickr=function(e){return n([this],e)}),se=function(e,t){return e instanceof NodeList?n(e,t):n("string"==typeof e?window.document.querySelectorAll(e):[e],t)},"object"==typeof window&&(window.flatpickr=se),se.defaultConfig=y,se.l10ns={en:G({},i),default:G({},i)},se.localize=function(e){se.l10ns.default=G({},se.l10ns.default,e)},se.setDefaults=function(e){se.defaultConfig=G({},se.defaultConfig,e)},se.parseDate=ee({}),se.formatDate=J({}),se.compareDates=te,void 0!==jQuery&&(jQuery.fn.flatpickr=function(e){return n(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))};var r=se;e.default=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?l9a(exports):"function"==typeof define&&define.amd?define(["exports"],l9a):l9a(k9a.flatpickr={}),function(r){"use strict";function a(e,t){this.init(e,t)}a.DEFAULTS={idle:6e4,events:"mousemove keydown mousedown touchstart",onIdle:function(){},onActive:function(){},onHide:function(){},onShow:function(){},keepTracking:!0,startAtIdle:!1,recurIdleCall:!1},a.prototype.init=function(e,t){this.$element=r(e),this.options=t=r.extend({},a.DEFAULTS,t),this.isIdle=t.startAtIdle||!1;var n=!t.startAtIdle||!0;if(t.startAtIdle&&(this.lastId=this.timeout()),this.$element.on(t.events,r.proxy(this.resetTimeout,this)),t.onShow||t.onHide){var i=this;r(document).on("visibilitychange webkitvisibilitychange mozvisibilitychange msvisibilitychange",function(){document.hidden||document.webkitHidden||document.mozHidden||document.msHidden?n&&(n=!1,t.onHide.call(i.$element)):n||(n=!0,t.onShow.call(i.$element))})}},a.prototype.resetTimeout=function(){this.isIdle&&(this.isIdle=!1,this.options.onActive.call()),clearTimeout(this.lastId),this.options.keepTracking&&(this.lastId=this.timeout())},a.prototype.clearTimeout=function(){clearTimeout(this.lastId)},a.prototype.timeout=function(){var e=this;return(this.options.recurIdleCall?setInterval:setTimeout)(function(){e.isIdle=!0,e.options.onIdle.call(e.$element)},this.options.idle)},a.prototype.destroy=function(){this.$element.off(this.options.events),this.options.keepTracking=!1,this.resetTimeout(),this.$element.removeData("idle")},r.fn.idle=function(i){return this.each(function(){var e=r(this),t=e.data("idle"),n="object"==typeof i&&i;!t&&"destroy"==i||(t||e.data("idle",t=new a(this,n)),"string"==typeof i&&t[i]())})},r.fn.idle.Constructor=a}(jQuery),
/*
 *  jQuery OwlCarousel v1.3.3
 *
 *  Copyright (c) 2013 Bartosz Wojciechowski
 *  http://www.owlgraphic.com/owlcarousel/
 *
 *  Licensed under MIT
 *
 */
"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),sjb=jQuery,tjb=window,ujb=document,vjb={init:function(e,t){this.$elem=sjb(t),this.options=sjb.extend({},sjb.fn.owlCarousel.options,this.$elem.data(),e),this.userOptions=e,this.loadContent()},loadContent:function(){var e,i=this;"function"==typeof i.options.beforeInit&&i.options.beforeInit.apply(this,[i.$elem]),"string"==typeof i.options.jsonPath?(e=i.options.jsonPath,sjb.getJSON(e,function(e){var t,n="";if("function"==typeof i.options.jsonSuccess)i.options.jsonSuccess.apply(this,[e]);else{for(t in e.owl)e.owl.hasOwnProperty(t)&&(n+=e.owl[t].item);i.$elem.html(n)}i.logIn()})):i.logIn()},logIn:function(){var e=this;e.$elem.data({"owl-originalStyles":e.$elem.attr("style"),"owl-originalClasses":e.$elem.attr("class")}),e.$elem.css({opacity:0}),e.orignalItems=e.options.items,e.checkBrowser(),e.wrapperWidth=0,e.checkVisible=null,e.setVars()},setVars:function(){var e=this;if(0===e.$elem.children().length)return!1;e.baseClass(),e.eventTypes(),e.$userItems=e.$elem.children(),e.itemsAmount=e.$userItems.length,e.wrapItems(),e.$owlItems=e.$elem.find(".owl-item"),e.$owlWrapper=e.$elem.find(".owl-wrapper"),e.playDirection="next",e.prevItem=0,e.prevArr=[0],e.currentItem=0,e.customEvents(),e.onStartup()},onStartup:function(){var e=this;e.updateItems(),e.calculateAll(),e.buildControls(),e.updateControls(),e.response(),e.moveEvents(),e.stopOnHover(),e.owlStatus(),!1!==e.options.transitionStyle&&e.transitionTypes(e.options.transitionStyle),!0===e.options.autoPlay&&(e.options.autoPlay=5e3),e.play(),e.$elem.find(".owl-wrapper").css("display","block"),e.$elem.is(":visible")?e.$elem.css("opacity",1):e.watchVisibility(),e.onstartup=!1,e.eachMoveUpdate(),"function"==typeof e.options.afterInit&&e.options.afterInit.apply(this,[e.$elem])},eachMoveUpdate:function(){!0===this.options.lazyLoad&&this.lazyLoad(),!0===this.options.autoHeight&&this.autoHeight(),this.onVisibleItems(),"function"==typeof this.options.afterAction&&this.options.afterAction.apply(this,[this.$elem])},updateVars:function(){if(this.$elem.data("owl-init")){var e=this;"function"==typeof e.options.beforeUpdate&&e.options.beforeUpdate.apply(this,[e.$elem]),e.watchVisibility(),e.updateItems(),e.calculateAll(),e.updatePosition(),e.updateControls(),e.eachMoveUpdate(),"function"==typeof e.options.afterUpdate&&e.options.afterUpdate.apply(this,[e.$elem])}},reload:function(){var e=this;tjb.setTimeout(function(){e.updateVars()},0)},watchVisibility:function(){var e=this;if(!1!==e.$elem.is(":visible"))return!1;e.$elem.css({opacity:0}),tjb.clearInterval(e.autoPlayInterval),tjb.clearInterval(e.checkVisible),e.checkVisible=tjb.setInterval(function(){e.$elem.is(":visible")&&(e.reload(),e.$elem.animate({opacity:1},200),tjb.clearInterval(e.checkVisible))},500)},wrapItems:function(){this.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>'),this.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">'),this.wrapperOuter=this.$elem.find(".owl-wrapper-outer"),this.$elem.css("display","block")},baseClass:function(){var e=this.$elem.hasClass(this.options.baseClass),t=this.$elem.hasClass(this.options.theme);e||this.$elem.addClass(this.options.baseClass),t||this.$elem.addClass(this.options.theme)},updateItems:function(){var e,t,n=this;if(!1===n.options.responsive)return!1;if(!0===n.options.singleItem)return n.options.items=n.orignalItems=1,n.options.itemsCustom=!1,n.options.itemsDesktop=!1,n.options.itemsDesktopSmall=!1,n.options.itemsTablet=!1,n.options.itemsTabletSmall=!1,n.options.itemsMobile=!1;if((e=sjb(n.options.responsiveBaseWidth).width())>(n.options.itemsDesktop[0]||n.orignalItems)&&(n.options.items=n.orignalItems),!1!==n.options.itemsCustom)for(n.options.itemsCustom.sort(function(e,t){return e[0]-t[0]}),t=0;t<n.options.itemsCustom.length;t+=1)n.options.itemsCustom[t][0]<=e&&(n.options.items=n.options.itemsCustom[t][1]);else e<=n.options.itemsDesktop[0]&&!1!==n.options.itemsDesktop&&(n.options.items=n.options.itemsDesktop[1]),e<=n.options.itemsDesktopSmall[0]&&!1!==n.options.itemsDesktopSmall&&(n.options.items=n.options.itemsDesktopSmall[1]),e<=n.options.itemsTablet[0]&&!1!==n.options.itemsTablet&&(n.options.items=n.options.itemsTablet[1]),e<=n.options.itemsTabletSmall[0]&&!1!==n.options.itemsTabletSmall&&(n.options.items=n.options.itemsTabletSmall[1]),e<=n.options.itemsMobile[0]&&!1!==n.options.itemsMobile&&(n.options.items=n.options.itemsMobile[1]);n.options.items>n.itemsAmount&&!0===n.options.itemsScaleUp&&(n.options.items=n.itemsAmount)},response:function(){var e,t,n=this;if(!0!==n.options.responsive)return!1;t=sjb(tjb).width(),n.resizer=function(){sjb(tjb).width()!==t&&(!1!==n.options.autoPlay&&tjb.clearInterval(n.autoPlayInterval),tjb.clearTimeout(e),e=tjb.setTimeout(function(){t=sjb(tjb).width(),n.updateVars()},n.options.responsiveRefreshRate))},sjb(tjb).on("resize.owlCarousel",n.resizer)},updatePosition:function(){this.jumpTo(this.currentItem),!1!==this.options.autoPlay&&this.checkAp()},appendItemsSizes:function(){var n=this,i=0,r=n.itemsAmount-n.options.items;n.$owlItems.each(function(e){var t=sjb(this);t.css({width:n.itemWidth}).data("owl-item",Number(e)),e%n.options.items!=0&&e!==r||r<e||(i+=1),t.data("owl-roundPages",i)})},appendWrapperSizes:function(){var e=this.$owlItems.length*this.itemWidth;this.$owlWrapper.css({width:2*e,left:0}),this.appendItemsSizes()},calculateAll:function(){this.calculateWidth(),this.appendWrapperSizes(),this.loops(),this.max()},calculateWidth:function(){var e=parseInt(this.$elem.css("borderLeftWidth"),10)+parseInt(this.wrapperOuter.css("borderLeftWidth"),10);this.itemWidth=Math.round((this.$elem.width()-e)/this.options.items)},max:function(){var e=this,t=-1*(e.itemsAmount*e.itemWidth-e.options.items*e.itemWidth);return e.options.items>e.itemsAmount?(t=e.maximumItem=0,e.maximumPixels=0):(e.maximumItem=e.itemsAmount-e.options.items,e.maximumPixels=t),t},min:function(){return 0},loops:function(){var e,t,n=0,i=0;for(this.positionsInArray=[0],this.pagesInArray=[],e=0;e<this.itemsAmount;e+=1)i+=this.itemWidth,this.positionsInArray.push(-i),!0===this.options.scrollPerPage&&(t=sjb(this.$owlItems[e]).data("owl-roundPages"))!==n&&(this.pagesInArray[n]=this.positionsInArray[e],n=t)},buildControls:function(){!0!==this.options.navigation&&!0!==this.options.pagination||(this.owlControls=sjb('<div class="owl-controls"/>').toggleClass("clickable",!this.browser.isTouch).appendTo(this.$elem)),!0===this.options.pagination&&this.buildPagination(),!0===this.options.navigation&&this.buildButtons()},buildButtons:function(){var t=this,e=sjb('<div class="owl-buttons"/>');t.owlControls.append(e),t.buttonPrev=sjb("<div/>",{class:"owl-prev",html:t.options.navigationText[0]||""}),t.buttonNext=sjb("<div/>",{class:"owl-next",html:t.options.navigationText[1]||""}),e.append(t.buttonPrev).append(t.buttonNext),e.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(e){e.preventDefault()}),e.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(e){e.preventDefault(),sjb(this).hasClass("owl-next")?t.next():t.prev()})},buildPagination:function(){var t=this;t.paginationWrapper=sjb('<div class="owl-pagination"/>'),t.owlControls.append(t.paginationWrapper),t.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(e){e.preventDefault(),Number(sjb(this).data("owl-page"))!==t.currentItem&&t.goTo(Number(sjb(this).data("owl-page")),!0)})},updatePagination:function(){var e,t,n,i,r,a,o=this;if(!1===o.options.pagination)return!1;for(o.paginationWrapper.html(""),e=0,t=o.itemsAmount-o.itemsAmount%o.options.items,i=0;i<o.itemsAmount;i+=1)i%o.options.items==0&&(e+=1,t===i&&(n=o.itemsAmount-o.options.items),r=sjb("<div/>",{class:"owl-page"}),a=sjb("<span></span>",{text:!0===o.options.paginationNumbers?e:"",class:!0===o.options.paginationNumbers?"owl-numbers":""}),r.append(a),r.data("owl-page",t===i?n:i),r.data("owl-roundPages",e),o.paginationWrapper.append(r));o.checkPagination()},checkPagination:function(){var e=this;if(!1===e.options.pagination)return!1;e.paginationWrapper.find(".owl-page").each(function(){sjb(this).data("owl-roundPages")===sjb(e.$owlItems[e.currentItem]).data("owl-roundPages")&&(e.paginationWrapper.find(".owl-page").removeClass("active"),sjb(this).addClass("active"))})},checkNavigation:function(){var e=this;if(!1===e.options.navigation)return!1;!1===e.options.rewindNav&&(0===e.currentItem&&0===e.maximumItem?(e.buttonPrev.addClass("disabled"),e.buttonNext.addClass("disabled")):0===e.currentItem&&0!==e.maximumItem?(e.buttonPrev.addClass("disabled"),e.buttonNext.removeClass("disabled")):e.currentItem===e.maximumItem?(e.buttonPrev.removeClass("disabled"),e.buttonNext.addClass("disabled")):0!==e.currentItem&&e.currentItem!==e.maximumItem&&(e.buttonPrev.removeClass("disabled"),e.buttonNext.removeClass("disabled")))},updateControls:function(){this.updatePagination(),this.checkNavigation(),this.owlControls&&(this.options.items>=this.itemsAmount?this.owlControls.hide():this.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(e){var t=this;if(t.isTransition)return!1;if(t.currentItem+=!0===t.options.scrollPerPage?t.options.items:1,t.currentItem>t.maximumItem+(!0===t.options.scrollPerPage?t.options.items-1:0)){if(!0!==t.options.rewindNav)return t.currentItem=t.maximumItem,!1;t.currentItem=0,e="rewind"}t.goTo(t.currentItem,e)},prev:function(e){var t=this;if(t.isTransition)return!1;if(!0===t.options.scrollPerPage&&0<t.currentItem&&t.currentItem<t.options.items?t.currentItem=0:t.currentItem-=!0===t.options.scrollPerPage?t.options.items:1,t.currentItem<0){if(!0!==t.options.rewindNav)return t.currentItem=0,!1;t.currentItem=t.maximumItem,e="rewind"}t.goTo(t.currentItem,e)},goTo:function(e,t,n){var i,r=this;return!r.isTransition&&("function"==typeof r.options.beforeMove&&r.options.beforeMove.apply(this,[r.$elem]),e>=r.maximumItem?e=r.maximumItem:e<=0&&(e=0),r.currentItem=r.owl.currentItem=e,!1!==r.options.transitionStyle&&"drag"!==n&&1===r.options.items&&!0===r.browser.support3d?(r.swapSpeed(0),!0===r.browser.support3d?r.transition3d(r.positionsInArray[e]):r.css2slide(r.positionsInArray[e],1),r.afterGo(),r.singleItemTransition(),!1):(i=r.positionsInArray[e],!0===r.browser.support3d?(!(r.isCss3Finish=!1)===t?(r.swapSpeed("paginationSpeed"),tjb.setTimeout(function(){r.isCss3Finish=!0},r.options.paginationSpeed)):"rewind"===t?(r.swapSpeed(r.options.rewindSpeed),tjb.setTimeout(function(){r.isCss3Finish=!0},r.options.rewindSpeed)):(r.swapSpeed("slideSpeed"),tjb.setTimeout(function(){r.isCss3Finish=!0},r.options.slideSpeed)),r.transition3d(i)):!0===t?r.css2slide(i,r.options.paginationSpeed):"rewind"===t?r.css2slide(i,r.options.rewindSpeed):r.css2slide(i,r.options.slideSpeed),void r.afterGo()))},jumpTo:function(e){var t=this;"function"==typeof t.options.beforeMove&&t.options.beforeMove.apply(this,[t.$elem]),e>=t.maximumItem||-1===e?e=t.maximumItem:e<=0&&(e=0),t.swapSpeed(0),!0===t.browser.support3d?t.transition3d(t.positionsInArray[e]):t.css2slide(t.positionsInArray[e],1),t.currentItem=t.owl.currentItem=e,t.afterGo()},afterGo:function(){var e=this;e.prevArr.push(e.currentItem),e.prevItem=e.owl.prevItem=e.prevArr[e.prevArr.length-2],e.prevArr.shift(0),e.prevItem!==e.currentItem&&(e.checkPagination(),e.checkNavigation(),e.eachMoveUpdate(),!1!==e.options.autoPlay&&e.checkAp()),"function"==typeof e.options.afterMove&&e.prevItem!==e.currentItem&&e.options.afterMove.apply(this,[e.$elem])},stop:function(){this.apStatus="stop",tjb.clearInterval(this.autoPlayInterval)},checkAp:function(){"stop"!==this.apStatus&&this.play()},play:function(){var e=this;if(!(e.apStatus="play")===e.options.autoPlay)return!1;tjb.clearInterval(e.autoPlayInterval),e.autoPlayInterval=tjb.setInterval(function(){e.next(!0)},e.options.autoPlay)},swapSpeed:function(e){"slideSpeed"===e?this.$owlWrapper.css(this.addCssSpeed(this.options.slideSpeed)):"paginationSpeed"===e?this.$owlWrapper.css(this.addCssSpeed(this.options.paginationSpeed)):"string"!=typeof e&&this.$owlWrapper.css(this.addCssSpeed(e))},addCssSpeed:function(e){return{"-webkit-transition":"all "+e+"ms ease","-moz-transition":"all "+e+"ms ease","-o-transition":"all "+e+"ms ease",transition:"all "+e+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(e){return{"-webkit-transform":"translate3d("+e+"px, 0px, 0px)","-moz-transform":"translate3d("+e+"px, 0px, 0px)","-o-transform":"translate3d("+e+"px, 0px, 0px)","-ms-transform":"translate3d("+e+"px, 0px, 0px)",transform:"translate3d("+e+"px, 0px,0px)"}},transition3d:function(e){this.$owlWrapper.css(this.doTranslate(e))},css2move:function(e){this.$owlWrapper.css({left:e})},css2slide:function(e,t){var n=this;n.isCssFinish=!1,n.$owlWrapper.stop(!0,!0).animate({left:e},{duration:t||n.options.slideSpeed,complete:function(){n.isCssFinish=!0}})},checkBrowser:function(){var e,t,n,i,r="translate3d(0px, 0px, 0px)",a=ujb.createElement("div");a.style.cssText="  -moz-transform:"+r+"; -ms-transform:"+r+"; -o-transform:"+r+"; -webkit-transform:"+r+"; transform:"+r,e=/translate3d\(0px, 0px, 0px\)/g,n=null!==(t=a.style.cssText.match(e))&&1===t.length,i="ontouchstart"in tjb||tjb.navigator.msMaxTouchPoints,this.browser={support3d:n,isTouch:i}},moveEvents:function(){!1===this.options.mouseDrag&&!1===this.options.touchDrag||(this.gestures(),this.disabledEvents())},eventTypes:function(){var e=this,t=["s","e","x"];e.ev_types={},!0===e.options.mouseDrag&&!0===e.options.touchDrag?t=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:!1===e.options.mouseDrag&&!0===e.options.touchDrag?t=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:!0===e.options.mouseDrag&&!1===e.options.touchDrag&&(t=["mousedown.owl","mousemove.owl","mouseup.owl"]),e.ev_types.start=t[0],e.ev_types.move=t[1],e.ev_types.end=t[2]},disabledEvents:function(){this.$elem.on("dragstart.owl",function(e){e.preventDefault()}),this.$elem.on("mousedown.disableTextSelect",function(e){return sjb(e.target).is("input, textarea, select, option")})},gestures:function(){var a=this,o={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};function r(e){if(void 0!==e.touches)return{x:e.touches[0].pageX,y:e.touches[0].pageY};if(void 0===e.touches){if(void 0!==e.pageX)return{x:e.pageX,y:e.pageY};if(void 0===e.pageX)return{x:e.clientX,y:e.clientY}}}function s(e){"on"===e?(sjb(ujb).on(a.ev_types.move,t),sjb(ujb).on(a.ev_types.end,n)):"off"===e&&(sjb(ujb).off(a.ev_types.move),sjb(ujb).off(a.ev_types.end))}function t(e){var t,n,i=e.originalEvent||e||tjb.event;a.newPosX=r(i).x-o.offsetX,a.newPosY=r(i).y-o.offsetY,a.newRelativeX=a.newPosX-o.relativePos,"function"==typeof a.options.startDragging&&!0!==o.dragging&&0!==a.newRelativeX&&(o.dragging=!0,a.options.startDragging.apply(a,[a.$elem])),(8<a.newRelativeX||a.newRelativeX<-8)&&!0===a.browser.isTouch&&(void 0!==i.preventDefault?i.preventDefault():i.returnValue=!1,o.sliding=!0),(10<a.newPosY||a.newPosY<-10)&&!1===o.sliding&&sjb(ujb).off("touchmove.owl"),t=function(){return a.newRelativeX/5},n=function(){return a.maximumPixels+a.newRelativeX/5},a.newPosX=Math.max(Math.min(a.newPosX,t()),n()),!0===a.browser.support3d?a.transition3d(a.newPosX):a.css2move(a.newPosX)}function n(e){var t,n,i,r=e.originalEvent||e||tjb.event;r.target=r.target||r.srcElement,!(o.dragging=!1)!==a.browser.isTouch&&a.$owlWrapper.removeClass("grabbing"),a.newRelativeX<0?a.dragDirection=a.owl.dragDirection="left":a.dragDirection=a.owl.dragDirection="right",0!==a.newRelativeX&&(t=a.getNewPosition(),a.goTo(t,!1,"drag"),o.targetElement===r.target&&!0!==a.browser.isTouch&&(sjb(r.target).on("click.disable",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),sjb(e.target).off("click.disable")}),i=(n=sjb._data(r.target,"events").click).pop(),n.splice(0,0,i))),s("off")}a.isCssFinish=!0,a.$elem.on(a.ev_types.start,".owl-wrapper",function(e){var t,n=e.originalEvent||e||tjb.event;if(3===n.which)return!1;if(!(a.itemsAmount<=a.options.items)){if(!1===a.isCssFinish&&!a.options.dragBeforeAnimFinish)return!1;if(!1===a.isCss3Finish&&!a.options.dragBeforeAnimFinish)return!1;!1!==a.options.autoPlay&&tjb.clearInterval(a.autoPlayInterval),!0===a.browser.isTouch||a.$owlWrapper.hasClass("grabbing")||a.$owlWrapper.addClass("grabbing"),a.newPosX=0,a.newRelativeX=0,sjb(this).css(a.removeTransition()),t=sjb(this).position(),o.relativePos=t.left,o.offsetX=r(n).x-t.left,o.offsetY=r(n).y-t.top,s("on"),o.sliding=!1,o.targetElement=n.target||n.srcElement}})},getNewPosition:function(){var e=this.closestItem();return e>this.maximumItem?(this.currentItem=this.maximumItem,e=this.maximumItem):0<=this.newPosX&&(e=0,this.currentItem=0),e},closestItem:function(){var n=this,i=!0===n.options.scrollPerPage?n.pagesInArray:n.positionsInArray,r=n.newPosX,a=null;return sjb.each(i,function(e,t){r-n.itemWidth/20>i[e+1]&&r-n.itemWidth/20<t&&"left"===n.moveDirection()?(a=t,!0===n.options.scrollPerPage?n.currentItem=sjb.inArray(a,n.positionsInArray):n.currentItem=e):r+n.itemWidth/20<t&&r+n.itemWidth/20>(i[e+1]||i[e]-n.itemWidth)&&"right"===n.moveDirection()&&(!0===n.options.scrollPerPage?(a=i[e+1]||i[i.length-1],n.currentItem=sjb.inArray(a,n.positionsInArray)):(a=i[e+1],n.currentItem=e+1))}),n.currentItem},moveDirection:function(){var e;return this.newRelativeX<0?(e="right",this.playDirection="next"):(e="left",this.playDirection="prev"),e},customEvents:function(){var n=this;n.$elem.on("owl.next",function(){n.next()}),n.$elem.on("owl.prev",function(){n.prev()}),n.$elem.on("owl.play",function(e,t){n.options.autoPlay=t,n.play(),n.hoverStatus="play"}),n.$elem.on("owl.stop",function(){n.stop(),n.hoverStatus="stop"}),n.$elem.on("owl.goTo",function(e,t){n.goTo(t)}),n.$elem.on("owl.jumpTo",function(e,t){n.jumpTo(t)})},stopOnHover:function(){var e=this;!0===e.options.stopOnHover&&!0!==e.browser.isTouch&&!1!==e.options.autoPlay&&(e.$elem.on("mouseover",function(){e.stop()}),e.$elem.on("mouseout",function(){"stop"!==e.hoverStatus&&e.play()}))},lazyLoad:function(){var e,t,n,i,r=this;if(!1===r.options.lazyLoad)return!1;for(e=0;e<r.itemsAmount;e+=1)"loaded"!==(t=sjb(r.$owlItems[e])).data("owl-loaded")&&(n=t.data("owl-item"),"string"==typeof(i=t.find(".lazyOwl")).data("src")?(void 0===t.data("owl-loaded")&&(i.hide(),t.addClass("loading").data("owl-loaded","checked")),(!0!==r.options.lazyFollow||n>=r.currentItem)&&n<r.currentItem+r.options.items&&i.length&&i.each(function(){r.lazyPreload(t,sjb(this))})):t.data("owl-loaded","loaded"))},lazyPreload:function(e,t){var n,i=this,r=0;function a(){e.data("owl-loaded","loaded").removeClass("loading"),t.removeAttr("data-src"),"fade"===i.options.lazyEffect?t.fadeIn(400):t.show(),"function"==typeof i.options.afterLazyLoad&&i.options.afterLazyLoad.apply(this,[i.$elem])}"DIV"===t.prop("tagName")?(t.css("background-image","url("+t.data("src")+")"),n=!0):t[0].src=t.data("src"),function e(){r+=1,i.completeImg(t.get(0))||!0===n?a():r<=100?tjb.setTimeout(e,100):a()}()},autoHeight:function(){var t,n=this,i=sjb(n.$owlItems[n.currentItem]).find("img");function r(){var e=sjb(n.$owlItems[n.currentItem]).height();n.wrapperOuter.css("height",e+"px"),n.wrapperOuter.hasClass("autoHeight")||tjb.setTimeout(function(){n.wrapperOuter.addClass("autoHeight")},0)}void 0!==i.get(0)?(t=0,function e(){t+=1,n.completeImg(i.get(0))?r():t<=100?tjb.setTimeout(e,100):n.wrapperOuter.css("height","")}()):r()},completeImg:function(e){return!!e.complete&&("undefined"==typeof e.naturalWidth||0!==e.naturalWidth)},onVisibleItems:function(){var e,t=this;for(!0===t.options.addClassActive&&t.$owlItems.removeClass("active"),t.visibleItems=[],e=t.currentItem;e<t.currentItem+t.options.items;e+=1)t.visibleItems.push(e),!0===t.options.addClassActive&&sjb(t.$owlItems[e]).addClass("active");t.owl.visibleItems=t.visibleItems},transitionTypes:function(e){this.outClass="owl-"+e+"-out",this.inClass="owl-"+e+"-in"},singleItemTransition:function(){var e=this,t=e.outClass,n=e.inClass,i=e.$owlItems.eq(e.currentItem),r=e.$owlItems.eq(e.prevItem),a=Math.abs(e.positionsInArray[e.currentItem])+e.positionsInArray[e.prevItem],o=Math.abs(e.positionsInArray[e.currentItem])+e.itemWidth/2,s="webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend";e.isTransition=!0,e.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":o+"px","-moz-perspective-origin":o+"px","perspective-origin":o+"px"}),r.css({position:"relative",left:a+"px"}).addClass(t).on(s,function(){e.endPrev=!0,r.off(s),e.clearTransStyle(r,t)}),i.addClass(n).on(s,function(){e.endCurrent=!0,i.off(s),e.clearTransStyle(i,n)})},clearTransStyle:function(e,t){e.css({position:"",left:""}).removeClass(t),this.endPrev&&this.endCurrent&&(this.$owlWrapper.removeClass("owl-origin"),this.endPrev=!1,this.endCurrent=!1,this.isTransition=!1)},owlStatus:function(){var e=this;e.owl={userOptions:e.userOptions,baseElement:e.$elem,userItems:e.$userItems,owlItems:e.$owlItems,currentItem:e.currentItem,prevItem:e.prevItem,visibleItems:e.visibleItems,isTouch:e.browser.isTouch,browser:e.browser,dragDirection:e.dragDirection}},clearEvents:function(){this.$elem.off(".owl owl mousedown.disableTextSelect"),sjb(ujb).off(".owl owl"),sjb(tjb).off("resize.owlCarousel",this.resizer)},unWrap:function(){0!==this.$elem.children().length&&(this.$owlWrapper.unwrap(),this.$userItems.unwrap().unwrap(),this.owlControls&&this.owlControls.remove()),this.clearEvents(),this.$elem.attr({style:this.$elem.data("owl-originalStyles")||"",class:this.$elem.data("owl-originalClasses")})},destroy:function(){this.stop(),tjb.clearInterval(this.checkVisible),this.unWrap(),this.$elem.removeData()},reinit:function(e){var t=sjb.extend({},this.userOptions,e);this.unWrap(),this.init(t,this.$elem)},addItem:function(e,t){var n;return!!e&&(0===this.$elem.children().length?(this.$elem.append(e),this.setVars(),!1):(this.unWrap(),(n=void 0===t||-1===t?-1:t)>=this.$userItems.length||-1===n?this.$userItems.eq(-1).after(e):this.$userItems.eq(n).before(e),void this.setVars()))},removeItem:function(e){var t;if(0===this.$elem.children().length)return!1;t=void 0===e||-1===e?-1:e,this.unWrap(),this.$userItems.eq(t).remove(),this.setVars()}},sjb.fn.owlCarousel=function(t){return this.each(function(){if(!0===sjb(this).data("owl-init"))return!1;sjb(this).data("owl-init",!0);var e=Object.create(vjb);e.init(t,this),sjb.data(this,"owlCarousel",e)})},sjb.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:tjb,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1},
/*!
 * typeahead.js 1.3.1
 * https://github.com/corejavascript/typeahead.js
 * Copyright 2013-2020 Twitter, Inc. and other contributors; Licensed MIT
 */
fnb=function(g){var v=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:g.isArray,isFunction:g.isFunction,isObject:g.isPlainObject,isUndefined:function(e){return void 0===e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(e){return e instanceof g},toStr:function(e){return v.isUndefined(e)||null===e?"":e+""},bind:g.proxy,each:function(e,n){g.each(e,function(e,t){return n(t,e)})},map:g.map,filter:g.grep,every:function(n,i){var r=!0;return n?(g.each(n,function(e,t){if(!(r=i.call(null,t,e,n)))return!1}),!!r):r},some:function(n,i){var r=!1;return n?(g.each(n,function(e,t){if(r=i.call(null,t,e,n))return!1}),!!r):r},mixin:g.extend,identity:function(e){return e},clone:function(e){return g.extend(!0,{},e)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(e){return g.isFunction(e)?e:function(){return String(e)}},defer:function(e){setTimeout(e,0)},debounce:function(r,a,o){var s,l;return function(){var e,t,n=this,i=arguments;return e=function(){s=null,o||(l=r.apply(n,i))},t=o&&!s,clearTimeout(s),s=setTimeout(e,a),t&&(l=r.apply(n,i)),l}},throttle:function(n,i){var r,a,o,s,l,c;return l=0,c=function(){l=new Date,o=null,s=n.apply(r,a)},function(){var e=new Date,t=i-(e-l);return r=this,a=arguments,t<=0?(clearTimeout(o),o=null,l=e,s=n.apply(r,a)):o=o||setTimeout(c,t),s}},stringify:function(e){return v.isString(e)?e:JSON.stringify(e)},guid:function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return"tt-"+e()+e(!0)+e(!0)+e()},noop:function(){}}}(),n=function(){"use strict";var i={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return function(e){var t,n;return n=v.mixin({},i,e),{css:(t={css:function(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};v.isMsie()&&v.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"});return e}(),classes:n,html:function(e){return{wrapper:'<span class="'+e.wrapper+'"></span>',menu:'<div role="listbox" class="'+e.menu+'"></div>'}}(n),selectors:function(e){var n={};return v.each(e,function(e,t){n[t]="."+e}),n}(n)}).css,html:t.html,classes:t.classes,selectors:t.selectors,mixin:function(e){v.mixin(e,t)}}}}(),_=function(){"use strict";var n;function e(e){e&&e.el||g.error("EventBus initialized without el"),this.$el=g(e.el)}return"typeahead:",n={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},v.mixin(e.prototype,{_trigger:function(e,t){var n=g.Event("typeahead:"+e);return this.$el.trigger.call(this.$el,n,t||[]),n},before:function(e){var t;return t=[].slice.call(arguments,1),this._trigger("before"+e,t).isDefaultPrevented()},trigger:function(e){var t;this._trigger(e,[].slice.call(arguments,1)),(t=n[e])&&this._trigger(t,[].slice.call(arguments,1))}}),e}(),t=function(){"use strict";var o=/\s+/,s=function(){var e;e=window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)};return e}();return{onSync:function(e,t,n){return i.call(this,"sync",e,t,n)},onAsync:function(e,t,n){return i.call(this,"async",e,t,n)},off:function(e){var t;if(!this._callbacks)return this;e=e.split(o);for(;t=e.shift();)delete this._callbacks[t];return this},trigger:function(e){var t,n,i,r,a;if(!this._callbacks)return this;e=e.split(o),i=[].slice.call(arguments,1);for(;(t=e.shift())&&(n=this._callbacks[t]);)r=l(n.sync,this,[t].concat(i)),a=l(n.async,this,[t].concat(i)),r()&&s(a);return this}};function i(e,t,n,i){var r;if(!n)return this;for(t=t.split(o),n=i?function(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}(n,i):n,this._callbacks=this._callbacks||{};r=t.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][e].push(n);return this}function l(i,r,a){return function(){for(var e,t=0,n=i.length;!e&&t<n;t+=1)e=!1===i[t].apply(r,a);return!e}}}(),s=function(o){"use strict";var e={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1,diacriticInsensitive:!1},t={A:"[AaªÀ-Åà-åĀ-ąǍǎȀ-ȃȦȧᴬᵃḀḁẚẠ-ảₐ℀℁℻⒜Ⓐⓐ㍱-㍴㎀-㎄㎈㎉㎩-㎯㏂㏊㏟㏿Ａａ]",B:"[BbᴮᵇḂ-ḇℬ⒝Ⓑⓑ㍴㎅-㎇㏃㏈㏔㏝Ｂｂ]",C:"[CcÇçĆ-čᶜ℀ℂ℃℅℆ℭⅭⅽ⒞Ⓒⓒ㍶㎈㎉㎝㎠㎤㏄-㏇Ｃｃ]",D:"[DdĎďǄ-ǆǱ-ǳᴰᵈḊ-ḓⅅⅆⅮⅾ⒟Ⓓⓓ㋏㍲㍷-㍹㎗㎭-㎯㏅㏈Ｄｄ]",E:"[EeÈ-Ëè-ëĒ-ěȄ-ȇȨȩᴱᵉḘ-ḛẸ-ẽₑ℡ℯℰⅇ⒠Ⓔⓔ㉐㋍㋎Ｅｅ]",F:"[FfᶠḞḟ℉ℱ℻⒡Ⓕⓕ㎊-㎌㎙ﬀ-ﬄＦｆ]",G:"[GgĜ-ģǦǧǴǵᴳᵍḠḡℊ⒢Ⓖⓖ㋌㋍㎇㎍-㎏㎓㎬㏆㏉㏒㏿Ｇｇ]",H:"[HhĤĥȞȟʰᴴḢ-ḫẖℋ-ℎ⒣Ⓗⓗ㋌㍱㎐-㎔㏊㏋㏗Ｈｈ]",I:"[IiÌ-Ïì-ïĨ-İĲĳǏǐȈ-ȋᴵᵢḬḭỈ-ịⁱℐℑℹⅈⅠ-ⅣⅥ-ⅨⅪⅫⅰ-ⅳⅵ-ⅸⅺⅻ⒤Ⓘⓘ㍺㏌㏕ﬁﬃＩｉ]",J:"[JjĲ-ĵǇ-ǌǰʲᴶⅉ⒥ⒿⓙⱼＪｊ]",K:"[KkĶķǨǩᴷᵏḰ-ḵK⒦Ⓚⓚ㎄㎅㎉㎏㎑㎘㎞㎢㎦㎪㎸㎾㏀㏆㏍-㏏Ｋｋ]",L:"[LlĹ-ŀǇ-ǉˡᴸḶḷḺ-ḽℒℓ℡Ⅼⅼ⒧Ⓛⓛ㋏㎈㎉㏐-㏓㏕㏖㏿ﬂﬄＬｌ]",M:"[MmᴹᵐḾ-ṃ℠™ℳⅯⅿ⒨Ⓜⓜ㍷-㍹㎃㎆㎎㎒㎖㎙-㎨㎫㎳㎷㎹㎽㎿㏁㏂㏎㏐㏔-㏖㏘㏙㏞㏟Ｍｍ]",N:"[NnÑñŃ-ŉǊ-ǌǸǹᴺṄ-ṋⁿℕ№⒩Ⓝⓝ㎁㎋㎚㎱㎵㎻㏌㏑Ｎｎ]",O:"[OoºÒ-Öò-öŌ-őƠơǑǒǪǫȌ-ȏȮȯᴼᵒỌ-ỏₒ℅№ℴ⒪Ⓞⓞ㍵㏇㏒㏖Ｏｏ]",P:"[PpᴾᵖṔ-ṗℙ⒫Ⓟⓟ㉐㍱㍶㎀㎊㎩-㎬㎰㎴㎺㏋㏗-㏚Ｐｐ]",Q:"[Qqℚ⒬Ⓠⓠ㏃Ｑｑ]",R:"[RrŔ-řȐ-ȓʳᴿᵣṘ-ṛṞṟ₨ℛ-ℝ⒭Ⓡⓡ㋍㍴㎭-㎯㏚㏛Ｒｒ]",S:"[SsŚ-šſȘșˢṠ-ṣ₨℁℠⒮Ⓢⓢ㎧㎨㎮-㎳㏛㏜ﬆＳｓ]",T:"[TtŢ-ťȚțᵀᵗṪ-ṱẗ℡™⒯Ⓣⓣ㉐㋏㎔㏏ﬅﬆＴｔ]",U:"[UuÙ-Üù-üŨ-ųƯưǓǔȔ-ȗᵁᵘᵤṲ-ṷỤ-ủ℆⒰Ⓤⓤ㍳㍺Ｕｕ]",V:"[VvᵛᵥṼ-ṿⅣ-Ⅷⅳ-ⅷ⒱Ⓥⓥⱽ㋎㍵㎴-㎹㏜㏞Ｖｖ]",W:"[WwŴŵʷᵂẀ-ẉẘ⒲Ⓦⓦ㎺-㎿㏝Ｗｗ]",X:"[XxˣẊ-ẍₓ℻Ⅸ-Ⅻⅸ-ⅻ⒳Ⓧⓧ㏓Ｘｘ]",Y:"[YyÝýÿŶ-ŸȲȳʸẎẏẙỲ-ỹ⒴Ⓨⓨ㏉Ｙｙ]",Z:"[ZzŹ-žǱ-ǳᶻẐ-ẕℤℨ⒵Ⓩⓩ㎐-㎔Ｚｚ]"};return function(r){var a;(r=v.mixin({},e,r)).node&&r.pattern&&(r.pattern=v.isArray(r.pattern)?r.pattern:[r.pattern],a=function(e,t,n,i){for(var r,a=[],o=0,s=e.length;o<s;o++){var l=v.escapeRegExChars(e[o]);i&&(l=l.replace(/\S/g,c)),a.push(l)}return r=n?"\\b("+a.join("|")+")\\b":"("+a.join("|")+")",t?new RegExp(r):new RegExp(r,"i")}(r.pattern,r.caseSensitive,r.wordsOnly,r.diacriticInsensitive),function e(t,n){var i;for(var r=0;r<t.childNodes.length;r++)3===(i=t.childNodes[r]).nodeType?r+=n(i)?1:0:e(i,n)}(r.node,function(e){var t,n,i;(t=a.exec(e.data))&&(i=o.createElement(r.tagName),r.className&&(i.className=r.className),(n=e.splitText(t.index)).splitText(t[0].length),i.appendChild(n.cloneNode(!0)),e.parentNode.replaceChild(i,n));return!!t}))};function c(e){return t[e.toUpperCase()]||e}}(window.document),y=function(){"use strict";var a;function r(e,t){var n;(e=e||{}).input||g.error("input is missing"),t.mixin(this),this.$hint=g(e.hint),this.$input=g(e.input),this.$menu=g(e.menu),n=this.$input.attr("id")||v.guid(),this.$menu.attr("id",n+"_listbox"),this.$hint.attr({"aria-hidden":!0}),this.$input.attr({"aria-owns":n+"_listbox",role:"combobox","aria-autocomplete":"list","aria-expanded":!1}),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=function(e){return g('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=v.noop),this.onSync("cursorchange",this._updateDescendent)}return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},r.normalizeQuery=function(e){return v.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},v.mixin(r.prototype,t,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(e){var t=a[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(e,t){var n;switch(e){case"up":case"down":n=!i(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;switch(e){case"tab":n=!i(t);break;default:n=!0}return n},_checkLanguageDirection:function(){var e=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==e&&(this.dir=e,this.$hint.attr("dir",e),this.trigger("langDirChanged",e))},_setQuery:function(e,t){var n,i;i=!!(n=function(e,t){return r.normalizeQuery(e)===r.normalizeQuery(t)}(e,this.query))&&this.query.length!==e.length,this.query=e,t||n?!t&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},_updateDescendent:function(e,t){t&&this.$input.attr("aria-activedescendant",t)},bind:function(){var e,t,n,i,r=this;return e=v.bind(this._onBlur,this),t=v.bind(this._onFocus,this),n=v.bind(this._onKeydown,this),i=v.bind(this._onInput,this),this.$input.on("blur.tt",e).on("focus.tt",t).on("keydown.tt",n),!v.isMsie()||9<v.isMsie()?this.$input.on("input.tt",i):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){a[e.which||e.keyCode]||v.defer(v.bind(r._onInput,r,e))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(e,t){this.setInputValue(e),this._setQuery(e,t)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(e){this.$input.val(e),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n;n=(e=this.getInputValue())!==(t=this.getHint())&&0===t.indexOf(e),""!==e&&n&&!this.hasOverflow()||this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,t,n;return e=this.$input.val().length,t=this.$input[0].selectionStart,v.isNumber(t)?t===e:!document.selection||((n=document.selection.createRange()).moveStart("character",-e),e===n.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=g("<div>")},setAriaExpanded:function(e){this.$input.attr("aria-expanded",e)}}),r;function i(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}}(),r=function(){"use strict";var o,n;function e(e,t){(e=e||{}).templates=e.templates||{},e.templates.notFound=e.templates.notFound||e.templates.empty,e.source||g.error("missing source"),e.node||g.error("missing node"),e.name&&!function(e){return/^[_a-zA-Z0-9-]+$/.test(e)}(e.name)&&g.error("invalid dataset name: "+e.name),t.mixin(this),this.highlight=!!e.highlight,this.name=v.toStr(e.name||n()),this.limit=e.limit||5,this.displayFn=function(t){return t=t||v.stringify,v.isFunction(t)?t:function(e){return e[t]}}(e.display||e.displayKey),this.templates=function(n,t){return{notFound:n.notFound&&v.templatify(n.notFound),pending:n.pending&&v.templatify(n.pending),header:n.header&&v.templatify(n.header),footer:n.footer&&v.templatify(n.footer),suggestion:n.suggestion?function(e){var t=n.suggestion;return g(t(e)).attr("id",v.guid())}:function(e){return g('<div role="option">').attr("id",v.guid()).text(t(e))}}}(e.templates,this.displayFn),this.source=e.source.__ttAdapter?e.source.__ttAdapter():e.source,this.async=v.isUndefined(e.async)?2<this.source.length:!!e.async,this._resetLastSuggestion(),this.$el=g(e.node).attr("role","option").attr("aria-label",this.name.replace(/_/g," ")).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}return o={dataset:"tt-selectable-dataset",val:"tt-selectable-display",obj:"tt-selectable-object"},n=v.getIdGenerator(),e.extractData=function(e){var t=g(e);return t.data(o.obj)?{dataset:t.data(o.dataset)||"",val:t.data(o.val)||"",obj:t.data(o.obj)||null}:null},v.mixin(e.prototype,t,{_overwrite:function(e,t){(t=t||[]).length?this._renderSuggestions(e,t):this.async&&this.templates.pending?this._renderPending(e):!this.async&&this.templates.notFound?this._renderNotFound(e):this._empty(),this.trigger("rendered",t,!1,this.name)},_append:function(e,t){(t=t||[]).length&&this.$lastSuggestion.length?this._appendSuggestions(e,t):t.length?this._renderSuggestions(e,t):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(e),this.trigger("rendered",t,!0,this.name)},_renderSuggestions:function(e,t){var n;n=this._getSuggestionsFragment(e,t),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(e,t)).append(this._getFooter(e,t))},_appendSuggestions:function(e,t){var n,i;i=(n=this._getSuggestionsFragment(e,t)).children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(e){var t=this.templates.pending;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_renderNotFound:function(e){var t=this.templates.notFound;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,e){var r,a=this;return r=document.createDocumentFragment(),v.each(e,function(e){var t,n;n=a._injectQuery(i,e),t=g(a.templates.suggestion(n)).data(o.dataset,a.name).data(o.obj,e).data(o.val,a.displayFn(e)).addClass(a.classes.suggestion+" "+a.classes.selectable),r.appendChild(t[0])}),this.highlight&&s({className:this.classes.highlight,node:r,pattern:i}),g(r)},_getFooter:function(e,t){return this.templates.footer?this.templates.footer({query:e,suggestions:t,dataset:this.name}):null},_getHeader:function(e,t){return this.templates.header?this.templates.header({query:e,suggestions:t,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=g()},_injectQuery:function(e,t){return v.isObject(t)?v.mixin({_query:e},t):t},update:function(n){var i=this,r=!1,t=!1,a=0;function e(e){t||(t=!0,e=(e||[]).slice(0,i.limit),a=e.length,i._overwrite(n,e),a<i.limit&&i.async&&i.trigger("asyncRequested",n,i.name))}this.cancel(),this.cancel=function(){r=!0,i.cancel=g.noop,i.async&&i.trigger("asyncCanceled",n,i.name)},this.source(n,e,function(e){if(e=e||[],!r&&a<i.limit){i.cancel=g.noop;var t=Math.abs(a-i.limit);a+=t,i._append(n,e.slice(0,t)),i.async&&i.trigger("asyncReceived",n,i.name)}}),t||e([])},cancel:g.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=g("<div>")}}),e}(),b=function(){"use strict";function e(e,n){var i=this;(e=e||{}).node||g.error("node is required"),n.mixin(this),this.$node=g(e.node),this.query=null,this.datasets=v.map(e.datasets,function(e){var t=i.$node.find(e.node).first();return e.node=t.length?t:g("<div>").appendTo(i.$node),new r(e,n)})}return v.mixin(e.prototype,t,{_onSelectableClick:function(e){this.trigger("selectableClicked",g(e.currentTarget))},_onRendered:function(e,t,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",t,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return v.every(this.datasets,v.bind(function(e){var t=e.isEmpty();return this.$node.attr("aria-expanded",!t),t},this))},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function(e){var t,n,i,r;n=(t=e.position().top)+e.outerHeight(!0),i=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),t<0?this.$node.scrollTop(i+t):r<n&&this.$node.scrollTop(i+(n-r))},bind:function(){var e,t=this;return e=v.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,e),this.$node.on("mouseover",this.selectors.selectable,function(){t.setCursor(g(this))}),this.$node.on("mouseleave",function(){t._removeCursor()}),v.each(this.datasets,function(e){e.onSync("asyncRequested",t._propagate,t).onSync("asyncCanceled",t._propagate,t).onSync("asyncReceived",t._propagate,t).onSync("rendered",t._onRendered,t).onSync("cleared",t._onCleared,t)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.scrollTop(0),this.$node.addClass(this.classes.open)},close:function(){this.$node.attr("aria-expanded",!1),this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function(e){var t,n,i;return n=this.getActiveSelectable(),t=this._getSelectables(),-1===(i=(i=((i=(n?t.index(n):-1)+e)+1)%(t.length+1)-1)<-1?t.length-1:i)?null:t.eq(i)},setCursor:function(e){this._removeCursor(),(e=e&&e.first())&&(e.addClass(this.classes.cursor),this._ensureVisible(e))},getSelectableData:function(e){return e&&e.length?r.extractData(e):null},getActiveSelectable:function(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function(){var e=this._getSelectables().first();return e.length?e:null},update:function(t){var e=t!==this.query;return e&&(this.query=t,v.each(this.datasets,function(e){e.update(t)})),e},empty:function(){v.each(this.datasets,function(e){e.clear()}),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){this.$node.off(".tt"),this.$node=g("<div>"),v.each(this.datasets,function(e){e.destroy()})}}),e}(),S=function(){"use strict";function e(e){this.$el=g("<span></span>",{role:"status","aria-live":"polite"}).css({position:"absolute",padding:"0",border:"0",height:"1px",width:"1px","margin-bottom":"-1px","margin-right":"-1px",overflow:"hidden",clip:"rect(0 0 0 0)","white-space":"nowrap"}),e.$input.after(this.$el),v.each(e.menu.datasets,v.bind(function(e){e.onSync&&(e.onSync("rendered",v.bind(this.update,this)),e.onSync("cleared",v.bind(this.cleared,this)))},this))}return v.mixin(e.prototype,{update:function(e,t){var n,i=t.length;n=1===i?{result:"result",is:"is"}:{result:"results",is:"are"},this.$el.text(i+" "+n.result+" "+n.is+" available, use up and down arrow keys to navigate.")},cleared:function(){this.$el.text("")}}),e}(),w=function(){"use strict";var t=b.prototype;function e(){b.apply(this,[].slice.call(arguments,0))}return v.mixin(e.prototype,b.prototype,{open:function(){return this._allDatasetsEmpty()||this._show(),t.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),t.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),t._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),t._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(e){return this.$node.css("ltr"===e?this.css.ltr:this.css.rtl),t.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),e}(),C=function(){"use strict";function e(e,t){var n,i,r,a,o,s,l,c,u,d,f;(e=e||{}).input||g.error("missing input"),e.menu||g.error("missing menu"),e.eventBus||g.error("missing event bus"),t.mixin(this),this.eventBus=e.eventBus,this.minLength=v.isNumber(e.minLength)?e.minLength:1,this.input=e.input,this.menu=e.menu,this.enabled=!0,this.autoselect=!!e.autoselect,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),n=p(this,"activate","open","_onFocused"),i=p(this,"deactivate","_onBlurred"),r=p(this,"isActive","isOpen","_onEnterKeyed"),a=p(this,"isActive","isOpen","_onTabKeyed"),o=p(this,"isActive","_onEscKeyed"),s=p(this,"isActive","open","_onUpKeyed"),l=p(this,"isActive","open","_onDownKeyed"),c=p(this,"isActive","isOpen","_onLeftKeyed"),u=p(this,"isActive","isOpen","_onRightKeyed"),d=p(this,"_openIfActive","_onQueryChanged"),f=p(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",n,this).onSync("blurred",i,this).onSync("enterKeyed",r,this).onSync("tabKeyed",a,this).onSync("escKeyed",o,this).onSync("upKeyed",s,this).onSync("downKeyed",l,this).onSync("leftKeyed",c,this).onSync("rightKeyed",u,this).onSync("queryChanged",d,this).onSync("whitespaceChanged",f,this).onSync("langDirChanged",this._onLangDirChanged,this)}return v.mixin(e.prototype,{_hacks:function(){var r,a;r=this.input.$input||g("<div>"),a=this.menu.$node||g("<div>"),r.on("blur.tt",function(e){var t,n,i;t=document.activeElement,n=a.is(t),i=0<a.has(t).length,v.isMsie()&&(n||i)&&(e.preventDefault(),e.stopImmediatePropagation(),v.defer(function(){r.focus()}))}),a.on("mousedown.tt",function(e){e.preventDefault()})},_onSelectableClicked:function(e,t){this.select(t)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(e,t,n,i){if(this._updateHint(),this.autoselect){var r=this.selectors.cursor.substr(1);this.menu.$node.find(this.selectors.suggestion).first().addClass(r)}this.eventBus.trigger("render",t,n,i)},_onAsyncRequested:function(e,t,n){this.eventBus.trigger("asyncrequest",n,t)},_onAsyncCanceled:function(e,t,n){this.eventBus.trigger("asynccancel",n,t)},_onAsyncReceived:function(e,t,n){this.eventBus.trigger("asyncreceive",n,t)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&(t.preventDefault(),t.stopPropagation()):this.autoselect&&this.select(this.menu.getTopSelectable())&&(t.preventDefault(),t.stopPropagation())},_onTabKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&t.preventDefault():this.autoselect&&(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&t.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onQueryChanged:function(e,t){this._minLengthMet(t)?this.menu.update(t):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(e,t){this.dir!==t&&(this.dir=t,this.menu.setLanguageDirection(t))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(e){return(e=v.isString(e)?e:this.input.getQuery()||"").length>=this.minLength},_updateHint:function(){var e,t,n,i,r,a;e=this.menu.getTopSelectable(),t=this.menu.getSelectableData(e),n=this.input.getInputValue(),!t||v.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(i=y.normalizeQuery(n),r=v.escapeRegExChars(i),(a=new RegExp("^(?:"+r+")(.+$)","i").exec(t.val))&&this.input.setHint(n+a[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.input.setAriaExpanded(!0),this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.input.setAriaExpanded(!1),this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(e){this.input.setQuery(v.toStr(e))},getVal:function(){return this.input.getQuery()},select:function(e){var t=this.menu.getSelectableData(e);return!(!t||this.eventBus.before("select",t.obj,t.dataset))&&(this.input.setQuery(t.val,!0),this.eventBus.trigger("select",t.obj,t.dataset),this.close(),!0)},autocomplete:function(e){var t,n;return t=this.input.getQuery(),!(!((n=this.menu.getSelectableData(e))&&t!==n.val)||this.eventBus.before("autocomplete",n.obj,n.dataset))&&(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj,n.dataset),!0)},moveCursor:function(e){var t,n,i,r,a,o;return t=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(e),r=(i=this.menu.getSelectableData(n))?i.obj:null,a=i?i.dataset:null,o=n?n.attr("id"):null,this.input.trigger("cursorchange",o),!(this._minLengthMet()&&this.menu.update(t))&&!this.eventBus.before("cursorchange",r,a)&&(this.menu.setCursor(n),i?"string"==typeof i.val&&this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r,a),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),e;function p(n){var e=[].slice.call(arguments,1);return function(){var t=[].slice.call(arguments);v.each(e,function(e){return n[e].apply(n,t)})}}}();!function(){"use strict";var e,h,t;function i(e,n){e.each(function(){var e,t=g(this);(e=t.data(h.typeahead))&&n(e,t)})}function m(e){var t;return(t=v.isJQuery(e)||v.isElement(e)?g(e).first():[]).length?t:null}e=g.fn.typeahead,h={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},t={initialize:function(d,f){var p;return f=v.isArray(f)?f:[].slice.call(arguments,1),p=n((d=d||{}).classNames),this.each(function(){var e,t,n,i,r,a,o,s,l,c,u;v.each(f,function(e){e.highlight=!!d.highlight}),e=g(this),t=g(p.html.wrapper),n=m(d.hint),i=m(d.menu),r=!1!==d.hint&&!n,a=!1!==d.menu&&!i,r&&(n=function(e,t){return e.clone().addClass(t.classes.hint).removeData().css(t.css.hint).css(function(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}(e)).prop({readonly:!0,required:!1}).removeAttr("id name placeholder").removeClass("required").attr({spellcheck:"false",tabindex:-1})}(e,p)),a&&(i=g(p.html.menu).css(p.css.menu)),n&&n.val(""),e=function(e,t){e.data(h.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass(t.classes.input).attr({spellcheck:!1});try{e.attr("dir")||e.attr("dir","auto")}catch(e){}return e}(e,p),(r||a)&&(t.css(p.css.wrapper),e.css(r?p.css.input:p.css.inputWithNoHint),e.wrap(t).parent().prepend(r?n:null).append(a?i:null));u=a?w:b,o=new _({el:e}),s=new y({hint:n,input:e,menu:i},p),l=new u({node:i,datasets:f},p),new S({$input:e,menu:l}),c=new C({input:s,menu:l,eventBus:o,minLength:d.minLength,autoselect:d.autoselect},p),e.data(h.www,p),e.data(h.typeahead,c)})},isEnabled:function(){var t;return i(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return i(this,function(e){e.enable()}),this},disable:function(){return i(this,function(e){e.disable()}),this},isActive:function(){var t;return i(this.first(),function(e){t=e.isActive()}),t},activate:function(){return i(this,function(e){e.activate()}),this},deactivate:function(){return i(this,function(e){e.deactivate()}),this},isOpen:function(){var t;return i(this.first(),function(e){t=e.isOpen()}),t},open:function(){return i(this,function(e){e.open()}),this},close:function(){return i(this,function(e){e.close()}),this},select:function(e){var t=!1,n=g(e);return i(this.first(),function(e){t=e.select(n)}),t},autocomplete:function(e){var t=!1,n=g(e);return i(this.first(),function(e){t=e.autocomplete(n)}),t},moveCursor:function(t){var n=!1;return i(this.first(),function(e){n=e.moveCursor(t)}),n},val:function(t){var n;return arguments.length?(i(this,function(e){e.setVal(v.toStr(t))}),this):(i(this.first(),function(e){n=e.getVal()}),n)},destroy:function(){return i(this,function(e,t){!function(n){var e,t;e=n.data(h.www),t=n.parent().filter(e.selectors.wrapper),v.each(n.data(h.attrs),function(e,t){v.isUndefined(e)?n.removeAttr(t):n.attr(t,e)}),n.removeData(h.typeahead).removeData(h.www).removeData(h.attr).removeClass(e.classes.input),t.length&&(n.detach().insertAfter(t),t.remove())}(t),e.destroy()}),this}},g.fn.typeahead=function(e){return t[e]?t[e].apply(this,[].slice.call(arguments,1)):t.initialize.apply(this,arguments)},g.fn.typeahead.noConflict=function(){return g.fn.typeahead=e,this}}()},"function"==typeof define&&define.amd?define(["jquery"],function(e){return fnb(e)}):"object"==typeof exports?module.exports=fnb(require("jquery")):fnb(jQuery),lyb=function(t){function n(e){var t=7.5625;return e<1/2.75?t*e*e:e<2/2.75?t*(e-=1.5/2.75)*e+.75:e<2.5/2.75?t*(e-=2.25/2.75)*e+.9375:t*(e-=2.625/2.75)*e+.984375}void 0!==t.easing&&(t.easing.jswing=t.easing.swing);var i=Math.pow,r=Math.sqrt,a=Math.sin,o=Math.cos,s=Math.PI,l=1.70158,c=2.5949095,u=2*s/3,d=2*s/4.5;t.extend(t.easing,{def:"easeOutQuad",swing:function(e){return t.easing[t.easing.def](e)},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-i(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-i(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-i(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-i(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-i(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-i(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-i(-2*e+2,5)/2},easeInSine:function(e){return 1-o(e*s/2)},easeOutSine:function(e){return a(e*s/2)},easeInOutSine:function(e){return-(o(s*e)-1)/2},easeInExpo:function(e){return 0===e?0:i(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-i(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?i(2,20*e-10)/2:(2-i(2,-20*e+10))/2},easeInCirc:function(e){return 1-r(1-i(e,2))},easeOutCirc:function(e){return r(1-i(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-r(1-i(2*e,2)))/2:(r(1-i(-2*e+2,2))+1)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-i(2,10*e-10)*a((10*e-10.75)*u)},easeOutElastic:function(e){return 0===e?0:1===e?1:i(2,-10*e)*a((10*e-.75)*u)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-i(2,20*e-10)*a((20*e-11.125)*d)/2:i(2,-20*e+10)*a((20*e-11.125)*d)/2+1},easeInBack:function(e){return(1+l)*e*e*e-l*e*e},easeOutBack:function(e){return 1+(1+l)*i(e-1,3)+l*i(e-1,2)},easeInOutBack:function(e){return e<.5?i(2*e,2)*(7.189819*e-c)/2:(i(2*e-2,2)*((1+c)*(2*e-2)+c)+2)/2},easeInBounce:function(e){return 1-n(1-e)},easeOutBounce:n,easeInOutBounce:function(e){return e<.5?(1-n(1-2*e))/2:(1+n(2*e-1))/2}})},"function"==typeof define&&define.amd?define(["jquery"],function(e){return lyb(e)}):"object"==typeof module&&"object"==typeof module.exports?exports=lyb(require("jquery")):lyb(jQuery),
/**
 * jquery.mask.js
 * @version: v1.14.15
 * @author: Igor Escobar
 *
 * Created by Igor Escobar on 2012-03-10. Please report any bug at github.com/igorescobar/jQuery-Mask-Plugin
 *
 * Copyright (c) 2012 Igor Escobar http://igorescobar.com
 *
 * The MIT License (http://www.opensource.org/licenses/mit-license.php)
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */
dzb=function(s){"use strict";function l(f,S,w){var C={invalid:[],getCaret:function(){try{var e,t=0,n=f.get(0),i=document.selection,r=n.selectionStart;return i&&-1===navigator.appVersion.indexOf("MSIE 10")?((e=i.createRange()).moveStart("character",-C.val().length),t=e.text.length):!r&&"0"!==r||(t=r),t}catch(e){}},setCaret:function(e){try{if(f.is(":focus")){var t,n=f.get(0);n.setSelectionRange?n.setSelectionRange(e,e):((t=n.createTextRange()).collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select())}}catch(e){}},events:function(){f.on("keydown.mask",function(e){f.data("mask-keycode",e.keyCode||e.which),f.data("mask-previus-value",f.val()),f.data("mask-previus-caret-pos",C.getCaret()),C.maskDigitPosMapOld=C.maskDigitPosMap}).on(s.jMaskGlobals.useInput?"input.mask":"keyup.mask",C.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){f.keydown().keyup()},100)}).on("change.mask",function(){f.data("changed",!0)}).on("blur.mask",function(){o===C.val()||f.data("changed")||f.trigger("change"),f.data("changed",!1)}).on("blur.mask",function(){o=C.val()}).on("focus.mask",function(e){!0===w.selectOnFocus&&s(e.target).select()}).on("focusout.mask",function(){w.clearIfNotMatch&&!a.test(C.val())&&C.val("")})},getRegexMask:function(){for(var e,t,n,i,r,a,o=[],s=0;s<S.length;s++)(e=x.translation[S.charAt(s)])?(t=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=e.optional,(i=e.recursive)?(o.push(S.charAt(s)),r={digit:S.charAt(s),pattern:t}):o.push(n||i?t+"?":t)):o.push(S.charAt(s).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return a=o.join(""),r&&(a=a.replace(new RegExp("("+r.digit+"(.*"+r.digit+")?)"),"($1)?").replace(new RegExp(r.digit,"g"),r.pattern)),new RegExp(a)},destroyEvents:function(){f.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(e){var t=f.is("input")?"val":"text";return 0<arguments.length?(f[t]()!==e&&f[t](e),f):f[t]()},calculateCaretPosition:function(){var e=f.data("mask-previus-value")||"",t=C.getMasked(),n=C.getCaret();if(e!==t){var i=f.data("mask-previus-caret-pos")||0,r=t.length,a=e.length,o=0,s=0,l=0,c=0,u=0;for(u=n;u<r&&C.maskDigitPosMap[u];u++)s++;for(u=n-1;0<=u&&C.maskDigitPosMap[u];u--)o++;for(u=n-1;0<=u;u--)C.maskDigitPosMap[u]&&l++;for(u=i-1;0<=u;u--)C.maskDigitPosMapOld[u]&&c++;if(a<n)n=10*r;else if(n<=i&&i!==a){if(!C.maskDigitPosMapOld[n]){var d=n;n-=c-l,n-=o,C.maskDigitPosMap[n]&&(n=d)}}else i<n&&(n+=l-c,n+=s)}return n},behaviour:function(e){e=e||window.event,C.invalid=[];var t=f.data("mask-keycode");if(-1===s.inArray(t,x.byPassKeys)){var n=C.getMasked(),i=C.getCaret();return setTimeout(function(){C.setCaret(C.calculateCaretPosition())},s.jMaskGlobals.keyStrokeCompensation),C.val(n),C.setCaret(i),C.callbacks(e)}},getMasked:function(e,t){var n,i,r,a=[],o=void 0===t?C.val():t+"",s=0,l=S.length,c=0,u=o.length,d=1,f="push",p=-1,h=0,m=[];for(i=w.reverse?(f="unshift",d=-1,n=0,s=l-1,c=u-1,function(){return-1<s&&-1<c}):(n=l-1,function(){return s<l&&c<u});i();){var g=S.charAt(s),v=o.charAt(c),_=x.translation[g];_?(v.match(_.pattern)?(a[f](v),_.recursive&&(-1===p?p=s:s===n&&s!==p&&(s=p-d),n===p&&(s-=d)),s+=d):v===r?(h--,r=void 0):_.optional?(s+=d,c-=d):_.fallback?(a[f](_.fallback),s+=d,c-=d):C.invalid.push({p:c,v:v,e:_.pattern}),c+=d):(e||a[f](g),v===g?(m.push(c),c+=d):(r=g,m.push(c+h),h++),s+=d)}var y=S.charAt(n);l!==u+1||x.translation[y]||a.push(y);var b=a.join("");return C.mapMaskdigitPositions(b,m,u),b},mapMaskdigitPositions:function(e,t,n){var i=w.reverse?e.length-n:0;C.maskDigitPosMap={};for(var r=0;r<t.length;r++)C.maskDigitPosMap[t[r]+i]=1},callbacks:function(e){function t(e,t,n){"function"==typeof w[e]&&t&&w[e].apply(this,n)}var n=C.val(),i=n!==o,r=[n,e,f,w];t("onChange",!0==i,r),t("onKeyPress",!0==i,r),t("onComplete",n.length===S.length,r),t("onInvalid",0<C.invalid.length,[n,e,f,C.invalid,w])}};f=s(f);var a,x=this,o=C.val();S="function"==typeof S?S(C.val(),void 0,f,w):S,x.mask=S,x.options=w,x.remove=function(){var e=C.getCaret();return x.options.placeholder&&f.removeAttr("placeholder"),f.data("mask-maxlength")&&f.removeAttr("maxlength"),C.destroyEvents(),C.val(x.getCleanVal()),C.setCaret(e),f},x.getCleanVal=function(){return C.getMasked(!0)},x.getMaskedVal=function(e){return C.getMasked(!1,e)},x.init=function(e){if(e=e||!1,w=w||{},x.clearIfNotMatch=s.jMaskGlobals.clearIfNotMatch,x.byPassKeys=s.jMaskGlobals.byPassKeys,x.translation=s.extend({},s.jMaskGlobals.translation,w.translation),x=s.extend(!0,{},x,w),a=C.getRegexMask(),e)C.events(),C.val(C.getMasked());else{w.placeholder&&f.attr("placeholder",w.placeholder),f.data("mask")&&f.attr("autocomplete","off");for(var t=0,n=!0;t<S.length;t++){var i=x.translation[S.charAt(t)];if(i&&i.recursive){n=!1;break}}n&&f.attr("maxlength",S.length).data("mask-maxlength",!0),C.destroyEvents(),C.events();var r=C.getCaret();C.val(C.getMasked()),C.setCaret(r)}},x.init(!f.is("input"))}s.maskWatchers={};function t(){var e=s(this),t={},n="data-mask-",i=e.attr("data-mask");if(e.attr(n+"reverse")&&(t.reverse=!0),e.attr(n+"clearifnotmatch")&&(t.clearIfNotMatch=!0),"true"===e.attr(n+"selectonfocus")&&(t.selectOnFocus=!0),c(e,i,t))return e.data("mask",new l(this,i,t))}var c=function(e,t,n){n=n||{};var i=s(e).data("mask"),r=JSON.stringify,a=s(e).val()||s(e).text();try{return"function"==typeof t&&(t=t(a)),"object"!=typeof i||r(i.options)!==r(n)||i.mask!==t}catch(e){}};s.fn.mask=function(e,t){t=t||{};function n(){if(c(this,e,t))return s(this).data("mask",new l(this,e,t))}var i=this.selector,r=s.jMaskGlobals,a=r.watchInterval,o=t.watchInputs||r.watchInputs;return s(this).each(n),i&&""!==i&&o&&(clearInterval(s.maskWatchers[i]),s.maskWatchers[i]=setInterval(function(){s(document).find(i).each(n)},a)),this},s.fn.masked=function(e){return this.data("mask").getMaskedVal(e)},s.fn.unmask=function(){return clearInterval(s.maskWatchers[this.selector]),delete s.maskWatchers[this.selector],this.each(function(){var e=s(this).data("mask");e&&e.remove().removeData("mask")})},s.fn.cleanVal=function(){return this.data("mask").getCleanVal()},s.applyDataMask=function(e){((e=e||s.jMaskGlobals.maskElements)instanceof s?e:s(e)).filter(s.jMaskGlobals.dataMaskAttr).each(t)};var e,n,i,r={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&(e="input",i=document.createElement("div"),(n=(e="on"+e)in i)||(i.setAttribute(e,"return;"),n="function"==typeof i[e]),i=null,n),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};s.jMaskGlobals=s.jMaskGlobals||{},(r=s.jMaskGlobals=s.extend(!0,{},r,s.jMaskGlobals)).dataMask&&(s.applyDataMask(),s.jMaskGlobals.watchDataMask&&setInterval(function(){s.applyDataMask()},r.watchInterval))},ezb=$,fzb=window.Zepto,"function"==typeof define&&define.amd?define(["jquery"],dzb):"object"==typeof exports?module.exports=dzb(require("jquery")):dzb(ezb||fzb),function(i){"use strict";i.fn.emulateTransitionEnd=function(e){var t=!1,n=this;i(this).one("bsTransitionEnd",function(){t=!0});return setTimeout(function(){t||i(n).trigger(i.support.transition.end)},e),this},i(function(){i.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}(),i.support.transition&&(i.event.special.bsTransitionEnd={bindType:i.support.transition.end,delegateType:i.support.transition.end,handle:function(e){if(i(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}($),function(o){"use strict";var r=function(e,t){this.$element=o(e),this.options=o.extend({},r.DEFAULTS,t),this.transitioning=null,this.options.parent&&(this.$parent=o(this.options.parent)),this.options.toggle&&this.toggle()};function s(i){return this.each(function(){var e=o(this),t=e.data("bs.collapse"),n=o.extend({},r.DEFAULTS,e.data(),"object"==typeof i&&i);!t&&n.toggle&&"show"==i&&(i=!i),t||e.data("bs.collapse",t=new r(this,n)),"string"==typeof i&&t[i]()})}r.VERSION="3.2.0",r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=o.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var t=this.$parent&&this.$parent.find("> .panel > .in");if(t&&t.length){var n=t.data("bs.collapse");if(n&&n.transitioning)return;s.call(t,"hide"),n||t.data("bs.collapse",null)}var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!o.support.transition)return r.call(this);var a=o.camelCase(["scroll",i].join("-"));this.$element.one("bsTransitionEnd",o.proxy(r,this)).emulateTransitionEnd(350)[i](this.$element[0][a])}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=o.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var t=this.dimension();this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};if(!o.support.transition)return n.call(this);this.$element[t](0).one("bsTransitionEnd",o.proxy(n,this)).emulateTransitionEnd(350)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var e=o.fn.collapse;o.fn.collapse=s,o.fn.collapse.Constructor=r,o.fn.collapse.noConflict=function(){return o.fn.collapse=e,this}}(jQuery),function(a){"use strict";function i(e){a(e).on("click",t,this.close)}var t='[data-dismiss="alert"]';i.VERSION="3.2.0",i.prototype.close=function(e){var t=a(this),n=t.attr("data-target");n=n||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"");var i=a(n);function r(){i.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),i.length||(i=t.hasClass("alert")?t:t.parent()),i.trigger(e=a.Event("close.bs.alert")),e.isDefaultPrevented()||(i.removeClass("in"),a.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",r).emulateTransitionEnd(150):r())};var e=a.fn.alert;a.fn.alert=function(n){return this.each(function(){var e=a(this),t=e.data("bs.alert");t||e.data("bs.alert",t=new i(this)),"string"==typeof n&&t[n].call(e)})},a.fn.alert.Constructor=i,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",t,i.prototype.close)}($),function(g){"use strict";function r(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)}r.VERSION="3.2.0",r.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},r.prototype.init=function(e,t,n){this.enabled=!0,this.type=e,this.$element=g(t),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&g(this.options.viewport.selector||this.options.viewport);for(var i=this.options.trigger.split(" "),r=i.length;r--;){var a=i[r];if("click"==a)this.$element.on("click."+this.type,this.options.selector,g.proxy(this.toggle,this));else if("manual"!=a){var o="hover"==a?"mouseenter":"focusin",s="hover"==a?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,g.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,g.proxy(this.leave,this))}}this.options.selector?this._options=g.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},r.prototype.getDefaults=function(){return r.DEFAULTS},r.prototype.getOptions=function(e){return(e=g.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},r.prototype.getDelegateOptions=function(){var n={},i=this.getDefaults();return this._options&&g.each(this._options,function(e,t){i[e]!=t&&(n[e]=t)}),n},r.prototype.enter=function(e){var t=e instanceof this.constructor?e:g(e.currentTarget).data("bs."+this.type);if(t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),g(e.currentTarget).data("bs."+this.type,t)),clearTimeout(t.timeout),t.hoverState="in",!t.options.delay||!t.options.delay.show)return t.show();t.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)},r.prototype.leave=function(e){var t=e instanceof this.constructor?e:g(e.currentTarget).data("bs."+this.type);if(t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),g(e.currentTarget).data("bs."+this.type,t)),clearTimeout(t.timeout),t.hoverState="out",!t.options.delay||!t.options.delay.hide)return t.hide();t.timeout=setTimeout(function(){"out"==t.hoverState&&t.hide()},t.options.delay.hide)},r.prototype.show=function(){var e=g.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var t=g.contains(document.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!t)return;var n=this,i=this.tip(),r=this.getUID(this.type);this.setContent(),i.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&i.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,o=/\s?auto?\s?/i,s=o.test(a);s&&(a=a.replace(o,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var l=this.getPosition(),c=i[0].offsetWidth,u=i[0].offsetHeight;if(s){var d=a,f=this.$element.parent(),p=this.getPosition(f);a="bottom"==a&&l.top+l.height+u-p.scroll>p.height?"top":"top"==a&&l.top-p.scroll-u<0?"bottom":"right"==a&&l.right+c>p.width?"left":"left"==a&&l.left-c<p.left?"right":a,i.removeClass(d).addClass(a)}var h=this.getCalculatedOffset(a,l,c,u);this.applyPlacement(h,a);var m=function(){n.$element.trigger("shown.bs."+n.type),n.hoverState=null};g.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",m).emulateTransitionEnd(150):m()}},r.prototype.applyPlacement=function(e,t){var n=this.tip(),i=n[0].offsetWidth,r=n[0].offsetHeight,a=parseInt(n.css("margin-top"),10),o=parseInt(n.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(o)&&(o=0),e.top=e.top+a,e.left=e.left+o,g.offset.setOffset(n[0],g.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},e),0),n.addClass("in");var s=n[0].offsetWidth,l=n[0].offsetHeight;"top"==t&&l!=r&&(e.top=e.top+r-l);var c=this.getViewportAdjustedDelta(t,e,s,l);c.left?e.left+=c.left:e.top+=c.top;var u=c.left?2*c.left-i+s:2*c.top-r+l,d=c.left?"left":"top",f=c.left?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(u,n[0][f],d)},r.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},r.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},r.prototype.hide=function(){var e=this,t=this.tip(),n=g.Event("hide.bs."+this.type);function i(){"in"!=e.hoverState&&t.detach(),e.$element.trigger("hidden.bs."+e.type)}if(this.$element.removeAttr("aria-describedby"),this.$element.trigger(n),!n.isDefaultPrevented())return t.removeClass("in"),g.support.transition&&this.$tip.hasClass("fade")?t.one("bsTransitionEnd",i).emulateTransitionEnd(150):i(),this.hoverState=null,this},r.prototype.fixTitle=function(){var e=this.$element;!e.attr("title")&&"string"==typeof e.attr("data-original-title")||e.attr("data-original-title",e.attr("title")||"").attr("title","")},r.prototype.hasContent=function(){return this.getTitle()},r.prototype.getPosition=function(e){var t=(e=e||this.$element)[0],n="BODY"==t.tagName;return g.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():null,{scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:n?g(window).width():e.outerWidth(),height:n?g(window).height():e.outerHeight()},n?{top:0,left:0}:e.offset())},r.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},r.prototype.getViewportAdjustedDelta=function(e,t,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var a=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-a-o.scroll,l=t.top+a-o.scroll+i;s<o.top?r.top=o.top-s:l>o.top+o.height&&(r.top=o.top+o.height-l)}else{var c=t.left-a,u=t.left+a+n;c<o.left?r.left=o.left-c:u>o.width&&(r.left=o.left+o.width-u)}return r},r.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},r.prototype.getUID=function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},r.prototype.tip=function(){return this.$tip=this.$tip||g(this.options.template)},r.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},r.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},r.prototype.enable=function(){this.enabled=!0},r.prototype.disable=function(){this.enabled=!1},r.prototype.toggleEnabled=function(){this.enabled=!this.enabled},r.prototype.toggle=function(e){var t=this;e&&((t=g(e.currentTarget).data("bs."+this.type))||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),g(e.currentTarget).data("bs."+this.type,t))),t.tip().hasClass("in")?t.leave(t):t.enter(t)},r.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var e=g.fn.tooltip;g.fn.tooltip=function(i){return this.each(function(){var e=g(this),t=e.data("bs.tooltip"),n="object"==typeof i&&i;!t&&"destroy"==i||(t||e.data("bs.tooltip",t=new r(this,n)),"string"==typeof i&&t[i]())})},g.fn.tooltip.Constructor=r,g.fn.tooltip.noConflict=function(){return g.fn.tooltip=e,this}}($),function(r){"use strict";function a(e,t){this.init("popover",e,t)}if(!r.fn.tooltip)throw new Error("Popover requires tooltip.js");a.VERSION="3.2.0",a.DEFAULTS=r.extend({},r.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),((a.prototype=r.extend({},r.fn.tooltip.Constructor.prototype)).constructor=a).prototype.getDefaults=function(){return a.DEFAULTS},a.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").empty()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},a.prototype.hasContent=function(){return this.getTitle()||this.getContent()},a.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},a.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},a.prototype.tip=function(){return this.$tip||(this.$tip=r(this.options.template)),this.$tip};var e=r.fn.popover;r.fn.popover=function(i){return this.each(function(){var e=r(this),t=e.data("bs.popover"),n="object"==typeof i&&i;!t&&"destroy"==i||(t||e.data("bs.popover",t=new a(this,n)),"string"==typeof i&&t[i]())})},r.fn.popover.Constructor=a,r.fn.popover.noConflict=function(){return r.fn.popover=e,this}}($),function(a){"use strict";function o(e,t){this.options=t,this.$body=a(t.container||document.body),this.$element=a(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}function s(i,r){return this.each(function(){var e=a(this),t=e.data("bs.modal"),n=a.extend({},o.DEFAULTS,e.data(),"object"==typeof i&&i);t||e.data("bs.modal",t=new o(this,n)),"string"==typeof i?t[i](r):n.show&&t.show(r)})}o.VERSION="3.2.0",o.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},o.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},o.prototype.show=function(n){var i=this,e=a.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var e=a.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),e&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus(),i.$element.trigger(a.Event("beforeshown.bs.modal",{relatedTarget:n}));var t=a.Event("shown.bs.modal",{relatedTarget:n});e?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(t)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(t)}))},o.prototype.hide=function(e){e&&e.preventDefault(),e=a.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},o.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},o.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},o.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$element.trigger("hidden.bs.modal")})},o.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},o.prototype.backdrop=function(e){var t=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=a.support.transition&&n;if(this.$backdrop=a('<div class="modal-backdrop '+n+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){t.removeBackdrop(),e&&e()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(150):r()}else e&&e()},o.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},o.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",e+this.scrollbarWidth)},o.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},o.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var e=a.fn.modal;a.fn.modal=s,a.fn.modal.Constructor=o,a.fn.modal.noConflict=function(){return a.fn.modal=e,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var t=a(this),n=t.attr("href"),i=a(t.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),r=i.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(n)&&n},i.data(),t.data());t.is("a")&&e.preventDefault(),i.one("show.bs.modal",function(e){e.isDefaultPrevented()||i.one("hidden.bs.modal",function(){t.is(":visible")&&t.trigger("focus")})}),s.call(i,r,this)})}($),function(l){"use strict";var c=function(e,t){this.options=l.extend({},c.DEFAULTS,t),this.$target=l(this.options.target).on("scroll.bs.affix.data-api",l.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",l.proxy(this.checkPositionWithEventLoop,this)),this.$element=l(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.5",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(e,t,n,i){var r=this.$target.scrollTop(),a=this.$element.offset(),o=this.$target.height();if(null!=n&&"top"==this.affixed)return r<n&&"top";if("bottom"==this.affixed)return null!=n?!(r+this.unpin<=a.top)&&"bottom":!(r+o<=e-i)&&"bottom";var s=null==this.affixed,l=s?r:a.top;return null!=n&&r<=n?"top":null!=i&&e-i<=l+(s?o:t)&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},c.prototype.checkPositionWithEventLoop=function(){setTimeout(l.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),t=this.options.offset,n=t.top,i=t.bottom,r=Math.max(l(document).height(),l(document.body).height());"object"!=typeof t&&(i=n=t),"function"==typeof n&&(n=t.top(this.$element)),"function"==typeof i&&(i=t.bottom(this.$element));var a=this.getState(r,e,n,i);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var o="affix"+(a?"-"+a:""),s=l.Event(o+".bs.affix");if(this.$element.trigger(s),s.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(o).trigger(o.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:r-e-i})}};var e=l.fn.affix;l.fn.affix=function(i){return this.each(function(){var e=l(this),t=e.data("bs.affix"),n="object"==typeof i&&i;t||e.data("bs.affix",t=new c(this,n)),"string"==typeof i&&t[i]()})},l.fn.affix.Constructor=c,l.fn.affix.noConflict=function(){return l.fn.affix=e,this}}($),function(o){"use strict";function i(e){this.element=o(e)}function t(n){return this.each(function(){var e=o(this),t=e.data("bs.tab");t||e.data("bs.tab",t=new i(this)),"string"==typeof n&&t[n]()})}i.VERSION="3.2.0",i.prototype.show=function(){var e=this.element,t=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n=n||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,""),!e.parent("li").hasClass("active")){var i=t.find(".active:last a")[0],r=o.Event("show.bs.tab",{relatedTarget:i});if(e.trigger(r),!r.isDefaultPrevented()){var a=o(n);this.activate(e.closest("li"),t),this.activate(a,a.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:i})})}}},i.prototype.activate=function(e,t,n){var i=t.find("> .active"),r=n&&o.support.transition&&i.hasClass("fade");function a(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}r?i.one("bsTransitionEnd",a).emulateTransitionEnd(150):a(),i.removeClass("in")};var e=o.fn.tab;o.fn.tab=t,o.fn.tab.Constructor=i,o.fn.tab.noConflict=function(){return o.fn.tab=e,this},o(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t.call(o(this),"show")})}($),fpEvent=fp.events={DOCUMENT_READY:"documentReady",CAPTCHA_READY:"captchaReady",INITIALIZED:"initialized",LOADED:"loaded",RENDERED:"rendered",INITIALIZE:"initialize",SEARCH:"search",SEARCH_BEFORE_CHANGE:"searchBeforeChange",RESIZE:"resize",UI_BLOCKED:"uiblocked",UI_UNBLOCKED:"uiunblocked",PAGE_CHANGE:"pageChange",PAGE_CHANGED:"pageChanged",ROUTE_AFTER_CHANGE:"routeAfterChange",ROUTE_BEFORE_CHANGE:"routeBeforeChange",ROUTE_CHANGED:"routeChanged",STATE_VIEW_CHANGED:"stateViewChanged",STATE_CHANGED:"stateChanged",ADDRESS_BOOK_ADDRESS_ADDED:"addressBookAddressAdded",ADDRESS_BOOK_ADDRESS_MODAL_HIDDEN:"addressBookModalHidden",PRODUCTS_LOADED:"productsLoaded",RECIPES_LOADED:"recipesLoaded",LIST_LOADED:"listLoaded",ORDER_LIST_LOADED:"orderListLoaded",DEPARTMENTS_LOADED:"departmentsLoaded",BREADCRUMB_LOADED:"breadcrumbLoaded",STORE_LOADED:"storeLoaded",MODULE_LOAD:"moduleLoad",MODULE_RENDERED:"moduleRendered",VIEW_MODULE_LOADED:"viewModuleLoaded",VIEW_MODULE_RENDERED:"viewModuleRendered",SESSION_CHANGED:"sessionChanged",USER_LOADED:"userLoaded",USER_CHANGED:"userChanged",ACCOUNT_CREATED:"accountCreated",ACCOUNT_LOGOUT:"accountLogout",ACCOUNT_SET_TITLE:"accountSetTitle",ACCOUNT_ROUTE_CHANGED:"accountRouteChanged",LIST_ITEM_BEFORE_CHANGE:"listItemBeforeChange",LIST_ITEM_CREATE_NOTE:"listItemCreateNote",LIST_ITEM_UPDATE:"listItemUpdate",LIST_ITEM_ADD:"listItemAdd",LIST_ITEM_INCREMENT:"listItemIncrement",LIST_ITEM_REMOVE:"listItemRemove",LIST_ITEM_CHANGED:"listItemChanged",LIST_CREATE:"listCreate",LIST_DELETE:"listDelete",LIST_ACTIVATE:"listActivate",LIST_RENAME:"listRename",LIST_CHECK_TOGGLE:"listCheckToggle",LIST_ITEMS_CLEAR:"listItemsClear",LIST_ITEMS_REFRESH:"listItemsRefresh",LIST_CREATED:"listCreated",LIST_DELETED:"listDeleted",LIST_RENAMED:"listRenamed",LIST_CHANGED:"listChanged",LIST_ACTIVATED:"listActivated",LIST_BEFORE_LOADED:"listBeforeLoaded",LIST_REFRESHED:"listRefreshed",LIST_CHECKOUT:"listCheckout",LIST_CHECK_TOGGLED:"listCheckToggled",LIST_ITEMS_CLEARED:"listItemsCleared",LIST_ITEMS_REFRESHED:"listItemsRefreshed",LIST_ITEMS_ADDED:"listItemsAdded",GRID_IMAGE_SIZE_CHANGED:"gridImageSizeChanged",FULFILLMENT_SLOT_CHANGED:"fulfillmentSlotChanged",OFFER_ITEM_CLIPPED:"offerItemClipped",PRODUCT_FAVORITED:"productFavorited",RECIPE_FAVORITED:"recipeFavorited",ORDER_CLEARED:"orderCleared",ORDER_LIST_ITEMS_REFRESHED:"orderListItemsRefreshed",SET_BREADCRUMB_SEARCH:"setBreadcrumbSearch",BREADCRUMB_CHANGE:"breadcrumbChange",MINI_LIST_SHOW:"miniListShow",MINI_LIST_HIDE:"miniListHide",MINI_LIST_HIDDEN:"miniListHidden",PRODUCT_ACTION_OPEN:"productActionOpen",DROPDOWN_CLOSE:"dropdownClose",DROPDOWN_POPOVER_CLOSE:"dropdownPopOverClose",DROPDOWN_POPOVER_OPEN:"dropdownPopOverOpen",PRODUCTS_MODAL_SHOW:"productsModalShow",PRODUCTS_MODAL_HIDE:"productsModalHide",FIRST_PRODUCT_ADD_MODAL_SHOW:"firstProductAddModalShow",FIRST_PRODUCT_ADD_MODAL_HIDE:"firstProductAddModalHide",ADD_ALL_PRODUCTS_MODAL_SHOW:"addAllProductsModalShow",ADD_ALL_PRODUCTS_MODAL_HIDE:"addAllProductsModalHide",PRODUCT_DETAIL_MODAL_SHOW:"productDetailModalShow",CONFIRM_MODAL_SHOW:"confirmModalShow",CONFIRM_MODAL_HIDE:"confirmModalHide",STORE_CHANGE:"storeChange",STORE_BEFORE_CHANGE:"storeBeforeChange",STORE_CHANGED:"storeChanged",STORE_AFTER_CHANGE:"storeAfterChange",CHECKOUT_INIT:"checkoutInit",CHECKOUT_COMPLETE:"checkoutComplete",CHECKOUT_SUMMARY_REFRESHED:"checkoutSummaryRefreshed",CHECKOUT_CONFIRMATION_REFRESH:"checkoutConfirmationRefresh",FULFILLMENT_TYPE_CHANGED:"fulfillmentTypeChanged",MEDIA_WIDTH_CHANGE:"mediaWidthChange",WINDOW_RESIZE:"windowResize",WINDOW_ORIENTATION_CHANGED:"windowOrientationChanged",SITE_HEADER_SET_PAGE_TITLE:"siteHeaderSetPageTitle",PAGE_TITLE_SHOW:"pageTitleShow",PAGE_TITLE_HIDE:"pageTitleHide",PAGE_TITLE_SET_CONTENT:"pageTitleSetContent",CIRCULAR_DISPLAY_TYPE_CHANGED:"circularDisplayTypeChanged",TRACK_EVENT:"trackEvent"},fpConstants=fp.constants={matchMediaMin:{XS:10,SM:768,MD:992,LG:1200},matchMediaMax:{XS_MAX:767,SM_MAX:991,MD_MAX:1199,LG_MAX:9999},matchContainerMin:{XS:10,SM:720,MD:940,LG:1140},matchContainerMax:{XS_MAX:719,SM_MAX:939,MD_MAX:1139,LG_MAX:9999},NEW_ITEM_PREFIX:"new-",pager:{MAX_SIZE:9,ITEMS_PER_PAGE:20},httpStatus:{OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504},mode:{TEST:"test"},listItemChangeType:{ADD:1,UPDATE:2,REMOVE:3,INCREMENT:4,CHECK_TOGGLE:5},keycode:{TAB:9,ENTER:13,RETURN:13,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,DELETE:46},apiMethods:{GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PUBLISH:"PUBLISH"},api:{TIMEOUT:59e3},progress:{DELAY:200},priority:{CRITICAL:1,MAJOR:2,MINOR:3,TRIVIAL:4},adminRole:{ADMIN:"admin",TESTER:"tester",ORDER_ADMIN:"order_admin",REPORT_VIEWER:"report_viewer",ORDER_VIEWER:"order_viewer",INSIGHTS_VIEWER:"insights_viewer",PERSONAL_SHOPPER:"personal_shopper",USER_ADMIN:"user_admin",PRODUCT_ADMIN:"product_admin",REVIEW_ADMIN:"review_admin",RECIPE_ADMIN:"recipe_admin",BUNDLE_ADMIN:"bundle_admin",CIRCULAR_ADMIN:"circular_admin",OFFER_ADMIN:"offer_admin",STORE_ADMIN:"store_admin",DEPARTMENT_ADMIN:"department_admin",SCOPE_ADMIN:"scope_admin",CLIENT_ADMIN:"client_admin",EMAIL_TEMPLATE_ADMIN:"email_template_admin",TAG_ADMIN:"tag_admin",TAG_TYPE_ADMIN:"tag_type_admin",APP_ADMIN:"app_admin",EVERYONE:"everyone",ADVERTISER_ADMIN:"advertiser"},errorCode:{INVALID_INPUT:"invalid_input",NOT_AUTHORIZED:"not_authorized",INVALID_OPERATION:"invalid_operation",PAYMENT_REQUIRED:"payment_required",FULFILLMENT_SLOT_REQUIRED:"fulfillment_slot_required",ORDER_MISMATCH:"order_mismatch",STORE_CARD_REQUIRED:"store_card_required",STORE_CARD_INVALID:"store_card_invalid",SIGN_IN_REQUIRED:"sign_in_required",SIGN_OUT_REQUIRED:"sign_out_required",SERVER_ERROR:"server_error"},cardFieldStatus:{HIDE:"hide",SHOW:"show",REQUIRED:"required",OPTIONAL:"optional",PARTIAL:"partial"},rewardTypes:{OFFERS:"offers",POINTS:"points",GIFTS:"gifts"},customAttributeTypes:{RADIO:"radio",CHECKBOX:"checkbox",DROPDOWN:"dropdown",USER_ENTERED:"user_entered",TEXT:"text"},varietyTypes:{RADIO:"radio",CHECKBOX:"checkbox",DROPDOWN:"dropdown"},ordinal:{0:"th",1:"st",2:"nd",3:"rd"},freshopCalendar:{START:"2014-01-01",FINISH:"2099-01-01"},barcodeFormat:{upc_a:"UPC",upca:"UPC",upc:"UPC",code_39:"CODE39",code39:"CODE39",code_128:"CODE128",code128:"CODE128",ean_13:"EAN13",ean13:"EAN13",qr_code:"QrCode"},trackingEvents:{PageLoaded:{event:"PageLoaded",label:"Page Loaded",category:"Navigation"},CheckoutStep:{event:"CheckoutStep",label:"Checkout Step",category:"Navigation",enhancedEcommerceOnly:!0},Search:{event:"Search",label:"Search",category:"Navigation"},ViewSlider:{event:"ViewSlider",ecommerceEvent:"view_item_list",label:"View Slider",category:"Navigation",ecommerceCategory:"Product"},ViewContent:{event:"ViewContent",ecommerceEvent:"view_item",label:"View Content",category:"Product"},ClickedRecommendation:{event:"ClickedRecommendation",label:"Clicked Recommendation",category:"Product"},ViewItemList:{event:"ViewItemList",ecommerceEvent:"view_item_list",label:"Products",category:"Product",enhancedEcommerceOnly:!0},SelectContent:{event:"SelectContent",ecommerceEvent:"select_content",label:"Products",category:"Product",enhancedEcommerceOnly:!0},UserRegistration:{event:"UserRegistration",label:"User Registration",category:"Account"},UserLogin:{event:"UserLogin",label:"User Login",category:"Account"},MailingListSignup:{event:"MailingListSignup",label:"Mailing List Signup",category:"Account"},AddToCart:{event:"AddToCart",ecommerceEvent:"add_to_cart",triggerEvent:"ViewContent",label:"Add To Cart",category:"Product"},RemoveFromCart:{event:"RemoveFromCart",ecommerceEvent:"remove_from_cart",triggerEvent:"ViewContent",label:"Remove From Cart",category:"Product"},AddToFavorites:{event:"AddToFavorites",label:"Add To Favorites",category:"Product"},AddToMyRecipes:{event:"AddToMyRecipes",label:"Add To My Recipes",category:"Recipe"},InitiateCheckout:{event:"InitiateCheckout",label:"Initiate Checkout",category:"Checkout"},InitiatePurchase:{event:"InitiatePurchase",label:"Initiate Purchase",category:"Checkout"},Purchase:{event:"Purchase",label:"Purchase",category:"Checkout"},StoreChanged:{event:"StoreChanged",label:"Store Changed",category:"Store"},DownloadPDF:{event:"DownloadPDF",label:"Download PDF",category:"Download"},EmailList:{event:"EmailList",label:"Email List",category:"Email"},PrintResults:{event:"PrintResults",label:"Print Results",category:"Print"},PrintList:{event:"PrintList",label:"Print List",category:"Print"},DeliveryCheck:{event:"DeliveryCheck",label:"Delivery Check",category:"Store"}}},MFb=[],fpUtil=fp.util={regExp:{escape:function(e){return e?(this.matchEscape.lastIndex=0,e.toString().replace(this.matchEscape,"\\$1")):e},matchEscape:/([.?*+^$[\]\\(){}|-])/g,matchAlphanumeric:/[a-z0-9]/i,matchNumeric:/\d+/g,matchFloat:/(\d+)?(\.\d+)?/g,matchGuid:/^[0-9a-f]{8}[-_][0-9a-f]{4}[-_][1-5][0-9a-f]{3}[-_][89ab][0-9a-f]{3}[-_][0-9a-f]{12}$/i,matchItemId:/^[a-z0-9\-_]+$/i,matchSpecialChars:/[\:\-\_]/g,matchNonAlphanumeric:/[^a-zA-Z0-9-_]+/g,matchHtml:/(<([^>]+)>)/gi,matchDurationFormat:/(HH?)|(mm?)|(ss?)|(SSS?)/g,matchServerDateTime:/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}( [+-]?\d{4})?$/i,matchServerDate:/^\d{4}-\d{2}-\d{2}$/i,matchFormXssInvalidChars:/(?:<|>|`)/,matchNonNameChars:/\d+\//,matchSlash:/\//g,matchDataId:/data-id=(['"])?(.*?)\1/i,matchFreshopTemplate:/<([A-Z0-9]*)(.*?type=(['"]?)text\/(fp-)?template\3.*?)>([\s\S]*?)<\/\1>/gim,matchDataTemplate:/<([A-Z0-9]*).*?data-render-template=(['"])(.*?)\2.*?>([\s\S]*?)<\/\1>/gim,matchDataModule:/<([A-Z0-9]*)(.*?data-module=(['"]?).*?\3.*?)>([\s\S]*?)<\/\1>/gim,matchLayout:/component\/(\d+)\//,matchRoute:/({{(.*?)}})(.*)/,matchHost:/^.+:\/\/.*?\//,matchUrl:/(https?:.*?\/\/.*?)(\/([a-z]{2,2}(?!\w)(-[a-z]{2,4})?)?.*)/,matchCanonicalUrl:/(https?:.*?\/\/.*?)(\/.*?)(\/\w\/.*)/,matchMediaClass:/(fp-media-\S{2}\s?)+/gi,matchLayoutClass:/fp-layout-\S+/gim,matchColumnClass:/col-(xs|sm|md|lg)-\S+/gim,matchPageTemplateClass:/page-template-(default|page-.*?)\s|(single-.*?)\s/,matchCacheKey:/[^\w\s]|_/g,matchPhone:/(\+?(\d{1,2}\s)?\(?\d{3}\)?[\s.-]\d{3}[\s.-]\d{4})|(\+?(\d{1})?\d{10})/g,matchRgb:/(\d{1,}),\s?(\d{1,}),\s?(\d{1,})/,matchSanitizeBlacklist:/^(error|warning|success|message)/},encodeForHtml:$.proxy(_.escape,_),decodeForHtml:$.proxy(_.unescape,_),encodeForHtmlAttribute:$.proxy(_.escape,_),decodeForHtmlAttribute:$.proxy(_.unescape,_),sanitizeFromURL:function(e){return S.getString(e).replace(/((?:https?:\/\/)?(?:www\d{0,3}\.)?\w*(\.\w{1,3}|:\d+)).*?(\s|$)/gim,"")},getValue:function(e,t){return this.isNull(e)?t:e},getStateValue:function(e,t,n){return this.getBoolean(e)?t:n},getBoolean:function(e,t){return t=null!=t&&!0===t,_.isFunction(e)&&(e=e()),this.isNull(e)?t:!0===e||!1===e?e:"false"!==(e=S(e).trim().toLowerCase().s)&&"0"!==e&&"no"!==e&&(!!e||t)},getId:function(e){return"0"!=(e=S(e).trim().getString("0").s)?e:void 0},getChanged:function(e,t){var n=$.extend(!0,{},e);if(_.isArray(n)&&_.isEqual(n,t))return n;if(_.isObject(n))for(var i in n){("date"==i||S(i).endsWith("_date"))&&_.has(t,i)&&_.has(n,i)&&_.isEqual(S(n[i]).trimRight(" UTC",!0),S(t[i]).trimRight(" UTC",!0))&&delete n[i],"_"!==i.charAt(0)&&_.isEqual(n[i],t[i])&&delete n[i]}return n},getUnique:function(e,t,n){if(n=_.getObject(n),_.isObject(e)&&_.isObject(t)){var i={};for(var r in e)_.isEqual(e[r],t[r])||(n[r]=e[r]),i[r]=1;for(var r in t)i[r]||_.isEqual(t[r],e[r])||(n[r]=t[r])}return n},urlParams:function(e){var t;_.isString(e)&&(t=e,e=null),e=$.extend({includeSearch:!0,includeRouteSearch:!0},e),t=S.getString(t||e.url,window.location.href);var n={},i=t.split(fp.routeDelimiter);if(e.includeSearch){var r,a,o,s=i[0].split("?"),l=S(s[1]).trim(),c=this.regExp.matchSanitizeBlacklist;2<l.length&&_.each(l.split("&"),function(e){if(2==(r=e.split("=")).length){o=S(r[1]).trim().replace(/\+/g," ").s;try{o=decodeURIComponent(o)}catch(e){}(a=S(r[0]).trim().s)&&a.match(c)&&(o=fpUtil.sanitizeFromURL(o)),n[a]=o}})}return e.includeRouteSearch&&i[1]&&((l=S(i[1]).trim()).contains("?")||(l=l.prepend("?")),3<l.length&&(n=$.extend(n,this.urlParams({url:l.s,includeRouteSearch:!1})))),n},urlSearch:function(e,t){var n="";if(_.isObject(e)){var i;for(var r in e)i=e[r]||"",n+=(n?"&":"")+r+"="+encodeURIComponent(i);n=(n&&this.getBoolean(t,!0)?"?":"")+n}return n},routeUrlParams:function(e,t,n,i){if(!_.isObject(e)){i=i||window.location.href;var r=S.getString(i.split(fp.routeDelimiter)[1]).split("?");return r="?"+S(r[1]).trim().s,a=this.urlParams(r)}var a=e;for(var o in t||(a=this.routeUrlParams(null,null,null,i)),e)null!=e[o]?a[o]=e[o]:delete a[o];var s=$.param(a);if(s=s?"?"+s:"",n)return n.indexOf(fp.routeDelimiter)<0&&(n=S(n).trailingSlashIt().s+fp.routeDelimiter+"/"),void fp.ui.router.stateManager.go(n+s,null,{absolute:!0});var l=this.getRouterRoute(i).join("/");this.routeParams(l+s,!0,null,i)},routeParams:function(e,t,n,i){var r;if(n=n||"",r=t?this.getRouterRoute(i):(i=i?fp.routeDelimiter+i.split(fp.routeDelimiter)[1]:window.location.hash,S(i).trimLeft(fp.routeDelimiter).trimLeft("/").split("/").s),n&&r[0]==n&&r.shift(),null==e&&!t){var a={};n&&n==r[0]&&r.shift();for(c=0;c<r.length;c++)(o=r[c].split("?"))[0]?r[c]=o[0]:o[1]&&r.splice(c,1);for(c=0;c<r.length;c+=2)r[c]&&(a[r[c]]=r[c+1]);return a}if(_.isObject(e)){var o,s=[],l="";if(!t)for(var c=0;c<r.length;c++)(o=r[c].split("?"))[0]&&s.push(o[0]),o[1]&&(l="?"+o[1]);var u=[];for(key in e){var d=$.inArray(key,s);0<=d?s[d+1]=e[key]:u.push(key,e[key])}s=(s=s.concat(u)).join("/"),n&&(s="/"+n+"/"+s),S(s).endsWith("/")||(s+="/"),s+=l}else s=e;this.setRoute(s)},getRoute:function(e,t,n){if(e=S(e),t=S(t).trimRight("/"),this.isNull(n)){var i=fpUi.router.stateManager.states.shop,r=i&&i.self?S(i.self.url).trimRight(fp.routeDelimiter+"/").s:fpConfig.urls.shopping;(e.startsWith(r,!0)||e.startsWith(fpConfig.urls.circular,!0))&&(n=!0)}-1==e.indexOf("#")?e=e.concat(fp.routeDelimiter):-1==e.indexOf(fp.routeDelimiter)&&(e=e.replace("#",fp.routeDelimiter)),!e.endsWith(fp.routeDelimiter)&&t.endsWith("?")||(e=e.concat("/"));var a=e.s+t.s;if(n){var o,s=this.routeUrlParams(),l="";for(var c in fp.defaultStoreRequiredApiParams)(o=s[c])&&(l&&(l+="&"),l+=c+"="+encodeURIComponent(o));l&&(S(a).contains("?")?l="&"+l:(l="?"+l,S(a).endsWith("/")||(a+="/")),a+=l)}return a},getRouterRoute:function(e){return S(S(S(e||window.location.hash).split(fp.routeDelimiter)[1]).split("?")[0]).trimLeft("/").split("/")},setRoute:function(e,t,n){e=S(e).ensureLeft("/").s;var i=window.location;if(t)return n=n||i.href.split("#")[0],void i.replace(n+fp.routeDelimiter+e);i.hash=fp.routeDelimiter+e},attrParams:function(e,t){var n,i,r={};if(!(e=S(e).trim().s))return r;t=t||",",e=e.split(t);for(var a=0;a<e.length;a++){if(2==(n=e[a].split("=")).length){i=S(n[1]).trim().replace(/\+/g," ").s;try{i=decodeURIComponent(i)}catch(e){}i=S(i).trim('"').trim("'").s}else i="";r[S(n[0]).trim().s]=i}return r},getAttrs:function(e,n){if(!_.isObject(e))return e+"";n=n||" ";var i="";return _.each(e,function(e,t){i&&(i+=n),t&&(i+=t+"="),i+='"'+(e||"")+'"'}),i},isNull:function(e){return!(null!=e)},isDefined:function(e){return void 0!==e},isNullOrEmpty:function(e){return!S.getString(e).length},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isInteger:function(e){return!!this.isNumeric(e)&&(e===+e&&e===(0|e))},isFloat:function(e){return!!this.isNumeric(e)&&(e===+e&&e!==(0|e))},isDateString:function(e){if(e=S(e).trim().s)return!!e.match(this.regExp.matchServerDate)||null!=e.match(this.regExp.matchServerDateTime)},isPromise:function(e){return _.isObject(e)&&_.isFunction(e.promise)},getResolvedPromise:function(){return $.when()},getInteger:function(e,t){return this.isInteger(e)||(e=parseInt(e,10),this.isInteger(e)||(e=this.getInteger(t,0))),e},getFloat:function(e,t){if(this.isFloat(e))return e;var n=e;if(n&&_.isString(n)){var i=this.regExp.matchFloat;i.lastIndex=0;var r=n.match(i);r?(n=parseFloat(r.join("")),!isNaN(n)&&S(e).endsWith("%")&&(n/=100)):n=0}else n=parseFloat(n);return isNaN(n)&&(n=this.getFloat(t,0)),n},getOrdinal:function(e,t){if(t=this.getBoolean(t,!0),!e||!this.isInteger(e))return"";var n=fpConstants.ordinal,i=e%100;return(t?e:"")+(n[(i-20)%10]||n[i]||n[0])},getMin:function(e){var t=[];return _.each(arguments,function(e){null!=e&&S(e).trim().s&&t.push(e)}),Math.min.apply(Math,t)},formatString:function(e){if(!e)return"";var n=_.toArray(arguments).slice(1);return e.replace(/{(\d+)}/g,function(e,t){return S.getString(n[t])})},formatDate:function(e,t,n,i){return i=S.getString(i,e),e?(_.isString(e)&&(n=S.getString(n,fp.serverDateTimeFormat),e=fp.moment?fp.moment(e,n).toDate():dateFns.parse(e,n)),t=S.getString(t,fpConfig.dateTimeFormat),dateFns.isValid(e)?value=dateFns.format2(e,t):value=i,value):i},getDateFormat:function(e){if(_.isString(e)){if(S(e).contains("/"))return e.length>fpConfig.dateFormat.length?fpConfig.dateTimeFormat:fpConfig.dateFormat;if(e.length>fp.serverDateFormat.length)return fp.serverDateTimeFormat}return fp.serverDateFormat},getNullIfEmpty:function(e,t){return e=S(e).trim().s,_.size(e)||(e=S(t).trim().s),_.size(e)||(e=null),e},getUndefinedIfEmpty:function(e,t){return e=S(e).trim().s,_.size(e)||(e=S(t).trim().s),_.size(e)||(e=void 0),e},coreNutrition:["total_fat","sat_fat","trans_fat","cholesterol","sodium","carbo","fiber","sugar","protein"],optionalNutrition:["vitamin_a","vitamin_c","calcium","iron","potassium","vitamin_d","vitamin_e","vitamin_k","thiamin","riboflavin","niacin","vitamin_b6","folate","vitamin_b12","biotin","pantothenic_acid","phosphorus","iodine","magnesium","zinc","selenium","copper","manganese","chromium","molybdenum","cloride"],states:[{value:"AL",name:"Alabama"},{value:"AK",name:"Alaska"},{value:"AZ",name:"Arizona"},{value:"AR",name:"Arkansas"},{value:"CA",name:"California"},{value:"CO",name:"Colorado"},{value:"CT",name:"Connecticut"},{value:"DE",name:"Delaware"},{value:"DC",name:"District Of Columbia"},{value:"FL",name:"Florida"},{value:"GA",name:"Georgia"},{value:"HI",name:"Hawaii"},{value:"ID",name:"Idaho"},{value:"IL",name:"Illinois"},{value:"IN",name:"Indiana"},{value:"IA",name:"Iowa"},{value:"KS",name:"Kansas"},{value:"KY",name:"Kentucky"},{value:"LA",name:"Louisiana"},{value:"ME",name:"Maine"},{value:"MD",name:"Maryland"},{value:"MA",name:"Massachusetts"},{value:"MI",name:"Michigan"},{value:"MN",name:"Minnesota"},{value:"MS",name:"Mississippi"},{value:"MO",name:"Missouri"},{value:"MT",name:"Montana"},{value:"NE",name:"Nebraska"},{value:"NV",name:"Nevada"},{value:"NH",name:"New Hampshire"},{value:"NJ",name:"New Jersey"},{value:"NM",name:"New Mexico"},{value:"NY",name:"New York"},{value:"NC",name:"North Carolina"},{value:"ND",name:"North Dakota"},{value:"OH",name:"Ohio"},{value:"OK",name:"Oklahoma"},{value:"OR",name:"Oregon"},{value:"PA",name:"Pennsylvania"},{value:"RI",name:"Rhode Island"},{value:"SC",name:"South Carolina"},{value:"SD",name:"South Dakota"},{value:"TN",name:"Tennessee"},{value:"TX",name:"Texas"},{value:"UT",name:"Utah"},{value:"VT",name:"Vermont"},{value:"VA",name:"Virginia"},{value:"WA",name:"Washington"},{value:"WV",name:"West Virginia"},{value:"WI",name:"Wisconsin"},{value:"WY",name:"Wyoming"},{value:"AB",name:"Alberta"},{value:"BC",name:"British Columbia"},{value:"MB",name:"Manitoba"},{value:"NB",name:"New Brunswick"},{value:"NL",name:"Newfoundland and Labrador"},{value:"NS",name:"Nova Scotia"},{value:"ON",name:"Ontario"},{value:"PE",name:"Prince Edward Island"},{value:"QC",name:"Quebec"},{value:"SK",name:"Saskatchewan"}],sort:function(e,n,i){if(!(_.isArray(e)&&1<e.length))return e;n=n&&_.isObject(e[0])?n:null;var r=this;return e.sort(function(e,t){return r.sortHelper(e,t,n,i)}),e},sortHelper:function(e,t,n,i){return n&&(e=e[n],t=t[n]),e=e||0,t=t||0,_.isString(e)&&(e=this.isDateString(e)?dateFns.parse(e):this.isNumeric(e)?parseFloat(e):e.toLowerCase()),_.isString(t)&&(t=this.isDateString(t)?dateFns.parse(t):this.isNumeric(t)?parseFloat(t):t.toLowerCase()),_.isDate(e)&&_.isDate(t)?i?t-e:e-t:i?e==t?0:e<t?1:-1:e==t?0:t<e?1:-1}
/***
         Copyright 2013 Teun Duynstee
         https://github.com/Teun/thenBy.js/tree/master
         */,sortFirstBy:function e(t,n){var i="function"==typeof this&&this,r=function(n,e){if(e="number"==typeof e?{direction:e}:e||{},"function"!=typeof n){var t=n;n=function(e){return e[t]?e[t]:""}}if(1===n.length){var i=n,r=e.ignoreCase?mIb:lIb;n=function(e,t){return r(i(e))<r(i(t))?-1:r(i(e))>r(i(t))?1:0}}return-1===e.direction?function(e,t){return-n(e,t)}:n}(t,n),a=i?function(e,t){return i(e,t)||r(e,t)}:r;return a.thenBy=e,a},prepareJsonData:function(e,t){if(!t)return e;if(_.isArray(e)){_.has(_.firstObject(e),t.name)&&this.sort(e,t.name,"desc"==t.value);for(var n=0;n<e.length;n++)e[n]=this.prepareJsonData(e[n],t)}else if(_.isObject(e)&&!_.isFunction(e)){var i;for(var r in e)i=e[r],_.isObject(i)&&!_.isFunction(i)?e[r]=this.prepareJsonData(i,t):"id"!=r&&!S(r).endsWith("_id")||(e[r]=S.getString(i))}return e},ensureSort:function(n){if(_.isObject(n)){var i;if(n.sort)_.each(S.getString(n.sort).split(","),function(e,t){(i=S(e).trimRight("!")).length&&(n[i.s+"_sort"]=fpUtil.getStateValue(S(e).endsWith("!"),"desc","asc"))});else{var r="";_.each(n,function(e,t){(t=S(t)).endsWith("_sort")&&(i=t.trimRight("_sort")).length&&(r&&(r+=","),r+=i.s+fpUtil.getStateValue("desc"==e,"!",""))}),r?n.sort=r:delete n.sort}if(n.sort){var e=S(n.fields).trim();e.length&&(e=e.split(","),_.contains(e,"sequence")||(e.push("sequence"),n.fields=e.join()))}}},isSequenceArray:function(e){return _.isArray(e)&&this.isSequenceObject(e[0])},getSequenceArray:function(e){if(!_.isArray(e))return e;if(this.isSequenceArray(e)||!e.length)return e;for(var t,n=_.isObject(e[0])?e:[],i=0;i<e.length;i++)t=e[i],_.isObject(t)||(t={}),t.sequence=i,n!=e&&n.push(t);return n},resequenceArray:function(e){return _.isObject(_.first(e))&&_.each(e,function(e,t){e.sequence=t}),e},isJQuery:function(e){return e instanceof $},isEvent:function(e){return _.isObject(e)&&_.isFunction(e.preventDefault)},isSequenceObject:function(e){return _.isObject(e)&&_.has(e,"sequence")},isProduct:function(e){return _.isObject(e)&&!this.isProductWrapper(e)&&_.has(e,"name")},isRecipe:function(e){return _.isObject(e)&&_.has(e,"name")&&_.hasAny(e,["attribution","difficulty_level_id","serves"])},isGeneric:function(e){return _.isObject(e)&&!_.has(e,"product_id")},isListItem:function(e){return _.isObject(e)&&_.hasAny(e,["product_id","shopping_list_id"])},isOrderItem:function(e){return this.isProductWrapper(e)&&_.has(e,"order_id")},isProductWrapper:function(e){return _.isObject(e)&&_.hasAny(e,["product_id","product"])},isRecipeWrapper:function(e){return _.isObject(e)&&_.hasAny(e,["recipe_id","recipe"])},getDropshipfulfillmentType:function(e,t){if(e&&e.fulfillment_type_ids){var n=(t=t||this.map.get("fulfillmentType")).get("drop_ship");if(n.id&&_.contains(e.fulfillment_type_ids,n.id))return n}},getProductFulfillmentType:function(e){var t=this.map.get("storeFulfillmentType");if(1==_.size(e.fulfillment_type_ids)&&1<t.items().length)return t.get(e.fulfillment_type_ids[0])},isProductAd:function(e){return _.isObject(e)&&_.has(e,["product_id","interaction_track_url"])},isBannerAd:function(e){return _.isObject(e)&&_.has(e,["image_url","interaction_track_url"])},getProduct:function(e,t){var n;return this.isProductWrapper(e)?n=e.product:this.isProduct(e)&&(n=e),_.getObject(n,t)},getRecipe:function(e,t){var n;return n=this.isRecipeWrapper(e)?e.recipe:e,_.getObject(n,t)},isUploadImage:function(e){return!!_.isObject(e)&&((!_.has(e,"identifier")||S(e.identifier).startsWith(fpConstants.NEW_ITEM_PREFIX,!0))&&_.has(e,"source_url"))},getItemId:function(e){return"null"!==(e=_.first(S.getString(e).match(this.regExp.matchItemId)))&&"undefined"!==e||(e=null),e},getEventNs:function(e){return _.isObject(e)?e.type+(e.namespace?"."+e.namespace:""):""},getSequenceValue:function(e,t){t=t||"";var n="";if(_.isArray(e)){for(var i=[],r=0;r<e.length;r++)if(e[r]){var a=$.trim(this.getSequenceValue(e[r]));a&&i.push(a)}n=i.join(t)}else if(_.isObject(e)){if(!this.isSequenceObject(e))return n;if(_.has(e,"identifier"))n=S.getString(e.identifier);else for(var o in e)if("sequence"!=o&&"id"!=o){n=S.getString(e[o]);break}}else n=S.getString(e);return n},getUom:function(e,t,n){n=n||"";var i="",r=e[t+"_per_serving"];if(r){var a=e[t+"_uom"];this.isNumeric(r)&&(r=parseFloat(r.toString())),i+=r,a&&(i+=n+a)}return i},getPriceSizeComboHtml:function(e,t){if(fp.isBot)return"";if(fp.productConfigurationConfig&&fp.productConfigurationConfig.show_pricing_only_if_user_logged_in&&!fpUtil.isAuthenticated())return"";t=t||fpConfig.intent;var n,i,r,a,o="";if(n=e.order_id||_.contains(["admin","order"],t)?e:this.getProduct(e),"admin"!=t){var s=this.map.get("storePriceMode");if(!s.get("select_price_required_store").id)return o;var l=S(s.get(fp.store.price_mode_id).identifier);if(l.eq("dont_show_price"))return o;if(l.eq("select_price_required_store"))return nextUrl=fp.ui.router.stateManager.href(fpConfig.routeStates.productDetail,{id:n.id},{canonical_url:n.canonical_url}),o=fp.config.enableSeePriceModal?this.formatString('<a href="{0}" class="fp-price-link fp-btn-link" data-action="see-price-modal">{1}</a>',nextUrl,S.getString(fpConfig.seePriceLabel,fp.ui.locale("shared-see-price","See Price"))):this.formatString('<a href="{0}" class="fp-price-link fp-btn-link">{1}</a>',fp.ui.router.stateManager.href(fpConfig.routeStates.storeLocator,{next:nextUrl,intent:"price"}),S.getString(fpConfig.seePriceLabel,fp.ui.locale("shared-see-price","See Price")))}return i=e.price||n.price,r=e.sale_price||n.sale_price,a=e.size||n.size,i&&i!=r&&(o+='<span class="fp-item-base-price">'+this.encodeForHtml(i)+"</span>"),a&&(o&&(o+='<span class="fp-divider">'+fpConfig.weightDivider+"</span>"),o+='<span class="fp-item-size">'+this.encodeForHtml(a)+"</span>"),o},getSalePriceSizeComboHtml:function(e,t){if(fp.isBot)return"";if(fp.productConfigurationConfig&&fp.productConfigurationConfig.show_pricing_only_if_user_logged_in&&!fpUtil.isAuthenticated())return"";var n,i;t=t||fpConfig.intent,n=e.order_id?e:this.getProduct(e);var r=fpConfig.enableSaleDateMd&&n.sale_price_md;if(!(i=r?fp.markdownConverter.makeHtml(n.sale_price_md).replace(/<\/?p>/gim,""):this.encodeForHtml(e.sale_price||n.sale_price)))return"";if("admin"!=t){var a=this.map.get("storePriceMode");if(!a.get("select_price_required_store").id||fp.store.price_mode_id==a.get("dont_show_price").id||fp.store.price_mode_id==a.get("select_price_required_store").id)return value}var o='<span class="fp-item-sale-price">'+i+S.getString(fpConfig.storeCard.productSaleLabelHtml)+"</span>",s=e.sale_start_date||e.start_date,l=e.sale_finish_date||e.finish_date;return s&&l&&(s=this.formatDate(s,fpConfig.saleDateFormat),l=this.formatDate(l,fpConfig.saleDateFormat),r?o='<span class="fp-item-sale-date">'+i+"</span>":fpConfig.saleDateThroughLabel?o+=' <span class="fp-item-sale fp-item-sale-date">('+fpConfig.saleDateThroughLabel+" "+this.encodeForHtml(l)+")</span>":o+=' <span class="fp-item-sale-date">('+this.encodeForHtml(s)+"&ndash;"+this.encodeForHtml(l)+")</span>"),o},getSalePriceSizeCombo:function(e,t,n,i){t=t||fpConfig.intent;var r,a,o={price:"",date:""};if(fp.isBot)return o;r=e.order_id||"admin"==t?e:this.getProduct(e);var s=fpConfig.enableSaleDateMd&&r.sale_price_md;if(!(a=s?fp.markdownConverter.makeHtml(r.sale_price_md).replace(/<\/?p>/gim,""):this.encodeForHtml(e.sale_price||r.sale_price)))return o;if("admin"!=t){var l=this.map.get("storePriceMode");if(!l.get("select_price_required_store").id||fp.store.price_mode_id==l.get("dont_show_price").id||fp.store.price_mode_id==l.get("select_price_required_store").id)return o}o.price=a+S.getString(fpConfig.storeCard.productSaleLabelHtml),i||(o.price='<span class="fp-item-sale-price">'+o.price+"</span>");var c=e.sale_start_date||e.start_date,u=e.sale_finish_date||e.finish_date;if(c&&u)if(c=this.formatDate(c,fpConfig.saleDateFormat),u=this.formatDate(u,fpConfig.saleDateFormat),o.date=S.getString(n),s)o.price=a,i||(o.price='<span class="fp-item-sale-date">'+html+"</span>");else{var d="";d=fpConfig.saleDateThroughLabel?fpConfig.saleDateThroughLabel+" "+this.encodeForHtml(u):this.encodeForHtml(c)+"&ndash;"+this.encodeForHtml(u),i||(d='<span class="fp-item-sale-date">('+d+")</span>"),o.date+=d}return o},getClippableOfferSalePriceComboHtml:function(e){if(fp.isBot)return"";var t=e.sale_price;if(!t)return"";var n='<span class="fp-item-sale fp-item-sale-price">'+this.encodeForHtml(t)+"</span>",i=e.start_date,r=e.finish_date;return i&&r&&(i=this.formatDate(i,fpConfig.saleDateFormat),r=this.formatDate(r,fpConfig.saleDateFormat),fpConfig.enableSaleDateMd&&e.sale_price_md?n='<span class="fp-item-sale-date">'+fp.markdownConverter.makeHtml(e.sale_price_md).replace(/<\/?p>/gim,"")+"</span>":fpConfig.saleDateThroughLabel?n+=' <span class="fp-item-sale fp-item-sale-date">('+fpConfig.saleDateThroughLabel+" "+this.encodeForHtml(r)+")</span>":n+=' <span class="fp-item-sale-date">('+this.encodeForHtml(i)+"&ndash;"+this.encodeForHtml(r)+")</span>"),n},getImageSrc:function(e,t,n,i,r){var a,o="product"==i,s="recipe"==i;return _.isObject(e)?(s||(e=this.getProduct(e,e),o=this.isProduct(e)),!s&&o||(e=this.getRecipe(e,e),s=s||this.isRecipe(e)),_.isObject(e.cover_image)&&(e=e.cover_image),a=e.cover_image||e.identifier||e.source_url,S(a).startsWith(fpConstants.NEW_ITEM_PREFIX,!0)&&(a=e.source_url)):a=e,a||!o&&!s||(i=s?(a=fpConfig.genericRecipeImageUrl,"recipe"):(a=fpConfig.genericProductImageUrl,"product")),a=a&&!this.isUploadImage(e)?fpUi.getAssetCdnUrl(a,_.defaults(r,{size:t,imageConfig:n,type:i})):a||fp.blankImageUrl},getImageIconSrc:function(e){return this.formatString("{0}img/icon/{1}.svg",fp.assetCdnUrl,S(e).trimRight(".svg").s)},getItemButtonHtml:function(e,t,n,i){if(!_.isObject(e))return"";if(n=fpConfig.addToListLabel||"",i=fpConfig.inListLabel?fpConfig.inListLabel:"",!(t=null!=t?t:fp.ui.ListManager.getItemQuantity(e)))return n;var r="quantity_label";1==t&&(r+="_singular");var a=S.getString(this.getProduct(e)[r]);return a?this.formatString('{0} <span class="fp-item-quantity-label">{1}</span>',t,this.encodeForHtml(a)):t+i},getItemQuantityLabel:function(e,t,n){if(!_.isObject(e))return"";this.isNull(t)&&this.isOrderItem(e)&&"added_by_store"==this.map.get("orderItemStatus",null,!0).get(e.status_id).identifier&&(t=e.fulfilled_quantity);var i="quantity_label";1==(t=null!=t?t:fp.ui.ListManager.getItemQuantity(e))&&(i+="_singular");var r=S.getString(this.getProduct(e)[i]);return t?(r=r&&" "+r,n?r.trim():t+r):""},getItemHasSaleModifier:function(e){var t,n=this.getProduct(e);if(n.sale_configuration_type_id){var i=this.map.get("saleConfigurationType").get(n.sale_configuration_type_id);t=i.id&&_.contains(["buy_x_get_x_free","buy_x_get_x_fixed_price","price_off","price_off_total","percentage_off"],i.identifier)}return this.getBoolean(t)},getItemHasOfferTag:function(e){return null!=_.find(this.getProduct(e).offers,function(e){return 0<_.size(e.tags)})},getPriceDisclaimer:function(e){var t=this.getProduct(e),n=t.sale_price_disclaimer;return t.price_disclaimer&&(n=n?S(n).ensureRight(". ").concat(t.price_disclaimer).s:t.price_disclaimer),S.getString(n)},getPromoText:function(e){var t,n;if(e)return e.promotion_text?n=e.promotion_text:(t=this.getValueFromNamespace("config",e))&&(n=t.promotion_text),S.getString(n)},setActiveDepartments:function(e,t){var n=fp.department.id||fpUi.router.routeManager.urlParams.department_id;if(e=_.getObject(e,fp.departmentHash),t)for(var i in e)delete e[i].active;var r=_.getObject(e[n],fp.department);if(_.size(r))for(;r;)r.active=!0,r=e[r.parent_id]},pointsToRect:function(e,t){t=t||1;var n,i,r,a,o,s={x:null,y:null,width:null,height:null};return 4==(e=fp.S.getString(e).split(" ").slice(0,4)).length&&(n=e[0].split(","),i=parseFloat(n[0]),a=parseFloat(n[1]),n=e[2].split(","),r=parseFloat(n[0]),o=parseFloat(n[1]),s.x=i*t,s.y=a*t,s.width=Math.abs(r-i)*t,s.height=Math.abs(o-a)*t),s},showProgress:function(){var e,t=_.toArray(arguments);if(this.isPromise(t[0])||(e=t.shift()),!OFb){function n(){fp.documentReady&&(_.isUndefined(OFb)&&NProgress.configure({showSpinner:!1,parent:"body > .fp-freshop"}),OFb=0,e=NProgress.status?fpUtil.getFloat(e,.05):0,NProgress.inc(e))}var i=fp.loaded?fpConstants.progress.DELAY:0;i?OFb=setTimeout(n,i):n()}this.isPromise(t[0])&&this.hideProgress.apply(this,t)},hideProgress:function(){if(fp.isUnloading)return $.when();var e,t=!1;if(this.isPromise(arguments[0])||(t=arguments[0]),t)NFb=!0,clearTimeout(OFb),OFb=0,MFb.length=0;else{var n=_.toArray(arguments);this.isPromise(n[0])||n.shift(),n.length&&(e=$.when.apply($,n).promise(),MFb.push(e))}return $.when.apply($,MFb).always(function(){e&&_.remove(MFb,e),(t||NFb||!MFb.length&&fp.loaded)&&(clearTimeout(OFb),OFb=0,(t||fp.documentReady)&&NProgress.done())})},initCustomLoader:function(){if(!fp.customLoader&&(fp.customLoader=new fp.ui.Loading({enableEvents:!0}),fp.loader&&fp.loader.isShown())){if(!$('[data-role="loading-indicator"]').length)return;fp.customLoader.__showCount=fp.loader.__showCount-1,fp.loader.hide(!0),this.showLoading()}},showLoading:function(e){if(fp.documentReady){var t=fp.customLoader||fp.loader;if(t){this.isNull(e)&&(e=fp.loaded?fpConstants.progress.DELAY:0);var n={startDelay:e};t==fp.customLoader&&(n.appendTo=$('[data-role="loading-indicator"]'),n.appendTo.length||(t=fp.loader)),t&&t.show(n)}}},hideLoading:function(e){if(fp.documentReady&&!fp.isUnloading){var t=fp.customLoader||fp.loader;t&&t.hide(e)}},delayPromise:function(e,n){return this.isPromise(e)||(e=$.when()),fp.isProd()?e:(n=this.getInteger(n,2e3),e.then(function(){var e=arguments,t=$.Deferred();return _.delay(function(){t.resolve.apply(t,e)},n),t.promise()}))},getRejectedPromise:function(e){var t=$.Deferred();return t.reject.apply(t,_.toArray(e)).promise()},getPromiseFromEvent:function(e){var t=$.Deferred();return fp.one(e,t.resolve),t.promise()},setFocus:function(e,t){if(!fpConfig.disableSmartScrollResults||fp.device.xs){e=$(e);var n,i,r,a,o=this.getNamespace("focus",fp.cache);if(e.hasClass("fp-module"))e.find("input[fp-autofocus]:visible").each(function(){if("false"==(n=$(this)).closest(".fp-module").attr("fp-autofocus"))return!1;r=fpUtil.getInteger(n.attr("fp-autofocus"),fpConstants.priority.MINOR),(fpUtil.isNull(a)||r<a)&&(i=n,t=r),a=r}),i||e.find('input[type="text"]:visible, input[type="search"]:visible').each(function(){return"false"!=(n=$(this)).closest(".fp-module").attr("fp-autofocus")&&((n=n.parent()).hasClass("input-group date")||n.hasClass("select2-search")?void 0:(i=this,!1))}),e=$(i);else e=e.filter("input[fp-autofocus]:visible");e.length&&(!((t=this.getInteger(t,fpConstants.priority.MINOR))<o.priority)&&o.$element&&o.$element&&o.$element.filter(":visible").length||(o.priority=t,o.$element=e)),fp.loaded&&(o.$element&&(fpUtil.isNull(t)||o.priority<t)&&(e=o.$element),_.empty(o),e.length&&e.trigger("focus"))}},validateForm:function(e,t,n,i){i=_.getObject(i);var r,a,o,s,l,c,u=this,d=$(e),f=(n=S.getString(n||d.attr("data-alt-name")),S.getString(i.formGroup||d.attr("data-form-group"))),p="",h={},m=[];return t&&t.length||!_.has(i,"errorSelector")||(t=$(i.errorSelector)),t&&t.length||(t=fp.ui.getFormError(d,i.formGroup)),t=t.hide().first(),c=n?this.formatString('input[data-form-name="{0}"],textarea[data-form-name="{0}"],select[data-form-name="{0}"]',n):"input,textarea,select",d.find(c).each(function(){if(!(s=$(this)).prop("disabled")){var e=S(s.prop("type"));e.eq("button",!0)||e.eq("submit",!0)||!i.disableInputFormGroup&&(p=S.getString(s.attr("data-form-group")))!=f&&"*"!=p||((r=s.attr("name"))&&(a=h[p]||(h[p]={})),r&&a[r]||(r&&(a[r]=!0),o=u.validateInput(s,i.validate),fpConfig.enableEnhancedValidation&&s.toggleClass("is-invalid",!!o),o&&m.push(o)))}}),l=0==m.length,_.isFunction(i.onValidate)&&(o=i.onValidate(l,d))&&m.push(o),(l=0==m.length)||i.disableShowError||(this.showError(m,t,{enableAlertModal:i.enableAlertModal}),_.isFunction(i.showError)&&i.showError(m,t)),i.errors=m,l},validateInput:function(e,t){var n,i,r,a,o,s,l,c=fp.ui.validation.rules,u=S.getString(e.attr("fp-validate")),d=this.attrParams(u),f=u.split(","),p=e.attr("fp-error-label")||e.attr("placeholder")||e.prev().text(),h=e.attr("name"),m=fp.ui.getInputValue(e),g=S(e.val()).trim();_.has(d,"xss")||S(h).contains("password",!0)||!S(e.prop("nodeName")).ne("textarea",!0)||(d.xss=!0);e:for(var v=0;v<f.length;v++){var y;if(r=d[s=f[v].split("=")[0]],o=!0,"custom"==s)if(r&&t&&(y=t[r]),_.isFunction(y)){if(l=y(m,e))break}else console.warn(this.formatString("Validation custom not found: {0}.",S.getString(r)));else if(n=c[s])if(i=(i=e.attr("fp-error-message"))||_.result(n,"message"),p=e.attr("fp-error-label")||e.attr("placeholder")||e.prev().text(),_.isRegExp(n.match)){if(m&&(a=n.match.test(m),this.getBoolean(n.negate,!1)&&(a=!a),!a)){l=this.formatString(i,p);break}}else switch(s){case"required":if(m)break;if(b=e.attr("fp-validate-linked-input"))if((w=$(e[0].form).find(b).first()).length){if(m=fp.ui.getInputValue(w))continue;p+=" or "+(w.attr("fp-error-label")||w.attr("placeholder")||w.prev().text())}l=this.formatString(i,p);break e;case"required-country-phone":if(m!=e.attr("data-temp-code")&&m)break;var b,w;if(b=e.attr("fp-validate-linked-input"))if((w=$(e[0].form).find(b).first()).length){if(m=fp.ui.getInputValue(w))continue;p+=" or "+(w.attr("fp-error-label")||w.attr("placeholder")||w.prev().text())}l=this.formatString(i,p);break e;case"min-length":if(_.isString(m)&&m.length){var C=this.getInteger(r);if(m.length<C){l=this.formatString(i,p,C);break e}}break;case"credit-card":if($.payment.validateCardNumber(e.val(),void 0).valid)break;l=this.formatString(i,p);break e;case"min-date":if(m){var x=r,E=S(r).toLowerCase();if(dateFns.startOfDay(dateFns.parse(m))<(x=E.startsWith("endof")?dateFns.endOfDay(dateFns.parse(E.trimLeft("endof").s)):E.startsWith("startof")?dateFns.startOfDay(dateFns.parse(E.trimLeft("startof").s)):_.contains(["now","current","today"],E.s)?dateFns.startOfDay(new Date):dateFns.startOfDay(dateFns.parse(x)))){l=this.formatString(i,p);break e}}break;case"compare":if(!g.length)break e;var T=e.attr("fp-validate-compare-operator"),I=e.attr("fp-validate-compare-target-name"),M=e.attr("fp-validate-compare-data-type");if(!T||!I)continue;var D=$(e[0].form).find('[name="'+I+'"]');if(!S(D.val()).trim().length)break e;var k=fp.ui.getInputValue(D),O=D.attr("fp-error-label")||D.attr("placeholder")||D.prev().text(),U=T.replace("-"," ");switch(M){case"datetime":var A=e.attr("data-display-format"),P=D.attr("data-display-format"),L=fp.moment(m,A),j=fp.moment(k,P);switch(T){case"less-than":o=L.isBefore(j);break;case"greater-than":o=L.isAfter(j);break;case"equal-to":o=L.isSame(j);break;case"greater-or-equal-to":o=L.isSame(j)||L.isAfter(j);break;default:console.warn("Validation compare operator not handled.")}if(o)break;l=this.formatString(i,p,U,O);break e;case"numeric":switch(m=this.getFloat(m),k=this.getFloat(k),T){case"less-than":o=m<k;break;case"greater-than":o=k<m;break;case"equal-to":o=m===k;break;case"greater-or-equal-to":o=k<=m;break;default:console.warn("Validation compare operator not handled.")}if(o)break;l=this.formatString(i,p,U,O);break e;default:switch(T){case"equal-to":o=S(m).eq(k);break;default:console.warn("Validation compare operator not handled.")}if(o)break;l=this.formatString(i,p,U,O);break e}}}return t&&t.enableEnhancedValidation&&e.toggleClass("is-invalid",!!l),l},isApiResponseSuccess:function(e){return(e=this.getFloat(e))>=fpConstants.httpStatus.OK&&e<fpConstants.httpStatus.BAD_REQUEST},getApiResponseStatus:function(e,t,n,i){n=_.getObject(n),_.isObject(e)||(e=util.getXhrErrorResponse(n)),i=_.getObject(i);var r=fpConstants.httpStatus,a=e.status_code||n.status||0;return!a&&("timeout"==t||"error"==t&&i.timeout&&n.durationMs>=i.timeout)&&(a=r.GATEWAY_TIMEOUT),a},handleApiError:function(e,t,n,i){if(!this.isUnloading&&_.isObject(e)&&_.isObject(n)){if(fp.documentReady){i=_.getObject(i);var r,a=this.getBoolean(i.handleErrors,!0),o=_.getArray(e.error_fields),s=fpConstants.httpStatus,l=this.getApiResponseStatus(e,t,n,i),c=!1,u=i.ignoreErrors,d=i.errorSelector,f=S();0==l&&!1===window.navigator.onLine?r=fpUi.locale("shared-poor-connectivity","Poor connectivity detected"):l==s.GATEWAY_TIMEOUT?r=fpUi.locale("shared-timeout-occurred","Timeout occurred"):l>=s.INTERNAL_SERVER_ERROR?r=fpUi.locale("shared-error-request","An error has occurred making your request"):r||o.length||(r=e.error_message||n.error||fpUi.locale("shared-error-occurred","An error has occurred")),r&&o.unshift({error_message:r}),a&&u&&e.error_code&&!(a=!1)!==u&&(_.isArray(u)||(u=[u]),a=!_.contains(u,e.error_code));var p,h,m,g=this.regExp.matchHtml;return function e(t,n){_.isObject(t)?_.each(t,e):(t=S(t).trim()).length&&(g.lastIndex=0,g.test(t.s)||(t=t.ensureEnd()),h=$('.fp-core [class^="fp-form"]').find(fpUtil.formatString('[name="fp-input-{0}"],[name="fp-variety-{0}"]',n)),(m=h.filter("[fp-error-label]").first().attr("fp-error-label"))||(h.length&&(m=h.closest("label").find("> .fp-label").text()),m||S(n).startsWith("error")||(m=S(n).humanize().titleCase().s)),m&&(t.startsWith("is ",!0)?t=t.prepend(m+": "):"email"==n&&t.contains("email address")||(t=t.replace(n,m))),p=i.markdownToHtml?t.s:fpUtil.formatString("<div>{0}</div>",fpUtil.encodeForHtml(t.s)),f.contains(p,!0)||(f=f.append(p)))}(o),l&&l<s.INTERNAL_SERVER_ERROR&&a&&(fpConfig.enableMobile&&!fp.loaded&&404==l||(c=0<this.showError(f.s,d,{fadeOutMs:i.errorFadeOutMs,encodeForHtml:i.encodeForHtml,markdownToHtml:i.markdownToHtml,status:l}).length)),a&&!c&&(d=d||'body > [data-role="freshop-container"] > .fp-request:not(.fp-loading)',0==l&&!1===window.navigator.onLine?this.showWarning({message:r,retryMessage:fp.ui.locale("shared-please-try-again","Please try again")},d):l==s.GATEWAY_TIMEOUT?this.showWarning({message:r,retryMessage:fp.ui.locale("shared-please-try-again","Please try again")},d):this.showError(r,d,{fadeOutMs:i.errorFadeOutMs,encodeForHtml:i.encodeForHtml,markdownToHtml:i.markdownToHtml,status:l})),{details:o,html:f.s}}fp.apiErrorQueue.push({resp:e,textStatus:t,jqXHR:n,options:i})}},getApiUrl:function(e,t,n,i,r){var a=e,o=t?$.param(t):"";return i&&S.getString(n,fpConstants.apiMethods.GET)!=fpConstants.apiMethods.GET&&!S(o).contains("_method=")&&(o=(o?o+"&":"")+"_method="+n),o&&(a+=(S(a).contains("?")?"&":"?")+o),r&&(a=fpUtil.formatString("{0}{1}/{2}",fp.apiBaseUrl,fp.apiVersion,a)),a},getMessage:function(e,t,n){t=this.getBoolean(t,!0),n=this.getBoolean(n,!1);var i="",r=this.regExp.matchHtml;function a(e){(e=S(e).trim()).length&&(t?e=e.encodeForHtml().ensureEnd():n&&(e=e.markdownToHtml()),r.lastIndex=0,r.test(e.s)?i+=e.s:i+="<p>"+e.ensureEnd().s+"</p>")}return _.isObject(e)?e instanceof Error?e=e.message:_.each(e,a):a(e),i},showAlert:function(e,t,n){if(e instanceof Error&&(e=e.message),n=_.getObject(n),_.defaults(n,{type:"warning",handleScroll:!0}),!fp.loaded&&!n.disableQueue)return fp.alertQueue.push({message:e,$alert:t,options:n}),$();switch(fp.loaded||(this.hideLoading(!0),this.hideProgress(!0)),n.type){case"success":e=e||fp.ui.locale("shared-success","Success"),_.has(n,"fadeOutMs")||(n.fadeOutMs=1e4);break;case"error":e=e||fp.ui.locale("shared-error-request","An error has occurred making your request");break;default:n.type="warning",e=e||fp.ui.locale("shared-warning","Warning")}if(!t||!t.length){var i,r;if(fp.loaded){var a,o=!0,s=fp.Module.getViewModule();(i=s&&s.$element.filter(":visible"))&&i.length||(o=!1,i=$(".fp-module")),i.each(function(){a=$(this),(o||"hidden"!=a.css("visibility")&&"0"!=a.css("opacity"))&&((r=a.find(fpUtil.formatString(".fp-notification.fp-{0}",n.type))).length&&o&&r.closest(".fp-module")[0]!=this&&(r=$()),r.length||_.size(t)||(t=a.find(".fp-notification")))})}else(i=$('.fp-module[data-role="handle-errors"]')).length&&((r=i.find(fpUtil.formatString(".fp-notification.fp-{0}",n.type))).length||_.size(t)||(r=i.find(".fp-notification")),r.length||(r=$('<div class="fp-notification"></div>').appendTo(i)));r&&r.length&&(t=r)}if(!(t=$(t).first()).length)return t;if(_.contains(["error","warning"],n.type)){if(t.hasClass("fp-request")){var l={retryMessage:fp.ui.locale("shared-click-here","Click here to try again")};return _.isArray(e)&&(e=_.first(e)),_.isObject(e)?$.extend(l,e):l.message=e,t.removeClass("fp-warning fp-error").addClass("fp-"+n.type).show().find(".fp-value").text(l.message).end().find("a").text(l.retryMessage),t.off().on("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),fpUtil.hideError(),window.location.reload(!0)}),setTimeout(function(){$(document.body).off("click.error.fp.events").on("click.error.fp.events",function(e){fpUtil.hideError()})},1),t}var c=fp.__$freshop.find("> .fp-request:not(.fp-loading):visible").length;if(c.length)return c}var u;if(fpConfig.enableAlertModal&&!1!==n.enableAlertModal&&"error"==n.type){var d=fpUi.getActiveModal();if(!d.length||"fp-modal-alert"==d.attr("data-role")){function f(){p.$alertModal.find('[data-role="alert"]').removeClass("fp-success fp-warning fp-error hidden").addClass(fpUtil.formatString("fp-{0}",n.type)).html(h).css("display","block")}var p=this,h=fpUtil.formatString('<div class="fp-icon-notification"></div><div class="fp-notification-message">{0}</div>',fpUtil.getMessage(e,fpUtil.getBoolean(n.encodeForHtml,!1),n.markdownToHtml));this.$alertModal||(this.$alertModal=fp.ui.showModal({name:"alert",size:"md",center:!0,title:fpUi.locale("shared-alert","Alert"),modal:{backdrop:"static",keyboard:!1,show:!1,persist:!0}})),_.defer(function(){_.getObject(p.$alertModal.data("bs.modal")).isShown?f():p.$alertModal.one("show.bs.modal.validateError",f).modal("show")}),u=!0}}return u||(this.$alert&&this.$alert[0]!=t[0]&&(this.$alert.hide(),this.$alert=t),t.removeClass("fp-success fp-warning fp-error hidden").addClass("fp-"+n.type).html(this.formatString('<div class="fp-icon-notification"></div><div class="fp-notification-message">{0}</div>',this.getMessage(e,this.getBoolean(n.encodeForHtml,!1),n.markdownToHtml))).show(),n.handleScroll&&this.scrollTo(t,{scrollSelector:n.scrollSelector,callback:n.scrollCallback}),clearTimeout(t.data("hideTimeout")),t.removeData("hideTimeout"),n.fadeOutMs&&(hideTimeout=setTimeout(function(){fpUtil.$alert=null,t.fadeOut("fast")},n.fadeOutMs),t.data("hideTimeout",hideTimeout))),t},hideNotification:function(){$(".fp-core .fp-notification").hide()},hideError:function(){$(document.body).off("click.error.fp.events"),fp.__$freshop.find("> .fp-request:not(.fp-loading)").hide()},showSuccess:function(e,t,n){return(n=_.getObject(n)).type="success",this.showAlert(e,t,n)},showWarning:function(e,t,n){return(n=_.getObject(n)).type="warning",this.showAlert(e,t,n)},showError:function(e,t,n){return(n=_.getObject(n)).type="error",this.showAlert(e,t,n)},hideSuccess:function(){var e=$(".fp-notification.fp-success");e.length&&e.hide()},scrollTo:function(e,t){t=_.isFunction(t)?{callback:t}:_.getObject(t);var n,i,r=0,a=0,o=$("html,body"),s=$("html").scrollTop()||$("body").scrollTop(),l=t.scrollSelector&&$(t.scrollSelector).first();if(e&&(_.isFunction(e)&&(e=e()),e))if(_.isObject(e)){var c=$(e);if(c&&c.length){r=c.offset().top,i=c.height(),n=this.getBoolean(t.enableLogicalScroll,!0),l||(l=c.closest(".modal").first()).length||(l=o);var u=l.hasClass("modal");a=l.is("body")?s:l.scrollTop(),u||l.each(function(){r-=parseInt($(this).css("marginTop"),10)})}}else this.isNumeric(e)&&(r=e);if(n){var d=$.viewport();if(r>=d.top&&r+.75*i<=d.bottom)return _.isFunction(t.callback)&&_.defer(t.callback),l}if(l||(l=o,a=s),n)if(u)r+=a-l.offset().top;else if(fpConfig.fixedHeader){var f=$(fpConfig.fixedHeader);"fixed"==f.css("position")&&(r-=f.outerHeight(!0))}return this.isInteger(t.duration)||(t.duration=this.getInteger((a||500)/8)),fp.one(fp.events.LOADED,function(){l.animate({scrollTop:r},{duration:t.duration,easing:"easeInOutExpo"}).promise().always(t.callback)}),l},getModifiedDate:function(e,t){return e?(t=t||fpConfig.shortDateFormat,_.isDate(e)?date=e:_.isObject(e)?date=e.updated_at||e.last_updated_at||e.created_at:date=e,this.formatDate(date,t)):""},initDepartment:function(e){if(!e){var t=fpUi.router.stateManager.stateParams;e=fpUtil.getItemId(S.getString(t.department_id,fp.moduleDepartmentId))}e=fpUtil.getItemId(e);var n,i=fp.department.id;e&&(n=fp.departmentHash[e]),fp.department=n||(e?{id:e}:fp.defaultDepartment),i!=fp.department.id&&(fp.log("Department: ",fp.department),fpUtil.setActiveDepartments())},getNamespace:function(e,t,n){if(_.isString(e)&&(e=e.split(".")),!_.isArray(e))return{};if(t=_.getObject(t),e.length){for(var i,r=t,a=0;a<e.length;a++){if(i=e[a],!_.has(r,i)){if(n){r={};break}r[i]={}}r=r[i]}r===t&&(r=null)}else r=t;return _.getObject(r)},getObjectFromNamespace:function(e,t,n){return _.getObject(this.getValueFromNamespace(e,t),n)},getValueFromNamespace:function(e,t,n){if(_.isString(e))e=e.split(".");else if(!_.isArray(e))return n;var i=e.pop();return this.getValue(this.getNamespace(e,t,!0)[i],n)},hasNamespace:function(e,t){if(!_.isObject(t))return!1;if(_.isString(e)&&(e=e.split(".")),_.isArray(e)){if(1==e.length)return _.has(t,e);for(var n,i=t,r=0;r<e.length;r++){if(n=e[r],!_.has(i,n))return!1;i=i[n]}return!0}return!1},hasRole:function(e,t,n){t=t||fp.user;var i,r,a,o=_.getArray(t.authorizations),s=fp.cache.authorization;return e=e||fp.adminRoles,a=_.isArray(e)?e:[e],null!=_.find(a,function(t){return _.isObject(t)&&(n=t.storeId,t=t.role),r=t+(n?"_"+n:""),_.has(s,r)?s[r]:null!=_.find(o,function(e){return i=e.role_identifier==t&&(!n||_.find(e.store_ids,function(e){return e==n||e==fpConfig.globalStoreId})),s[r]=i})})},isAuthenticated:function(){return fpUtil.getBoolean(fp.session.is_user_logged_in&&fp.user.id&&"registration_pending"!=fp.user.user_status_identifier)},isAuthorized:function(e){if((e=_.getObject(e)).authenticate&&!this.isAuthenticated())return!1;if(e.authorize){var t=_.result(e.authorize,null,e.authorize);return t&&!_.isArray(t)&&(t=[t]),null!=_.find(t,function(e){return fpUtil.hasRole(e)})}return!0},isSuperUser:function(){return fpUtil.hasRole(fpConstants.adminRole.ADMIN,null,fpConfig.globalStoreId)},getIntentRoleId:function(e,t){var n,i=e.data&&e.data.authorize,r=[];i&&((i=_.result(i,null,i))&&!_.isArray(i)&&(i=[i]),_.each(i,function(e){_.isObject(e)&&(e=e.role),(n=fpUtil.getIntentRoleIdByIdentifier(e,t))&&r.push(n)}));return r.join()},getIntentRoleIdByIdentifier:function(e,t){if(e){t=_.getObject(t,fp.user);var n=_.findWhere(t.authorizations,{role_identifier:e});if(n)return n.role_id}},sortItemsForGroup:function(e,n){if(e=_.getArray(e),!_.size(e))return e;n=_.getObject(n);var t,i={},r=_.isFunction(n.getDepartment)?n.getDepartment:$.proxy(this.getDepartment,this);if("department"==n.group)t=fpUtil.sortFirstBy(function(e,t){return fpUtil.sortHelper(_.getObject(r(e),i).sequence,_.getObject(r(t),i).sequence)});else{"order"!=n.intent&&(t=fpUtil.sortFirstBy(function(e,t){return fpUtil.sortHelper(fpUtil.getValueFromNamespace("product.shopper_walkpath.sequence",e),fpUtil.getValueFromNamespace("product.shopper_walkpath.sequence",t))}).thenBy(function(e,t){return fpUtil.sortHelper(fpUtil.getValueFromNamespace("product.shopper_walkpath.name",e),fpUtil.getValueFromNamespace("product.shopper_walkpath.name",t))}));function a(e,t){return fpUtil.sortHelper(fpUtil.getValueFromNamespace("product.fulfillment_walkpath.sequence",e),fpUtil.getValueFromNamespace("product.fulfillment_walkpath.sequence",t))}if(t=(t?t.thenBy(a):fpUtil.sortFirstBy(a)).thenBy(function(e,t){return fpUtil.sortHelper(fpUtil.getValueFromNamespace("product.fulfillment_walkpath.name",e),fpUtil.getValueFromNamespace("product.fulfillment_walkpath.name",t))}).thenBy(function(e,t){return fpUtil.sortHelper(fpUtil.getValueFromNamespace("product.fulfillment_walkpath_sequence_within",e),fpUtil.getValueFromNamespace("product.fulfillment_walkpath_sequence_within",t))}).thenBy(function(e,t){return fpUtil.sortHelper(fpUtil.getValueFromNamespace("product.location",e,"zzzzzz"),fpUtil.getValueFromNamespace("product.location",t,"zzzzzz"))}),"order"==n.intent){var o=n.getFulfillmentName;_.isFunction(o)&&(t=t.thenBy(function(e,t){return fpUtil.sortHelper(o(e),o(t))})),t=t.thenBy(function(e,t){return fpUtil.sortHelper(_.getObject(r(e),i).path,_.getObject(r(t),i).path)})}}return e.sort(t.thenBy(function(e,t){return fpUtil.sortHelper(fpUtil.getValueFromNamespace("product.name",e,n.disableNameFallback?void 0:e.name),fpUtil.getValueFromNamespace("product.name",t,n.disableNameFallback?void 0:t.name))}).thenBy(function(e,t){return fpUtil.sortHelper(fpUtil.getValueFromNamespace("product.id",e),fpUtil.getValueFromNamespace("product.id",t))}).thenBy(function(e,t){return fpUtil.sortHelper(e.order_id,t.order_id)}))},getDepartment:function(e){if(e){if(_.isString(e))return fp.departmentHash[e];var t=this.getProduct(e);if(t){var n=_.first(t.department_ids);return n&&fp.departmentHash[n]}}},getTopDepartment:function(e,t){if(e){for(var n,i=this.getDepartment(e),r=[],a={};i&&(r.unshift(i),i.parent_id)&&(n=fp.departmentHash[i.parent_id]);){if(a[(i=n).id]){fp.warn(this.formatString("Circular reference detected for department {0}.",i.id));break}a[i.id]=1}if(t&&r.length)i=r[(t<r.length?t:r.length)-1];return i}},getFormattedAddress:function(e,t,n,i,r){if(!_.isObject(e))return"";t=S.getString(t);var a,o="";r=$.proxy(_.getFunction(r,this.encodeForHtml),this);if(t||e.has_address||!e.address_0){n=S.getString(n," <br/>");for(var s=t+"address_",l=e[t+"city"],c=e[t+"state"],u=e[t+"postal_code"],d=e[t+"country"],f=0;f<=3;f++)(a=r(e[s+f]))&&(o&&(o+=n),o+=a);a="",l&&(a=r(l)),(c||u)&&(a&&(a+=", "),c&&(a+=r(c)),!e.disablePostal&&u&&(c&&(a+=" "),a+=r(u))),a&&(o&&(o+=n),o+=a),i&&d&&(o&&(o+=n),o+=r(d))}else o=r(e.address_0);return o},isNewItem:function(e){if(!e)return!0;var t=_.isObject(e)?e.id:e;return S(t).startsWith(fpConstants.NEW_ITEM_PREFIX,!0)},getNewItemId:function(){return _.uniqueId(fpConstants.NEW_ITEM_PREFIX)},isAngularState:function(e){return S(e||window.location.href).contains("/#/admin/")},indexByAndTreeify:function(e,t){e=_.getArray(e);var n,i,r,a=(t=_.defaults(t,{idField:"id",parentField:"parent_id",childrenField:"children"})).idField,o=t.parentField,s=t.childrenField,l=t.childrenSortBy,c=_.getObject(t.hash),u=_.groupBy(e,o);return _.each(e,function(e){(n=e[a])&&(c[n]=e,(i=u[n])&&(t.enableConcatChildren&&(r=_.indexBy(i,a),_.each(e[s],function(e){n=e[a],r[n]||(c[n]=r[n]=e,i.push(e))})),l&&fpUtil.sort(i,l),e[s]=i))}),c},getXhrErrorResponse:function(e,t,n){var i;return _.isString(e)&&(n=e),"error"==n&&(n=void 0),e=_.getObject(e),_.isObject(e.responseJSON)?i=e.responseJSON:_.isObject(e.response)&&(i=e.response),i=_.isObject(i)?i:{error_code:t||e.status,error_message:S.getString(i,n)}},applyCallback:function(e,t,n,i){return _.isObject(i)||(i=$.Deferred().promise()),i.done(e),_.isFunction(t)&&i.fail(function(e){t(fpUtil.getXhrErrorResponse(e))}),i.always(n),i},getClientLocation:function(e){var t=$.Deferred();if(!this.__deferredGoogleLoader){delete this.__clientLocationTimeout,fp.isBot?this.__clientLocationTimeout=0:fpUtil.isNull(e)?this.__clientLocationTimeout=5e3:e&&(this.__clientLocationTimeout=_.isBoolean(e)?5e3:e),this.__deferredGoogleLoader=$.Deferred();var n="fp-gcharts-loader";_.defer(function(){var e=$.proxy(PFb,fpUtil);$("#"+n).length?e(!0):(fpUtil.__googleLoaderTimeoutId=_.delay(e,2e3,!0),fpUi.loadScript("https://www.gstatic.com/charts/loader.js",null,{id:n}).always(function(){e()}))})}return this.__deferredGoogleLoader.done(t.resolve).fail(t.reject),t.promise()},ensureStore:function(t){t=_.getObject(t);var n,i=S(this.map.get("storePriceMode").get("price_required").id);if(fp.store.id&&(t.disablePriceRequired||i.eq(fp.store.price_mode_id)))return $.when();function e(){if(n&&(t.disablePriceRequired||i.eq(n.price_mode_id)))return fp.setStore(n);var e=fp.ui.router.stateManager;return e.go(fpConfig.routeStates.storeLocator,{next:e.href(e.current,$.extend({},e.stateParams)),intent:t.intent}),$.Deferred().reject().promise()}return t.enableSetStoreByLocation?this.getClientLocation().then(function(e){if(e.latitude&&e.longitude)return fpService.storeService.get({latitude:e.latitude,longitude:e.longitude,has_address:!0,limit:1}).done(function(e){n=_.first(e.items)});t.enableFirstStoreFallback&&(n=fp.singleStore)}).then(e,e):e()},getItemDetailClass:function(e,t){init=S.getString(t,fpConfig.intent);var n=["fp-item-detail"];if(_.isObject(e)){var i=this.getProduct(e);if("admin"!=t)switch(this.map.get("productStatus").get(i.status_id).identifier){case"not_available":n.push("fp-is-item-detail-not-available");break;case"no_movement":fpUtil.map.get("spcProductData",null,!0).get("product_inventory").id&&i.enforce_product_inventory&&n.push("fp-is-item-detail-no-movement")}this.getPriceDisclaimer(i)&&n.push("fp-has-item-detail-price-disclaimer"),(e.sale_price||i.sale_price)&&n.push("fp-is-item-detail-sale"),this.getItemHasSaleModifier(i)&&n.push("fp-is-item-detail-sale-modifier")}return n.join(" ")},toggleText:function(e,t,n){e.html(e.html()==n?t:n)},rgbToHex:function(e){var t=e&&e.match(this.regExp.matchRgb);return t&&4==t.length?"#"+((1<<24)+((0|t[1])<<16)+((0|t[2])<<8)+(0|t[3])).toString(16).slice(1):""},hexToRgb:function(e){var t=parseInt(S(e).trimLeft("#").s,16);return"rgb("+(t>>16&255)+", "+(t>>8&255)+", "+(255&t)+")"}},hRb=Object.prototype.hasOwnProperty,iRb=_.defaults,_.mixin({defaults:function(){return _.isObject(arguments[0])||(arguments[0]={}),iRb.apply(_,arguments)},pluck:function(e){var n,i,r=[];return arguments.length&&(n=_.toArray(arguments).slice(1),this.isArray(n[0])&&(n=n[0])),_.size(n)&&_.each(e,function(t){_.each(n,function(e){i=t[e],fpUtil.isNull(i)||r.push(i)})}),r},pickValues:function(t){var e,n,i=[];return _.isObject(t)&&(arguments.length&&(e=_.toArray(arguments).slice(1),this.isArray(e[0])&&(e=e[0])),_.each(e,function(e){n=t[e],fpUtil.isNull(n)||i.push(n)})),i},has:function(n,e){if(fpUtil.isNull(n))return!1;if(!_.isObject(e)||!_.size(e))return hRb.call(n,e);var i=_.isArray(e);return fpUtil.isNull(_.find(e,function(e,t){return t=i?e:t,!_.has(n,t)}))},hasAny:function(n,e){if(fpUtil.isNull(n))return!1;if(!_.isObject(e)||!_.size(e))return hRb.call(n,e);var i=_.isArray(e);return!fpUtil.isNull(_.find(e,function(e,t){return t=i?e:t,_.has(n,t)}))},arrayContainsAny:function(t,e){var n=!1;return _.find(e,function(e){if(_.contains(t,e))return n=!0}),n},result:function(e,t,n){var i=_.isFunction(e)?e():null==e?void 0:e[t];return void 0===i&&(i=n),_.isFunction(i)?i.call(e):i},empty:function(n){return _.isArray(n)?n.length=0:_.each(n,function(e,t){delete n[t]}),n},clean:function(n,i){if(_.isArray(n))for(var e,t=0;t<n.length;t++)e=n[t],_.isFunction(i)&&(e=n[t]=i(e)),(fpUtil.isNullOrEmpty(e)||_.isString(e)&&!S(e).trim().s)&&(n.splice(t,1),t--);else _.each(n,function(e,t){_.isFunction(i)&&(e=n[t]=i(e)),(fpUtil.isNullOrEmpty(e)||_.isString(e)&&!S(e).trim().s)&&delete n[t]});return n},remove:function(e,t){if(_.isArray(e)){var n,i=_.indexOf(e,t);return 0<=i&&(n=e[i],e.splice(i,1)),n}},removeWhere:function(e,t){if(_.isArray(e)&&_.isObject(t)){var n,i=_.findIndex(e,t);return 0<=i&&(n=e[i],e.splice(i,1)),n}},indexStringArray:function(e){var t={};return _.each(e,function(e){S(e).trim().s&&(t[e]=e)}),t},join:function(e,n){if(!_.isObject(e))return"";n=_.isString(n)?{delimiter:n}:_.getObject(n);var i="",r=S.getString(n.delimiter,","),a=_.isArray(e),o=n.unique,s=o&&{};return _.each(e,function(e,t){if(!a&&n.key)e=t;else{if(fpUtil.isNullOrEmpty(e))return;_.has(e,n.key)&&(e=e[n.key])}if(e=S(e).trim().s){if(o){if(_.has(s,e))return;s[e]=1}i&&(i+=r),i+=e}}),i},concat:function(e){var t;_.isArray(e)||(e=[]);for(var n=1;n<arguments.length;n++)if(t=arguments[n],_.isArray(t))for(var i=0;i<t.length;i++)e.push(t[i]);return e},move:function(e,t,n){return e.splice(n||0,0,e.splice(t,1)[0]),e},getObject:function(e,t){return _.isObject(e)?e:_.isObject(t)?t:{}},isArrayLike:function(e){return _.isObject(e)&&0<=e.length},getArray:function(e,t){return _.isArray(e)?e:_.isArray(t)?t:[]},ensureArrayLike:function(e){return _.isArrayLike(e)?e:fpUtil.isNull(e)?[]:[e]},getFunction:function(e,t){return _.isFunction(e)?e:_.isFunction(t)?t:$.noop},firstObject:function(e,t){return e=_.isArray(e)?_.first(e):e,_.getObject(e,t)},getCollectionValue:function(e,t,n){if(!fpUtil.isNull(t)){if(!_.size(e))return t;if(_.findWhere(e,{value:t}))return t}return n},stringify:function(e,n){n=_.getObject(n);var i,r=_.getArray(n.exclude),a="";if(_.isFunction(e))a+="function()";else if(_.isBoolean(e))a+=e.toString();else if(_.isObject(e)){if(_.isDate(e))return a=e.toString();if(_.isRegExp(e))return a='"'+e.toString()+'"';i=_.isArray(e),_.each(e,function(e,t){!i&&_.contains(r,t)||(a&&(a+=","),i||(a+='"'+t+'":'),a+=_.stringify(e,n))}),a=i?"["+a+"]":"{"+a+"}"}else a=_.isUndefined(e)?"undefined":_.isNull(e)?"null":'"'+e.toString()+'"';return a}}),OSb=S.fn.trimLeft,PSb=S.fn.trimRight,QSb=S.fn.trim,RSb=S.fn.ensureLeft,SSb=S.fn.ensureRight,S.empty="",S.getString=function(){var t;return _.find(arguments,function(e){if(!fpUtil.isNull(e))return(e=e.toString()).length?(t=e,!0):void 0}),_.isString(t)||(t=""),t},S.mixin({getString:function(){var e=_.toArray(arguments);return e.unshift(this.s),new this.constructor(S.getString.apply(S,e))},trimLeft:function(e){return e?new this.constructor(this.s.replace(new RegExp("^"+fpUtil.regExp.escape(e)+"+","gi"),"")):OSb.call(this)},trimRight:function(e){return e?new this.constructor(this.s.replace(new RegExp(fpUtil.regExp.escape(e)+"+$","gi"),"")):PSb.call(this)},trim:function(e){if(e){e=fpUtil.regExp.escape(e);var t=this.s.replace(new RegExp("^"+e+"+","gi"),"").replace(new RegExp(e+"+$","gi"),"");return new this.constructor(t)}return QSb.call(this)},ensureLeft:function(e){return RSb.call(this.trimLeft(e),e)},ensureRight:function(e){return SSb.call(this.trimRight(e),e)},encodeForHtml:function(){return this.s.length?new this.constructor(fpUtil.encodeForHtml(this.s)):this},decodeForHtml:function(){return this.s.length?new this.constructor(fpUtil.decodeForHtml(this.s)):this},encodeUri:function(){return this.s.length?new this.constructor(encodeURIComponent(this.s)):this},decodeUri:function(){return this.s.length?new this.constructor(decodeURIComponent(this.s)):this},sanitizeFromURL:function(){return this.s.length?new this.constructor(fpUtil.sanitizeFromURL(this.s)):this},markdownToHtml:function(){if(!this.s.length)return this;var e=fpUtil.regExp.matchHtml;return e.lastIndex=0,e.test(this.s)?this:new this.constructor(fp.markdownConverter.makeHtml(this.s))},titleCase:function(){return this.toLowerCase().replace(/(^[a-z]| [a-z]|-[a-z]|_[a-z])/g,function(e){return e.toUpperCase()})},titlelize:function(){if(!this.s.length)return this;var e=fpUtil.regExp.matchSpecialChars;e.lastIndex=0;var t=this.replace(e," ").titleCase();return t.eq("Id")||t.eq("Upc")?t=t.toUpperCase():t.endsWith(" Id")?t=new this.constructor(t.trimRight(" Id").s+" ID"):t.endsWith(" Ids",!0)&&(t=new this.constructor(t.trimRight(" Ids").s+" IDs")),t},clean:function(e,t){if(S(e).eq(t))return this;e instanceof S&&(e=e.s),t instanceof S&&(t=t.s);for(var n=this,i=0;i<10&&n.contains(e);)n=n.replaceAll(e,t),i++;return n},append:function(e){return e instanceof S&&(e=e.s),new this.constructor(this.s+e)},prepend:function(e){return e instanceof S&&(e=e.s),new this.constructor(e+this.s)},concat:function(e){return this.append(e)},eq:function(e,t){e=S.getString(e);var n=this.s;return t&&(n=n.toLowerCase(),e=e.toLowerCase()),n===e},ne:function(e,t){return!this.eq(e,t)},startsWith:function(e,t){e=S.getString(e);var n=this.s;return t&&(n=n.toLowerCase(),e=e.toLowerCase()),0===n.lastIndexOf(e,0)},endsWith:function(e,t){e=S.getString(e);var n=this.s;t&&(n=n.toLowerCase(),e=e.toLowerCase());var i=n.length-e.length;return 0<=i&&n.indexOf(e,i)===i},contains:function(e,t){e=S.getString(e);var n=this.s;return t&&(n=n.toLowerCase(),e=e.toLowerCase()),0<=n.indexOf(e)},dasherize:function(e){e=e||"-";var t=this.trim().s.replace(/[_\s]+/g,e).replace(/([A-Z])/g,"-$1").replace(/-+/g,e).toLowerCase();return new this.constructor(t)},pluralize:function(){if(!this.s.length)return this;var e=this;return e=this.endsWith("s")?e.concat("es"):e.endsWith("y")?e.trimRight("y").concat("ies"):e.concat("s")},singular:function(){if(!this.s.length)return this;var e=this;return this.endsWith("ses")?e=e.trimRight("es"):e.endsWith("ies")?e=e.trimRight("ies").concat("y"):e.endsWith("us")||(e=e.trimRight("s")),e},trailingSlashIt:function(){var e=this.trim();return"/"!=e.s&&(e=e.trimRight("/").concat(fpConfig.urlTrailingSlash?"/":"")),new this.constructor(e)},stripWhiteSpace:function(){return this.strip(" ","\t")},ensureEnd:function(e){var t=this.s;return this.endsWith(".")||this.endsWith("?")||this.endsWith("!")?this:(e=e||".",new this.constructor(t+e))},isXml:function(){return this.startsWith("<?xml",!0)}}),HTb={},JTb=fpUtil.regExp.matchCacheKey,fpUtil.cache={__cache:HTb,key:function(e){return JTb.lastIndex=0,S.getString(e).replace(JTb,"-")},get:function(e){var t=HTb[e],n=t&&t.value;return t&&-1!==t.expiry&&t.expiry<=new Date&&(delete HTb[e],t=null),_.defer($.proxy(this.flushExpired,this)),n},set:function(e,t,n){_.isDate(n)||(n&&fpUtil.isInteger(n)||(n=3600),-1!==n&&(n=dateFns.addSeconds(new Date,n)));var i=HTb[e];return(i=i||{}).value=t,i.expiry=n,HTb[e]=i,t},remove:function(e){var t=HTb[e];if(delete HTb[e],t)return t.value},flush:function(){_.empty(HTb)},flushExpired:function(){var e,t=new Date;for(var n in HTb)(e=HTb[n])&&-1!==e.expiry&&e.expiry<=t&&delete HTb[n]}},XTb={get:function(){return{id:"",identifier:"",name:""}},items:function(){return[]},itemsHash:function(){return{}}},YTb={fields:"id,identifier,parent_id,sequence,is_default,name,config",no_limit:!0},ZTb={queue:!0},fp.map=function(){this.__cache={},this.__accessors={}},$.extend(fp.map.prototype,{load:function(){var o,s,l,c=this,u=this.__accessors,d=[];_.each(arguments,function(e){if(o={},_.isObject(e)&&"fp.service"!=e.type&&($.extend(o,e),o.service=e.service||e.serviceCall),o.service||(o.service=e),o.service){if(s=_.getObject(o.payload),l=o.service.toString(),o.cacheKey||("service_provider_configurations"==l&&s.service_provider_type?(o.cacheKeyPrefix||(o.cacheKeyPrefix="spc"),o.multipleKey="service_provider_type"):"tags"==l&&s.type&&(l=s.type,o.multipleKey="type")),o.cacheKey||(o.cacheKey=fpService.getServiceKey(l)),!o.refresh)if(o.multipleKey){var t=fp.S(s[o.multipleKey]).split(",");if(t.length){var n,i="",r=o.cacheKeyPrefix?o.cacheKeyPrefix+"_":"";if(_.each(t,function(e){e=S(e).trim().s,n=fpService.getServiceKey(r+e),_.has(u,n)||(i&&(i+=","),i+="sale_configuration_type"==e?"offer_config_type":e)}),!i)return $.when();s[o.multipleKey]=i}}else if(_.has(u,o.cacheKey))return $.when();if(o.options=$.extend({},ZTb,o.options),_.isObject(o.data))c.__applyAccessor(o.data,o);else{if(o.payload=s=$.extend({},s),_.each(YTb,function(e,t){_.has(s,t)||(s[t]=e)}),o.multipleKey&&(S(o.cacheKeyPrefix).startsWith("spc")&&(fpConfig.disableInitializeShopping||_.has(s,"store_id")||(s.store_id=fp.store.id||fp.topStore.id),delete s.no_limit,delete s.fields),s.fields)){var a=fpUtil.formatString(",{0},",s.fields);_.each(["type_id","type_identifier"],function(e){-1==a.indexOf(fpUtil.formatString(",{0},",e))&&(s.fields+=","+e)})}fpUtil.isNull(s.no_limit)&&delete s.no_limit,fpUtil.isNull(s.fields)&&delete s.fields,d.push(c.__loadMap(o))}}else fp.log(e+" (service call not found).")});var e=$.Deferred();return $.when.apply($,d).always(e.resolve),e.promise()},get:function(e,t,n){var i=this.__accessors;return S(e).contains(".")?(t=_.getObject(t,XTb.get()),fpUtil.getObjectFromNamespace(e,this.__cache,t)):_.has(i,e)?i[e]:(n||fp.logStack(fpUtil.formatString("fp.util.map.load('{0}') needs to be called before calling fp.util.map.get('{0}')",e)),XTb)},remove:function(e){delete this.__accessors[e],delete this.__cache[e]},__loadMap:function(n){var i=this;return(_.isObject(n.service)?n.service.get(n.payload,n.options):fp.api(n.service,n.payload,n.options)).done(function(e){if(n.multipleKey)i.__applyMultipleAccessors(e,n);else{var t=i.__applyAccessor(e,n);n.treeify&&fpUtil.indexByAndTreeify(t.items(),{childrenField:"items",childrenSortBy:"sequence"})}})},__applyAccessor:function(e,t){var n,i,r=this.__cache[t.cacheKey]={},a=this.__accessors,o=_.isFunction(t.filter)&&t.filter;_.isArray(e)?n=e:_.isObject(e)&&(n=_.getArray(e.items));for(var s=0;s<n.length;s++)i=n[s],o&&(i=o(i)),_.isObject(i)?(r[i.id]=i,_.has(i,"identifier")&&(r[i.identifier]=i)):(n.splice(s,1),s--);return t.options.sort&&fpUtil.sort(n,t.options.sort),r.items=n,a[t.cacheKey]={get:function(e,t){return _.getObject(_.isObject(t)?_.findWhere(r.items,t):r[e])},items:function(e){return e?_.pluck(r.items,"name"):r.items},itemsHash:function(){return r}}},__applyMultipleAccessors:function(e,t){var n,i,r=this.__cache,a=this.__accessors,o=fp.S(_.getObject(t.payload)[t.multipleKey]).split(","),s={},l=t.cacheKeyPrefix?t.cacheKeyPrefix+"_":"",c=S(l).startsWith("spc");_.isArray(e)?i=e:_.isObject(e)&&(i=_.getArray(e.items)),o.length&&(_.each(o,function(e){"offer_config_type"==(e=S(e).trim().s)&&(e="sale_configuration_type"),s[e]=e=fpService.getServiceKey(l+e);var n={items:[]};r[e]=n,a[e]={get:function(e,t){return _.getObject(_.isObject(t)?_.findWhere(n.items,t):n[e])},items:function(){return n.items}}}),_.each(i,function(e){var t;c?(n=e.service_provider)&&(key=s[n.type_identifier],(t=r[key])&&(t[n.id]=t[n.identifier]=e)):(key=e.type_identifier,"offer_config_type"==key&&(key="sale_configuration_type"),key=s[key],(t=r[key])&&(t[e.id]=e,_.has(e,"identifier")&&(t[e.identifier]=e))),t&&t.items.push(e)}))}}),fpUtil.map=new fp.map,function(){fpService=fp.service={getServiceName:function(e){return this.getServiceKey(e)+"Service"},getServiceKey:function(e){var t=fpUtil.regExp.matchNonNameChars;return t.lastIndex=0,S(e).replace(t,"").singular().camelize().s},getService:function(e){if(e=S(e).trim().s){var t=this[e]||this[this.getServiceName(e)];return _.isObject(t)?t:void 0}},getItemSaveCall:function(e,t){return fpUtil.getId(t)?e.update:e.create},preferenceService:{update:function(e,t,n){var i,r;if(e=_.getObject(e),t=_.getObject(t),!(n=_.getObject(n)).session&&fpUtil.isAuthenticated()?(i=fpService.userService,r=fp.user,t.id=r.id,_.has(n,"ignoreErrors")||(n.ignoreErrors=!0)):(i=fpService.sessionService,r=fp.session,t.id=r.token),!n.replace&&(e=fpUtil.getChanged(e,r.preference),_.size(e))){var a,o,s=$.extend({},r.preference);for(var l in e)o=e[l],fpUtil.isNullOrEmpty(o)?_.has(s,l)?(a=!0,delete s[l]):delete e[l]:s[l]=o;a&&(e=s,n.replace=!0)}return n.replace||_.size(e)?(n.replace&&(t.preference_replace=!0,_.empty(r.preference)),$.extend(r.preference,e),t.preference=JSON.stringify(e),i.update(t,n).then(function(e){return _.empty(r.preference),$.extend(r.preference,e.preference)})):$.Deferred().resolve(r.preference).promise()}},currencyService:{get:function(e,t){var i,r="en";return fpUtil.map.load({multipleKey:"service_provider_type",service:fpService.serviceProviderConfigurationService,payload:{service_provider_type:"store_setting",store_id:e||fp.store.id||fp.topStore.id},refresh:t}).then(function(e){var t=fpUtil.map.get("spcStoreSetting").get("currency").config;if($.extend(_.empty(fp.currency),{currency_iso_code:"USD"},t),t){if(t.country_iso_code_2){var n=t.country_iso_code_2.toLowerCase();numeral.locales[n]||((r=$.extend(!0,{},numeral.locales.en)).currency.symbol=t.currency_symbol_override||t.currency_symbol,t.symbol_followed_by_space&&r.currency.symbol&&(r.currency.symbol+=" "),numeral.register("locale",n,r)),r=n}i=t.distance_unit}return numeral.locale(r),fp.distanceUnit=i,e})}},locationService:{get:function(i,l){if(!1===this.__isGmMapsAuthorized)return $.when();i=_.getObject(i),l=_.getObject(l);var r,a=this;return l.countryCode&&(r={country:l.countryCode}),fpUi.initGoogleMapApi(l.store_id||i.store_id,l.libraries,null,l.intent).then(function(){var o=$.Deferred(),s=fpUtil.getValueFromNamespace("google.maps",window);if(!(s&&s.places&&s.Geocoder))return o.resolve();var e=_.uniqueId("gm-auth-"),t=window.gm_authFailure;if(a[e]=window.gm_authFailure=function(){delete a[e],a.__isGmMapsAuthorized=!1,_.isFunction(t)&&t(),o.reject("Google Maps JavaScript API error: ReferrerNotAllowedMapError")},a.__placesService||(a.__placesService=new s.places.PlacesService($("<div></div>")[0])),a.__autoCompleteService||(a.__autoCompleteService=new s.places.AutocompleteService),a.__geocoderService||(a.__geocoderService=new s.Geocoder),l.places)i.placeId?(a.__placesService.getDetails({sessionToken:a.sessionToken,placeId:i.placeId,fields:["address_component","formatted_address","geometry","place_id"]},function(e,t){var n;t==s.places.PlacesServiceStatus.OK&&(n=e),o.resolve(n),new Date<new Date("01/22/2020 16:00:00")&&fp.notifier.notify({name:"LocationServiceWarning",message:"LocationServiceWarning: google.maps.places.PlacesService response"},{severity:"warning"})}),delete a.sessionToken):(a.sessionToken||(clearTimeout(a.__sessionTimeout),a.__sessionTimeout=_.delay(function(){delete a.sessionToken},12e4),a.sessionToken=new s.places.AutocompleteSessionToken),a.__autoCompleteService.getPredictions({sessionToken:a.sessionToken,input:i.address,types:_.has(l,"types")?l.types:["address"],componentRestrictions:r},function(e,t){var n;t==s.places.PlacesServiceStatus.OK&&(n=e),o.resolve(n),new Date<new Date("01/22/2020 16:00:00")&&fp.notifier.notify({name:"LocationServiceWarning",message:"LocationServiceWarning: google.maps.places.AutocompleteService response"},{severity:"warning"})}));else{var n=_.omit(i,"store_id");n.placeId||(n.componentRestrictions=r),a.__geocoderService.geocode(n,function(e,t){var n,i,r,a;t==s.GeocoderStatus.OK&&(n=[],_.each(e,function(e){n.push(e),l.firstValid&&(!r&&0<=_.indexOf(e.types,"postal_code")&&(r=e),!a&&0<=_.indexOf(e.types,"country")&&(a=e))}),l.firstValid&&(i=r||a||_.first(n))&&(n=[i]));o.resolve(n),new Date<new Date("01/22/2020 16:00:00")&&fp.notifier.notify({name:"LocationServiceWarning",message:"LocationServiceWarning: google.maps.places.Geocoder response"},{severity:"warning"})})}return o.promise()})}}};var f=fpConstants.apiMethods,t=fp.Class.extend({construct:function(e,t){var n;this.type="fp.service",this.serviceCall=e,this.config=t,_.isObject(t)&&(n=t.serviceName),n=n||fpService.getServiceName(e),fpService[n]&&fp.warn(fpUtil.formatString('Service "{0}" already exists.',n)),fpService[n]=this},get:function(e,t){t=this.__getOptions(t),e=this.__getPayload(e,t,f.GET);var n=this.serviceCall;if(t.formatForRestfulId){if(!e.id){var i=fpUtil.formatString("ID is required when formatting for restful URL: {0}",n);return fp.notifier.notify({name:"ServiceGetError",message:fpUtil.formatString("ServiceGetError: {0}",i)},{severity:"error",metaData:{"meta data":{"API Url":fpUtil.getApiUrl(n,e,f.GET,!0)}}}),$.Deferred().reject(i).promise()}n+=fpUtil.formatString("/{0}",e.id),delete e.id}return this.invoke(n,e,t,f.GET)},create:function(e,t){t=this.__getOptions(t),e=this.__getPayload(e,t);var n=this.serviceCall;return t.childServiceCall&&(n+="/"+t.childServiceCall,t.disableChildServiceCall=!0),n+="/create",this.invoke(n,e,t,f.POST)},update:function(e,t){t=this.__getOptions(t),e=this.__getPayload(e,t);var n=this.serviceCall;if(e.id||t.ignoreId)return e.id&&!1!==t.formatForRestfulId&&-1==e.id.indexOf(",")&&(n+=fpUtil.formatString("/{0}",e.id),delete e.id),t.childServiceCall&&(n+="/"+t.childServiceCall,t.disableChildServiceCall=!0),n+="/update",this.invoke(n,e,t,f.POST);var i="ID is required for update item.";return fp.notifier.notify({name:"ServiceUpdateError",message:fpUtil.formatString("ServiceUpdateError: {0}",i)},{severity:"error",metaData:{"meta data":{"API Url":fpUtil.getApiUrl(n,e,f.POST,!0)}}}),$.Deferred().reject(i).promise()},delete:function(e,t){t=this.__getOptions(t),e=this.__getPayload(e,t);var n=this.serviceCall;if(e.id||t.ignoreId)return e.id&&(n+=fpUtil.formatString("/{0}",e.id)),t.childServiceCall&&(n+="/"+t.childServiceCall,t.disableChildServiceCall=!0),n+="/delete",delete e.id,this.invoke(n,e,t,f.POST);var i="ID is required for delete item.";return fp.notifier.notify({name:"ServiceDeleteError",message:fpUtil.formatString("ServiceDeleteError: {0}",i)},{severity:"error",metaData:{"meta data":{"API Url":fpUtil.getApiUrl(n,e,f.POST,!0)}}}),$.Deferred().reject(i).promise()},post:function(e,t){t=this.__getOptions(t),e=this.__getPayload(e,t);var n=this.serviceCall;return e.id&&(n+=fpUtil.formatString("/{0}",e.id),delete e.id),this.invoke(n,e,t,f.POST)},invoke:function(e,t,n,i){return n=_.getObject(n),_.defaults(n,{method:S.getString(i,f.GET),queue:!1}),n.parentServiceCall&&(e=n.parentServiceCall+"/"+e),n.childServiceCall&&!n.disableChildServiceCall&&(e+="/"+n.childServiceCall),this.api(e,t,n)},api:function(e,t,n){return fp.api(e,t,n)},getServiceCall:function(e,t,n){var i;switch(t=S.getString(t),n=_.getObject(n),S.getString(n.method,f.GET).toUpperCase()){case"GET":return this.get;case"POST":i=S(t).endsWith("/delete",!0)?e.delete:_.has(n,"id")?e.update:this.create}return i},toString:function(){return this.serviceCall},__getPayload:function(e,t,n){_.isString(e)?(e={id:e},!_.has(t,"formatForRestfulId")&&S(n).eq("get",!0)&&-1==e.id.indexOf(",")&&(t.formatForRestfulId=!0)):e=_.getObject(e);var i=this.config;return i&&(_.defaults(e,i.defaultPayload),!i.requireStore||fpConfig.disableInitializeShopping||_.has(e,"store_id")||(e.store_id=fp.store.id)),e},__getOptions:function(e){return e=_.getObject(e),this.config&&_.defaults(e,this.config.defaultOptions),e},__getServiceCall:function(e){return e}}),e=t.extend({create:function(e,t){return t=this.__getOptions(t),e=this.__getPayload(e,t),this.invoke(this.serviceCall,e,t,f.POST)},update:function(e,t){t=this.__getOptions(t),e=this.__getPayload(e,t);var n=this.serviceCall;if(e.id||t.ignoreId)return e.id&&(n+="/"+e.id),delete e.id,this.invoke(n,e,t,f.PUT);var i="ID is required for update item.";return fp.notifier.notify({name:"ServiceUpdateError",message:fpUtil.formatString("ServiceUpdateError: {0}",i)},{severity:"error",metaData:{"meta data":{"API Url":fpUtil.getApiUrl(n,e,f.PUT,!0)}}}),$.Deferred().reject(i).promise()},delete:function(e,t){t=this.__getOptions(t),e=this.__getPayload(e,t);var n=this.serviceCall;if(e.id||t.ignoreId)return e.id&&(n+="/"+e.id),delete e.id,this.invoke(n,e,t,f.DELETE);var i="ID is required for delete item.";return fp.notifier.notify({name:"ServiceDeleteError",message:fpUtil.formatString("ServiceDeleteError: {0}",i)},{severity:"error",metaData:{"meta data":{"API Url":fpUtil.getApiUrl(n,e,f.DELETE,!0)}}}),$.Deferred().reject(i).promise()},getServiceCall:function(e,t,n){switch(((n=_.getObject(n)).method||f.GET).toUpperCase()){case"GET":return e.get;case"PUT":return e.update;case"POST":return e.create;case"DELETE":return e.delete}}}),n=t.extend({get:function(e,t){var n=this._super(e,t);return(t=_.getObject(t)).childServiceCall||(n=n.then(function(e){var t=e;if(t&&t.id)return fpService.userAddressService.get({is_primary:!0},{handleErrors:!1}).then(function(e){return t.address=_.first(e.items),t})})),n},update:function(e,t){var n=this._super(e,t);return(t=_.getObject(t)).childServiceCall||(n=n.then(function(e){return e.id&&(e.address=fp.user.address),e})),n},api:function(e,t,n){var i=n.userId||fp.user.id;return 2==n.apiVersion&&i&&(e=e.replace(fpUtil.formatString("/{0}",i),"").replace("users/me",fpUtil.formatString("users/{0}",i))),this._super(e,t,n)}}),i=t.extend({get:function(e,t){var n=this._super(e,t);return t.enableProducts?n.then(function(e){return fpService.productService.applyToItems(e.items,null,{productIdField:t.productIdField,productValueField:t.productValueField,cleanUndefinedProducts:t.cleanUndefinedProducts}).then(function(){return e})}):n}}),r=t.extend({applyToItems:function(s,e,l){if(!_.isArray(s))return $.Deferred().resolve(s).promise();l=_.getObject(l);var c,t="",n={},u=l.productIdField||"product_id",d=l.productValueField||"product";return _.each(s,function(e){(c=e[u])&&(_.isArray(c)||(c=[c]),_.each(c,function(e){n[e]||(n[e]=!0,t&&(t+=","),t+=e)}))}),t?this.get($.extend(e,{id:t,fields:fp.productFields}),l).then(function(e){if(_.size(e.items))for(var t,n,i,r,a=_.indexBy(e.items,"id"),o=0;o<s.length;o++)r=s[o],(c=r[u])&&(i=[],(t=_.isArray(c))||(c=[c]),_.each(c,function(e){(n=a[e])&&i.push(n)}),_.size(i)?r[d]=t?i:_.first(i):l.cleanUndefinedProducts&&(s.splice(o,1),o--));else l.cleanUndefinedProducts&&_.empty(s);return s}):(l.cleanUndefinedProducts&&_.empty(s),$.Deferred().resolve(s).promise())},get:function(e,t){var n=e&&e.limit;return fpConfig.enableHasProducts&&!fp.store.has_products&&0!==n?$.Deferred().resolve({}).promise():(!fp.isBot||t&&t.parentServiceCall&&t.childServiceCall||(e.status_id="1,3"),this._super(e,t))}}),a=t.extend({construct:function(e,t){return t.defaultOptions=_.defaults(t.defaultOptions,{enableRenderId:!0,handleErrors:!1}),this.queue={add:function(e,t){if(fpUtil.isPromise(e)){var n=this,i={promise:e,priority:fpUtil.getFloat(t,fpConstants.priority.MINOR)};this.items.push(i),e.always(function(){_.remove(n.items,i)})}},items:[]},this._super(e,t)},get:function(e,t){if(!fpUtil.map.get("spcAdNetwork").get(this.config.adNetworkIdentifier).id)return $.Deferred().resolve({}).promise();var n=this,i=this._super,r=[],a=fpConstants.priority.TRIVIAL,o=fpUtil.getFloat(t&&t.priority,a);return _.each(this.queue.items,function(e){o<=e.priority||r.push(e.promise)}),$.when.apply($,r).then(function(){return i.call(n,e,t)})}}),o=t.extend({construct:function(e,t){return this.queue={add:function(e,t){if(fpUtil.isPromise(e)){var n=this,i={promise:e,priority:fpUtil.getFloat(t,fpConstants.priority.MINOR)};this.items.push(i),e.always(function(){_.remove(n.items,i)})}},items:[]},this._super(e,t)},get:function(d,f){if(!fpUtil.map.get("spcAdNetwork").items().length)return $.Deferred().resolve({}).promise();f=this.__getOptions(f),d=this.__getPayload(d,f),_.has(f,"handleErrors")||(f.handleErrors=!1),f.enableRenderId&&!_.has(d,"render_id")&&(d.render_id=fp.productAdRenderId||fp.renderId);var e=this,t=this._super,n=[],i=fpConstants.priority.TRIVIAL;return _.each(this.queue.items,function(e){fpUtil.getFloat(f.priority,i)<=e.priority||n.push(e.promise)}),$.when.apply($,n).then(function(){return t.call(e,d,f).then(function(n){var i,e=[],r={},t={},a=n.items,o=d.limit;n.label&&(scope.title=n.label);for(var s=0;s<_.size(a);s++)(i=a[s]).product_id&&(r[i.product_id]=i,t[i.product_id]=1,e.push(i.product_id)),o&&a.length<o&&_.find(i.products,function(e){return e.product_id&&!t[e.product_id]&&(e.products=i.products,a.push(e)),a.length>=o});if(!_.size(e))return delete n.items,n;var l,c=d.has_clippable_offer,u={};return fpService.productService.get({id:_.join(e,{unique:!0}),fields:fp.productFields},{timeout:f.timeout,handleErrors:f.handleErrors}).then(function(e){var t=0;return _.size(e.items)&&_.each(e.items,function(e){if((i=r[e.id]).product=e,c){if(!(l=e.clippable_offer&&e.clippable_offer.id)||u[l])return;u[l]=1}i.product=e,t++}),t||(delete n.items,n.total=0),n})})})}}),s=a.extend(),l=t.extend({run:function(e,t,n){if(t=_.getObject(t),!fpConfig.enableMultiplex&&!t.enableMultiplex||!e)return $.when();var i,r=!_.isArray(e),a=r?fp.multiplexQueue[e]:e,o=S(fpUi.router.routeManager.urlParams.multiplex||t.method);if(_.size(a)){var s,l,c={p:""},u="",d={};r?(d.multiplexId=e,d.runMultiplex=!0,d.handleErrors=n):(d.prepareJsonData=!1,$.extend(d,t)),_.each(a,function(e,n){n=n.toString(),c.p+=(c.p?",":"")+n,r?(e.key=n,l=e.options.url,e.options.method==f.POST?(c[n+"~m"]=e.options.method,s=!0):s||(u+=l),_.each(e.options.data,function(e,t){"app_key"!=t&&"token"!=t&&(c[n+"~"+t]=e,s||(u+=e))})):(l=S(e).trimLeft(fp.apiBaseUrl).s,u+=l),c[n+"~u"]=l}),s||2e3<u.length?o=S(f.POST):o.ne(f.GET,!0)&&o.ne(f.POST,!0)&&(o=S(f.GET)),i=this[o.toLowerCase().s](c,d)}return $.when(i)}}),c=t.extend({getAssetKey:function(l){return fpService.appService.get({store_id:l,store_id_rollup:!0,token:null},{handleErrors:!1}).then(function(e){var t;if(_.size(e.items)){var n=fp.cache.hashedAuthorizedStores,i=n&&n[l],r=i&&i.lineage;if(_.size(r))for(var a,o=_.groupBy(e.items,"store_id"),s=r.length-1;0<=s&&((a=r[s])!=fpConfig.globalStoreId&&(t=_.find(o[a],function(e){return _.size(e.asset_key)&&!S(e.asset_key).endsWith("_mobile")})),!t);s--);}return S.getString(t&&t.asset_key)})},getMobileWebAppKey:function(){return fpService.appKeyService.get({key:fpUtil.formatString("{0}_mobile_web",fp.appKey),token:null},{handleErrors:!1}).then(function(e){return _.size(e.items)&&_.first(e.items).key||void 0})},getByAssetKey:function(e,t){var n;return _.isString(e)&&(n=e),e=_.getObject(e),n=n||fp.assetAppKey,this.get(_.defaults(e,{app_key:n,asset_app_key:n}),_.defaults(t,{assetBaseUrl:fp.assetBaseUrl,apiKey:"sdk",handleErrors:!1}))},getByTopStore:function(e){var t=this;return this.getAssetKey(e).then(function(e){return e?t.getByAssetKey(e):{}})}});_.each(["sessions","users","user_addresses","user_store_cards","user_subscriptions","subscription_lists","phone","circular_spots","notes","webhook"],function(e){new t(e,{defaultOptions:{apiVersion:2}})}),_.each(["shopping_lists","shopping_list_items"],function(e){new t(e,{defaultOptions:{apiVersion:2,enableListLoading:!0,enableRenderId:!0}})}),_.each(["orders","order_items"],function(e){new t(e,{defaultOptions:{apiVersion:2,enableListLoading:!0}})}),_.each(["fulfillment_types","tag_types","user_statuses","store_modes","store_price_modes","order_statuses","order_item_statuses","order_payment_statuses","order_payment_types","order_cancellation_reasons","order_item_cancellation_reasons","order_slots","order_shipments","bagging_types","user_titles","substitution_types","sale_configuration_types","payment_statuses","payment_types","product_statuses","product_group_statuses","recipe_difficulty_levels","recipe_categories","recipe_statuses","recipe_filters","offer_statuses","delivery_area_types","stores","store_cards","store_slots","tags","promotions","delivery_areas","timezones","drop_off_locations","countries","regions","receipts","receipt_items","user_custom_attributes","user_subscription_statuses","user_product_subscriptions","user_authentications","offers","circulars","circular_pages","service_providers","service_provider_configurations","product_search_suggestions","departments","app_keys","sub_apps","metrics","rewards","reviews","search_redirects","urls"],function(e){new t(e)}),_.each(["user_product_buys","user_product_upsell"],function(e){new i(e,{defaultOptions:{timeout:1e4,handleErrors:!1}})}),new r("products",{defaultOptions:{enableRenderId:!0}}),new t("shelf_tags",{defaultPayload:{sort:"name"}}),new t("user_event_tracking",{defaultOptions:{ignoreErrors:!0}}),new e("user_products",{defaultOptions:{ignoreErrors:!0}}),new e("user_recipes",{defaultOptions:{ignoreErrors:!0}}),new n("users/me",{serviceName:"userMeService",defaultOptions:{apiVersion:2,ignoreId:!0}}),new c("stores/configuration",{serviceName:"storeConfigurationService"}),new t("user_external_account",{serviceName:"userExternalAccount"}),new t("recipes",{requireStore:!0}),new t("recipe_items",{requireStore:!0}),new o("products/ads",{serviceName:"productAdService",defaultOptions:{enableRenderId:!0}}),new s("banners/ads",{serviceName:"bannerAdService",adNetworkIdentifier:"ad_manager"}),new l("multiplex",{requireStore:!0}),new t("version",{serviceName:"assetVersionService",defaultOptions:{assetBaseUrl:fp.assetBaseUrl,apiVersion:null,apiKey:"sdk"}}),fpService.constructors={RestService:t,OldRestService:e}}(),function(){var a=window.onerror;window.onerror=function(e,t,n,i,r){if(fp.hasError=!0,fp.isUnloading||(fp.loaded=!0,fpUtil.hideProgress(!0),fpUtil.hideLoading(!0),fp.ui.unblockUI({force:!0}),fp.__$freshop.removeClass("fp-freshop-loading")),_.isFunction(a))return a(e,t,n,i,r)};var r=dateFns.formatDistance,o=fp.__locales,s="en",c={H:"Hours",m:"Minutes",s:"Seconds",S:"Milliseconds"};$.extend(dateFns,{format2:function(t,e,n){if(n=_.getObject(n),o&&!_.isObject(n.locale)){var i=n.locale||s;_.isString(i)&&(i=o[i]||o[s]),n.locale=i}_.isString(t)&&(t=this.parse(t)),e=this.getFormat(e);var r="";try{r=S(this.format(t,e,n)).replace("AM","am").replace("PM","pm").s}catch(e){fp.notifier.notify(e,{severity:"error",metaData:{"meta data":{date:t}}})}return r},getFormat:function(e,t){return e=e||fp.serverDateTimeFormat,t&&t.length<e.length&&(e=e.substr(0,t.length-1)),S(e).replaceAll("dddd","eeee").replaceAll("ddd","eee").replaceAll("D","d").replaceAll("Y","y").s},locale:function(e){if(!fpUtil.isDefined(e))return s;s=_.has(o,e)&&e||"en"},months:function(t,n){t=t||"MMMM";var i,r=new Date,a=[];return _.times(12,function(e){r.setMonth(e,1),i=dateFns.format2(r,t),a.push(i),n&&n(i,e)}),a},utc:function(e){return _.isDate(e)||(e=new Date),new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())},distanceFormat:function(n,i,e){if(e=S.getString(e),!_.isDate(n)||!_.isDate(i))return e;var t,r,a,o=this,s=fpUtil.regExp.matchDurationFormat,l={Hours:0,Minutes:0,Seconds:0,Milliseconds:0};return _.each(l,function(e,t){l[t]=e=o["differenceIn"+t](n,i).toString(),n=o["sub"+t](n,e)}),s.lastIndex=0,e=e.replace(s,function(e){return r=c[(t=e)[0]],null!=(a=r?l[r]:null)&&(t=a,1<e.length&&a.length<e.length&&_.times(e.length-a.length,function(e){t="0"+t})),t})},formatDistance:function(t,n,e){_.isString(t)&&(t=this.parse(t)),_.isString(n)&&(n=this.parse(n));var i="";try{i=S.getString(r.call(this,t,n,e)).replace("less than ","about ").replace("almost ","about ")}catch(e){fp.notifier.notify(e,{severity:"error",metaData:{"meta data":{dateToCompare:t,date:n}}})}return i}});var t=numeral.fn.set;numeral.fn.set=function(e){return t.call(this,fpUtil.getFloat(e))},numeral.fn.round=function(e){e=fpUtil.getInteger(e);var t=this._value,n=t.toString().split(".")[1];if(n){n=n.length;for(var i="1",r=0;r<n;r++)i+="0";i=parseInt(i,10),this._value=parseFloat((Math.ceil(t*i)/i).toFixed(e))}return this},fp.numeralInstance=numeral(),showdown.extension("newline",function(){return[{type:"lang",filter:function(e){return e.replace(/(^|[^\n])\n(?!\n)/gm,function(e){return(e=S(e)).trim().s?e.trimRight().s+"  \n":e.s})}}]}),showdown.extension("targetlink",function(){return[{type:"lang",regex:/\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\4[ \t]*)?\)\{\:target=(["'])(.*?)\6}/g,replace:function(e,t,n,i,r,a,o,s){var l='<a href="'+n+'"';return void 0!==a&&""!==a&&null!==a&&(a=a.replace(/"/g,"&quot;"),l+=' title="'+(a=showdown.helper.escapeCharacters(a,"*_",!1))+'"'),void 0!==s&&""!==s&&null!==s&&(l+=' target="'+s+'"'),l+=">"+t+"</a>"}}]}),fp.markdownConverter=new showdown.Converter({extensions:["newline","targetlink"]}),$.extend(fp.markdownConverter,{makePhoneHtml:function(e){return fpUi.getMobilePhoneHtml(this.makeHtml(e))},makePlainText:function(e){return S(e).replace(/[\][=~`#|()*_-]/g,"").s}}),Lockr.prefix="fp",$.extend($.blockUI.defaults,{message:'             <div class="fp-placeholder" data-role="placeholder">                 <div class="sk-three-bounce">                     <div class="sk-child sk-bounce1"></div>                     <div class="sk-child sk-bounce2"></div>                     <div class="sk-child sk-bounce3"></div>                 </div>             </div>         ',centerY:!1,centerX:!1,css:{cursor:"default",width:"100%","pointer-events":"none"},baseZ:9999,showOverlay:!1,focusInput:!1,ignoreIfBlocked:!0,fadeIn:0,fadeOut:0}),$.extend(fp,{on:function(e,t){return _.isFunction(t)&&(fp.initialized&&e==fpEvent.INITIALIZED||fp.loaded&&e==fpEvent.LOADED)?_.defer($.proxy(t,this,$.Event(e))):$(this).on(e,t),this},one:function(e,t){return _.isFunction(t)&&(fp.initialized&&e==fpEvent.INITIALIZED||fp.loaded&&e==fpEvent.LOADED)?_.defer($.proxy(t,this,$.Event(e))):$(this).one(e,t),this},off:function(e,t){return $(this).off(e,t),this},trigger:function(e,t,n,i){var r;if(e)return _.isObject(e)?(r=e,e=fpUtil.getEventNs(r)):r=$.Event(e),i&&_.isObject(t)&&(t.clientParams=_.getObject(t.clientParams),t.clientParams.promises=_.getArray(t.clientParams.promises)),this.Component&&this.Component.trigger(n,r,t),n||($(fp).trigger(r,t),$(fpClient).trigger(r,t)),r},api:function(w,E,T){if(fp.isUnloading)return $.Deferred().promise();var I,M,e=400,D=fpConstants.apiMethods,k=fpConstants.httpStatus,t=this.ui.router,n=t.stateManager,C=n.initialized?n.stateParams:t.routeManager.urlParams;if(this.__lastJsonRequestEndDate&&(e=_.now()-this.__lastJsonRequestEndDate.getTime()),this.loaded&&400<=e&&!_.size(this.apiQueue)&&fpUtil.hideError(),fpUtil.isNull(T)&&_.isString(E)&&(T=E,E=void 0),E=fpUtil.getValue(E,{}),T=fpUtil.getValue(T,{}),_.isString(T)&&(T={method:T}),_.defaults(T,{apiKey:"client",apiVersion:fp.apiVersion,queue:!1,method:D.GET,dataType:"json",timeout:fpConstants.api.TIMEOUT}),fpConfig.enableMultiplex||(delete T.multiplexId,delete T.runMultiplex),I=T.retryOnFail,w=S(w),T.apiKey){var i=fpUtil.getStateValue("sdk"==T.apiKey,"assetBaseUrl","apiBaseUrl"),r=fp[i],a=T.multiplexId&&!T.runMultiplex?"":T[i]||r;if("sdk"!=T.apiKey||T[i]){var o=T.apiVersion?T.apiVersion+"/":"";M=fpUtil.formatString("{0}{1}{2}",a,o,w.s)}else M=fp.assetCdnUrl+w.s;"sdk"==T.apiKey?(T.prepareJsonData=!1,_.has(T,"retryOnFail")||(I=!0)):(_.has(E,"token")||(E.token=this.session.token),fp.ui&&_.find(this.storeRequiredApis,function(e){if(w.startsWith(e,!0))return E.store_id||fpConfig.disableInitializeShopping||(E.store_id=fp.store.id||fp.config.topShopStoreId||fp.topStore.id),_.each(fp.defaultStoreRequiredApiParams,function(e,t){C[t]&&!_.has(E,e)&&(E[e]=C[t])}),!0}))}else M=w.s;T.apiContext=T.apiContext||"api",_.has(T,"prepareJsonData")||(T.prepareJsonData=T.apiKey&&"json"==T.dataType&&!T.runMultiplex),window.apiCount=(window.apiCount||0)+1;var s=fp.getPrefCookie(),O=$.Deferred(),l=O.promise();fpUtil.ensureSort(E),fpUtil.isNull(E.token)&&delete E.token,T.apiKey&&"sdk"!=T.apiKey&&!E.app_key&&(E.app_key=fp.appKey),T.url=M,T.data=!_.size(E)&&T.data?T.data:E,T.method=T.method.toUpperCase();var x=T.cache&&fp.enableCache&&!T.runMultiplex&&T.method==D.GET;if(T.method==D.GET?(T.enableRenderId&&!_.has(E,"render_id")&&(E.render_id=fp.renderId),T.cacheKey||T.runMultiplex||(T.cacheKey=fpUtil.cache.key(M+$.param(E)))):(_.has(E,"referrer")||(E.referrer=location.href),fp.loaded&&(fp.renderId=_.now())),T.multiplexId&&!T.runMultiplex){var c=this.multiplexQueue[T.multiplexId];return(c=c||(this.multiplexQueue[T.multiplexId]=[])).push({options:T,promise:l}),l}if(T.cacheKey){if(x)if(null!=(u=fpUtil.cache.get(T.cacheKey)))return O.resolve(u,null,null,T).promise();if(!fp.loaded&&T.method==D.GET&&(window.__performance||"true"==C.log_cache_key)){var u=window.__performance&&__performance.cache[T.cacheKey],d=S(M);if(null!=u)return O.resolve(u,null,null,T).promise();if(("client"==T.apiKey||C.deploy_id)&&!d.contains("/products/ads")&&!d.contains("/sessions")){var f=this.session.token||fp.getSessionCookie().token;fp.log(JSON.stringify([fpUtil.getApiUrl(M,E,T.method,!0).replace(r,"/").replace(f,"[TOKEN]").replace(E.app_key,"[APP_KEY]"),T.cacheKey.replace(f,"[TOKEN]").replace(E.app_key,"[APP_KEY]")])+",")}}}if(T.method==D.GET){if(!T.disableUseActivePromise&&T.cacheKey){var p=this.apiQueue[T.cacheKey];if(p&&p.promise)return p.promise}}else!_.has(E,"utc")&&T.apiKey&&(E.utc=dateFns.utc().getTime());if(T.apiKey&&($.support.cors?T.type=T.method:T.dataType="jsonp"),"jsonp"==T.dataType&&(T.crossDomain=!0,T.method!=D.GET&&(T.data._method=T.method,T.method=D.GET)),fp.isDev()){var h=s.debug;h.error_code&&h.api&&w.startsWith(h.api,!0)&&(E.error_code=h.error_code,E.spill=fpUtil.getBoolean(h.spill,!0),E.status_code=h.status_code||k.BAD_REQUEST)}T.enableListLoading&&fpUtil.showLoading(),_.each(T,function(e,t){fpUtil.isNull(e)&&delete T[t]});var U=new Date;function A(){s.log_jsonp&&fp.log(fpUtil.getApiUrl(M,E,T.method,!0));var e=$.ajax(T);return fp.loaded||"client"!=T.apiKey||(fp.apiCallTotalCount=(fp.apiCallTotalCount||0)+1),e.then(P,L).always(function(){fp.isUnloading||(fp.__lastJsonRequestEndDate=new Date,fpUtil.hideLoading(),T.cacheKey&&delete fp.apiQueue[T.cacheKey])}),T.cacheKey&&(fp.apiQueue[T.cacheKey]={apiContext:T.apiContext,promise:l}),!fp.initialized||fp.loaded||T.disableShowProgress||fpUtil.showProgress(l),e}function P(t,e,n){var i,r=T,a=E,o=M,s=!(!e||!e.promise);if(s){t=(n=t).response,i=e,e="",r=i.options,a=r.data;var l=fpUtil.getStateValue("sdk"==r.apiKey,"assetBaseUrl","apiBaseUrl"),c=fp[l];o=(r[l]||c)+r.url}else if("client"==T.apiKey){var u=new Date,d=u.getTime()-U.getTime();fpUtil.getBoolean(C.log_api_duration,!1)&&fp.log("duration:",d,fpUtil.getApiUrl(o,a,r.method,!0)),fp.loaded||(fp.apiSumDuration=(fp.apiSumDuration||0)+d,fp.apiTotalEndDate=u)}var f,p,h=n.status_code||n.status,m=fpUtil.isNull(t),g=typeof t;if(_.isObject(t)&&t.error_code||!fpUtil.isApiResponseSuccess(h))return t=_.getObject(t),L(n,e,S.getString(t.error_message,"An error has occurred").s);if("json"==r.dataType&&(!m&&"object"==g||(f=m?"ApiError: A null response was returned by api":fpUtil.formatString("ApiError: A non-object ({0}) response was returned by api",g),fp.notifier.notify({name:"ApiError",message:f},{severity:"error",metaData:{"meta data":{Status:h,Duration:dateFns.distanceFormat(new Date,U,"HH:mm:ss.SSS"),"API Url":fpUtil.getApiUrl(o,a,r.method,!0),"Response Headers":_.isFunction(n.getAllResponseHeaders)?n.getAllResponseHeaders():"",Multiplex:s||void 0}}}))),_.isObject(t)&&(delete t.status_code,!r.disableSetSession&&t.token&&fp.session.token&&fp.setSession({token:t.token}),!fpConfig.disableInitializeShopping&&"order_statuses"==w.s&&r.method==D.GET&&1<_.size(t.items)&&_.each(["open","user_placed"],function(e){if(!_.findWhere(t.items,{identifier:e})){switch(e){case"open":p={name:"Open",identifier:"open",id:"1"};break;case"user_placed":p={name:"Placed",identifier:"user_placed",id:"2"}}t.items.push(p),fp.notifier.notify({name:"OrderStatusError",message:fpUtil.formatString('OrderStatusError: "{0}" status not found in returned order_statuses. Manually adding "{0}" status',p.name)},{severity:"error",metaData:{"meta data":{Status:h,"API Url":fpUtil.getApiUrl(o,a,r.method,!0),Multiplex:s||void 0}}})}})),r.prepareJsonData&&(E.sort||fpUtil.prepareJsonData(t,{name:"sequence",value:"asc"})),r.cacheKey&&x){var v=fpUtil.isNumeric(r.cache)?r.cache:-1;fpUtil.cache.set(r.cacheKey,t,v)}if(s)i.promise.deferred().resolve(t,e,n,r);else{var y,b;if(T.multiplexId)_.each(fp.multiplexQueue[T.multiplexId],function(e){(b=_.getObject(t[e.key])).status==k.OK?P(b,e):(L(b,e),y=!0)}),delete fp.multiplexQueue[T.multiplexId];y?O.reject(n,"fail","fail",T):O.resolve(t,e,n,T)}}function L(n,i,e){if(fp.isUnloading)return $.Deferred().promise();if("abort"!=i){var r,a=T,t=E,o=M,s=!(!i||!i.promise);if(s){r=i,i="",t=(a=r.options).data;var l=fpUtil.getStateValue("sdk"==a.apiKey,"assetBaseUrl","apiBaseUrl"),c=fp[l];o=(a[l]||c)+a.url}(n=_.getObject(n)).durationMs=dateFns.differenceInMilliseconds(new Date,U),a.method==D.GET||a.data._method||(a.data._method=a.method),"error"==e&&(e=void 0);var u,d,f,p=fpUtil.getXhrErrorResponse(n,i,e),h=p.status_code||n.status||0,m=fpUtil.getApiResponseStatus(p,i,n,T),g=fpUtil.getApiUrl(o,t,a.method,!0),v=S.getString(p.error_message,p.error_code),y="ApiError",b=a.url.match(/banner-ads?/i);if(b=b&&!0,0==m&&!1===window.navigator.onLine?(y="ConnectivityError",v="connectivity error"):m==k.GATEWAY_TIMEOUT&&(!h&&(n.durationMs<fpConstants.api.TIMEOUT||n.durationMs>fpConstants.api.TIMEOUT+1e3)?(y="AbortError",v="abort",m=0,n.durationMs>fpConstants.api.TIMEOUT+1e3&&(u=!0)):y="TimeoutError"),b&&!m)I=!1,a.ignoreErrors=!0;else if(!s&&T.apiKey&&!1!==T.cache&&T.method==D.GET&&m!=k.BAD_REQUEST&&_.has(n,"readyState")&&S(v).contains("JSON")){if(d=n.responseText,!fpUtil.isNull(d)){var w=S.getString(d);(d=w.substring(0,400)).length<w.length&&(d+="...")}d||_.has(T,"retryOnFail")||(I=!0)}if(u||m==k.BAD_REQUEST?fp.isProd()||fp.logError(v,m||"",g):fp.notifier.notify({name:y,message:fpUtil.formatString("{0}: A {1}error has occurred ({2})",y,fpUtil.getStateValue(m&&!fpUtil.isApiResponseSuccess(m),m+" ",""),v)},{severity:"error",metaData:{"meta data":{Status:fpUtil.getStateValue(m,m,""),Duration:dateFns.distanceFormat(new Date,U,"HH:mm:ss.SSS"),"API Url":g,"Response Headers":_.isFunction(n.getAllResponseHeaders)?n.getAllResponseHeaders():"","Response Text":d}}}),I&&m!=k.NOT_FOUND){I=!1,T.method==D.GET&&(T.cache=!1);var C=$.Deferred();return fp.warn(fpUtil.formatString("Request failed {0} ({1}). Retrying after {2}ms",g,v,300)),_.delay(C.resolve,300),C.then(A).promise()}switch(p.error_code){case"sign_out_required":T.disableSignOut||(f=fp.handleSignOutRequired(p.error_message,!1,m,g));break;case"sign_in_required":T.disableSignOut||(f=fp.handleSignInRequired(p.error_message));break;case"order_mismatch":!0===(x=(x=a.ignoreErrors)&&(_.isArray(x)||_.isBoolean(x)?x:[x]))||_.contains(x,p.error_code)||((x=x||[]).push(p.error_code),a.ignoreErrors=x,f=fp.clearOrderPreference(null,p.error_code,p.error_message));break;case"captcha_required":var x;!0===(x=(x=a.ignoreErrors)&&(_.isArray(x)||_.isBoolean(x)?x:[x]))||_.contains(x,p.error_code)||((x=x||[]).push(p.error_code),a.ignoreErrors=x,fp.__handleCaptchaReady||(fp.__handleCaptchaReady=function(){fp.one(fpEvent.INITIALIZED,function(){fpUi.verifyRecaptcha().done(function(e){delete fp.__handleCaptchaReady,e&&!e.challenge&&(fp.isUnloading=freshop.unloading=!0,window.location.reload(!0))})})},fp.grecaptchaReady?fp.__handleCaptchaReady():fp.one(fpEvent.CAPTCHA_READY,fp.__handleCaptchaReady)))}$.when(f).always(function(){var t=_.getObject(fpUtil.handleApiError(p,i,n,T));s?r.promise.deferred().reject(n,i,t.html,a):(T.multiplexId&&(_.each(fp.multiplexQueue[T.multiplexId],function(e){e.promise.deferred().reject(n,i,t.html,T)}),delete fp.multiplexQueue[T.multiplexId]),O.reject(n,i,t.html,T))})}}fp.loaded||fp.apiTotalStartDate||"client"!=T.apiKey||(fp.apiTotalStartDate=U);var m=A();return O.fail(function(e){"abort"==e&&_.has(m,"abort")&&m.abort(e)}),l},init:function(e,t,n){this.initializing||this.initialized||(this.initializing=!0,t&&fp.setSessionCookie({token:t}),window.performance&&performance.timing&&(fp.loadStartDate=new Date(performance.timing.requestStart)),_.isFunction(fp.initUI)?fp.initUI(e):this.initSession(!0).done(function(){fp.loaded=!0,freshop.loaded=!0,fp.log("Freshop loaded"),fp.trigger(fp.events.LOADED),fp.trigger(fp.events.STORE_CHANGED,fp.store.id?fp.store:{})}))},initSession:function(n){n=fpUtil.getBoolean(n,!1);var i=fp.getSessionCookie().token,o=$.Deferred(),r=fpConfig.enableLocale&&fp.locale,a=fp.getSessionCookie().impersonate;function s(e){var t;fp.sessionInitialized=!0,e.token=S.getString(e.token,i),fp.setSession(e,!0),r&&(t=fpUtil.map.load({service:fpService.tagService,payload:{type:"locale"}}).then(function(){_.each(fpUtil.map.get("locale").items(),function(e){e.value=e.identifier.replace("_","-")})})),$.when(t).done(function(){var e;n?(fp.session.is_user_logged_in&&(e=fpService.userMeService.get().then(function(e){return r&&e.locale!=r&&!a?fpService.userMeService.update({locale:r},{handleErrors:!1}):e})),$.when(e).done(function(e){if(e=e||fp.user,fp.setUser(e),fp.session.is_user_logged_in&&"registration_pending"==fp.user.user_status_identifier){fp.warn(window.location.href);var t=fpUi.router.stateManager,n=fpConfig.routeStates;if(!t.is(n.accountCreate)&&(t.go(n.accountCreate),!fpUi.router.location.isCurrentPage(t.href(n.accountCreate))))return}o.resolve(),fp.trigger(fp.events.USER_LOADED,fp.user)})):o.resolve()}),fp.initialized||(fp.log("Freshop initialized..."),delete fp.initializing,fp.initialized=!0,freshop.initialized=!0,fp.trigger(fp.events.INITIALIZED))}return(i?fpService.sessionService.get({id:i},{handleErrors:!1,ignoreErrors:"sign_out_required",formatForRestfulId:!0}):fpService.sessionService.create(r?{locale:r}:void 0)).then(function(e){if(!r||e.locale==r||e.is_user_logged_in&&!a)return e;var t=e.is_user_logged_in,n=e.token;return fpService.sessionService.update({id:n,locale:r},{handleErrors:!1}).then(function(e){return _.has(e,"token")||(e.token=e.id||n),_.has(e,"is_user_logged_in")||(e.is_user_logged_in=t),e})}).done(s).fail(function(e,t,n){var i=fpUtil.getXhrErrorResponse(e),r=fpConstants.httpStatus,a=i.status_code||e.status;if(a==r.BAD_REQUEST){if(fp.isUnloading)return;if("sign_out_required"==i.error_code)return fp.handleSignOutRequired(i.error_message,!0,a,fpUtil.getApiUrl("sessions",payload,options.method,!0)).done(function(){fpService.sessionService.create().done(s)});fpService.sessionService.create().done(s)}fpUtil.handleApiError(i,t,e),o.reject(e,t,n)}),o.promise()},setSession:function(e,t){this.session=t?e:$.extend(this.session,e),_.isObject(this.session.preference)||(this.session.preference={}),this.setSessionCookie({token:this.session.token}),fp.trigger(fp.events.SESSION_CHANGED)},removeSession:function(){var e=this.session.token||this.getSessionCookie().token;this.setSessionCookie(),this.session={preference:{}},_.empty(fp.cache.authorization);var t=$.Deferred();return e?fpService.sessionService.delete(e,{ignoreErrors:!0}).always(function(e){fp.sessionInitialized?fp.initSession().always(t.resolve):t.resolve()}):fp.sessionInitialized?fp.initSession().always(t.resolve):t.resolve(),t.then(function(){return fp.log("Session: ",fp.session),fp.session})},getCookieName:function(e){if(e=S.getString(e),this.isLocal()){var t="-"+S.getString(window.location.port,"80");S(e).endsWith(t)||(e+=t)}return e},getCookie:function(e){return e=this.getCookieName(e),_.getObject($.cookie(e))},setCookie:function(e,t,n){var i;e=this.getCookieName(e);return _.isObject(t)?(i=this.getCookie(e),_.each(t,function(e,t){fpUtil.isNull(e)?delete i[t]:i[t]=e}),$.cookie(e,i,{path:"/",expires:n||365,secure:"https:"==window.location.protocol,samesite:"Lax"})):($.removeCookie(e,{path:"/",expires:-1}),i=null),i},getSessionCookie:function(){var e=this.__sessionCookie;return e=e||(this.__sessionCookie=this.getCookie("fp-session"))},setSessionCookie:function(e){delete this.__sessionCookie,this.setCookie("fp-session",e)},getPrefCookie:function(){var e=this.__prefCookie;return e||(e=this.__prefCookie=this.getCookie("fp-pref"),window.getPrefCookieCount=(window.getPrefCookieCount||0)+1),e.debug=_.getObject(e.debug),e},setPrefCookie:function(e){_.isObject(e)&&!_.size(e.debug)&&delete e.debug,delete this.__prefCookie,this.setCookie("fp-pref",e)},initLogin:function(r){var e={referral_code:null};return!fpConfig.disableInitializeShopping&&fp.store.id&&S(fp.store.price_mode_id).ne(fpUtil.map.get("storePriceMode").get("price_required").id)&&(e.store_id=null),fpConfig.shopIntent.enableAgeGate&&fp.setSessionCookie({ageGate:!0}),fp.setPrefCookie(e),_.empty(fp.cache.authorization),this.initSession().done(function(){r=_.getObject(r);var t,e,n=fpUi.applyUserLocaleToUrl(fpUi.getLoginRedirectUrl(r),["next"]),i=fpUi.router.location.isCurrentPage(n);i&&(fp.getSelectedStoreId()&&(e=fp.getStore()),t=$.Deferred(),$.when(e).always(function(){var e=!fpConfig.disableInitializeShopping;fpUtil.isAuthenticated()?(fp.trigger(fp.events.USER_LOADED,fp.user),fp.trigger(fp.events.USER_CHANGED,fp.user),fp.listManager=new fpUi.ListManager,e?fp.listManager.getSelectedList(!0,null,{handleErrors:!1}).always(function(){fp.ensureActiveStore(!0).done(t.resolve)}):t.resolve()):t.resolve(),fp.trigger(fp.events.STORE_CHANGED,fp.store.id?fp.store:{})})),n&&$.when(t).always(function(){if(i){var e=fpConfig.urls.checkout;if(e&&S(n).contains(e,!0))return void fp.trigger(fp.events.LIST_CHECKOUT,{listManager:fp.listManager,checkoutUrl:n})}fpUi.router.stateManager.go(n,null,{absolute:!0})})})},logout:function(e,t){var n,i=this.user.id,r=fpUi.router.stateManager.history,a=fpUi.router.location.isCurrentPage(e);return t||fpUi.closeActiveModal(),fp.setPrefCookie(),r&&r.flush(),Lockr.flush(),fp.removeSession().then(function(e){if(n=e,_.isObject(n.preference)||(n.preference={}),fp.setUser(null,a),!fp.initialized)return n}).then(function(){return S(fp.user.id).ne(i)&&a&&fp.trigger(fp.events.USER_CHANGED,fp.user),e&&fpUi.router.stateManager.go(e,null,{absolute:!0,reload:!0}),n})},setUser:function(e,t){(e=_.getObject(e)).error||(_.isObject(e.preference)||(e.preference={}),this.user=e),"0"==this.user.selected_store_id&&delete this.user.selected_store_id,fpUtil.getBoolean(t,!0)&&$.when($.ready).done(function(){$(document.body).toggleClass("fp-is-logged-in",fpUtil.isAuthenticated())}),fp.user.last_used_shopping_list_id&&"0"===S.getString(this.getSessionCookie().active_list_id,"0")&&fp.setSessionCookie({active_list_id:fp.user.last_used_shopping_list_id}),fp.log("User: ",this.user)},getSelectedStoreId:function(){return this.getPrefCookie().store_id||this.user.selected_store_id},getStore:function(i,r){r||(i=i||this.getSelectedStoreId());var a=fp.store,o=$.Deferred();if(i&&i!=fp.store.id||r&&r!=fp.store.number){var e={};i&&i!=fp.store.id?e.id=i:e.number=r,fpService.storeService.get(e,{handleErrors:!1}).done(l).fail(t)}else i||fp.store.id||r||fpConfig.disableInitializeShopping?s():fp.config.disableStoreAutoSelect?l():fpService.storeService.get({is_selectable:!0,has_address:!0,limit:1},{handleErrors:!1}).done(function(e){1!=e.total&&(e=null),l(e)}).fail(t);function s(e){fp.store.id||i||(fp.store=e||$.extend(!0,{},fp.topStore),fpConfig.disableInitializeShopping||delete fp.store.id),fp.setStore(fp.store).done(function(){o.resolve(fp.store)})}function l(e){var t,n;if(e&&(i?t=_.findWhere(e.items,{id:i}):r&&(t=_.findWhere(e.items,{number:r})),t||(t=_.first(e.items),i&&(i=null,fp.setPrefCookie({store_id:null})))),!_.isObject(t))return i&&i==fp.user.selected_store_id&&(n={error:!0}),i=null,fp.setPrefCookie({store_id:null}),void s(n);a!=t?fp.setStore(t).done(function(){o.resolve(fp.store)}):o.resolve(fp.store)}function t(e,t,n){var i=fpUtil.getXhrErrorResponse(e),r=fpConstants.httpStatus;(i.status_code||e.status||"")!=r.BAD_REQUEST?fpUtil.handleApiError(i,t,e):l()}return o.promise()},setStore:function(s,e){var t;if(_.isObject(s)||delete(s=$.extend(!0,{},fp.topStore)).id,!(e||fpConfig.disableInitializeShopping||s.error||s.id&&s.is_selectable)){var n=fp.getSelectedStoreId();if(n&&n!=s.id){var i=S(fpUtil.map.get("storePriceMode").get("price_required").id);i.eq(s.price_mode_id)||(t=fpService.storeService.get({id:n},{handleErrors:!1}).then(function(e){(e=_.first(e.items))&&!e.error&&e.is_selectable&&i.eq(e.price_mode_id)&&(s=e)}))}else delete(s=$.extend(!0,{},fp.topStore)).id}return $.when(t).then(function(){var e,r,t=!1;if(s.error||s.id&&!s.is_selectable||(t=S(s.id).ne(fp.store.id),fp.store=s),!fpConfig.disableInitializeShopping){var n=fp.getSessionCookie().active_store_id;if(fpUtil.isAuthenticated()&&!n&&S(fp.user.selected_store_id).ne(fp.store.id)){var i={},a=["invalid_input","store_card_required"];fp.store.id?i.selected_store_id=fp.store.id:i.selected_store_id_clear=!0,e=fpService.userMeService.update(i,{ignoreErrors:a}).done(function(e){fp.setUser(e)}).fail(function(e,t,n){var i=fpUtil.getXhrErrorResponse(e);_.contains(a,i.error_code)&&(fp.store.id?fp.user.selected_store_id=fp.store.id:delete fp.user.selected_store_id,fp.setUser(fp.user),r=i.error_message)})}else n&&S(fp.user.selected_store_id).eq(fp.store.id)&&fp.setSessionCookie({active_store_id:null});if(t&&(e=$.when(e).then(function(){return fpUi.initSiteUrls()}),fpConfig.enableLocaleRoute||(e=e.done(function(){var e=fpUi.getSiteUrls().shopping_url_path,t=fpUtil.formatString("{0}{1}/",S().trailingSlashIt().s,fp.routeDelimiter);if(e&&S(fpConfig.routeStates.product.url).trimRight(t).ne(e)){var n=fpUi.router.stateManager;fpConfig.routeStates.product.url=fpUtil.formatString("{0}{1}",S(e).ensureLeft("/").s,t),n.rebuildState(fpConfig.routeStates.product)}})),fp.loaded)){function o(){var e=[],t={store:fp.store,clientParams:{promises:e}};return fp.trigger(fp.events.STORE_BEFORE_CHANGE,t),$.when.apply(e,$)}e=$.when(e).then(o,o)}}return $.when(e).always(function(){fpConfig.disableInitializeShopping||fp.setPrefCookie({store_id:fp.store.id}),$.when($.ready).done(function(){$(document.body).toggleClass("fp-has-store",!fpUtil.isNull(fp.store.id)).toggleClass("fp-has-store-fulfillment",fp.hasStoreFulfillment())}),fp.loaded&&t&&fp.trigger(fp.events.STORE_CHANGED,fp.store),r&&fp.ui.router.stateManager.go(fpConfig.routeStates.account,{error:r})})})}})}(),fpConfig=fp.config={siteTitle:"Site",siteTitleFormat:"{title} | {siteTitle}",siteTitleCategoryFormat:"{category} | {siteTitle}",storeTitle:"store",storeTitlePlural:"stores",storeAboutUsLabel:"About Us",metaDescription:"{title}",urls:{account:"/my-account",checkout:"/checkout",circular:"/weekly-ad",circularLanding:"/weekly-ad-landing",coupon:"/digital-coupons",couponPoint:"/coupon-points",home:"/",list:"/list",notSupported:"/not-supported",shopping:"/shop",storeLocator:"/my-store/store-locator"},rewardTitle:"My Rewards",addToListLabel:"Add to List",inListLabel:'<span class="fp-label-in-list"> in List</span>',couponPoint:{hasSpecialOffers:!1,title:"My Special Offers"},myCouponTitle:"My Digital Coupons",clipActionLabel:"Clip &amp; Save",clipActionAgainLabel:"Clip again &amp; Save",clipSaleActionLabel:"Clip &amp; Save More",productFilters:{is_personalized:"Just For Me",is_bought_by_me:"Purchased by Me",is_favorite:"My Favorites",has_offer:"On Sale",has_clippable_offer:"Has Digital Coupon",is_redeemed_by_me:"Redeemed by Me"},enableSaleDateMd:!0,enableCouponDisplayOfferDisclaimer:!0,cardCodeFormat:"UPC_A",productBarcodeFormat:"UPC_A",enableSaleDateWrap:!1,enableStoreStateName:!0,enableSubstitutionCheckbox:!1,enableFreshopTracking:!0,enableItemAddedPopover:!1,enableQuantityIndicator:!0,enableSaleIndicator:!1,enableAnimateIn:!1,searchTypeahead:{enabled:!0,datasets:[{identifier:"departments",className:"fp-tt-department",iconClassName:"fp-icon-department"},{identifier:"did_you_mean",name:"Did you mean"},{identifier:"variants",name:"Try searching"},{identifier:"related",name:"Related searches"},{identifier:"your_terms",name:"Recent searches",iconClassName:"fp-icon-clock"}]},enableAddressTypeahead:!1,enableReviewDetailModal:!0,enableCouponClipping:!0,enableSearchPlaceholderChange:!0,enableWebCollage:!0,enableOrderPlacedIndicator:!0,departmentLevel:3,includeAddressBook:!0,enableQtyDropDown:!1,qtyDropDownMaxAmount:10,pickUpHasEndTime:!0,enableDisplayProductIndications:!1,enableMultiplex:!1,enableInventoryTagsOnGrid:!0,enableLoadEarlyModules:!0,disableMajorModuleDelay:!0,enableLazyInit:!1,gridShelfTagsMax:2,shopIntent:{enabled:!1},guestCheckOut:{enabled:!1},formLabels:{},checkoutInstructionLabels:{},checkoutNoteLabels:{},addressFields:{enableAbbreviations:!0},account:{loginImportantMessage:'<h2>All Customers <span class="fp-custom">must</span> create an account!</h2>',loginLabel:'(<span class="fp-semibold">One-time</span>...even if you previously created an account on our previous website.)'},errorCoupons:"This location does not support digital coupons",globalStoreId:"100",adminStoreId:"432",storeCard:{landingPlaceholder:"Store Card or Key Tag #",profileCardTitle:"Your Store Card Number",cardLabel:"Store Card",checkoutVirtualCardLabel:"phone number",linkLabel:"Enter Your Store Card Information",signInContent:"Please sign in to add coupons.",needStoreCardEnabled:!1,needStoreCardRequired:!1},hasSubstitutions:!0,productDetailLayout:"layout-0",weightDivider:"|",dateFormat:"MM/DD/YYYY",shortDateFormat:"MM/DD/YY",saleDateFormat:"MM/DD/YY",timeFormat:"h:mm a",dateTimeFormat:"MM/DD/YYYY h:mm a",shortDateTimeFormat:"MM/DD/YY @ h:mma",longDateTimeFormat:"MM/DD/YYYY h:mm:ss a",calendarDateFormat:"D m/d",fulfillmentDateFormat:"dddd, MMMM D",fulfillmentShortDateFormat:"ddd MM/DD",fulfillmentLongDateFormat:"dddd MM/DD/YY",fulfillmentTimeFormat:"h:mma",fulfillmentShortTimeFormat:"h:mma-",fulfillmentDateTimeDelimiter:" @ ",fulfillmentDateTimeHasEndTimeDelimiter:" between ",numericFormat:"0.00",numberFormat:"0,0.00",numberFormatShort:"0,0",numberFormatOptional:"0,0[.]00",currencyFormat:"$0,0.00",currencyFormatShort:"$0,0",currencyFormatOptional:"$0,0[.]00",enableImageOptimization:!0,imageSizes:{product:{sm:64,md:256,lg:512},recipe:{sm:64,md:256,lg:512},circular:{xs:420,sm:720,md:940,lg:1140},renderSequence:["lg","md","sm","xs"],map:{extra_small:"xs",small:"sm",medium:"md",large:"lg",original:"lg"}},imageQuality:{product:80,recipe:80,circular:40},genericProductImageUrl:fp.clientAssetBaseUrl+"img/generic_product",genericRecipeImageUrl:fp.clientAssetBaseUrl+"img/generic_recipe",clientShoppingStoreSearchRadius:25,productIncrement:1,cardTypes:{visa:"Visa",visaelectron:"Visa Debit",mastercard:"MasterCard",amex:"American Express",discover:"Discover"},cardTypeCodes:{visa:"001",visaelectron:"001",mastercard:"002",amex:"003",discover:"004"},emailTemplateStatus:[{id:"1",identifier:"enabled",name:"Enabled"},{id:"2",identifier:"disabled",name:"Disabled"}],gaTrackingId:"UA-76428239-29",modules:{account:{isView:!0,modules:{login:{},create:{},activateAccount:{},forgot:{},forgotReset:{},orders:{},orderDetails:{},receipts:{},receiptDetails:{},lists:{},profile:{},reward:{},rewardHistoryList:{},purchaseHistoryList:{},loyaltyDetail:{},paymentMethodList:{},paymentMethodEdit:{},addressBook:{},membershipSubscription:{}}},circular:{isView:!0},coupon:{isView:!0},couponPoint:{isView:!0},enroll:{isView:!0},circular:{isView:!0},list:{isView:!0},recipe:{isView:!0},recipeDetail:{isView:!0},itemGridCategory:{isView:!0},products:{isView:!0},productDetail:{isView:!0},storeLocator:{isView:!0},subAppSearch:{isView:!0},checkout:{path:"checkout/checkout",isView:!0,modules:{pickup:{name:"checkout/pickup",inherit:"checkout/fulfillment",fulfillmentIdentifier:"pickup",enableStoreSlots:!0,enableDisplayStore:!0},delivery:{name:"checkout/delivery",inherit:"checkout/fulfillment",fulfillmentIdentifier:"delivery",enableStoreSlots:!0,enableAddress:!0},inLaneDelivery:{name:"checkout/in-lane-delivery",inherit:"checkout/delivery",fulfillmentIdentifier:"in_lane_delivery",enableStoreSlots:!0,enableAddress:!0},digital:{name:"checkout/digital",inherit:"checkout/fulfillment",fulfillmentIdentifier:"digital"},dropOff:{name:"checkout/drop-off",inherit:"checkout/fulfillment",fulfillmentIdentifier:"drop_off",enableStoreSlots:!0},dropShip:{name:"checkout/drop-ship",inherit:"checkout/fulfillment"},review:{name:"checkout/review",inherit:"checkout/checkout"},payment:{name:"checkout/payment"},confirmation:{name:"checkout/confirmation",inherit:"checkout/checkout"},fulfillmentLanding:{isView:!0,fulfillmentOptions:{pickup:{subTitle:"Pick up your groceries in store",body:"Order now for pick up {0}!"},delivery:{subTitle:"Have your groceries delivered to your house",body:"Order now for delivery {0}!"},in_lane_delivery:{subTitle:"Have your groceries delivered to your house",body:"Order now for delivery {0}!"},drop_off:{subTitle:"Have your groceries dropped off at your location",body:"Order now for drop-off {0}!"},drop_ship:{subTitle:"Ship your order today",body:"Your order can be shipped {0}!"}}}}}},routeStates:{account:{name:"account",url:"{{account}}",controller:"account",menuParent:"account",includeInMenu:!0,menuSequence:0,data:{title:"My Account",authenticate:!0}},accountAddressBook:{name:"account-address-book",url:"/address",controller:"address-book",isShoppingExclusive:!0,parent:"account",includeInMenu:function(){return!fp.user.is_guest_user&&fpConfig.includeAddressBook},menuSequence:1,data:{title:"My Address Book"}},accountMembershipSubscription:{name:"account-membership-subscription",url:"/membership-subscription",controller:"membership-subscription",isShoppingExclusive:!0,parent:"account",includeInMenu:function(){return!fp.user.is_guest_user&&fp.hasProductSubscriptions},menuSequence:1,data:{title:"My Membership Subscriptions"}},accountPaymentMethod:{name:"payment-method-list",url:"/payment-methods",controller:"payment-method-list",isShoppingExclusive:!0,parent:"account",includeInMenu:function(){return!fp.user.is_guest_user&&(0<fpUtil.getInteger(fp.user.payment_method_count)||fp.hasStoreFulfillment()&&fp.hasSavedPayment)},menuSequence:2,data:{title:"My Payment Methods"}},accountPaymentMethodEdit:{name:"payment-method-edit",url:"?id",controller:"payment-method-edit",isShoppingExclusive:!0,parent:"payment-method-list",data:{title:"Payment Method Details"}},accountOrder:{name:"account-order-list",url:"/orders",controller:"order-list",isShoppingExclusive:!0,parent:"account",includeInMenu:function(){return 0<fpUtil.getInteger(fp.user.order_count)||fp.hasStoreFulfillment()},menuSequence:3,data:{title:"My Orders"}},accountOrderDetail:{name:"account-order-detail",url:"?id",controller:"order-detail",isShoppingExclusive:!0,parent:"account-order-list",data:{title:"Order Details"}},accountReceipt:{name:"account-receipt-list",url:"/receipts",controller:"receipt-list",isShoppingExclusive:!0,parent:"account",includeInMenu:function(){return fp.hasReceipt},menuSequence:4,data:{title:"My Receipts"}},accountReceiptDetail:{name:"account-receipt-detail",url:"?id",controller:"receipt-detail",isShoppingExclusive:!0,parent:"account-receipt-list",data:{title:"Receipt Details"}},accountList:{name:"account-list",url:"/lists",controller:"list-list",isShoppingExclusive:!0,parent:"account",includeInMenu:!0,menuSequence:5,data:{title:"My Shopping Lists"}},accountReward:{name:"account-reward",url:"/reward",controller:"reward",isShoppingExclusive:!0,parent:"account",includeInMenu:function(){return!fp.user.is_guest_user&&fp.hasReward},menuSequence:8,data:{title:function(){return fpConfig.reward&&fpConfig.reward.rewardTitle?fpConfig.reward.rewardTitle:"My Rewards"}}},accountRewardHistory:{name:"account-reward-history-list",url:"/reward-history",controller:"reward-history-list",isShoppingExclusive:!0,parent:"account",includeInMenu:function(){return!fp.user.is_guest_user&&fp.hasRewardHistory},menuSequence:8,data:{title:"My Reward History"}},accountPurchaseHistory:{name:"account-purchase-history-list",url:"/purchase-history",controller:"purchase-history-list",isShoppingExclusive:!0,parent:"account",includeInMenu:function(){return fpConfig.enablePurchaseHistory},menuSequence:9,data:{title:"My Purchase History"}},accountLoyaltyDetail:{name:"account-loyalty-detail",url:"/loyalty-detail",controller:"loyalty-detail",isShoppingExclusive:!0,parent:"account",includeInMenu:function(){return _.size(fpUtil.getValueFromNamespace("modules.account.modules.loyaltyDetail",fpConfig))},menuSequence:10,data:{title:"My Loyalty Details"}},login:{name:"login",url:"/login",controller:"login",parent:"account",data:{title:"Login",authenticate:!1,isAuthenticatedRedirect:"account",disableBreadcrumb:!0,enableOauthLoginUrl:!0}},accountCreate:{name:"account-create",url:"/create",controller:"create",parent:"account",data:{title:"Create Account",authenticate:!1,isAuthenticatedRedirect:"account",disableBreadcrumb:!0,enableOauthLoginUrl:!0}},accountCreateParam:{name:"account-create-param",url:"?create",controller:"create",parent:"account",data:{title:"Create Account",authenticate:!1,isAuthenticatedRedirect:"account",disableBreadcrumb:!0,enableOauthLoginUrl:!0}},accountActivate:{name:"account-activate",url:"/activate",controller:"activate-account",parent:"account",data:{title:"Activate Account",authenticate:!1}},accountActivateParam:{name:"account-activate-param",url:"/activate?actvate_token",controller:"activate-account",parent:"account",data:{title:"Activate Account",authenticate:!1}},accountForgot:{name:"account-forgot",url:"/forgot",controller:"forgot",parent:"account",data:{title:"Forgot Password",authenticate:!1,disableBreadcrumb:!0}},accountForgotReset:{name:"account-forgot-reset",url:"/reset",controller:"forgot-reset",parent:"account-forgot",data:{title:"Forgot Password",authenticate:!1}},accountForgotResetParam:{name:"account-forgot-reset-param",url:"?reset_token",controller:"forgot-reset",parent:"account",data:{title:"Forgot Password",authenticate:!1}},logout:{name:"logout",url:"/logout",parent:"account",data:{title:"Logout",authenticate:!1,disableBreadcrumb:!0}},accountCreationComplete:{name:"account-complete",url:"{{accountCreationComplete}}",data:{title:"Account Create Complete"}},loyaltyRegistration:{name:"loyalty-registration",url:"{{loyaltyRegistration}}",data:{title:"Loyalty Registration"}},list:{name:"list",url:"{{list}}",isShoppingExclusive:!0,includeInMenu:!0,menuSequence:1,data:{title:"List"}},storeLocator:{name:"store-locator",url:"{{storeLocator}}",isShoppingExclusive:!0,includeInMenu:!0,menuSequence:2,data:{title:"Store Locator"}},product:{name:"shop",url:"{{shopping}}",isShoppingExclusive:!0,includeInMenu:!0,menuSequence:3,enableSEO:!0,data:{title:"Shop"}},productCategory:{name:"product-category",url:"/{slug:path}/d/{department_id:[\\w-]+}{route:.*}",isShoppingExclusive:!0,params:{slug:{value:"departments",squash:!0},route:{emit:!1,squash:!0,raw:!0}},parent:"shop",enableSEO:!0,disableConcat:!0,data:{title:"Product Category",cssClass:"fp-state-product"}},productFavorite:{name:"product-my-favorites",url:"/my-favorites",redirect:"product-my-favorites-param",parent:"shop",data:{title:"My Favorites",authenticate:!0}},productFavoriteParam:{name:"product-my-favorites-param",url:"/?{filter:(?:is_favorite)}",params:{filter:"is_favorite"},mapToParentState:!0,parent:"shop",includeInMenu:!0,menuSequence:3,menuParent:"account",data:{title:"My Favorites",authenticate:!0}},productFeatured:{name:"product-featured",url:"/?{filter:(?:is_featured)}",params:{filter:"is_featured"},mapToParentState:!0,parent:"shop",data:{title:"Featured"}},productDetail:{name:"product-detail",url:"?id",parent:"shop",enableSEO:!0,data:{title:"Product Details"}},productDetailParam:{name:"product-detail-param",url:"?product_id",parent:"shop",enableSEO:!0,data:{title:"Product Details"}},productDetailRoute:{name:"product-detail-route",url:"{slug:path}/p/{product_id:[\\w-]+}{route:.*}",params:{slug:{value:"product",squash:!0},route:{emit:!1,squash:!0,raw:!0}},parent:"shop",enableSEO:!0,data:{title:"Product Details"}},productCategoryDetailRoute:{name:"product-category-detail-route",url:"/departments/{slug:path}/p/{product_id:[\\w-]+}{route:.*}",params:{slug:{value:"product",squash:!0},route:{emit:!1,squash:!0,raw:!0}},parent:"product-category",enableSEO:!0,disableConcat:!0,data:{title:"Product Details"}},recipe:{name:"recipe",url:"{{recipe}}",isShoppingExclusive:!0,includeInMenu:!0,menuSequence:4,enableSEO:!0,data:{title:"Recipes"}},recipeCategory:{name:"recipe-category",url:"/{slug:path}/c/{category_id:[\\w-]+}{route:.*}",isShoppingExclusive:!0,params:{slug:{value:"categories",squash:!0},route:{emit:!1,squash:!0,raw:!0}},parent:"recipe",enableSEO:!0,disableConcat:!0,data:{title:"Recipe Category",cssClass:"fp-state-recipe"}},recipeFavorite:{name:"recipe-my-recipes",url:"/?{filter:(?:is_favorite)}",params:{filter:"is_favorite"},mapToParentState:!0,parent:"recipe",menuParent:"account",includeInMenu:function(){return!(fpUtil.isNull(fpConfig.urls.recipe)||fp.isProd()&&fpConfig.disableRecipeMenu)},menuSequence:4,data:{title:function(){return fp.ui.locale("recipe-my-recipes","My Recipes")},authenticate:!0}},recipeFeatured:{name:"recipe-featured",url:"/?{filter:(?:is_featured)}",params:{filter:"is_featured"},parent:"recipe",data:{title:"Featured"}},recipeDetail:{name:"recipe-detail",url:"?id",parent:"recipe",enableSEO:!0,data:{title:"Recipe Details"}},recipeDetailParam:{name:"recipe-detail-param",url:"?recipe_id",parent:"recipe",enableSEO:!0,data:{title:"Recipe Details"}},recipeDetailRoute:{name:"recipe-detail-route",url:"{slug:path}/r/{recipe_id:[\\w-]+}{route:.*}",params:{slug:{value:"recipe",squash:!0},route:{emit:!1,squash:!0,raw:!0}},parent:"recipe",enableSEO:!0,data:{title:"Recipe Details"}},recipeCategoryDetailRoute:{name:"recipe-detail-route",url:"/categories/{slug:path}/r/{recipe_id:[\\w-]+}{route:.*}",params:{slug:{value:"recipe",squash:!0},route:{emit:!1,squash:!0,raw:!0}},parent:"recipe-category",enableSEO:!0,disableConcat:!0,data:{title:"Recipe Details"}},weeklyAdLanding:{name:"weekly-ad-landing",url:"{{circularLanding}}",isShoppingExclusive:!0,data:{title:"Weekly Ads"}},weeklyAd:{name:"weekly-ad",url:"{{circular}}",isShoppingExclusive:!0,includeInMenu:!0,menuSequence:4,data:{title:"Weekly Ad"}},weeklyAdFeatured:{name:"weekly-ad-featured",url:"/?{filter:(?:is_featured)}",params:{filter:"is_featured"},mapToParentState:!0,parent:"weekly-ad",data:{title:"Featured Offers"}},coupon:{name:"coupon",url:"{{coupon}}",isShoppingExclusive:!0,includeInMenu:function(){return fpUtil.getBoolean(fp.hasDigitalCoupon)},menuSequence:5,data:{title:"Digital Coupons"}},myCoupon:{name:"coupon-my-coupons",url:"/?{filter:(?:is_clipped)}",params:{filter:"is_clipped"},mapToParentState:!0,parent:"coupon",menuParent:"account",includeInMenu:function(){return fpUtil.getBoolean(fp.hasDigitalCoupon)},menuSequence:4,data:{title:function(){return fp.myCouponTitle?fp.myCouponTitle:"My Digital Coupons"},authenticate:!0}},couponPoint:{name:"coupon-point",url:"{{couponPoint}}",isShoppingExclusive:!0,includeInMenu:function(){return fpUtil.getBoolean(fp.hasDigitalCoupon)},data:{title:"Special Offers"}},myCouponPoint:{name:"coupon-point-my-coupons",url:"/?{filter:(?:is_clipped)}",params:{filter:"is_clipped"},mapToParentState:!0,parent:"coupon-point",menuParent:"account",includeInMenu:function(){return fpConfig.couponPoint&&fpConfig.couponPoint.hasSpecialOffers},menuSequence:7,data:{title:function(){return fpConfig.couponPoint&&fpConfig.couponPoint.title?fpConfig.couponPoint.title:"My Special Offers"},authenticate:!0}},checkout:{name:"checkout",url:"{{checkout}}",isShoppingExclusive:!0,includeInMenu:!0,menuSequence:6,data:{title:"Checkout",authenticate:!0}},checkoutPickup:{name:"checkout-pickup",url:"/pickup",controller:"checkout/pickup",parent:"checkout",data:{title:"Checkout Pickup"}},checkoutDelivery:{name:"checkout-delivery",url:"/delivery",controller:"checkout/delivery",parent:"checkout",data:{title:"Checkout Delivery"}},checkoutInLaneDelivery:{name:"checkout-in_lane_delivery",url:"/in_lane_delivery",controller:"checkout/in-lane-delivery",parent:"checkout",data:{title:"Checkout In-lane Delivery"}},checkoutDigital:{name:"checkout-digital",url:"/digital",controller:"checkout/digital",parent:"checkout",data:{title:"Checkout Digital"}},checkoutDropOff:{name:"checkout-drop_off",url:"/drop_off",controller:"checkout/drop-off",parent:"checkout",data:{title:"Checkout Drop-Off"}},checkoutDropShip:{name:"checkout-drop_ship",url:"/drop_ship",controller:"checkout/drop-ship",parent:"checkout",data:{title:"Checkout Drop Ship"}},checkoutReview:{name:"checkout-review",url:"/review",controller:"checkout/review",parent:"checkout",data:{title:"Checkout Review"}},checkoutConfirmation:{name:"checkout-confirmation",url:"/confirmation",controller:"checkout/confirmation",parent:"checkout",data:{title:"Checkout Confirmation",authenticate:!0}}}},p2b=document.documentElement,q2b=p2b.style,$.extend(fp,{device:{hasTouch:"ontouchstart"in p2b,hasFlex:q2b&&"flexWrap"in q2b||"WebkitFlexWrap"in q2b||"msFlexWrap"in q2b,usingMouse:!1,xs:!1,sm:!1,md:!1,lg:!1,portrait:!1},timeZone:window.Intl&&Intl.DateTimeFormat&&Intl.DateTimeFormat().resolvedOptions().timeZone,adminRoles:_.toArray(fpConstants.adminRole),vendorImageUrl:fp.assetCdnUrl+"vendor/",productFields:"id,identifier,reference_id,reference_ids,upc,name,store_id,department_id,size,cover_image,price,sale_price,sale_price_md,sale_start_date,sale_finish_date,price_disclaimer,sale_price_disclaimer,is_favorite,relevance,popularity,shopper_walkpath,fulfillment_walkpath,quantity_step,quantity_minimum,quantity_initial,quantity_label,quantity_label_singular,varieties,quantity_size_ratio_description,status,status_id,sale_configuration_type_id,fulfillment_type_id,fulfillment_type_ids,other_attributes,clippable_offer,slot_message,call_out,has_featured_offer,tax_class_label,promotion_text,sale_offer,store_card_required,average_rating,review_count,like_code,shelf_tag_ids,offers,is_place_holder_cover_image,video_config,enforce_product_inventory,disallow_adding_to_cart,substitution_type_ids,unit_price,offer_sale_price",defaultDepartment:{id:"0"},defaultCategory:{id:"0"},mobileWebUrl:"https://{0}mobile.freshopsites.com",department:{},departments:[],departmentHash:{},digitalCouponsSettings:{},storeCardSettings:{},defaultList:{id:"0",name:"My List"},isSingleStore:!1,disableHasTracked:!0,enableCache:!0,cache:{product:{items:{}},lists:{},template:{},authorization:{},hashedStoreSettings:{siteUrls:{}},file:{}},defaultScope:{__type:"fpScope",fp:fp,$:$,_:_,dateFns:dateFns,jss:jss,showdown:showdown,Lockr:Lockr,util:fpUtil,states:fpConfig.routeStates,constants:fpConstants},apiQueue:{},multiplexQueue:{},alertQueue:[],apiErrorQueue:[],serverDateFormat:"YYYY-MM-DD",serverTimeFormat:"HH:mm:ss",serverDateTimeFormat:"YYYY-MM-DD HH:mm:ss",routeDelimiter:"#!",prevRoute:[],currentRoute:[],routeUrlParams:{},blankImageUrl:"data:image/gif;base64,R0lGODlhAAEAAYAAAP///////yH5BAEKAAEALAAAAAAAAQABAAL+jI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8fksvmMTqvX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SFhoeIiYqLjI2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7vL2+v7CxwsPExcbHyMnKy8zNzs/AwdLT1NXW19jZ2tvc3d7f0NHi4+Tl5ufo6err7O3u7+Dh8vP09fb3+Pn6+/z9/v/w8woMCBBAsaPIgwocKFDBs6fAgxosSJFCtavIgxo8ZgjRw7evwIMqTIkSRLmjyJMqXKlSxbunwJM6bMmTRr2ryJM6fOnTx7+vwJNKjQoUSLGj2KNKnSpUybOn0KNarUqVSrWr2KNavWrVy7ev0KNqzYsWTLmj2LNq3atWzbHisAADs=",currency:{currency_iso_code:"USD"},earlyModules:["redirect","siteHeader","userSessionIndicator","userStoreIndicator","searchBox"],storeRequiredApis:["products","product_search_suggestions","offers","circulars","circular_pages","departments","search","shopping_lists","shopping_list_items","user_products","service_provider_configurations","recipe_filters","user_product_buys","user_product_upsell"],defaultStoreRequiredApiParams:{as_of_date:"as_of_date",date:"as_of_date"},adContextFields:["product_id","department_id","category_id","filter_id","shelf_tag_id","tag_id","for_circular_id","for_circular_type_id","for_offer_type_id"],componentHtml:'             <script type="text/template" data-id="component/0/store-change-products.html">                 <p>                     <%= fp.ui.locale(\'ui-availability\', \'Product availability is different at each store so some items may not be in stock at the store you are selecting.\') %>                     <%= fp.ui.locale(\'ui-check-list\', \'Please check your Full List after changing stores for any items that may be unavailable at the new store.\') %>                     <%= fp.ui.locale(\'ui-switch-back\', \'If you switch back to a store that carries an item it will be re-added to your list.\') %>                 </p>             <\/script>             <script type="text/template" data-id="component/0/order-store-change.html">                 <p class="fp-text-uppercase fp-semibold">                     <%= fp.ui.locale(\'ui-order-progress\', \'You have an order that is in progress. If you update your store your order will be canceled and you will need to start the checkout process again.\') %>                 </p>             <\/script>             <script type="text/template" data-id="component/0/user-store-change.html">                 <p><%= fp.ui.locale(\'ui-store-changed\', \'Your preferred store was changed by a different session.\') %></p>             <\/script>             <script type="text/template" data-id="component/0/store-change.html">                 <%= userStoreChange %>                 <%= orderStoreChange %>                 <p><%= fp.ui.localef(\'ui-update-store\', \'Continuing will update your selected store to <span class="fp-semibold">{0}</span>.\', storeName) %> </p>                 <%= storeChangeProduct %>                 <p><%= fp.ui.locale(\'ui-sure-update\', \'Are you sure you want to update your store?\') %></p>             <\/script>             <script type="text/template" data-id="component/0/animated-loading.html">                 <span class="fp-animated-loading" data-role="animated-loading">                     <% for(var n=1;n<=8;n++) { %>                     <span class="fp-circle fp-circle-<%= n %>"></span>                     <% } %>                 </span>             <\/script>             <script type="text/template" data-id="component/0/freshop.html">                 <div class="fp-core fp-freshop fp-freshop-loading" data-role="freshop-container">                     <div class="fp-request fp-error" style="display:none;">                         <span class="fp-value"><%- fp.ui.locale(\'shared-error-request\', \'An error has occurred making your request\') %></span>.                         <a href="javascript:;"><%- fp.ui.locale(\'shared-click-here\', \'Click here to try again\') %></a>.                     </div>                     <div class="fp-font-preload" style="opacity: 0;filter: alpha(opacity=0);">                         <span style="font-family:freshopicons-light,freshopicons-bold,freshopicons;"></span>                     </div>                     <div class="fp-modal-container" data-role="modal-container"></div>                     <div class="fp-dropdown-container" data-role="dropdown-container"></div>                     <div data-role="tracking"></div>                     <%= util.getStateValue(fp.ui.router.routeManager.hasXhrPageLoad, \'<a href="#" aria-label="Next" data-role="next"></a>\') %>                 </div>             <\/script>             <script type="text/template" data-id="component/0/loading.html">                 <div class="fp-request fp-loading" style="display:none;"></div>             <\/script>         ',__$freshop:$(),initUI:function(u){var e,t,d,f=fpUi.router.routeManager,c=fpUi.router.stateManager;if(fp.renderId=_.now(),fp.enableMobile=fp.bowser.mobile||fp.bowser.tablet,_.isArray(fp.apiBaseUrls)&&1<fp.apiBaseUrls.length){var n,i=fp.getCookie("fp-cache").api_base_url,r=fp.apiBaseUrls.length;if(i&&(n=_.find(fp.apiBaseUrls,function(e){return i==fpUi.getHash(e,r)})),!n){for(var a=n=fp.getSessionCookie().api_base_url;n===a;)n=fp.apiBaseUrls[_.random(r-1)];fp.setCookie("fp-cache",{api_base_url:fpUi.getHash(n,r)},dateFns.addMinutes(new Date,15)),fp.setSessionCookie({api_base_url:n})}fp.apiBaseUrl=n}u&&(u.enableUiConfigOverride&&(t=fpService.serviceProviderConfigurationService.get({service_provider_type:"store_setting",service_provider:"ui_config"},{prepareJsonData:!1}).then(function(e){_.size(e.items)&&(d=_.first(e.items).config)})),!fp.enableMobile||u.enableMobile||fp.isLocal()||fp.isProd()||(e=fpService.storeConfigurationService.getMobileWebAppKey().then(function(e){if(e)return window.location.href=fpUtil.formatString(fp.mobileWebUrl,fp.appKey),$.Deferred().promise()},function(){return $.when()})),e=$.when(t,e).then(function(){d&&$.extend(!0,u,d);var e,n,t=u.subAppConfig;if(t)if(delete u.subAppConfig,u.enableMobile){var i=u.modules,r=t.modules,a=t.urls;_.each(["containerClass","urls","fixedHeader","enableQtyDropDown","enableQuantityIndicator","enableModuleCss","enableMultiplex","qtyDropDownMaxAmount","addToListLabel","inListLabel","disableOneClick","theme","resultLimits"],function(e){delete t[e]}),delete t.modules,$.extend(!0,u,t),_.each(u.urls,function(e){a[e]||delete u.urls[e]}),e=i,n=r,_.each(e,function(t,e){_.each(n[e],function(e){2!=e.version&&(e.modules&&t.modules&&(fpUi.extendModules(t.modules,e.modules),delete e.modules),$.extend(!0,t,_.omit(e,"elementSelector")))})})}else{var o=u.siteTitle,s=t.siteTitle;i=fpUtil.getValueFromNamespace("modules.account.modules",u);_.each(["siteTitle","siteLogo","rectangleLogo","mobileLogo"],function(e){u[e]=t[e]});var l=fpUtil.getValueFromNamespace("login.createAccountLabel",i);l&&(i.login.createAccountLabel=l.replaceAll(o,s)),(l=fpUtil.getValueFromNamespace("create.subTitle",i))&&(i.create.subTitle=l.replaceAll(o,s));var c=fpUtil.getValueFromNamespace("products.defaultSort",t.modules);c&&(u.modules.products.defaultSort=c),u.disableInitializeShopping=!1}if(u.enableLocale&&("admin"==u.intent||_.size(u.locales)||(u.enableLocale=!1),u.enableLocale&&(fpConfig.enableLocale=!0,_.size(u.locales)&&(_.has(fpConfig,"locales")?$.extend(fpConfig.locales,u.locales):fpConfig.locales=$.extend(!0,[],u.locales)),fp.locale=f.locale(),"en"!=fp.locale&&1<_.size(fpConfig.locales))))return fpService.storeConfigurationService.getByAssetKey({mode:fp.configMode,locale:fp.locale}).then(function(e){$.extend(!0,u,e)})}));$.when(e).always(function(){var t,n,i=$.extend(!0,{},fpConfig.modules),e=$.extend(!0,{},fpConfig.urls),r=$.extend(!0,{},fpConfig.storeCard),a=$.extend(!0,{},fpConfig.searchTypeahead),o=u&&u.routeStates;if(o&&delete u.routeStates,$.extend(fp.defaultScope,{stateManager:c,stateParams:c.stateParams}),fp.__promiseStoreDependencies||(fp.__promiseStoreDependencies=$.Deferred().promise()),fp.isProd()||(fp.disableRender="true"==f.urlParams.disable_render,u.enableMultiplex=fpUtil.getBoolean(f.urlParams.enable_multiplex,u.enableMultiplex&&!fp.isLocal())),_.each(u.modules,function(e,t){S(t).endsWith("-exclude")&&delete u.modules[t]}),$.extend(fpConfig,u),_.each(o,function(e,t){_.isObject(e)&&_.has(e,"menuSequence")&&(fpConfig.routeStates[t].menuSequence=e.menuSequence)}),fpConfig.productDetailLayout=fpUtil.formatString("component/{0}/product-detail.html",S(fpConfig.productDetailLayout).trimLeft("layout-").s||"0"),fpConfig.enableLazyInit=fpUtil.getBoolean(fpConfig.enableMobile),fp.isBot&&(fpConfig.shopIntent.enabled=!1,fpConfig.requireStore=!1,fpConfig.enableWebCollage=!1),fpConfig.replaceCssColor&&(fpConfig.replaceCssColor=_.map(fpConfig.replaceCssColor,function(e){return{start:S(fpUtil.hexToRgb(e.start)).trimRight(")").s,end:S(fpUtil.hexToRgb(e.end)).trimRight(")").s}})),fp.allowBots&&!1!==fpConfig.enableSEO&&!(fpConfig.enableSEO=!0)!==fpConfig.enableSEOPushState&&(fpConfig.enableSEOPushState=!0),fp.Component.parseHtml(fp.componentHtml),fpConfig.enableFreshopTracking){var s=fpConfig.modules.tracking;_.isArray(s)||(fpConfig.modules.tracking=s=s?[s]:[]),s.unshift({elementSelector:'body > [data-role="freshop-container"] > [data-role="tracking"]',layout:"layout-1",gtmEnabled:!0,gaEnabled:!1,fbEnabled:!1,intercomEnabled:!1,disableLoadGtag:fpConfig.disableLoadGtag,gaTrackingId:fpConfig.gaTrackingId,liveAnalyticsEnabled:!0})}_.each(i,function(n,e){S(e).endsWith("-exclude")?delete i[e]:(t=fpConfig.modules[e])&&(_.isArray(t)||(t=[t]),_.each(t,function(e){var t=e&&e.layout;$.extend(!0,e,n),t&&(e.layout=t)}))}),fpUtil.isNull(fpConfig.disableInitializeShopping)&&(fpConfig.disableInitializeShopping="admin"==fpConfig.intent),fpConfig.enableSEO&&(fp.productFields+=",canonical_url"),fpConfig.guestCheckOut.enabled&&_.each(["checkout"],function(e){(n=fpConfig.routeStates[e])&&n.data&&(n.data.authenticate=!1)});_.defaults(fpConfig.urls,e),_.defaults(fpConfig.storeCard,r),_.defaults(fpConfig.searchTypeahead,a);var l,d=$.when($.ready);"admin"==fpConfig.intent&&(l=fp.ui.loadFileDependencies("freshop-admin.js")),$.when(l).done(function(){var t,e=new Date;if(fp.registerRouteStates(),"admin"!=fpConfig.intent&&(fp.reducedPerf=90<new Date-e),!fp.isProd()||fp.isProd()&&"true"==f.urlParams.isProd){var n=S(fpConfig.apiBaseUrl).trim();n.s&&(fp.apiBaseUrl=n.ensureRight("/").s)}fpConfig.enableMobile&&_.each(_.concat(fpConfig.mobileUrls,fpConfig.mobileMenuConfig&&fp.config.mobileMenuConfig.include),function(e){e.url&&(fp.isProd()||(e.url=e.url.replace("www.","pre-prod-").replace(".com",".freshopsites.com")),(t=fpUi.router.location.isCurrentHost(e.url)?e.url:f.getLocalRoute(e.url))?e.url=t:e.url=f.buildUrl(e.url,{inherit:!0,searchParams:{intent:"in_app"}}))});var i=$(window),r={width:i.width(),height:i.height()};i.on("resize",function(){var e={width:i.width(),height:i.height(),oldWidth:r.width,oldHeight:r.height};r.width=e.width,r.height=e.height,fp.trigger(fp.events.WINDOW_RESIZE,e)}).on("orientationchange",function(){fp.trigger(fp.events.ORIENTATION_CHANGED)}).on("beforeunload",function(){fp.isUnloading=freshop.unloading=!0,_.each(fp.apiQueue,function(e){e.promise.deferred().reject("abort")})}).on("focus",function(){fp.hasFocus=!0}).on("blur",function(){fp.hasFocus=!1});var a,o=$("body,html").on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchstart",function(e){(0<e.which||_.contains(["mousedown","mousewheel","touchstart"],e.type))&&o.stop()});fpConfig.enableLocale&&(a=fpUi.loadFileDependencies("freshop-i18n.js").then(function(){if("en"!=fp.locale)return fp.api(fpUtil.formatString("i18n/{0}.json",fp.locale),null,{apiKey:"sdk",handleErrors:!1}).then(function(e){var t={};t[fp.locale]=e,$.i18n().load(t)})}));var s=$.when(a).then(function(){fpConfig.enableLocale&&($.i18n({locale:fp.locale}),dateFns.locale(fp.locale));var e=[],t=fp.api("component/shared/component.html",null,{retryOnFail:!1,queue:!0,apiKey:"sdk",dataType:"text"}).then(function(e){if(fp.Component.parseHtml(e),fpConfig.enableMobile)return fp.api("component/shared/v2/component.html",null,{retryOnFail:!1,queue:!0,apiKey:"sdk",dataType:"text"}).then(function(e){fp.Component.parseHtml(e)})});return e.push(t),fpConfig.enableMobile&&e.push(fpUi.loadFileDependencies({src:"freshop-component.css",prepend:!0})),$.when.apply($,e)}),l=$.Deferred(),c=$.Deferred(),u=s.then(function(){!function(){function e(e,t){var n=fpUi.getPageTitle(t&&t.title);fpUi.setPageTitle(n),n&&fpConfig.metaDescription&&fpUi.setMetaDescription(fpConfig.metaDescription.replace("{title}",n))}fp.on(fp.events.ROUTE_BEFORE_CHANGE,function(e,t){fp.loaded&&t.fromState!=t.toState&&_.defer(function(){e.isDefaultPrevented()||fpUi.closeActiveModal()})}).on(fp.events.ROUTE_CHANGED,function(e,t){var n={},i=t.toParams,r={debug:null},a=["isDev","isPreProd","isProd"];_.each(i,function(e,t){S(t).startsWith(6<t.length)&&(n[t.replace("debug_","")]=e)}),_.size(n)&&(r.debug=n),_.each(["log_jsonp","log_debug","log_error"],function(e){_.has(i,e)&&(r[e]=fpUtil.getBoolean(i[e]))}),_.each(a,function(t){_.has(i,t)&&(r[t]=fpUtil.getBoolean(i[t]),r[t]?_.each(a,function(e){e!=t&&(r[e]=null)}):r[t]=null)}),fp.setPrefCookie(r),fp.isProd()||(fpConfig.enableMultiplex=fpUtil.getBoolean(i.enable_multiplex,fpConfig.enableMultiplex&&!fp.isLocal())),fpUtil.initDepartment(),fp.hasDigitalCoupon&&t.changedParams.offer_id&&i.offer_id&&fpService.offerService.get(i.offer_id,{handleErrors:!1}).done(function(e){e.id&&fp.one(fp.events.LOADED,function(){fp.ui.showOfferModal(e,{enableSearchParams:!0})})}),t.changedParams.modal&&fp.one(fp.events.LOADED,function(){var e=fpUi.router.stateManager.stateParams;switch(e.modal){case"shop_intent":fp.ui.showShopIntentModal({force:!0,fulfillmentIdentifier:e.modal_action});break;case"offer":e.modal_action_id&&fpService.offerService.get(e.modal_action_id).done(function(e){fp.ui.showOfferDetailModal(e)});break;default:fp.ui.closeActiveModal()}}),fp.popUpSettings&&fp.popUpSettings.config&&_.each(fp.popUpSettings.config,function(e,t){fp.ui.showPopUpModal(e,t)})}).on(fp.events.STATE_CHANGED,e).on(fp.events.PAGE_TITLE_SET_CONTENT,e).one(fp.events.LOADED,function(){var t={};_.each(fp.alertQueue,function(e){t[e.options.type]&&!e.options.enableMultiple||(t[e.options.type]&&(e.options.handleScroll=!1),t[e.options.type]=!0,fpUtil.showAlert(e.message,e.$alert,e.options))}),fp.alertQueue.length=0;var e=fpConfig.shopIntent,n=fp.getSessionCookie();if(!fpUtil.isAuthenticated()&&e.enabled&&(e.displayOnLoad||e.enableAgeGate)){var i=fp.Module.getViewModule(),r={};if(!i||!1!==i.config.enableShopIntentModal)if(e.enableAgeGate)fpUtil.getBoolean(n.ageGate)&&(!e.displayOnLoad||fp.store.id||$(document.body).hasClass("fp-no-store-selection"))||(!fpUtil.getBoolean(n.ageGate)&&fp.store.id&&(r.disableFulfillment=!0),r.force=!0);else if(e.displayOnLoad&&!e.enableAgeGate)fp.store.id||$(document.body).hasClass("fp-no-store-selection")||(r.force=!0);else{var a,o=window.location.hostname;S(window.document.referrer||o).contains(o)&&(a=n.shopIntentModalLastViewedAt),(!a||24<=dateFns.differenceInHours(new Date,a))&&(r.force=e.delivery&&_.contains(e.delivery.disallowedPostalCodes,fp.store.postal_code))}_.size(r)&&fpUi.showShopIntentModal(r)}fpUi.bindBodyEvents(),fp.setSessionCookie({reload:null}),delete fp.__promiseStoreDependencies,fpUtil.map.load({service:fpService.serviceProviderConfigurationService,payload:{service_provider_identifier:"google_recaptcha",service_provider_type:"captcha",store_id:fpUtil.getStateValue(!fp.isProd(),fp.store.id)}}).then(function(){if(!window.grecaptcha){var e=fpUtil.map.get("spcCaptcha").get("google_recaptcha").config;if(e&&e.site_key)return fpUi.loadScript(fpUtil.formatString("https://www.google.com/recaptcha/api.js?render={0}",e.site_key)).done(function(){window.grecaptcha&&grecaptcha.ready(function(){fp.grecaptchaReady=!0,fp.trigger(fpEvent.CAPTCHA_READY)})})}})}).on(fpEvent.PAGE_CHANGED,function(e,t){$(document.body).toggleClass("fp-is-logged-in",fpUtil.isAuthenticated())}).on(fp.events.ACCOUNT_LOGOUT,function(e,t){t=S.getString(t,"/"),fp.logout(t)}).on(fp.events.USER_CHANGED,function(){$.when($.ready).done(function(){$(document.body).toggleClass("fp-is-logged-in",fpUtil.isAuthenticated())})}).on(fp.events.STORE_CHANGE,function(e,t){fp.storeChange(t)}).on(fp.events.CONFIRM_MODAL_SHOW,function(e,n){var i=fp.__$freshop.find('[data-role="modal-container"] .fp-confirm-modal');if(!i.length){var t=fp.ui.getTabIndex(),r=fp.ui.getTabIndex();i=$('                            <div class="modal fp-confirm-modal fade" tabindex="-1">                                 <div class="modal-dialog">                                     <div class="modal-content">                                         <div class="modal-header fp-heading">                                             <button type="button" class="close" tabindex="'+fp.ui.getTabIndex()+'" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>                                             <h3><span>&nbsp;</span></h3>                                         </div>                                         <div class="modal-body clearfix">                                             <div class="fp-notification" data-role="notification"></div>                                             <div class="fp-modal-content fp-margin-bottom"></div>                                             <button class="fp-btn fp-btn-close fp-btn-confirm pull-right" tabindex="'+t+'">'+fp.ui.locale("shared-yes","Yes")+'</button>                                             <button class="fp-btn fp-btn-secondary fp-btn-close fp-btn-cancel fp-margin-right pull-right" tabindex="'+r+'">'+fp.ui.locale("shared-no","No")+"</button>                                         </div>                                     </div>                                 </div>                             </div>                         ").modal({show:!0})}var a=!1,o=!1,s=i.find(".modal-body"),l=n.title||fp.ui.locale("shared-confirm","Confirm"),c=n.content||"",u=n.confirmButtonLabel||fp.ui.locale("shared-ok","OK"),d=fpUtil.isNull(n.cancelButtonLabel)?fp.ui.locale("shared-cancel","Cancel"):n.cancelButtonLabel;i.removeClass().addClass("modal fp-confirm-modal fade "+S.getString(n.cssClass)).off("click.confirmModal").on("click.confirmModal",".fp-btn-close, .close",function(e){var t=$(this);a=t.hasClass("fp-btn-confirm"),!n.customClose||t.hasClass("fp-btn-cancel")?i.modal("hide"):(o=!0,n.callback(a))}).on("hidden.bs.modal",function(e){o||(o=!0,n.callback(a))}).on("shown.bs.modal",function(){n.onModalOpen&&n.onModalOpen()}),i.find(".fp-heading h3 span").html(l),i.find(".modal-body .fp-modal-content").html(c),s.find(".fp-btn-confirm").html(u),d?s.find(".fp-btn-cancel").removeClass("hidden").html(d):s.find(".fp-btn-cancel").addClass("hidden"),i.modal("show")}).on(fp.events.CONFIRM_MODAL_HIDE,function(e){var t=fp.__$freshop.find('[data-role="modal-container"] .fp-confirm-modal');if(t.length){var n=t.data("bs.modal");n&&n.isShown&&t.modal("hide")}}).on(fp.events.STORE_CHANGED,function(e,t){var n=fp.store.id?fpUtil.formatString("fp-store-{0}",fp.store.id):"";$(document.body).replaceClass(/fp-store-\S+/gim,n,!0),fp.loaded&&(fp.clearOrderPreference(),fpConfig.disableInitializeShopping||fp.ui.loadStoreDependencies())}).on(fp.events.LIST_ACTIVATED,function(){fp.clearOrderPreference()})}(),function(){if(!window.matchMedia)return;var o,t,n=window.matchMedia,s=fpConstants.matchMediaMin,l=fpConstants.matchMediaMax,e=fpUtil.sort(_.values(s)),i=_.invert(s);function r(e,t){if((!t||!o)&&e.matches){var n,i=0,r=s[fp.device.screen];for(var a in s)n=a.toLowerCase(),0<=e.media.indexOf(s[a].toString())?(i=s[a],fp.device[n]=!0,fp.device.screen=a,o=!0):0<=e.media.indexOf(l[a+"_MAX"].toString())?(i=s[a],fp.device[n]=!0,fp.device.screen=a):fp.device[n]=!1;r!=i&&fp.trigger(fp.events.MEDIA_WIDTH_CHANGE,{oldWidth:r,newWidth:i})}}if(_.each(e,function(e){(t=n(fpUtil.formatString("screen and (min-width: {0}px)",e)))&&(t.addListener(r),r(t))}),_.each(fpUtil.sort(e,null,!0),function(e){(t=n(fpUtil.formatString("screen and (max-width: {0}px)",l[i[e]+"_MAX"])))&&(t.addListener(r),r(t,!0))}),t=n("(orientation:portrait)")){function a(e){var t=$(document.body);fp.device.portrait=e.matches,t.toggleClass("fp-portrait",fp.device.portrait)}t.addListener(a),a(t)}}(),fpClient.initClientEvents();var e,n=$.Deferred(),i=$.Deferred(),r=!fpConfig.disableInitializeShopping,t=fpUi.router.routeManager.urlParams;if(t.token&&t.token!=fp.session.token&&t.token!=fp.getSessionCookie().token&&(e=fp.logout(),fp.setSessionCookie({token:t.token})),fp.listManager=new fp.ui.ListManager,e=$.when(e).then(function(){return fp.initSession(!0)}).then(function(){fp.session.store_id==fpConfig.globalStoreId&&(fpConfig.disableInitializeShopping=!0,r=!1),f.ensureRoute(),fp.isUnloading||fpService.storeService.get(fp.session.store_id).then(function(e){if(fp.topStore=e,r)return fpUtil.map.load({service:fpService.tagService,payload:{type:"store_price_mode,product_status,offer_status,sale_configuration_type,fulfillment_type",store_id:fp.topStore.id}})}).always(function(){d.then(function(){if(r&&t.store_number)return fp.getStore()}).done(function(){var o,s=null;r&&(s=t.store||t.store_id||$("[data-requiredStoreId]").attr("data-requiredStoreId")||fpConfig.shoppingStoreId,o=t.store_number),fp.ensureActiveStore(!1,{storeId:s,storeNumber:o}).then(function(){var n=fp.getPrefCookie();if(!n.has_client_location){var i=_.getObject(fpConfig.storeRequiredOptions),r=i.defaultStoreId,a=fp.store.id||s||n.store_id;if(i.enableSetStoreByLocation&&!fpUtil.isAuthenticated()&&!s&&!o&&(!a||a==r))return fpUtil.getClientLocation(i.clientLocationTimeout).then(function(e){if(e.latitude&&e.longitude)return fp.setPrefCookie({has_client_location:!0}),n=fp.getPrefCookie(),fpService.storeService.get({latitude:e.latitude,longitude:e.longitude,has_address:!0,distance:i.distance,limit:1,has_pickup:i.has_pickup,has_delivery:i.has_delivery}).done(function(e){var t=_.first(e.items);t?fp.setStore(t):s=r});r&&(s=r)}).always(function(){if(!(a=fp.store.id||s||n.store_id)&&!n.has_client_location)var t=navigator.geolocation.watchPosition(function(e){navigator.geolocation.clearWatch(t),fp.setPrefCookie({has_client_location:!0}),(a=fp.store.id||s||n.store_id)&&a!=r||fpService.storeService.get({latitude:e.coords.latitude,longitude:e.coords.longitude,has_address:!0,distance:i.distance,limit:1,has_pickup:i.has_pickup,has_delivery:i.has_delivery}).done(function(e){if(!(a=fp.store.id||s||n.store_id)||a==r){var t=_.first(e.items);t&&fp.setStore(t)}})})})}}).always(function(){var e,t;fp.store.id||(e=fp.getStore(s,o)),r&&(t=fpService.storeService.get({is_selectable:!0,has_address:!0,limit:1}).done(function(e){fp.singleStore=_.first(e.items),fp.isSingleStore=fpUtil.getInteger(e.total)<=1})),$.when(e,t).always(function(){fp.store.id&&fp.trigger(fp.events.STORE_CHANGED,fp.store),l.resolve(),fp.ui.loadStoreDependencies().always(function(){fpUtil.showProgress(.2),n.resolve(),fp.__promiseStoreDependencies&&fp.__promiseStoreDependencies.deferred().resolve()}),r?fp.listManager.getSelectedList(!0,null,{handleErrors:!1}).always(function(){fpUtil.showProgress(.2),i.resolve()}):i.resolve()})})})})}).fail(function(){fp.isUnloading||(fp.loaded=!0,fpUtil.hideLoading(!0),fpUtil.hideProgress(!0),fp.ui.unblockUI(),fp.__$freshop.removeClass("fp-freshop-loading"))}),!fp.isUnloading){var a=$.when(n,i).then(function(){if(!fp.isUnloading){fpUtil.initDepartment(t.department_id);var e=fpUtil.getInteger(t.module_load_hang_for);return e?(fp.warn(fpUtil.formatString("Delaying module load for {0}ms",e)),fpUtil.delayPromise(null,e)):void 0}});return $.when(e,a)}});d.done(function(){if(fp.log("document.ready"),fpConfig.enableImageOptimization){var t=new Image;t.onerror=t.onload=function(e){fp.hasWebp=!(!e||"load"!==e.type)&&1===t.width},t.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="}fpUi.initBodyEvents(),fp.ui.preInitModules(),s.always(function(){if(!fp.isUnloading&&!fp.documentReady){fp.documentReady=!0,fp.__$freshop=$(fp.ui.renderTemplate("component/0/freshop.html",null,null,!0)).appendTo(document.body);var e=fp.device.hasTouch,t=$(document.body).attr("data-theme",S(fpConfig.theme).getString("theme-0").trimLeft("fp-").s);if(e?t.addClass("fp-touch"):t.addClass("fp-notouch"),fpUi.processStyleSheets(),fp.apiErrorQueue.length){var n=fp.apiErrorQueue[0];fpUtil.handleApiError(n.resp,n.textStatus,n.jqXHR,n.options),fp.apiErrorQueue.length=0}else fp.ui.blockUI(),fp.loader=new fpUi.Loading(fp.ui.renderTemplate("component/0/loading.html",null,null,!0)),fp.formLoader=new fpUi.Loading,fpUtil.showProgress();fpConfig.enableLoadEarlyModules&&"true"!=f.urlParams.disable_early_modules?l.then(function(){fp.log("loadEarlyModules");var t,n={};return _.each(fp.earlyModules,function(e){(t=fpConfig.modules[e])&&(n[e]=t)}),fpUi.loadModules(n,null,!0)}).done(function(){fp.log("renderEarlyModules")}).always(c.resolve):c.resolve(),fp.trigger(fp.events.DOCUMENT_READY)}}),$.when(u,c).always(function(){var e;fp.$productsModal=fp.initProductsModal(),fp.$addAllProductsModal=$('                <div class="modal fp-add-all-products-modal fade" tabindex="-1">                     <div class="modal-dialog">                         <div class="modal-content">                             <div class="modal-header fp-heading">                                 <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>                                 <h3><span>&nbsp;</span></h3>                             </div>                             <div class="modal-body clearfix">                                 <div class="fp-modal-content fp-margin-bottom"></div>                                 <a href="javascript:;" class="fp-btn fp-btn-close fp-btn-save pull-right">'+fp.ui.locale("shared-ok","OK")+'</a>                                 <a href="javascript:;" class="fp-btn fp-btn-secondary fp-btn-close fp-margin-right pull-right">'+fp.ui.locale("shared-cancel","Cancel")+"</a>                             </div>                         </div>                     </div>                 </div>             ").modal({show:!1}),fp.$firstProductsModal=$('                <div class="modal fp-add-all-products-modal fade" tabindex="-1">                     <div class="modal-dialog">                         <div class="modal-content">                             <div class="modal-header fp-heading">                                 <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>                                 <h3><span>&nbsp;</span></h3>                             </div>                             <div class="modal-body clearfix">                                 <div class="fp-modal-content fp-margin-bottom"></div>                                 <a href="javascript:;" class="fp-btn fp-btn-close fp-btn-add-favs pull-right">'+fp.ui.locale("shared-yes","Yes")+'</a>                                 <a href="javascript:;" class="fp-btn fp-btn-secondary fp-btn-close fp-margin-right pull-right">'+fp.ui.locale("shared-no","No")+"</a>                             </div>                         </div>                     </div>                 </div>             ").modal({show:!1}),fp.$productDetailModal=$('                <div class="modal fp-product-detail-modal fade" tabindex="-1">                     <div class="modal-dialog">                         <div class="modal-content">                             <div class="modal-header fp-heading">                                 <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>                                 <h3 class="modal-title"><span>&nbsp;</span></h3>                             </div>                             <div class="modal-body clearfix">                             '+fp.ui.renderTemplate("component/0/animated-loading.html")+'                                 <div class="fp-modal-content fp-margin-bottom">                                     <div class="fp-product-detail-content"></div>                                     <button class="fp-btn fp-btn-secondary fp-btn-close pull-right" data-dismiss="modal">'+fp.ui.locale("shared-close","Close")+"</button>                                 </div>                             </div>                         </div>                     </div>                 </div>             ").modal({show:!1}),fp.on(fp.events.ADD_ALL_PRODUCTS_MODAL_SHOW,function(e,n){var t=fp.$addAllProductsModal;if(t){n=$.extend({},n);var i=S.getString(n.title,fp.ui.locale("shared-add-products","Add Products To Shopping List")),r=n.content||fp.ui.renderTemplate("component/0/add-products-to-list.html");t.find(".fp-heading h3 span").text(i),t.find(".modal-body .fp-modal-content").html(r),t.off("click.addAllProductsModal").on("click.addAllProductsModal",".fp-btn-close",function(e){if(fp.trigger(fp.events.ADD_ALL_PRODUCTS_MODAL_HIDE),_.isFunction(n.callback)){var t=n.callback(e);if(!n.disableTrackItemsAdded&&fpUtil.isPromise(t)){var i=$.extend([],fp.listManager.selectedList.items);t.done(function(){var t=[],n=_.indexBy(i,"id");_.each(fp.listManager.selectedList.items,function(e){_.has(n,e.id)||t.push(e)}),fp.trigger(fp.events.LIST_ITEMS_ADDED,{listManager:fp.listManager,selectedList:fp.listManager.selectedList,addedItems:t})})}}}).modal("show")}}).on(fp.events.ADD_ALL_PRODUCTS_MODAL_HIDE,function(e){fp.ui.hideModal(fp.$addAllProductsModal)}).on(fp.events.FIRST_PRODUCT_ADD_MODAL_SHOW,function(e,t){var n=fp.$firstProductsModal;if(n){t=$.extend({},t);var i=S.getString(t.title,"Add All Favorites"),r=t.content||'                         <div class="fp-text-left">                         '+fp.ui.locale("shared-added-item","<p>You added an item to a new list. Would you like to fill the list with your favorite items?</p><p>If yes, one of every item marked with a filled-in star from the product pages will be added to your shopping list. Your favorites are gathered from items that you have marked with a filled-in star or that you have previously ordered.</p><p>Be sure to go in and review your list where you can then increase quantities and remove or add items.</p>")+"                         </div>                     ";n.find(".fp-heading h3 span").text(i),n.find(".modal-body .fp-modal-content").html(r),n.off("click.firstProductsModal").on("click.firstProductsModal",".fp-btn-close",function(e){_.isFunction(t.callback)&&t.callback(e)}).modal("show")}}).on(fp.events.FIRST_PRODUCT_ADD_MODAL_HIDE,function(e){fp.ui.hideModal(fp.$firstProductsModal)}).on(fp.events.PRODUCT_DETAIL_MODAL_SHOW,function(e,t){var n=fp.$productDetailModal;if(n){t=$.extend({title:"&nbsp;"},t);var i=n.find(".fp-heading h3 span").html(t.title),r=n.find(".modal-body").addClass("fp-animated-loading-container"),a=r.find(".fp-modal-content"),o=a.find(".fp-product-detail-content");_.getObject(n.data("bs.modal")).isShown||(o.html(""),a.addClass("invisible"));var s={name:"product-detail",elementSelector:o,intent:"modal",disableExtras:t.disableExtras,productId:t.productId,listManager:t.listManager};_.defaults(s,fpConfig.modules.productDetail),fp.ui.loadModule(s).then(function(e){return e.init().done(function(){r.removeClass("fp-animated-loading-container"),a.removeClass("invisible"),i.html(fpUtil.encodeForHtml(S.getString(e.scope.item.name,fp.ui.locale("shared-product-detail","Product Detail"))))})});var l,c=fp.__$freshop.find('[data-role="modal-container"] .modal[aria-hidden="false"]:not(.fp-product-detail-modal)').hide().removeClass("fade in");c.length&&(l=fp.__$freshop.find('[data-role="modal-container"] .modal-backdrop').first().fadeOut("slow")),s.disableExtras||n.addClass("fp-media-sm"),n.off("hide.bs.modal.productDetail hidden.bs.modal.productDetail").on("hide.bs.modal.productDetail",function(){c.length&&(c.show().addClass("fade in"),l.css("display",""),n.removeClass("fp-media-sm"))}).on("hidden.bs.modal.productDetail",function(){c.length&&fp.__$freshop.addClass("modal-open");var e=o.data("fp.ui.Component");e instanceof fp.Component&&e.destroy()}).modal("show")}}).on(fp.events.PRODUCT_DETAIL_MODAL_HIDE,function(e,t){fp.ui.hideModal(fp.$productDetailModal)}),"add-to-list"==f.urlParams.action&&(e=fpUi.processRouteIntent());var a=fp.store.id;$.when(e).then(function(){return fpUi.loadModules(fpConfig.modules)}).always(function(n){if(!fp.isUnloading){var i,r=!1;!function e(t){i=i||_.delay(e,3e3,!0),fpUtil.hideProgress(t).always(function(){r||(r=!0,t&&fp.log("Forced hiding of progress bar after 3s"),$.when(_.getObject(n).disableProgressPromise).always(function(){if(!fp.isUnloading){fpUi.unblockUI({force:!0}),fp.__$freshop.removeClass("fp-freshop-loading"),a&&fp.store.id&&!S(a).ne(fp.store.id)||fp.trigger(fp.events.STORE_CHANGED,fp.store.id?fp.store:{}),fp.loaded=!0,freshop.loaded=!0;var e=new Date,t=fp.numeralInstance.set(dateFns.differenceInMilliseconds(e,fp.loadStartDate)/1e3).format("#,0.0##"),n=fp.viewModuleRenderTime?fp.numeralInstance.set(dateFns.differenceInMilliseconds(fp.viewModuleRenderTime,fp.loadStartDate)/1e3).format("#,0.0##"):null,i=fp.numeralInstance.set(dateFns.differenceInMilliseconds(fp.apiTotalEndDate,fp.apiTotalStartDate)/1e3).format("#,0.0##"),r=fp.numeralInstance.set(fp.apiSumDuration/1e3).format("#,0.0##");fpUi.postMetric(t,i,r,fp.apiCallTotalCount,n),fp.log("Freshop loaded"),fp.trigger(fp.events.LOADED),"addToCart"==fpUi.router.routeManager.urlParams.action&&fpUi.processRouteIntent()}}))})}()}})})})})})},refreshUser:function(){return fpService.userMeService.get().then($.proxy(this.setUser,this))},hasStoreFulfillment:function(e){return e=e&&e.id?e:this.store,0<(_.size(e.fulfillment_types)||fpUtil.map.get("storeFulfillmentType",null,!0).items().length)},getDefaultStoreFulfillmentType:function(e,i){var t,n=fp.listManager.getList(),r=fp.ui.ListManager.getListQuantity(n);return fp.store.id&&0<r&&(e=$.extend({type:"fulfillment_type",store_id:fp.store.id,shopping_list_id:n.id},e),t=fpService.tagService.get(e,i)),$.when(t).then(function(e){var t,n=e&&e.items||fpUtil.map.get("storeFulfillmentType",null,!0).items();return n.length||(n=fpUtil.map.get("fulfillmentType").items()),i.preferred&&(t=_.find(n,function(e){return e.id==i.preferred})),t||_.first(n)})},getStoreUrl:function(e,t){var n=fpUi.router,i=S(_.getObject(e,fp.store).url||t).trim().s;return i=i||n.stateManager.href(fpConfig.routeStates.storeLocator),fp.isProd()?i:n.routeManager.relativeUrl(i)},clearOrderPreference:function(e,t,n){Lockr.rm("order");var i,r=$.extend({},fp.session.preference),a=$.extend({},r);return _.each(["order_step","order_id","order_store_id","order_fulfillment_type_id","order_show_submit","payment_method","saved_payment_method","payment_type_id"],function(e){delete r[e]}),_.isObject(e)&&$.extend(r,e),_.isEqual(a,r)?i=$.Deferred().resolve(r).promise():(i=fpService.preferenceService.update(r,null,{replace:!0,session:!0}),(t||n)&&fp.notifier.notify({name:"clearOrderPreference",message:"clearOrderPreference: clearing order preference"},{severity:"warning",metaData:{"meta data":{errorCode:t,errorMessage:n}}})),i.then(function(){if(_.hasAny(fp.session,["order_step","order_id","order_store_id","order_fulfillment_type_id","payment_method","saved_payment_method","payment_type_id"]))return fpService.sessionService.post({id:fp.session.token,payload:null},{apiVersion:1}).done(function(e){fp.setSession(e,!0)})}).done(function(){fp.trigger(fp.events.ORDER_CLEARED,{errorCode:t,errorMessage:n})})},storeChange:function(a){a=_.getObject(a);var t=_.getFunction(a.callback);if(!a.storeId&&!a.storeNumber)return t(fp.store),$.when();var o,s=fp.ui.ListManager.getListQuantity(),i=a.currentStoreId||fp.store.id||fp.getSelectedStoreId();if(!a.storeId&&a.storeNumber&&fp.store.number==a.storeNumber&&(a.storeId=fp.store.id,delete a.storeNumber),!i||!s&&(fpConfig.disableStoreChangeConfirmation||fp.loaded))return fp.getStore(a.storeId,a.storeNumber).done(r);function r(){t(fp.store),fp.trigger(fp.events.STORE_AFTER_CHANGE);var e=_.result(a,"next");e&&(a.allowAllUrls||(e=fpUi.router.routeManager.relativeUrl(e)),fpUi.router.stateManager.go(e,null,{absolute:!0}))}function l(e){var t;e?"0"!=a.storeId&&(t=a.storeId):t=i;var n=null;a.hasSelectedStoreChanged&&S(t).ne(fp.user.selected_store_id)&&(fp.setPrefCookie({store_id:t}),n=t),fp.setSessionCookie({active_store_id:n}),$.when(fp.getStore(t)).always(r)}function n(){return $.when($.ready).then(function(){var e=$.Deferred();return(o=fp.__$freshop.find('[data-role="modal-container"] .fp-store-confirm-modal')).length?o.modal("show"):o=$('                                    <div class="modal fp-store-confirm-modal fade" tabindex="-1">                                         <div class="modal-dialog">                                             <div class="modal-content">                                                 <div class="modal-header fp-heading">                                                     <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>                                                     <h3><span>'+fp.ui.localef("shared-store-update-confirmation","{0} Update Confirmation",fp.config.storeTitle)+'</span></h3>                                                 </div>                                                 <div class="modal-body clearfix">                                                     <div class="fp-modal-content fp-margin-bottom">'+fp.ui.renderTemplate("component/0/animated-loading.html")+'</div>                                                     <a href="javascript:;" class="fp-btn fp-btn-close fp-btn-save pull-right">'+fp.ui.locale("shared-yes","Yes")+'</a>                                                     <a href="javascript:;" class="fp-btn fp-btn-secondary fp-btn-close fp-margin-right pull-right">'+fp.ui.locale("shared-no","No")+"</a>                                                 </div>                                             </div>                                         </div>                                     </div>                                 ").modal({show:!0}),o.one("shown.bs.modal.storeConfirm",e.resolve),e.promise()})}if(i&&i!=a.storeId||a.storeNumber&&a.storeNumber!=fp.store.store_number){if(a.disableConfirmation&&("0"!=a.storeId||a.storeNumber))return void l(!0);var e,c;a.loadStoreFirst||(e=n()),$.when(e).then(function(){if("0"!=a.storeId||a.storeNumber){var e={};return a.storeId?e.id=a.storeId:e.number=a.storeNumber,fpService.storeService.get(e,{handleErrors:!1}).done(function(e){c=_.first(e.items)})}}).always(function(){if(!(c=_.getObject(c)).is_selectable)return o&&o.modal("hide"),void r();var e;o||(e=n()),$.when(e).always(function(){var e;if(c.number==a.storeNumber&&(delete a.storeNumber,a.storeId=c.id),"0"==a.storeId)e="                                         <p>Continuing will remove your selected "+fp.config.storeTitle+".</p>                                         <p>Are you sure you want to continue?</p>                                     ";else if(!(e=_.isFunction(a.content)?a.content():a.content)){var t=(a.hasSelectedStoreChanged?fp.ui.renderTemplate("component/0/user-store-change.html"):null)||"",n=(fp.session.preference.order_store_id&&S(fp.session.preference.order_store_id).ne(c.id)?fp.ui.renderTemplate("component/0/order-store-change.html"):null)||"",i=(0<s||n?fp.ui.renderTemplate("component/0/store-change-products.html"):null)||"";e=fp.ui.renderTemplate("component/0/store-change.html",{userStoreChange:t,orderStoreChange:n,storeChangeProduct:i,storeName:c.name})}var r=!1;o.off("click.confirmModal hidden.bs.modal.confirmModal").on("click.confirmModal",".fp-btn-close",function(e){r=$(this).hasClass("fp-btn-save"),o.modal("hide")}).on("hidden.bs.modal.confirmModal",function(e){_.isFunction(fpConfig.storeChangeConfirm)&&fpConfig.storeChangeConfirm(r,c,fp.store),fp.isUnloading||l(r)}),o.find(".modal-body .fp-modal-content").css("height","auto").html(e)})})}else l()},hasSelectedStoreChanged:function(){return!!fpUtil.isAuthenticated()&&(!fp.getSessionCookie().active_store_id&&S(fp.getPrefCookie().store_id).ne(fp.user.selected_store_id))},ensureActiveStore:function(e,t){if(fpConfig.disableInitializeShopping)return $.when();t=_.getObject(t);var n,i,r,a,o=$.Deferred(),s=fp.getPrefCookie();if(fpConfig.enableRequiredStore){if(!fp.disableRequiredStore){if(delete t.storeId,delete t.storeNumber,r=function(){var e;if(fp.requiredStoreId&&S(fp.store.id).ne(fp.requiredStoreId))return _.isObject(fpConfig.requiredStoreUrls)&&(e=fpConfig.requiredStoreUrls[fp.store.id]),void fp.ui.router.stateManager.go(e||fp.ui.router.stateManager.href(fpConfig.routeStates.product),null,{absolute:!0});fp.store.id&&!S(fp.store.id).eq(i)?fp.clearOrderPreference().done(o.resolve):o.resolve()},i=fp.getSelectedStoreId(),n=S.getString(fp.user.selected_store_id,i),!fp.requiredStoreId)return r(),o.promise();var l={store_id:fp.requiredStoreId};s.default_store_id||(l.default_store_id=fpUtil.getNullIfEmpty(s.store_id)),fp.setPrefCookie(l),i=fp.getSelectedStoreId()}}else if(a=!e&&fp.hasSelectedStoreChanged())n=s.store_id,i=fp.user.selected_store_id,r=function(){S(fp.store.id).ne(i)?o.resolve().promise():fp.clearOrderPreference().done(o.resolve)};else if(fpUtil.isAuthenticated()&&s.store_id&&S(fp.getSessionCookie().active_store_id).ne(s.store_id)&&S(fp.user.selected_store_id).ne(s.store_id))n=fp.user.selected_store_id,i=s.store_id,r=o.resolve;else{if(!_.size(t))return o.resolve().promise();n=fp.getSelectedStoreId(),r=o.resolve}var c,u=t.storeId||fpUtil.getStateValue(!t.storeNumber,i),d=t.storeNumber;return fp.loaded&&!e&&!d&&S(u).eq(n)?o.resolve().promise():(n&&"0"==fp.listManager.getList().id&&(c=fp.listManager.refreshList(!1,{store_id:n},{handleErrors:!1})),$.when(c).always(function(){fp.storeChange({currentStoreId:n,storeId:u,storeNumber:d,hasSelectedStoreChanged:a,loadStoreFirst:!0,callback:r})}),o.promise())},handleSignInRequired:function(e){var t=fpConfig.routeStates,n=fpUi.router,i=n.stateManager,r=!fpConfig.disableInitializeShopping;if(fpConfig.guestCheckOut.enabled)i.go("/",null,{absolute:!0});else{var a=i.get(t.login.name)||i.get(t.admin.name),o=r?n.location.pathname(!0):null;fp.logout(i.href(a,{error:e,next:o}))}return $.Deferred().promise()},handleSignOutRequired:function(e,t,n,i){if(fp.getSessionCookie().token||fp.session.token){var r=fpUi.router,a=r.stateManager,o={token:null},s=r.routeManager.buildUrl(r.location.pathname(!0),{inherit:!0,searchParams:o,routeSearchParams:o});if(fpUtil.getValueFromNamespace("data.authenticate",a.current)){var l=fpConfig.routeStates;s=a.href(a.get(l.login)||a.get(l.admin),{error:e,next:s})}t&&(fp.sessionInitialized=!1),fp.logout(s)}return $.Deferred().promise()},registerRouteStates:function(e){e=e||fpConfig.routeStates;var t=fpUi.router.stateManager,n=fpUi.router.location.pathname(),i=fpConfig.urls;if("/"!=n&&(fpConfig.urlTrailingSlash=S(n).endsWith("/")),_.each(i,function(e,t){i[t]=S(e).trailingSlashIt().s}),i.checkoutConfirmation){var r=e.checkoutConfirmation;r.url="{{checkoutConfirmation}}",delete r.parent}i.login||(i.login=S(i.account).ensureRight("/").s+"login");var a,o,s,l,c,u,d,f="/{0}"+S().trailingSlashIt().s+fp.routeDelimiter+"/",p={},h=fpUtil.regExp.matchRoute,m=_.indexBy(e,"name");_.each(e,function(e,t){if(fpConfig.disableInitializeShopping){for(u=e;u.parent&&u.name!=u.parent&&!u.isShoppingExclusive;)u=m[u.parent];if(u&&u.isShoppingExclusive)return}if((a=S.getString(e.url).match(h))&&(s=a[1],o=a[2],s)){if(!(d=i[o])||!_.isString(d)||!d.length)return;d=S(d).trim("/").s,e.url=e.url.replace(s,fpUtil.formatString(f,d))}if(e.parent&&!e.disableConcat||!fpConfig.enableLocaleRoute||(e.url="/{lang:[a-z]{2,2}-[a-z]{2,4}}"+e.url,e.params=$.extend(e.params,{lang:{squash:!0,raw:!0,inherit:!0}})),l=e.parent?m[e.parent]:null){c=S.getString(l.url).split("?")[0];var n=S(e.url);n.startsWith(c+"-")||(n=n.trimLeft(c)),l.parent||e.disableConcat||(n=n.trimLeft("/")),e.url=n.s}e.data&&e.data.authorize&&(e.data.authenticate=!0),p[t]=e}),fpConfig.enableLocaleRoute&&(t.rootStateConfig.url="/{lang:[a-z]{2,2}-[a-z]{2,4}}{route:path}",t.rootStateConfig.params={lang:{squash:!0,raw:!0,inherit:!0},route:{squash:!0,raw:!0}}),t.register(p)},initProductsModal:function(e){var t,n=$(fpUi.renderTemplate("component/0/modal-products.html",null,null,!0)).modal({show:!1,persist:e}).on("show.bs.modal.products",function(){(t=fp.__$freshop.find('[data-role="modal-container"] .modal[aria-hidden="false"]')).length&&t[0]!=n[0]?(n.removeClass("fade in"),t.hide().prev(".modal-backdrop").hide()):t=null}).on("shown.bs.modal.products",function(){fp.one(fpUtil.formatString("{0}.bs.modal.products",fp.events.ROUTE_CHANGED),function(){fp.ui.hideModal(n)}),$(this).find(".modal-body").find('input[type="search"]:visible, input[type="text"]:visible, textarea:visible').first().focus()}).on("hide.bs.modal.products",function(){t&&(t.show(),t.prev(".modal-backdrop").show())}).on("hidden.bs.modal.products",function(){var e;t=t&&null,fp.off(fpUtil.formatString("{0}.bs.modal.products",fp.events.ROUTE_CHANGED)),$(this).find(".modal-body .fp-item .fp-item-action").each(function(){(e=$(this).data("fp.ui.Component"))&&e.destroy()})});function p(l){var t,n,i,r,a,o,c,s=l.$modal,u=_.getObject(s.data("bs.modal")),d=_.getArray(l.productIds),f=_.getArray(l.products),p="",h=s.find(".modal-body .fp-modal-content").html(""),m=fp.cache.product,e=S.getString(l.title,fp.ui.locale("shared-products","Products")),g=fpUtil.map.get("productStatus").get("available"),v=fpUtil.map.get("fulfillmentType"),y=fp.ui.router.stateManager,b=fpConfig.routeStates,w=_.getObject(fp.store.nu_val_config),C=_.getObject(l.listManager,fp.listManager),x=fp.ui.getTemplate("component/0/item-generic-detail.html"),E=fp.ui.getTemplate(fp.config.productDetailLayout),T=fpConfig.enableQtyDropDown?"fp-is-qty-ddl":"",I=fpConfig.enableQtyDropDown?"fp-is-qty-ddl-wrap":"";if(_.size(d)){var M=_.indexBy(f,"id");_.each(d,function(e){l.excludeInList&&C.getItem(e,!0)||(c=m.items[e])&&c.identifier&&!M[e]&&f.push(c)})}if(f.length||!l.closeWhenNoProductsFound){fpUtil.sort(f,"popularity"),(p=fpConfig.enableMobile?fpUi.renderTemplate("component/0/product-list-list.html",{items:f,adConfig:fp.sponsoredAdConfig,imageSize:"small",enableAddInstructions:!0}):(f=_.filter(f,function(e){if((e=fpUtil.getProduct(e)).status_id==g.id)return n=y.href(b.productDetail,{id:e.id},{canonical_url:e.canonical_url}),t="drop_ship"==v.get(e.fulfillment_type_id).identifier?'<div class="fp-item-fulfillment-type"><div class="fp-drop-ship-icon"></div></div>':"",i=_.getObject(w.prefix?e.other_attributes:null),templateOptions={item:e,itemUrl:n,disableGroup:!(r=""),disableAdmin:!0},(a=l.hashedProductAds&&l.hashedProductAds[e.id])&&(a.product=e),o=a&&fp.sponsoredAdConfig&&fp.sponsoredAdConfig.label?'<div class="fp-tag fp-tag-ad">'+fp.sponsoredAdConfig.label+"</div>":"",l.fromSpot&&(templateOptions.fromSpot=!0),i.nu_val_score&&(r='<img src="'+w.prefix+i.nu_val_score+'-new-Blue-ShelfTag.gif" alt="" class="fp-item-other-nutrition-score" />'),p+='                                  <li class="fp-item '+T+'" data-product-id="'+fpUtil.encodeForHtml(e.id)+'">                                     <div class="fp-item-image">                                         <a href="'+n+'">                                             <img src="'+fpUtil.getImageSrc(e,"small")+'" width="64" height="64" alt="" />                                             '+r+"                                         </a>                                         "+o+"                                         "+t+"                                     </div>                                    "+fp.ui.renderTemplate(E,templateOptions)+'                                     <div class="fp-item-action" data-product-id="'+fpUtil.encodeForHtml(e.id)+'">                                         <span class="fp-btn-icon fp-btn-decrement"></span>                                         <span class="fp-btn-add">'+fpUtil.getItemButtonHtml(e)+'</span>                                         <span class="fp-btn-icon fp-btn-increment"></span>                                     </div>                                 </li>                             ',!0}),p&&'<ul class="fp-product-list fp-product-list-sm '+I+'">'+p+"</ul>"))&&_.size(l.bannerAds)&&(p='<div data-role="banner-ad" class="fp-margin-bottom"></div>'+p),p||"search"==l.mode&&l.isSearching||(fpUtil.getBoolean(l.allowGenericItem,fp.store.allow_generic_item)&&(c={id:fpUtil.getNewItemId(),note:l.note},p=l.notFoundTemplate?fp.ui.renderTemplate(l.notFoundTemplate,{item:c}):'                                 <div class="fp-margin-bottom">                                     '+fp.ui.locale("shared-type-in","Please type in the product you want added to your list. You can change the quantity after you add it.")+'                                     <div class="fp-notification fp-error fp-margin-top"><div class="fp-icon-error"></div><div class="fp-notification-message">'+fp.ui.locale("shared-item-is-required","Item is required.")+'</div></div>                                 </div>                                 <ul class="fp-product-list fp-product-list-sm fp-product-list-not-found">'+fp.ui.renderTemplate(x,{item:c})+"</ul>                             "),p||l.disableNoProductsFound?(p='<span class="hidden"></span>',h.parent().find("> .fp-modal-intro hr").remove()):p="search"!=l.mode||s.find('input[name="fp-input-search"]').val()?fp.ui.renderTemplate(l.notFoundTemplate||"component/0/result-not-found.html",{type:fp.ui.locale("shared-products-low","products")}):fp.ui.locale("shared-type-in","Please type in the product you want added to your list. You can change the quantity after you add it.")),l.enableAddAll&&(p+='<div class="fp-add-all-wrap fp-text-right"><button class="fp-btn fp-btn-add-all-items" data-action="add-all-products">'+fp.ui.locale("shared-add-all-products","Add All Products to List")+"</button></div>");var D,k=s.find(".modal-header"),O=k.find("h5").addClass("hidden");if(k.find("h3 span").html(e),l.subTitle&&O.removeClass("hidden").find("span").html(l.subTitle),p||(D="fp-animated-loading-container",p=fp.ui.renderTemplate("component/0/animated-loading.html")),h.removeClass("fp-animated-loading-container").addClass(D).html(p),s.off("shown.bs.modal.productsModal hide.bs.modal.productsModal"),f.length)fpConfig.enableMobile&&h.length&&fp.lozad(h[0].querySelectorAll("img[data-src]")).observe(),_.each(f,function(e){e=fpUtil.getProduct(e),U=h.find(".fp-item .fp-item-action[data-product-id="+e.id+"]"),(P=U.data("fp.ui.Component"))&&P.destroy(),(a=l.hashedProductAds&&l.hashedProductAds[e.id])&&(a.product=e),new fp.ui.ProductActions(U,{item:e,listManager:C,listName:l.listName,listPosition:l.listPosition,onRefreshUI:l.onRefreshUI,stopPropagation:!a})}),s.on("shown.bs.modal.productsModal",function(){s.off("click",'[data-action="clip-offer"]').on("click",'[data-action="clip-offer"]',function(e){e.preventDefault();var t=$(this),i=_.findWhere(f,{id:t.closest(".fp-item").attr("data-product-id")});i&&i.clippable_offer&&(i.clippable_offer.is_clipped?fp.ui.showOfferModal(i.clippable_offer):fp.ui.clipOffer(i.clippable_offer,{$button:t,disableCouponUpSell:!0,apiOptions:{errorSelector:s.find(".fp-error")}}).done(function(){var e,t,n=_.indexBy(f,"id");h.find(".fp-item").each(function(){t=$(this),(e=n[t.attr("data-product-id")])&&e.clippable_offer&&e.clippable_offer.id==i.clippable_offer.id&&t.find('[data-action="clip-offer"]').toggleClass("fp-is-offer-clipped",fpUtil.getBoolean(i.clippable_offer.is_clipped)).toggleClass("fp-disabled",fpUtil.getBoolean(i.clippable_offer.is_clipped))})}))}).off("click",'[data-action="add-all-products"]').on("click",'[data-action="add-all-products"]',function(e){e.preventDefault();var t,i=fp.listManager,r=_.find(f,function(e){return!i.getItem(e.id,!0)});r&&(t=i.listItemAdd(null,{item:r}).then(function(){var e,t=[];if(_.each(f,function(e){e==r||i.getItem(e.id,!0)||t.push(i.listItemAdd(null,{item:e}))}),t.length){var n=$.Deferred();fp.one(fp.events.LIST_ITEMS_REFRESHED,n.resolve),t.push(n.promise()),e=$.when.apply($,t)}return e}),new fp.ui.Loading({appendTo:this,promiseHide:t,enableEvents:!0,showOnInstantiate:!0,destroyOnHide:!0})),$.when(t).done(function(){fp.ui.closeActiveModal()})})});else if(c){var U,A=h.find(".fp-item"),P=(U=A.find(".fp-item-action[data-list-item-id="+c.id+"]")).data("fp.ui.Component"),L=A.find("textarea.fp-item-note");P&&P.destroy(),L.length&&U.add(A.find(".fp-btn-save-note")).click(function(e){e.preventDefault();var t=A.find(".fp-error").hide().first(),n=S(L.val()).trim().s;if(n){if(!$(e.target).hasClass("fp-btn-save-note"))return;var i=A.attr("data-list-item-id");if(!i)return;fp.trigger(fp.events.LIST_ITEM_UPDATE,{listManager:C,item:{id:i,note:n}}),s.modal("hide")}else e.stopImmediatePropagation(),t.show()}),(a=l.hashedProductAds&&l.hashedProductAds[c.id])&&(a.product=c),P=new fp.ui.ProductActions(U,{item:c,listManager:C,listName:l.listName,listPosition:l.listPosition,onRefreshUI:function e(t,n){if(fpUtil.getEventNs(t)==fp.events.LIST_ITEM_CHANGED){if(!n.itemChangeSuccess)return;var i,r=fpConstants.listItemChangeType,a=n.oldListItemId||n.item.id;switch(n.itemChangeType){case r.ADD:case r.INCREMENT:i=n.item.id;break;case r.REMOVE:i=fpUtil.getNewItemId(),P.destroy(),c={id:i,note:n.item.note},P=new fp.ui.ProductActions(U,{item:c,onRefreshUI:e})}h.find("[data-list-item-id="+a+"]").attr("data-list-item-id",i)}var o,s=fp.ui.ListManager;u.isShown&&_.each(d,function(e){(o=C.getItem(e,!0))&&s.getItemQuantity(o,!1,!1,!0)});_.isFunction(l.onRefreshUI)&&l.onRefreshUI(t,n)},stopPropagation:!a})}s.on("shown.bs.modal.productsModal",function(){_.size(l.hashedProductAds)&&(fpUi.triggerTrackUrls(l.productAds),s.off("click.productsModal.fp contextmenu.productsModal.fp"),s.on("click.productsModal.fp contextmenu.productsModal.fp",".fp-item .fp-item-price span.fp-price-link",function(e){"click"==e.type&&(e.preventDefault(),e.stopImmediatePropagation());var t=$(this).closest(".fp-item").attr("data-product-id");t&&fpUi.onProductAdClick(e,l.hashedProductAds[t])}).on("click.productsModal.fp contextmenu.productsModal.fp",".fp-item",function(e){var t=$(this).attr("data-product-id");t&&fpUi.onProductAdClick(e,l.hashedProductAds[t])})),_.size(l.bannerAds)&&fpUi.loadModule({elementSelector:s.find('[data-role="banner-ad"]'),name:"banner-view-carousel",zone_type:"checkout_product_upsell_banner_top",disableNavigation:!0,containerClass:""}).then(function(e){return e.init()}),s.on("click.productsModal.fp",'[data-action="see-price-modal"]',function(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(this);fpUi.closeActiveModal(),fpUi.showShopIntentModal({force:!0,fulfillmentIdentifier:"price",next:t.attr("href")})}).on("click.productsModal.fp",'[data-action="add-instructions"]',function(e){e.preventDefault();var t=$(this).toggleClass("collapse-show").closest(".fp-item");t.find('[data-role="add-instructions"]').toggleClass("show"),t.toggleClass("fp-active-instructions")})}),_.isFunction(l.onClose)&&s.on("hide.bs.modal.productsModal",l.onClose)}else fp.ui.hideModal(s)}return fp.on(fp.events.PRODUCTS_MODAL_SHOW,function(e,r){var n=(r=$.extend({$modal:fp.$productsModal},r)).$modal.toggleClass("fp-modal-product-search","search"==r.mode);if(!_.getObject(n.data("bs.modal")).isShown||r.openedFromBannerAd){_.isString(r.productIds)&&(r.productIds=$.trim(r.productIds).split(",")),_.isString(r.productUpcs)&&(r.productUpcs=$.trim(r.productUpcs).split(","));var t,a,i=_.getArray(r.productIds),o=_.getArray(r.productUpcs),s={fields:fp.productFields},l=function(e){var t,n=e.$modal,i=_.getObject(n.data("bs.modal")),r=_.getArray(e.productIds),a=_.getArray(e.productUpcs),o=[],s=n.find(".modal-body > .fp-modal-content"),l=fp.cache.product;r.length&&(_.each(r,function(e){l.items[e]||o.push(e)}),t=l.items[r[0]]?l.items[r[0]].name:null),a.length&&(_.each(a,function(e){l.items[e]||o.push(e)}),t=l.items[a[0]]?l.items[a[0]].name:null),e.title=e.title||t||fp.ui.locale("shared-products","Products");var c=n.find(".modal-header"),u=c.find("h5").addClass("hidden");c.find("h3 span").html(e.title),e.subTitle&&u.removeClass("hidden").find("span").html(e.subTitle);var d=s.parent().find("> .fp-modal-intro").empty();return e.introContent&&(d.append(e.introContent),d.append('<hr class="fp-margin-caps" />')),(fpUtil.isPromise(e.promise)||o.length)&&s.addClass("fp-animated-loading-container").html(fp.ui.renderTemplate("component/0/animated-loading.html")),i.isShown||n.modal("show"),o}(r),c=n.find(".modal-body"),u=c.find("> .fp-modal-search"),d=_.getObject(n.data("fp-scope"));if(n.data("fp-scope",d),_.isFunction(d.onSearchBeforeChange)&&fp.off(fp.events.SEARCH_BEFORE_CHANGE,d.onSearchBeforeChange),_.isFunction(d.onShown)&&n.off("shown.bs.modal.productsModal",d.onShown),"search"!=r.mode||r.disableSearchForNoProducts){var f=u.data("fp.ui.Component");f&&f.destroy(),u.remove(),u=$()}fpUtil.isPromise(r.promise)?t=r.promise.then(function(e){r.products=a=e.items}):l.length?(o.length?s.identifier=l.join(","):s.id=l.join(","),t=fpService.productService.get(s).then(function(e){a=e.items;var t=fp.cache.product;_.each(e.items,function(e){t.items[e.id]=e,o.length&&e.identifier&&i.push(e.id)}),_.each(i,function(e){t.items[e]||(t.items[e]={id:e})}),r.productIds=i})):a=r.products,/*!fpConfig.enableMobile &&*/"search"==r.mode&&(t=$.when(t).then(function(){if(!r.disableSearchForNoProducts||_.size(a)){var e;if(!u.length){u=$('<div class="fp-modal-search"></div>').insertBefore(c.find("> .fp-modal-content"));var t=_.firstObject(fpConfig.modules.searchBox);e=fp.ui.loadModule({elementSelector:u,name:"search-box",disableRouteChange:!0,type:"product",fixedSearchIcon:t.fixedSearchIcon,disableDropdown:t.disableDropdown,enableAutoResize:t.enableAutoResize,disableAutoLoad:t.disableAutoLoad,enableAutoLoadLocal:t.enableAutoLoadLocal,version:t.version,enableTypeahead:fpConfig.enableMobile}).then(function(e){return e.init()}),d.onShown=function(){var e=u.data("fp.ui.Component");e&&e.reset()},n.on("beforeshown.bs.modal.productsModal",d.onShown)}return d.onSearchBeforeChange=function(e,t){if("product"==t.type){if(!t.q)return r.products=a,void p(r);var n=u.data("fp.ui.Component");n&&n.busy();var i={q:fpUtil.getUndefinedIfEmpty(t.q),sort:"popularity",limit:fpConstants.pager.ITEMS_PER_PAGE,fields:fp.productFields};t.department_id&&S(i.department_id).ne(fp.defaultDepartment.id)&&(i.department_id=t.department_id,i.department_id_cascade=!0),_.isObject(r.listManager)&&(i.store_id=r.listManager.getList().store_id),fpService.productService.get(i).done(function(e){r.products=e.items,p(r)}).always(function(){n&&n.idle()})}},fp.on(fp.events.SEARCH_BEFORE_CHANGE,d.onSearchBeforeChange),e}delete r.mode}).always(function(){var e;if("search"==r.mode&&(e=S(r.searchTerm).trim().s,r.isSearching=!!e),p(r),r.isSearching){delete r.isSearching;var t=u.data("fp.ui.Component");if(t){t.$element.find('form[name="fp-search"] input[name="fp-input-search"]').val(e);var n=t.getValue();n.type="product",d.onSearchBeforeChange(null,n)}}})),$.when(t,fpUtil.map.load({service:fpService.tagService,payload:{type:"store_price_mode,product_status,sale_configuration_type,substitution_type"}})).done(function(){p(r)})}}).on(fp.events.PRODUCTS_MODAL_HIDE,function(){fp.ui.hideModal(fp.$productsModal)}),n}}),fp.Component=fp.Class.extend({construct:function(e,t,n,i){if(this.id=_.uniqueId("c-"),fp.Component.items[this.id]=this,e=$(e),this.initialized=this.rendered=!1,this.config=t=_.defaults(t,{enableLazyInit:!1}),this.scope=$.extend({},fp.defaultScope),(this.scope.controller=this).scope.config=t,this.$embeddedTemplate=S(e.prop("nodeName")).eq("script",!0)&&e,this.size={width:0,height:0},this.promiseQueue={},this.dependencies={load:{file:[]}},this.$embeddedTemplate?this.template=fpUi.renderTemplate(e.attr("data-id"),null,null,!0):this.$element=e,n=n||this.template||t.template||e&&e.attr("data-template"),_.isString(n)&&S(n).endsWith(".html")){var r=n.match(fpUtil.regExp.matchLayout);1<_.size(r)&&(t.layout="layout-"+r[1]),n=fpUi.getTemplate(n)}if(this.template=t.template=n||$.noop,i!=this&&(this.parent=i),this.enabled=!0,fp.disableRender){var a=this;_.defer(function(){a.render=$.noop})}},init:function(t,e){var n,i,r=this,a=this.config;if(e=_.getObject(e),a.enableLazyInit&&(!this.parent||e.enableLazyInit)&&!e.force&&!this.initialized)return $.when();var o=$.Deferred();return fp.isUnloading?o.promise():this.enabled?(this.__deferredLoading=o,this.initialized||(n=fpUi.loadFileDependencies(this.dependencies.load.file,{apiOptions:{apiContext:this.id}}),this.$element.data("fp.ui.Component",this),a.requireUnauthenticated&&fpUtil.isAuthenticated()&&(i=fp.logout())),a.enableAnimateIn&&this.rendered&&"none"!=this.$element.css("display")&&(this.__$clonedElement=this.$element.clone().removeAttr("id"),this.$element.replaceWith(this.__$clonedElement).appendTo(fp.__$freshop)),this.initWebCollage(),$.when(n,i).done(function(e){r.initialized=!0,fpUtil.getBoolean(t,!0)&&r.render()})):o.reject("Component has not been enabled").promise()},refreshData:function(e){if(this.rendered){var t=this.init(e);return fpUtil.showProgress(t),t}},renderPlaceholder:function(){var e;if(this.config.enableLazyInit){var t=this;e=this.__lazyInit().done(function(){delete t.__rendered,t.init(!0,{force:!0})})}return $.when(e)},render:function(e,t){this.rendered||(this.__rendered=!0),t=_.getObject(t);var n=this.config;if(fpUtil.isJQuery(this.template)&&this.$element&&this.$element[0]==this.template[0])this.__deferredLoading&&(this.__deferredLoading.resolve(),delete this.__deferredLoading);else if(this.initialized||t.force){$.extend(this.scope,e);var i,r=this,a=!fpUtil.isNull(this.$element),o=this.template;try{i=fpUi.renderTemplate(t.template||this.template,this.scope,!1,!0)}catch(e){i=e.toString(),fp.notifier.notify(e,{severity:"error",metaData:{"meta data":{"Component Name":n.name,"Component Selector":S.getString(n.elementSelector).substr(0,500),"Component Layout":n.layout,Template:S.getString(o).substr(0,500)}}})}if(a&&!n.replaceElement)(t.$element||this.$element).html(i);else{var s=$(i);n.replaceElement&&(this.$origElement=this.$element.removeData("fp.ui.Component").replaceWith(s),s.data("fp.ui.Component",this)),this.$element=s}var l=this.$element;if(this.$embeddedTemplate&&!a&&this.$embeddedTemplate.replaceWith(l),this.rendered&&l.reflow(),this.$element.data("fp.ui.Component",this),l.off(),this.__attachScopeEvents(),this.__resetClass(),this.__$comment||(this.__$comment=$(fpUi.getComment({name:n.name,path:n.path,selector:fpUtil.getStateValue(!_.isObject(n.elementSelector),n.elementSelector)})).insertBefore(n.enableAnimateIn&&this.rendered?this.__$clonedElement:l)),n.enableAnimateIn)if(this.rendered&&_.size(this.__$clonedElement)){l.insertAfter(this.__$comment),l.parent().css("position","relative");var c=this.$element.position();this.__$clonedElement.addClass("fp-module-animate-out").css({top:c.top,marginTop:l.css("marginTop"),width:l.width()})}else l.addClass("fp-module-animate-in");if(i instanceof Error?(l.addClass("hidden"),this.rendered=!1):this.rendered||(this.rendered=!0),this.size.width=l.width(),this.size.height=l.height(),this.__deferredLoading&&this.__deferredLoading.resolve(),n.enableAnimateIn)if(r.rendered&&_.size(r.__$clonedElement)){var u="fadeOut";l.children().length||(u="slideUp",r.__$clonedElement.removeClass("fp-module-animate-out")),r.__$clonedElement[u]("normal",function(){r.__$clonedElement&&(r.__$clonedElement.remove(),delete r.__$clonedElement,d())})}else l.removeClass("fp-module-animate-in"),.5*r.size.width>r.size.height?l.fadeIn("normal",d):l.css("display","none").slideDown("normal",function(){l.css("display",""),d()});else _.defer(d)}else n.enableLazyInit?this.renderPlaceholder():(fp.log("Error: render() called before init()",this),this.__deferredLoading&&(this.__deferredLoading.resolve(),delete this.__deferredLoading));function d(){r.initWebCollage();var e=$.Event(fp.events.RENDERED),t=_.first(r.$element);e.target=t,$(r.scope).trigger(e),e.isDefaultPrevented()||fp.trigger(e),r instanceof fp.Module.View&&((e=$.Event(fp.events.VIEW_MODULE_RENDERED)).target=t,$(r.scope).trigger(e),e.isDefaultPrevented()||fp.trigger(e))}},resize:function(e){var t=this.rendered&&this.$element.filter(":visible").length&&this.size.width!==this.$element.width();return t&&!e&&this.render(),t},busy:$.noop,idle:$.noop,disable:$.noop,enable:$.noop,enqueuePromise:function(e){if(fpUtil.isPromise(e)&&"pending"==e.state()){var t=this,n=_.uniqueId();this.promiseQueue[n]=e.always(function(){delete t.promiseQueue[n]})}return $.when(e)},cancelQueuedPromises:function(){var n=this;_.size(this.promiseQueue);_.each(this.promiseQueue,function(e,t){e&&("pending"==e.state()&&e.promise().deferred().reject("abort"),delete n.promiseQueue[t])}),_.each(fp.apiQueue,function(e){e&&e.apiContext==n.id&&(!0,e.promise.deferred().reject("abort"))})},initWebCollage:function(){var e=this.config.onWebCollageReady;if(fpConfig.enableWebCollage&&_.isFunction(e))if(window.Webcollage)this.rendered?_.delay(e,300):_.delay($.proxy(this.initWebCollage,this),100);else if(!this.__promiseWebCollage){fp.Component.__promiseWebCollage||(fp.Component.__promiseWebCollage=$.Deferred().promise(),fpUi.loaded().then(function(){return fpUi.loadScript("https://scontent.webcollage.net/api/v2/product-content")}).always(function(){fp.Component.__promiseWebCollage.deferred().resolve(),delete fp.Component.__promiseWebCollage}));var t=this;this.__promiseWebCollage=fp.Component.__promiseWebCollage.then(function(){window.Webcollage&&t.initWebCollage()})}},destroy:function(e){this.__promiseWebCollage&&this.__promiseWebCollage.deferred().reject(),this.initialized=this.rendered=!1,$(this.scope).off(),delete fp.Component.items[this.id],this.cancelQueuedPromises(),this.__prepareForDestroy(),this.$element&&(this.$element.off(),this.$element.removeData("fp.ui.Component"),this.__$comment&&this.__$comment.remove(),e||(this.__resetClass(!0),fpUtil.isJQuery(this.template)&&this.$element&&this.$element[0]==this.template[0]||(this.$embeddedTemplate?this.$element.replaceWith(this.$embeddedTemplate):this.$element.empty())))},__lazyInit:function(){var e=$.Deferred();return fp.lozad(this.$element[0],{load:e.resolve}).observe(),e.promise()},__attachScopeEvents:function(){var i=this,t=$(this.scope).off(),n=fp.store.id;t.on(fp.events.INITIALIZE,function(e,t){i.init(!0)}).on(fp.events.ROUTE_BEFORE_CHANGE,function(e,t){t.fromState.abstract||t.fromState==t.toState||i.cancelQueuedPromises()}).on(fp.events.STORE_CHANGED,function(e,t){S(n).eq(fp.store.id)||(n=fp.store.id,i.config.initializeOnStoreChange?i.init(!0):i.config.renderOnStoreChange&&i.render())}),_.each(this.config.refreshDataTriggers,function(n,e){e=S(e).dasherize("_").toUpperCase().s,_.has(fpEvent,e)&&t.on(fpEvent[e],function(e,t){(t=_.getObject(t)).rendered&&t.name&&_.contains(n,t.name)&&i.refreshData()})})},__resetClass:function(e){this.$element.replaceClass(fpUtil.regExp.matchLayoutClass,""),e||this.$element.addClass(fpUtil.formatString("fp-{0}",S.getString(this.config.layout,"layout-0")))},__prepareForDestroy:function(){delete this.parent;var e=this.scope;if(_.isObject(e))for(var t in delete e.controller,e)_.isFunction(e[t])&&(e[t]=$.noop);for(var t in this)_.isFunction(this[t])&&(this[t]=$.noop);this.init=this.enqueuePromise=function(){return $.when()}}}),$.extend(fp.Component,{items:{},parseHtml:function(e,t){var n={};if(n.html=S(e).trim().s,!e)return n;var o,s,l,c,i=fpUtil.regExp,u=i.matchDataId;if(i.matchFreshopTemplate.lastIndex=0,e=e.replace(i.matchFreshopTemplate,function(e,t,n,i,r,a){return o=n,s=a,u.lastIndex=0,o&&(c=o.match(u)),l=c&&2<c.length?c[2]:"undefined",fpUi.cacheTemplate(l,s),""}),t){var r,a,d=[];i.matchDataModule.lastIndex=0,e.replace(i.matchDataModule,function(e,t,n){o=fpUtil.attrParams(n," "),a=o["data-module-config"],S(a).startsWith("{")&&(a=JSON.parse(a)),a||(r=S.getString(o["data-module"]),a={name:r,selector:o["data-role"]&&fpUtil.formatString('[data-role="{0}"]',o["data-role"])||r&&fpUtil.formatString('[data-module="{0}"]',r)}),d.push(a)}),_.size(d)&&(n.modules=d)}return n.html=S(e).trim().s,n},trigger:function(e,t,n){var i,r;if(e){var a,o=fpUtil.getEventNs(t),s=o==fpEvent.MODULE_LOAD,l=$(e);if(s||o!=fpEvent.INITIALIZE||!l.length||l.data("fp.ui.Component")||(s=!0),s)return fp.loaded&&(a=fp.Module.__loadModule(e)),void(n&&_.isFunction(n.callback)&&(fp.loaded||(a=$.Deferred().promise(),fp.one(fp.events.LOADED,a.deferred().resolve)),a.always(n.callback)));i=l.data("fp.ui.Component")}if(i instanceof fp.Component)$(i.scope).trigger(t,n);else for(var c in this.items)r=this.items[c],$(r.scope).trigger(t,n)},off:function(e,t,n){var i;e&&(i=$(e).data("fp.ui.Component")),i instanceof fp.Component?$(i.scope).off(t,n):_.each(this.items,function(e){$(e.scope).off(t,n)})}}),fp.Module=fp.Component.extend({construct:function(e,t,n,i){t=_.defaults(t,{enableLazyInit:!1,disableShowProgress:!0,enableModuleCss:fpConfig.enableModuleCss}),this._super(e,t,n,i),$.extend(t,this.$element.attrs("data-freshop-")),fpConfig.enableMobile&&2!=t.version&&t.enableModuleCss&&this.dependencies.load.file.push(fpUtil.formatString("{0}.css",t.name)),this.dependencies.init={module:[]},fp.Module.__add(this),fp.isBot&&_.defer(function(){t.requireStore&&(t.requireStore.disabled=!0)})},init:function(e,t){var a=this,o=this.config;$.extend(o,this.$element.attrs("data-freshop-"));var n=this._super(!1,t).then(function(){var e,t=o.requireStore,n=t&&!t.disabled;if(fp.store.id&&_.contains(S(o.shopIntentEnableFor).split(","),fp.store.id))e=a.enqueuePromise(fpUi.showShopIntentModal(!0));else if(o.enableShopIntentModal){var i,r=window.location.hostname;!n&&S(window.document.referrer||r).contains(r)&&(i=fp.getSessionCookie().shopIntentModalLastViewedAt),(n||!i||24<=dateFns.differenceInHours(new Date,i))&&(e=a.enqueuePromise(fpUi.showShopIntentModal()))}return n&&t.enableRedirect&&(e=e?a.enqueuePromise(e.then(null,function(){return fpUtil.ensureStore(t)})):fpUtil.ensureStore(t)),e}).then(function(){return a.__initLocale()});return o.renderModules&&_.size(a.modules)&&(n=n.then(function(){var t=[];return _.each(a.modules,function(e){t.push(e.init(!1))}),$.when.apply($,t)})),n.always(function(){fpUtil.getBoolean(e,!0)&&a.render()})},render:function(e,t){this._super(e,t);var n=this,i=this.$element;this.config.renderModules&&_.each(n.modules,function(e){e.$element.off(),e.$element.removeData("fp.ui.Component"),e.$element=i.find(e.config.selector),e.$element.data("fp.ui.Component",e),e.render()}),!fp.loaded&&this.config.visibleAfterLoad&&(i.addClass("fp-invisible"),fp.one(fp.events.LOADED,function(){n.$element.removeClass("fp-invisible")}))},destroy:function(e){this._super(e),fp.Module.__remove(this)},loadModule:function(e,t){t=_.getObject(t);var n,i=e.elementSelector;return _.isString(i)&&(i=S(i).startsWith("#")?$(i):this.$element.find(e.elementSelector)),i.data("fp.ui.Component")||(n=fpUi.loadModule(e,this),fpUtil.getBoolean(t.autoRender,!0)&&(n=n.then(function(e){return e.init(!0)}))),$.when(n)},__attachScopeEvents:function(){this._super();var n=this,e=$(this.scope).on(fpEvent.PAGE_CHANGE,function(){$.contains(document.documentElement,n.$element[0])||n.destroy(!1)});this.config.enableResponsiveContainer&&e.on(fp.events.WINDOW_RESIZE,function(e,t){t.width!=t.oldWidth&&n.__setMediaClass()})},__initLocale:function(){var e;return fp.config.enableLocale&&this.config.enableLocale&&"en"!=fp.locale&&(e=fp.api(fpUtil.formatString("{0}/i18n/{1}.json",this.config.basePath,fp.locale),null,{cache:!0,apiKey:"sdk",handleErrors:!1}).then(function(e){var t={};t[fp.locale]=e,$.i18n().load(t)},$.noop)),$.when(e)},__resetClass:function(e){var t=this.config,n=this.$element,i=S.getString(n.prop("className")),r=i.indexOf("fp-core");if(0<=r&&(i=i.substr(0,r)),!e){var a=fpUtil.regExp.matchNonAlphanumeric;a.lastIndex=0,i+=fpUtil.formatString(" fp-core fp-module{0} fp-{1}{2} fp-{3}{4}",fpUi.getClassName(this instanceof fp.Module.View," fp-module-view"),t.name.replace(a,"-"),fpUi.getClassName(t.className," "+t.className),t.layout,fpUi.getClassName(n.hasClass("fp-invisible")," fp-invisible"))}n.prop("className",i),this.__setMediaClass()},__setMediaClass:function(e){var t=this.config.enableResponsiveContainer;if(t){var n=this.$element,i=n,r=fpUi.getContainerPadding(i),a=Math.round(i.width()+2*r),o=fpUi.getMediaSize(a),s="";_.isObject(t)&&_.has(t,o)&&(o=t[o]),o&&(o=o.toLowerCase(),_.find(["xs","sm","md","lg"],function(e){return s&&(s+=" "),s+="fp-media-"+e,e==o}));var l=fpUtil.regExp.matchMediaClass;l.lastIndex=0,n.replaceClass(l,s,!0)}}}),$.extend(fp.Module,{items:[],addConstructor:function(e,t){this[e=(e=S(e).replaceAll("/","-").camelize().s)[0].toUpperCase()+e.substring(1)]=t},getConstructor:function(e){return this[e=(e=S(e).replaceAll("/","-").camelize().s)[0].toUpperCase()+e.substring(1)]},trigger:function(e,t,n){var i;if(e&&(i=$(e).data("fp.ui.Component")),i instanceof fp.Module)$(i.scope).trigger(t,n);else{var r;fp.log(t,n);for(var a=0;a<this.items.length;a++)r=this.items[a],$(r.scope).trigger(t,n)}},get:function(t,e){if(t){e=_.getObject(e);var n=_.isObject(t),i=e.attrs,r=e.configAttrs,a=_.size(i)?_.matcher(i):null,o=_.size(r)?_.matcher(r):null,s=_.size(e.exclude)?_.ensureArrayLike(e.exclude):null;return _.find(_.size(e.items)?e.items:this.items,function(e){if((n&&e instanceof t||!n&&e.config.name==t)&&!_.contains(s,e.config.name))return(!a||a(e))&&(!o||o(e.config))})}},getViewModule:function(e){_.isObject(e)||(e={attrs:{rendered:!0}});var t=this.get(fp.Module.View,e),n=t&&t.$element.data("fp.ui.Component");return n&&n!=t&&n.config.name!=t.config.name&&(e.items=[n],t=this.get(fp.Module.View,e)||t),t},sort:function(){if(fp.modulesLoaded){var n=fpConstants.priority.TRIVIAL;this.items.sort(fpUtil.sortFirstBy(function(e,t){return fpUtil.sortHelper(e.config.priority||n,t.config.priority||n)}).thenBy(function(e,t){var n=e.$element[0],i=t.$element[0];if(!n||!i)return-1;if(1!=n.nodeType||1!=i.nodeType)return-1;if(n===i)return 0;if(_.isFunction(n.compareDocumentPosition))try{if(2&n.compareDocumentPosition(i))return 1}catch(e){}return-1}))}},__loadModule:function(e){var a,o,t,s,n,l=this,c={},u=$();return $(e).each(function(){s=$(this),_.each(fpConfig.modules,function(e,r){t=_.isArray(e)?e:[e],_.each(t,function(e){if(a=e.elementSelector,(o=s.filter(a)).length||(o=s.find(a)),o.length){u=u.add(o),c[r]||(c[r]=[]),c[r].push(e);for(var t,n=l.items,i=0;i<n.length;i++)(t=n[i]).config.elementSelector==a&&(t.destroy(),i--)}})})}),_.size(c)&&(fp.ui.preInitModules(c,u),n=fp.ui.loadModules(c,u,!0)),$.when(n)},__add:function(e){this.items.push(e),fp.Module.sort()},__remove:function(e){_.removeWhere(fp.Module.items,{id:e.id})}}),fp.Module.View=fp.Module.extend({construct:function(e,t,n,i){t=_.defaults(t,{priority:fp.constants.priority.MAJOR,enableLazyInit:!1,disableShowProgress:!1}),this._super(e,t,n,i),fpConfig.enableModuleCss||fpConfig.enableMobile||this.dependencies.load.file.push("freshop-module.css");var r=this.$element;r.attr("data-role")||r.attr("data-role","handle-errors"),r.replaceClass("fp-module","fp-module fp-module-view")},init:function(e){var t,n=this,i=this._super;return fp.loaded&&(t=fpService.assetVersionService.get().then(function(e){fp.isUnloading||!e.deploy_id||e.deploy_id===fp.deployId||fp.getSessionCookie().reload||(fp.setSessionCookie({reload:!0}),fp.isUnloading=freshop.unloading=!0,window.location.reload(!0))})),t=$.when(t).then(function(){return i.call(n,e)}),fpUtil.showProgress(t),t},__attachScopeEvents:function(){this._super();var t=this;_.defer(function(){$(t.scope).one(fp.events.VIEW_MODULE_RENDERED,function(e){fp.loaded||$(e.target).data("fp.ui.Component")!=t||$.when.apply($,e.promises).always(function(){fpUi.unblockUI({force:!0}),fp.viewModuleRenderTime=new Date})})})}}),fp.Module.Layout=fp.Module.View.extend(),fp.Module.Order=fp.Module.View.extend({construct:function(e,t,n,i){this._super(e,t,n,i),this.scope.selectedList={},this.__formLoader=new fpUi.Loading,this.__summaryLoader=new fpUi.Loading},busy:function(e){if(!this.__busy){var t=this.$element.find('form[name="fp-form-checkout"]');(e=$(e)).length&&e[0]!=t[0]||(e=t.find('button[type="submit"][data-action="continue"]:visible')),this.__busy=!0,fpUi.disableForm(t),fpUtil.showProgress(),e.length&&this.__formLoader.show({appendTo:e})}},idle:function(){delete this.__busy,fpUi.enableForm(this.$element.find('form[name="fp-form-checkout"]')),fpUtil.hideProgress(),this.__formLoader.hide()},refreshSummary:function(n){var e=this.scope,t=e.order,i=fpUtil.map.get("orderStatus").get(t.status_id||"open");if(!fpConfig.enableCheckoutSingleStep&&e.stateManager.is(e.states.checkout)||"user_placed"==i.identifier&&!fpUi.OrderManager.isEditable(t,e.store))return $.when();var r,a,o,s=this,l=e.fulfillmentType,c=t.fulfillment_slot_id||e.stateParams.slot_id;if(!(n=_.getObject(n)).fulfillment_slot_id&&c&&(n.fulfillment_slot_id=c),_.contains(["open","user_placed"],i.identifier)){var u,d,f=_.getObject(l.config&&l.config.slot_selection);if(n=$.extend({fulfillment_type_id:l.id},_.pick(t,"fulfillment_address_1","fulfillment_address_2","fulfillment_city","fulfillment_state","fulfillment_postal_code","fulfillment_postal_code","fulfillment_country","fulfillment_slot_id"),n),_.contains(["pickup","drop_off"],l.identifier)&&delete n.fulfillment_postal_code,"optional"==e.slotSelectionMode){var p=this.$element.find('[data-role="dropdown-slot-selection-mode"]').data("fp.ui.Dropdown");(u=p?p.getValue():this.$element.find('[name="slot-selection-mode"][type="radio"]:checked').val())||1!=_.size(f.options)||(u=_.firstObject(f.options).identifier),u=u||fp.session.preference.slot_selection_mode}if("asap"==u&&delete n.fulfillment_slot_id,"user_placed"==i.identifier)n.checkout||(n.checkout=_.getObject(t.authorized_payment||_.first(t.authorized_payments)).method),"new"==n.checkout&&delete n.checkout,_.each(n,function(e,t){S(t).startsWith("for_")||(n[fpUtil.formatString("for_{0}",t)]=e,delete n[t])}),n.id=t.id,d=fpService.orderService;else{if(n.id=t.shopping_list_id||fp.listManager.getList().id,fpUtil.isNewItem(n.id))return $.when();n.order_id=t.id,n.check_order_minimum=!0,n.checkout||(n.checkout=fp.session.preference.saved_payment_method||fp.session.preference.payment_method||_.getObject(t.authorized_payment||_.first(t.authorized_payments)).method),"new"==n.checkout&&delete n.checkout,d=fpService.shoppingListService}r=d.get(n,{formatForRestfulId:!0}).done(function(e){o=e}),t.id&&t.__dirty&&(a=fpService.orderService.get(t.id).done(function(e){s.setOrder(e)}))}return r=$.when(r,a).always(function(){_.size(o)&&(_.empty(e.selectedList),$.extend(!0,e.selectedList,o),t.id&&(t.amount_due=o.amount_due)),s.rendered&&s.renderSummary(),"modal"!=s.config.intent&&fp.trigger(fp.events.CHECKOUT_SUMMARY_REFRESHED)}),this.__summaryLoader.isShown||this.__summaryLoader.show({appendTo:this.$element.find('form[name="fp-form-checkout"] [data-role="order-summary"]'),startDelay:300,promiseHide:r}),r},loadStoreSlots:function(e){var r,a,o,s=this,l=this.scope,t=l.order,c={},n=t.shopping_list_id||fp.listManager.getList().id,i=$.Deferred();return delete l.slotNoMatchingAddress,e=$.extend({for_order_id:t.id,for_shopping_list_id:fpUtil.getStateValue(n&&"0"!=n,n),store_id:l.store.id,fulfillment_type_id:l.fulfillmentType.id,is_available:!0,fields:"id,fulfillment_type_id,location_id,date,time,slot_start,slot_end,booking_close_minutes_prior,additional_fee",sort:"date"},e),fpService.storeSlotService.get(e).then(function(e){var t;if(r=_.getArray(e.items),a=[],_.each(e.reasons,function(e){e.reason_message_md&&a.push(fp.markdownConverter.makeHtml(e.reason_message_md)),t||"undeliverable_delivery_area"!=e.reason_code||(t=!0)}),(l.slotNoMatchingAddress=t)&&2==s.config.version){var n=fp.S.getString(l.fulfillmentType.name).toLowerCase();a.push(fpUi.localef("shared-select-valid-address","Please select a valid {0} address or create a new {0} address",n,n))}for(var i in a.length||(a=void 0),_.isObject(l.orderSlot)&&!_.findWhere(r,{date:l.orderSlot.date,time:l.orderSlot.time})?(r.push(l.orderSlot),fpUtil.sort(r,"date")):delete l.orderSlot,l.fulfillmentType.config&&l.fulfillmentType.config.enable_start_time_only&&(s.config.slotLabelOptions.enableStartTimeOnly=!0),_.each(r,function(e){e.dateTimeLabel=fp.ui.getFulfillmentSlotDateTimeLabel(e,s.config.slotLabelOptions),(o=(o=c[e.date])||(c[e.date]=[])).push(e)}),c)(o=c[i]).length?fpUtil.sort(o,"time"):delete c[i]}).always(i.resolve),i.then(function(){var e=t.fulfillment_slot_id||l.stateParams.slot_id;l.storeSlotsHash=c,l.storeSlots=r,l.storeSlotMessage=a,l.fulfillmentSlot=_.getObject(e&&_.findWhere(l.storeSlots,{id:e})||t.order_slot)})},renderSummary:function(){var e=this.$element,t=this.scope,n=t.order,i=t.selectedList.id?t.selectedList:n,r={order:n,store:t.store},a=fpUtil.map.get("orderStatus").get(n.status_id||"open");_.has(i,"estimated_total_display")?(r.itemTotal=i.estimated_total_display,r.estimatedTotal=i.item_total):(r.itemTotal=i.item_total,r.estimatedTotal=i.order_total),_.each(["fees","discounts","tax_itemization_header","tax_itemization"],function(e){r[e]=i[e]}),r.fulfillmentType=t.fulfillmentType,("open"!=a.identifier||t.stateManager.is(t.states.checkoutReview)||t.stateManager.is(t.states.checkoutConfirmation)||t.orderStoreSettings&&t.orderStoreSettings.tax_included_in_product_price||_.size(i.tax_itemization))&&(r.taxExcluded=!1);var o=S(fpUtil.getObjectFromNamespace("components.checkoutSummary",_.getObject(fp.config.modules.checkout)).layout||"0").trimLeft("layout-").s;e.find('[data-role="order-summary"]').html(fpUi.renderTemplate(fpUtil.formatString("component/{0}/summary.html",o),r)),e.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip();var s=e.find('[data-role="notification-warning"]');if(_.size(i.warnings)&&this.config.enableLargeWarningsBottom){if(_.size(i.warnings)){var l=this;this.__largeWarningsBottom=_.getArray(this.__largeWarningsBottom),i.warnings=_.filter(i.warnings,function(e){if(!(300<=e.length))return!0;_.contains(l.__largeWarningsBottom,e)||l.__largeWarningsBottom.push(e)})}_.size(this.__largeWarningsBottom)&&e.find('[data-role="warnings-bottom"]').removeClass("hidden").html(fpUtil.getMessage(this.__largeWarningsBottom,!1,!0))}_.size(this.__largeWarningsBottom)||(e.find('[data-role="warnings-bottom"]').addClass("hidden"),delete this.__largeWarningsBottom),_.size(i.warnings)?(s.removeClass("hidden"),fpUtil.showWarning(i.warnings,s,{handleScroll:!_.isEqual(i.warnings,this.__warnings),markdownToHtml:!0}),this.__warnings=i.warnings):(s.addClass("hidden"),delete this.__warnings);var c=_.getObject(_.findWhere(r.fees,{type:"hold_provisional"})),u=e.find('[data-role="provisional-hold"]').toggleClass("hidden",!c.description);c.description&&u.length&&(2==this.config.version?fpUtil.showWarning(fp.ui.locale("payment-provisional-hold","Provisional Hold")+" - "+S(c.description).s,u,{handleScroll:!1,disableQueue:!0}):u.find(".fp-notification").html(S(c.description).s),c.label&&u.find("h5").html(S(c.label).s));var d=fp.store[t.fulfillmentType.identifier+"_billing_address_intro_md"];e.find('[data-role="billing-address-intro"]').toggleClass("hidden",!d).find(".fp-notification").html(S(d).s),(fp.device.xs||fp.device.hasTouch)&&e.find('.fp-summary-items [data-toggle="tooltip"]').on("click",function(e){fpUi.showModal({name:"information-modal",template:"component/0/modal.html",className:"fp-confirm-modal fp-information-modal",title:fpUi.locale("shared-more-information","More Information"),content:$(this).attr("data-original-title")})}),this.renderSubmit()},renderSubmit:function(e){e=_.getObject(e);var t,n=this.$element.find('form[name="fp-form-checkout"] button[type="submit"][data-action="continue"]'),i=e.submitLabel||fp.ui.locale("shared-submit-order","Submit Order"),r=fpUtil.getBoolean(e.submitHidden,!0),a=this.scope;if(2==this.config.version&&"open"==fpUtil.map.get("orderStatus").get(a.order.status_id||"open").identifier&&(i=fpUtil.formatString('<span class="fp-btn-label">{0}</span><span class="fp-btn-total" data-role="order-total">{1}</span>',i,a.selectedList.order_total)),n.html()!=i){var o=n.data("fp.ui.Loading");o&&(t=o.$element.detach()),n.html(i)}n.toggleClass("hidden",r).prop("disabled",fpUtil.getBoolean(e.submitDisabled,!1)),t&&n.append(t)},renderStoreSlots:function(a){if(!this.config.enableStoreSlots||2==this.config.version)return a;a=_.defaults(a,{disableRefresh:!1,changedByRender:!0,enableSlotsRender:!0,enableDayRender:!0,intent:this.config.intent});var o=this,e=a.$element||this.$element,n=this.scope,t=n.fulfillmentType,s=n.stateManager,i=n.stateParams,l=_.getObject(n.fulfillmentSlot);if(l.id&&o.dropdownHourOnChange(l.id,a),a.enableSlotsRender){var r,c="",u=_.getObject(t.config&&t.config.slot_selection);if("optional"==n.slotSelectionMode){var d=this.$element.find('[data-role="dropdown-slot-selection-mode"]').data("fp.ui.Dropdown");(r=d?d.getValue():this.$element.find('[name="slot-selection-mode"][type="radio"]:checked').val())||1!=_.size(u.options)||(r=_.firstObject(u.options).identifier),r=r||fp.session.preference.slot_selection_mode}"asap"!=r&&(c=fp.ui.renderTemplate("component/0/checkout-store-slots.html",{storeSlots:n.storeSlotsHash,slotDate:l.date,slotId:l.id,fulfillmentType:t,dropoffLocationId:l.location_id,dropoffLocations:n.dropoffLocations,enableDropoffLocations:a.enableDropoffLocations,addressLocations:n.addressLocations,enableAddressLocations:a.enableAddressLocations,slotSelectionMessage:n.store[fpUtil.formatString("{0}_slot_selection_message",t.identifier)]})),e.find('[data-role="fp-row-store-slot-dropdowns"]').html(c)}if(a.enableDayRender){if(!fp.config.enableCheckOutCalendar||fp.device.hasTouch||fp.device.xs){var f=e.find(".fp-dropdown-day").dropdown({onChange:function(e){o.renderHourSlots(e,a);var t=_.getObject(n.fulfillmentSlot);"modal"!=a.intent&&s.go(s.current,{day:t.id?null:fpUtil.getNullIfEmpty(e),slot_id:t.id},{preventDefault:!0,inherit:!0})}}).data("fp.ui.Dropdown");if(f)"modal"!=a.intent&&(b=i.day),!b&&l.id&&n.order.fulfillment_slot_id&&((b=S(n.order.fulfillment_slot_id).split("-")).shift(),b=b.join("-")),b&&f.setValue(b),f.onChange(b)}else{var p,h,m=e.find('[name="input-checkout-day"]'),g=[],v=0;if(_.each(n.storeSlotsHash,function(e,t){g.push(t)}),_.size(g)&&(1<g.length&&(v=g.length-1),h={disableMobile:!1,allowInput:!1,enable:g,onChange:function(e,t,n,i){var r=fpUtil.formatDate(e[0],"YYYY-MM-DD");o.renderHourSlots(r,a),"modal"!=a.intent&&s.go(s.current,{day:r,slot_id:l.id},{preventDefault:!0,inherit:!1})},appendTo:fp.__$freshop[0],altInput:!0,altFormat:fp.config.calendarDateFormat,locale:fp.config.locale?fp.config.locale:"en",minDate:g[0],maxDate:g[v]},p=m.flatpickr(h),n.order.fulfillment_slot_id||n.stateParams.slot_id||i.day)){var y=n.order.fulfillment_slot_id||n.stateParams.slot_id,b=_.getObject(y&&_.findWhere(n.storeSlots,{id:y})).date||i.day;0<_.size(p)&&p.setDate(b),o.renderHourSlots(b,a)}}a.disableRefresh=null,a.changedByRender=!1}return a},renderHourSlots:function(e,t){var n,i,r=this,a=this.scope,o=e&&a.storeSlotsHash[e],s=a.fulfillmentSlot,l=a.stateManager,c=a.stateParams,u=this.$element.find(".fp-dropdown-hour"),d=u.data("fp.ui.Dropdown"),f=0,p="";_.each(o,function(e){t.locationId&&e.location_id!=t.locationId||(p+=fpUtil.formatString('<li class="fp-dropdown-list-item"><a href="javascript:;" data-value="{0}">{1}</a></li>',e.id,e.time_label||e.dateTimeLabel.timeLabel),f++,n||e.id!=s.id||(n=!0),i=i||e)}),n||(1==f&&i?a.fulfillmentSlot=s=i:(a.fulfillmentSlot=s={},t.changedByRender&&!o&&d&&d.setValue())),u.find(".fp-dropdown-list").empty().append(p),1<f&&a.fulfillmentType.config&&a.fulfillmentType.config.disable_display_hours&&u.closest(".fp-label-hour").removeClass("hidden"),d&&(d.setValue(),d.destroy()),u.dropdown({onChange:function(e){t.disableRefresh||r.dropdownHourOnChange(e,t),"modal"!=t.intent&&l.go(l.current,{day:fpUtil.getStateValue(e,null,c.day),slot_id:e},{preventDefault:!0,inherit:!0})}}),u.length&&((d=u.data("fp.ui.Dropdown")).setValue(s.id),s.id&&d.onChange(s.id))},dropdownHourOnChange:function(e,t){var n=this.$element.find(".fp-dropdown-hour");if(n.length){var i=this.scope,r=e,a={fulfillment_type_id:i.fulfillmentType.id};i.baggingTypeId&&(a.bagging_type_id=i.baggingTypeId),r&&(a.fulfillment_slot_id=r);var o=this.refreshSummary(a);"modal"==t.intent&&new fp.ui.Loading({appendTo:n.closest("form").find('button[type="submit"]:visible'),promiseHide:o,showOnInstantiate:!0,destroyOnHide:!0})}},setOrder:function(e){var t=this.scope,n=t.order;return n!=e&&_.empty(n),t.origOrder=_.getObject(t.origOrder),_.empty(t.origOrder),_.isObject(e)&&(n!=e&&$.extend(!0,n,e),$.extend(!0,t.origOrder,n)),$.when()},save:function(n,t){n=_.getObject(n),t=_.isString(t)?{method:t}:_.getObject(t);var i=this,e=this.scope,r=e.order,a=this.$element.find('form[name="fp-form-checkout"]'),o=this.validate(t);if(!o)return $.Deferred().reject().promise();if(e.origOrder=_.getObject(e.origOrder),t.includeFormValues&&(o=fpUtil.validateForm(a,null,null,t))&&_.defaults(n,fpUi.getFormValues(a,{model:e.origOrder,includeEmpty:!0})),!o)return $.Deferred().reject().promise();if(!t.childServiceCall){var s,l=_.getObject(e.fulfillmentType.config&&e.fulfillmentType.config.slot_selection);if("optional"==e.slotSelectionMode){var c=this.$element.find('[data-role="dropdown-slot-selection-mode"]').data("fp.ui.Dropdown");(s=c?c.getValue():this.$element.find('[name="slot-selection-mode"][type="radio"]:checked').val())||1!=_.size(l.options)||(s=l.options[0].identifier),s=s||fp.session.preference.slot_selection_mode}"asap"==s&&r.id&&r.fulfillment_slot_id&&(n.fulfillment_slot_id=null);var u=e.origOrder.other_attributes;n=fpUtil.getChanged($.extend({},n),_.pick(e.origOrder,_.keys(n))),_.each(n,function(e,t){(!_.isObject(e)||_.size(e))&&S.getString(e)||(_.has(r,t)||_.has(u,t)?n[t+"_clear"]=!0:delete n[t])})}!0!==t.ignoreErrors&&(_.isArray(t.ignoreErrors)||(t.ignoreErrors=t.ignoreErrors?[t.ignoreErrors]:[]),t.ignoreErrors.push("fulfillment_slot_required")),r.id?n.id=r.id:_.defaults(n,{store_id:e.store.id,fulfillment_type_id:e.fulfillmentType.id}),t.parentServiceCall||t.childServiceCall||(n.shopping_list_id=r.shopping_list_id||fp.listManager.getList().id);var d,f=fpUtil.getValueFromNamespace("event.target",t);return this.busy(f),t.method&&(d=fpService.orderService[S(t.method).toLowerCase()]),(d=d||fpService.getItemSaveCall(fpService.orderService,n.id)).call(fpService.orderService,n,t).then(function(e){return t.disableSetOrder?e:(e=e.order||e,i.setOrder(e).then(function(){if(_.result(t,"enableRefreshSummary"))return i.refreshSummary()}).then(function(){return e}))}).done(function(){t.disableIdle||i.idle()}).fail(function(){i.idle()})},validate:function(e){var t=this.$element.find('form[name="fp-form-checkout"]'),n=!0;if(!_.has(e,"errorSelector")){var i=t.find('[data-role="container"] .fp-notification.fp-error');i.length&&(e.errorSelector=i[i.length-1])}return e.includeFormValues&&(n=fpUtil.validateForm(t,null,null,e)),n}}),fp.ListManager=fp.Class.extend({construct:function(e){e=_.getObject(e),this.type=e.type||"list",this.lists=[],this.selectedList=$.extend({},fp.defaultList),this.options=$.extend({type:"list",limit:1,listItemSort:"created_at!",listIdField:"shopping_list_id",listService:fpService.shoppingListService,listItemService:fpService.shoppingListItemService},e);var n=this;this.events=_.concat(this.events,[{name:fp.events.LIST_ITEM_ADD,value:function(e,t){t.listManager.type==n.type&&t.listManager.getList().id==n.getList().id&&(e.handled||(e.handled=!0,n.listItemAdd(e,t)))}},{name:fp.events.LIST_ITEM_INCREMENT,value:function(e,t){t.listManager.type==n.type&&t.listManager.getList().id==n.getList().id&&(e.handled||(e.handled=!0,n.listItemIncrement(e,t)))}},{name:fp.events.LIST_ITEM_REMOVE,value:function(e,t){t.listManager.type==n.type&&t.listManager.getList().id==n.getList().id&&(e.handled||(e.handled=!0,n.listItemRemove(e,t)))}},{name:fp.events.LIST_ITEM_CHANGED,value:function(e,t){t.itemChangeSuccess&&t.listManager.type==n.type&&t.listManager.getList().id==n.getList().id&&(e.handled||(e.handled=!0,n.listItemChanged(e,t)))}},{name:fp.events.LIST_ITEM_UPDATE,value:function(e,t){t.listManager.type==n.type&&t.listManager.getList().id==n.getList().id&&(e.handled||(e.handled=!0,n.listItemUpdate(e,t.item)))}}]),_.each(this.events,function(e){fp.on(e.name,e.value)})},getList:function(e){return e?_.findWhere(this.lists,{id:e}):this.selectedList},getLists:function(){return this.lists},getSelectedList:function(e,t,n){return e?this.refreshList(!0,t,n):$.Deferred().resolve(this.selectedList)},setSelectedList:function(e){if(_.isObject(e))this.selectedList.id==e.id&&this.selectedList.items&&(e.items=this.selectedList.items),"0"==e.id||this.getList(e.id)||this.lists.push(e);else{var t=S.getString(e,"0");e=null,"0"!=t&&(e=this.getList(t))}(e=e||(this.lists[0]||$.extend({},fp.defaultList))).items=_.getArray(e.items),this.selectedList=e,fpUi.ListManager.setListDefaults(this.selectedList)},refreshList:function(n,e,t){var i,r=this,a=$.Deferred();return(e=_.defaults(e,{limit:1})).id||"0"==this.selectedList.id||(e.id=this.selectedList.id),this.options.listService.get(this.applyPayloadOrderParams(e),t).done(function(e){i=e}).always(function(){var e;function t(e){n&&(r.selectedList.items=_.getArray(e)),a.resolve(r.selectedList),n&&fp.trigger("order"==r.options.type?fpEvent.ORDER_LIST_ITEMS_REFRESHED:fpEvent.LIST_ITEMS_REFRESHED,{listManager:r,list:r.selectedList}),fp.trigger("order"==r.options.type?fpEvent.ORDER_LIST_LOADED:fpEvent.LIST_LOADED,{listManager:r,list:r.selectedList})}i=_.getObject(i,r.selectedList),e=_.has(i,"total")?_.first(i.items):i,r.setSelectedList(e),n?r.refreshListItems(!1,!0).done(t):t()}),a.promise()},listActivate:function(){return $.when()},refreshListItems:function(n,i){if(!this.selectedList||!this.selectedList.id)return $.when();n=fpUtil.getBoolean(n,!0);var r=this,e={limit:-1,sort:this.options.listItemSort};return e[this.options.listIdField]=this.selectedList.id,this.options.listItemService.get(this.applyPayloadOrderParams(e)).then(function(e){var t=_.getArray(e.items);return n&&(r.selectedList.items=t),i||fp.trigger("order"==r.options.type?fpEvent.ORDER_LIST_ITEMS_REFRESHED:fpEvent.LIST_ITEMS_REFRESHED,{listManager:r,list:r.selectedList}),t})},getItem:function(t,e){if(t&&!fpUtil.isNewItem(t)){var n={isProductId:!1,isGenericName:!1,multiple:!1};if(_.isBoolean(e)?n.isProductId=e:$.extend(n,e),!n.isGenericName||fp.store.allow_generic_item){t=t.toString();var i=n.multiple?_.filter:_.find,r=_.isObject(n.varieties),a=r&&0<_.size(n.varieties);return i(this.selectedList.items,function(e){return!!(n.isProductId?e.product&&S(e.product.id).eq(t):n.isGenericName?S(e.note).eq(t):S(e.id).eq(t))&&(!r||!!e.product&&(!!_.size(e.product.varieties)&&(!a&&!_.size(e.varieties)||_.isEqual(e.varieties,n.varieties))))})}}},listItemAdd:function(e,t){var n=(t=_.getObject(t)).item,i=t.formValues,r=t.errorSelector,a=t.parentModule;if(!_.isObject(n)||fpUtil.isNewItem(this.selectedList.id))return $.when();var o,s=this,l=fpUtil.isNewItem(n.id),c=fp.ui.ListManager.getQuantityInitial(n),u=fpUtil.getFloat(n.__product_quantity),d=t.listName,f=t.listPosition;if(u<c&&(u=c),(o=this.getItem(n.id,l))&&!l)return o.is_crossed&&(o.quantity=0),fp.trigger(fp.events.LIST_ITEM_INCREMENT,{listManager:this,item:o,quantity:u}),$.when();t={};var p,h="0"!=s.selectedList.id?s.selectedList.id:void 0;o=o||{},l&&$.extend(t,n),$.extend(t,i,{id:o.id,product_id:n.id,quantity:u}),t[this.options.listIdField]=h,l||(o.product_id=n.id),o.id=n.id||fpUtil.getNewItemId(),fpUtil.isNewItem(t.product_id)&&delete t.product_id;var m={listManager:s,item:o,itemChangeType:fpConstants.listItemChangeType.ADD,itemChangedQuantity:u,oldListItemId:o.id,listName:d,listPosition:f,parentModule:a};return fp.trigger(fp.events.LIST_ITEM_BEFORE_CHANGE,m),_.size(n.varieties)&&(p=$.Deferred().promise(),fpService.userProductService.create({product_id:t.product_id,note_clear:!0}).always(p.deferred().resolve)),$.when(p).then(function(){return d&&(t.other_attributes=JSON.stringify({listName:d,listPosition:f})),s.options.listItemService.create(s.applyPayloadOrderParams(t),{errorSelector:r}).then(function(e){if($.extend(!0,o,e),s.selectedList.items.unshift(o),m.itemChangeSuccess=!0,"list"==s.type&&e.shopping_list_id&&"0"==s.selectedList.id){function t(e){if(e)return m.listManager.setSelectedList(e)}return s.listActivate(null,e.shopping_list_id,!0).then(t,t)}}).always(function(){fp.trigger(fp.events.LIST_ITEM_CHANGED,m,null,!0)})})},listItemIncrement:function(e,t){var n=(t=_.getObject(t)).item,i=t.increment,r=_.has(t,"quantity"),a=t.errorSelector,o=t.parentModule;if(n=n&&(_.isObject(n)?this.getItem(n.id):this.getItem(n,!0))){var s,l=fp.ui.ListManager.getQuantityInitial(n);if(r){1<=(s=t.quantity)&&(s=fpUtil.getFloat(s));var c=fpUtil.getProduct(n);c&&c.is_weight_required||(s=Math.round(s)),1<=n.product.quantity_step?i=s<1?-1:1:_.has(t,"increment")||(i=s)}else s=n.quantity||0;if(_.has(t,"increment"))if(i=fp.ui.ListManager.getIncrement(n)*(i<1?-1:1),fpUtil.isFloat(i)||fpUtil.isFloat(s)){var u=S(i.toString().split(".")[1]).length,d=S(s.toString().split(".")[1]).length;s=fp.numeralInstance.set(s+i).round(d<u?u:d).value()}else s+=i;if(l&&s<l){if(!(0<i))return void fp.trigger(fp.events.LIST_ITEM_REMOVE,{listManager:this,item:n});s=l}var f={listManager:this,item:n,itemChangeType:fpConstants.listItemChangeType.INCREMENT,itemChangedQuantity:s,previousQuantity:n.quantity,parentModule:o};fp.trigger(fp.events.LIST_ITEM_BEFORE_CHANGE,f),1<=s&&(s=s.toFixed(2)),this.options.listItemService.update(this.applyPayloadOrderParams({id:n.id,quantity:s}),{errorSelector:a}).done(function(e){_.empty(n),$.extend(!0,n,e),f.itemChangeSuccess=!0}).always(function(){fp.trigger(fp.events.LIST_ITEM_CHANGED,f,null,!0)})}},listItemRemove:function(e,t){if(t.item){var n=t.item,i={listManager:this,item:n,itemChangeType:fpConstants.listItemChangeType.REMOVE,parentModule:t.parentModule};if(fpUtil.isNewItem(n.id))fp.trigger(fp.events.LIST_ITEM_CHANGED,i,null,!0);else if(n=_.isObject(n)?this.getItem(n.id):this.getItem(n,!0)){i.item=n,fp.trigger(fp.events.LIST_ITEM_BEFORE_CHANGE,i);var r=this;this.options.listItemService.post(this.applyPayloadOrderParams({id:n.id}),{childServiceCall:"delete"}).done(function(e){n.quantity=n.quantity_indicator=0,_.removeWhere(r.selectedList.items,{id:n.id}),i.itemChangeSuccess=!0}).always(function(){var e=_.getObject(n.other_attributes);i.listName=e.listName,i.listPosition=e.listPosition,fp.trigger(fp.events.LIST_ITEM_CHANGED,i,null,!0)})}}},listItemChanged:function(e,n){if(-1!=n.itemChangeType){var i=this,t=fpUtil.isNewItem(n.item.id),r=!1,a=fpConstants.listItemChangeType;switch(t&&(n.itemChangeType=a.REMOVE),n.itemChangeType){case a.ADD:case a.INCREMENT:case a.CHECK_TOGGLE:r=!0;break;case a.REMOVE:n.item.quantity=0,r=!0}$.when.apply($,n.clientParams.promises).always(function(e){if("abort"!=e){var t={};n.show_expected_rewards&&(t.show_expected_rewards=!0),i.refreshList(r,{},t)}})}},listItemUpdate:function(e,t){var n;if(_.isObject(t)&&(t.id&&(n=this.getItem(t.id)),!n&&t.product_id&&(n=this.getItem(t.product_id,!0)),n)){t=fpUtil.getChanged(t,n);var i={listManager:this,item:n,itemChangeType:fpConstants.listItemChangeType.UPDATE,parentModule:t.parentModule};fp.trigger(fp.events.LIST_ITEM_BEFORE_CHANGE,i),t.id=n.id,this.options.listItemService.update(this.applyPayloadOrderParams(t)).done(function(e){_.empty(n),$.extend(!0,n,e),i.itemChangeSuccess=!0}).always(function(){fp.trigger(fp.events.LIST_ITEM_CHANGED,i,null,!0)})}},applyPayloadOrderParams:function(e){return e},destroy:function(){_.each(this.events,function(e){fp.off(e.name,e.value)})}}),function(){var ui=fpUtil.getNamespace("ui",fp),nextTabIndex=1;function getNavigation(t,n){n=_.getObject(n);var i=fpUi.router.stateManager,e=(t=_.getObject(t)).abstract?t.children:t.menu,r={};if(!_.size(e))return r;var a=fpUtil.isAuthenticated();r.children=t.abstract?{}:[];var o,s,l,c,u,d="registration_pending"==fp.user.user_status_identifier;return _.each(e,function(e){if(c=_.result(e,"includeInMenu")){if((o=_.getObject(e.data)).authenticate&&!a)return;if(o.authorize&&(!fpUtil.isAuthorized(o)||d))return}if(e==i.current&&(r.active=!0),c){if(s={id:e.name,title:fpUi.locale("route-"+e.name,_.result(e.data,"title")),url:i.href(e)},e==i.current&&(s.active=!0),n[s.id]=s,e.parent&&!e.parent.abstract&&(s.parent_id=e.parent.name),e==i.current)for(u=s;(u=u.parent_id&&n[u.parent_id])&&(u.active=!0),u;);e.menuParent!=t.name&&((l=getNavigation(e,n)).active&&(s.active=!0),l.children&&(s.children=l.children)),t.abstract?r.children[S(e.name).underscore().s]=s:(s.sequence=e.menuSequence,r.children.push(s))}}),r}fpUi=$.extend(ui,{preventDefault:function(e){e&&e.preventDefault&&e.preventDefault()},submitForm:function(e,t,n,i){fpUtil.isNull(i)&&_.isString(n)&&(i=n,n=void 0),n=fpUtil.getValue(n,{}),i=fpUtil.getValue(i,{}),_.isString(i)&&(i={method:i}),i=_.defaults(i,{method:fpConstants.apiMethods.POST});var r,a=$(e);if(!("false"==a.attr("fp-validate")||fpUtil.validateForm(a,null,null,i)))return $.Deferred().reject();var o=a.find("button.fp-btn:not(.fp-btn-cancel):visible, a.fp-btn:not(.fp-btn-cancel):visible"),s={start:!0,end:!0};_.isObject(i.handleTransitions)?$.extend(s,i.handleTransitions):fpUtil.getBoolean(i.handleTransitions,!0)||(s.start=s.end=!1),o.length&&(_.find(['button[type="submit"]',"button",".fp-btn-primary"],function(e){return $btnSubmit=o.filter(e).first(),$btnSubmit.length}),$btnSubmit.length||($btnSubmit=o.last()),r=new fpUi.Loading({appendTo:$btnSubmit,showOnInstantiate:!0,destroyOnHide:!0}));var l=_.has(i,"handleFormErrors")?i.handleFormErrors:a.data("handle-errors"),c=fpUi.getFormError(a,i.formGroup).hide();fpUtil.isNull(l)&&c.length?l=!0:fpUtil.isNull(l)||c.length||(l=!1),s.start&&(fpUtil.showProgress(),this.disableForm(a)),null!=l&&(i.handleErrors=!1),this.getFormValues(a,$.extend({values:n},i));var u=!1;return(_.isObject(t)?null==n.id||i.ensurePost?t.post(n,i):t.update(n,i):fp.api(t,n,i)).fail(function(e,t,n){u=!0,l&&fpUtil.showError(n,c,{handleScroll:a.data("handle-scroll")})}).always(function(){r&&r.hide(),(u&&!fp.isUnloading&&!i.multiStep||s.end)&&(fpUtil.hideProgress(),fpUi.enableForm(a))})},getFormAlert:function(e,t){var n=$(e).find('.fp-notification:not([data-role="notification-warning"])').hide();if(t){var i=n.filter('[data-role*="form-group-'+t+'"]');i.length&&(n=i)}return n},getFormError:function(e,t){var n=$(e).find('.fp-error, .fp-notification:not([data-role="notification-warning"])').hide();if(t){var i=n.filter('[data-role*="form-group-'+t+'"]');i.length&&(n=i)}return n},showFormError:function(e,t,n){fpUtil.showError(e,this.getFormError(t,n))},getFormValues:function(e,n){if(!(e=$(e)).length)return _.getObject(n&&n.values);n=$.extend({prefix:"fp-input-",formGroup:"",includeEmpty:!1},n);var i,r,a,o,s,l,c,u,d=S.getString(e.attr("data-alt-name")),f=S.getString(e.attr("data-form-group")),p=_.getObject(n.values),h=_.isObject(n.model);return e.find(fpUtil.formatString('input[name^="{0}"],textarea[name^="{0}"],select[name^="{0}"],input[data-input-name^="{0}"],textarea[data-input-name^="{0}"],select[data-input-name^="{0}"]',n.prefix)).each(function(){if(!(i=$(this)).prop("disabled")&&(i.attr("data-form-name")||"")==d&&((c=i.attr("data-form-group")||"")==n.formGroup||c==f))if(a=fpUi.getInputValue(i),r=(r=i.attr("data-input-name")||i.attr("name")).replace(n.prefix,""),S(r).contains("-")&&fp.notifier.notify({name:"SubmitWarning",message:"SubmitWarning: A fp.ui.getFormValues warning has occurred (input name has hyphen that was not replaced)"},{severity:"warning"}),u=i.attr("fp-model")||r,fpUtil.isNullOrEmpty(a)){if(h&&!_.has(p,r)&&!fpUtil.hasNamespace(u,n.model))return;n.includeEmpty&&(p[r]=a)}else{if(o=S.getString(this.type).toLowerCase(),l="radio"==o||"checkbox"==o,s=i.attr("data-type")||(l?"boolean":null))if(_.contains(["date","timestamp"],s)){var e=i.attr("data-display-format"),t=i.attr("data-server-format");e&&t&&(a=fp.moment(a,e).format(t))}else if(_.contains(["int","float","numeric"],s))a=Number(a);else if(_.contains(["bool","boolean"],s)&&(a.length&&(a=fpUtil.getBoolean(a,!1)),l&&!a&&h&&!fpUtil.hasNamespace(u,n.model)))return;p[r]=a}}),p},getInputValue:function(e){var t,n=S.getString(e.prop("type")).toLowerCase();if("radio"==n||"checkbox"==n){var i=e.attr("name"),r=(i?$(e[0].form).find(fpUtil.formatString('[name="{0}"]',i)):e).filter(":checked"),a=S(e.attr("data-type"));if("radio"==n?t=r.first().val():a.eq("string",!0)?(t=[],r.each(function(){this.value&&t.push(this.value)})):t=0<r.length,a.startsWith("bool",!0))return t}else t=e.val();return _.isArray(t)?t:S(t).trim().s},disableForm:function(e){if(e=$(e),S(e.prop("tagName")).eq("form",!0)){var t=e.find("> fieldset"),n=$(window.document),i=n.scrollTop();t.length||(t=e.wrapInner("<fieldset></fieldset>").find("> fieldset")),t.attr("disabled","disabled").addClass("fp-is-disabled"),n.scrollTop(i)}},enableForm:function(e){var t=(e=$(e)).find("> fieldset"),n=$(window.document),i=n.scrollTop();t.length&&(e.append(t.children()),t.remove(),n.scrollTop(i))},validateBarcode:function(e,t){var n=$(e),i=n.next('[data-role="invalid-barcode"]'),r=S(n.attr("class")).replace("hidden","").trim();if(t)return n.attr("class",r.s),void i.addClass("hidden");n.attr("class",r.concat(" hidden").trim().s),i.length||$('<div data-role="invalid-barcode"></div>').insertAfter(n).text(n.attr("jsbarcode-value")),i.removeClass("hidden")},blockUI:function(r){var a=$(window);if(fp.documentReady&&!a.data("blockUI.isBlocked")){var e,o;if(fp.initialized){if(!(o=fp.Module.getViewModule()))return}else e=fpUtil.getPromiseFromEvent(fp.events.VIEW_MODULE_LOADED);$.when(e).done(function(e,t){if(t||o){$.blockUI(r);var n=$(document.body).addClass("fp-block-ui");fp.initialized||n.css({"min-height":$(document).height()+400});var i=$(window.document).scrollTop();a.off("blockmsg.fp").on("resize.blockmsg.fp scroll.blockmsg.fp",_.throttle(function(){n.find("> .blockMsg").center(),i&&($(document).scrollTop(i),i=null)},100)).trigger("resize.blockmsg.fp"),fp.trigger(fp.events.UI_BLOCKED)}})}},unblockUI:function(e){if(fp.documentReady&&!fp.isUnloading&&(fp.loaded||e&&e.force)){var t=$(window);t.data("blockUI.isBlocked")&&($.unblockUI(e),t.off("blockmsg.fp"),$(document.body).removeClass("fp-block-ui").css({"min-height":""}),fp.trigger(fp.events.UI_UNBLOCKED))}},pauseLoading:function(){$(window).data("blockUI.isBlocked")&&$(document.body).removeClass("fp-block-ui").find("> .blockUI").addClass("hidden"),fp.__$freshop.find("> .fp-nprogress").addClass("hidden")},unpauseLoading:function(){$(window).data("blockUI.isBlocked")&&$(document.body).find("> .blockUI").removeClass("hidden").filter(".blockMsg").center(),fp.__$freshop.find("> .fp-nprogress").removeClass("hidden")},preInitModules:function(e,n){e=e||fpConfig.modules;var i,r,a,o,s,l=this.router.stateManager;fp.loaded&&(delete fp.disableRequiredStore,delete fp.requiredStoreId),_.each(e,function(e,t){r=!0,(i=l.get(t))&&(r=fpUtil.isAuthorized(i)),e=_.isArray(e)?e:[e],_.each(e,function(e){(e.authorized=r)&&(e.name=S(t).dasherize().s,fpUtil.isJQuery(n)?(a=n.find(e.elementSelector)).length||(a=n.filter(e.elementSelector)):a=$(e.elementSelector),a.length&&(!fpConfig.topShopStoreId&&e.topShopStoreId&&(fpConfig.topShopStoreId=e.topShopStoreId),fpConfig.enableRequiredStore&&(e.requiredStoreId?o=e.requiredStoreId:e.disableRequiredStore&&(s=!0))))})}),s&&(fp.disableRequiredStore=s),fp.disableRequiredStore?delete fp.requiredStoreId:fp.requiredStoreId=o},loadModule:function(f,p){var r,e,a=$(f.elementSelector);if(1<a.length&&(r=$.extend(!0,{},f)),f.inherit){var t=_.getObject(this.getModule(f.inherit));e=this.loadModule({name:t.name||f.inherit,elementSelector:f.elementSelector,layout:t.layout||f.layout,version:t.version||f.version,inherit:t.inherit,inheritConstructor:f.superInheritContructor,disableInstantiate:!0},p)}return e=$.when(e).then(function(){if(!f.name)throw new Error("Module name is not defined");var c,e,u=a.first(),d=fp.Module.getConstructor(f.name),t=f.name.split("/");return f.layout=S.getString(f.layout,"layout-0"),1==t.length&&t.push(t[0]),t.unshift("module"),1<f.version&&t.splice(t.length-1,0,"v"+f.version),t.splice(t.length-1,0,f.layout.replace("-","/")),t[t.length-1]=t[t.length-1]+".json",f.path=t.join("/"),f.basePath=f.path.split("/layout")[0],(e=e||fp.api(f.path,null,{cache:!0,queue:!0,apiKey:"sdk"})).then(function(t){var e=$.Deferred();if(_.size(t)){var n;try{n=fp.Component.parseHtml(t.html,!0)}catch(e){fp.notifier.notify(e,{severity:"error",metaData:{"meta data":{"Module Name":f.name,"Module Selector":S.getString(f.elementSelector).substr(0,500),"Module Layout":f.layout}}})}if(f.renderModules){var i,r,a=[],o=[],s=f.modules=_.getObject(f.modules);_.each(n.modules,function(e){_.isObject(e)||(e={name:e}),i=S(_.last(e.name.split("/"))).camelize().s,_.has(s,i)?$.extend(s[i],e):s[i]=e}),_.each(s,function(e){(!e.disableAutoLoad||fp.isLocal()&&e.enableAutoLoadLocal)&&(r=fpUi.loadModule(e).then(function(e){o.push(e)}),a.push(r))})}function l(){var e;u.addClass("fp-core fp-module");try{d?t=f.disableInstantiate?d:(c=_.template(n.html),new d(u,f,c,p)):(t.css&&$("head").find('> link[data-group="freshop"]').last().after(fpUtil.formatString('<style type="text/css" data-group="freshop" data-name="{0}">{1}</style>',f.name,t.css)),c=_.template(n.html),t.js?e=fpUi.initModuleFromJson(t,u,f,c,p).then(function(e){t=e,_.size(o)&&(t.modules=o,_.each(o,function(e){e.parent=t}))}):u.html(c()))}catch(e){fp.notifier.notify(e,{severity:"error",metaData:{"meta data":{"Module Name":f.name,"Module Selector":S.getString(f.elementSelector).substr(0,500),"Module Layout":f.layout}}})}return fp.loaded||fpUtil.showProgress(),e}$.when.apply($,a).then(l,l).always(function(){e.resolve(t,u,f,c,p)})}else e.resolve(t,u,f,c,p);return e.promise().always(function(e){return fp.loaded||fpUtil.showProgress(),e})})}),1<a.length&&(e=e.then(function(e){var t=$.Deferred(),n=[];a.each(function(e){if(e){var t=$.extend(!0,{},r);t.elementSelector=this,promiseModule=fpUi.loadModule(t),n.push(promiseModule)}});function i(){t.resolve(e)}return $.when.apply($,n).then(i,i),t.promise()})),e},initRequest:function(e){var t=$.Deferred();if(fpConfig.disableInitializeShopping)return t.resolve();var n=e;_.isObject(n)||(n=$.extend({},fpUi.router.stateManager.stateParams));var i,r=fpUtil.urlParams({includeSearch:!0,includeRouteSearch:!1}),a=fpUtil.urlParams({includeSearch:!1,includeRouteSearch:!0}),o=S.getString(n.store||n.store_id||$("[data-requiredStoreId]").attr("data-requiredStoreId")),s=o.length?"":S.getString(n.store_number),l=fp.isBot?[]:["store","store_id","store_number","fulfillment_identifier","fulfillment_type_id","promo_code","promotion_code","ref_code","referral_code","token"],c=n.promo_code||n.promotion_code,u=n.ref_code||n.referral_code,d=n.fulfillment_identifier||n.fulfillment_type_id;(c||u)&&(i=fpService.userMeService.post({promotion_code:fpUtil.getUndefinedIfEmpty(c),by_referral_code:fpUtil.getUndefinedIfEmpty(u)},{childServiceCall:"promotions",handleErrors:!1}),u&&fp.setPrefCookie({referral_code:u}));var f,p=fpUi.router,h=!p.routeManager.hasXhrPageLoad&&_.hasAny(r,l);if(_.each(l,function(e){_.has(n,e)&&(n[e]=null),_.has(r,e)&&(r[e]=null),_.has(a,e)&&(a[e]=null,f=!0)}),h&&window.history&&window.history.replaceState)h=!1,window.history.replaceState({},null,p.routeManager.buildUrl(null,{searchParams:r,routeSearchParams:a}));else if(!h&&f){_.each(r,function(e){_.has(a,e)||delete n[e]});var m=p.stateManager;m.go(m.current,n,{preventDefault:!0,searchParams:r,enableReplaceState:!0})}return $.when(i).always(function(){fp.isUnloading=freshop.unloading=h,fp.loaded&&!h&&(o.length&&o!=fp.store.id||s.length&&s!=fp.store.number)?fp.ensureActiveStore(!1,{storeId:o,storeNumber:s}).always(function(){h?t.resolve():$.when(fp.listManager.getSelectedList(!0,null,{handleErrors:!1}),fpUi.loadStoreDependencies()).always(t.resolve)}):t.resolve()}),t.then(function(){if(d)return fpUi.setFulfillmentType(d)}).then(function(){if(h){var e=p.routeManager.buildUrl(null,{searchParams:r,routeSearchParams:a});return window.location.replace(e),$.Deferred().promise()}fp.loaded&&(fpUtil.hideError(),fpUtil.initDepartment())})},getModule:function(t,e){if(t){e=e||fpConfig.modules;var n=_.find(e,function(e){return e.name==t||e.path==t});return n||_.find(e,function(e){if(_.size(e.modules))return null!=(n=fpUi.getModule(t,e.modules))}),n}},loadModules:function(e,t,n){e=e||fpConfig.modules,delete fp.modulesLoaded;var i,r,a,o=fpUi.router.stateManager,s=fpConfig.routeStates,l=[];_.each(e,function(e){e=_.isArray(e)?e:[e],_.each(e,function(n){n.disableAutoLoad||(fpUtil.isJQuery(t)?(a=t.find(n.elementSelector)).length||(a=t.filter(n.elementSelector)):a=$(n.elementSelector),n.authorized=0<a.length,n.authorized&&(fp.moduleDepartmentId||(fp.moduleDepartmentId=a.attr("data-department-id")),!t&&n.processed||(n.processed=!0,_.find(n.modules,function(e){if(!e.elementSelector&&e.inherit){var t=s[S(e.name).replace("/","-").camelize().s];if(t&&o.is(t))return e.elementSelector=n.elementSelector,e.isView=n.isView,_.has(e,"version")||(e.version=n.version),n=e,!0}}),!i&&n.isView&&(i=n),r=fpUi.loadModule(n),l.push(r))))})}),e==fpConfig.modules&&fp.trigger(fp.events.VIEW_MODULE_LOADED,i);var c=$.when.apply($,l);return(c=n?c.then(function(){if(!fp.isUnloading)return fp.modulesLoaded=!0,fpUi.initModules(e)}):c.then(function(){if(!fp.isUnloading)return o.init(),fpUi.initRequest()}).then(function(){if(!fp.isUnloading)return fp.loaded||fp.on(fp.events.ROUTE_BEFORE_CHANGE,function(e,t){fpUi.initRequest(t.toParams)}),fp.modulesLoaded=!0,fpUi.initModules(e)})).fail(function(e){if(fp.isLocal())throw e})},initModuleFromJson:function(t,n,i,r,a){if(!_.isObject(t))return t;if(!t.js)return t;var e,o=this.router.stateManager,s=new Function("fp","util","constants","event","service","jQuery","$","_","moment","dateFns","jss","showdown","S","Lockr","stateManager","stateParams","element","config","template","parent",t.js)(fp,fpUtil,fpConstants,fpEvent,fpService,jQuery,$,_,fp.moment,dateFns,jss,showdown,S,Lockr,o,o.stateParams,n,i,r,a),l=$.Deferred();if(_.isObject(s)&&s.moduleConstructor){var c=s;if(_.defaults(i,c.config),i.inherit&&!i.inheritConstructor){var u={};i.superInheritContructor?delete u.inherit:u=_.getObject(this.getModule(i.inherit),u),e=this.loadModule({name:u.name||i.inherit,elementSelector:i.elementSelector,layout:u.layout||i.layout,version:u.version||i.version,inherit:u.inherit,inheritConstructor:i.superInheritContructor,disableInstantiate:!0},a)}}return $.when(e).always(function(){if(_.isObject(s)&&_.isFunction(s.moduleConstructor)){var e=i.inheritConstructor;!e&&i.inherit&&(e=fp.Module.getConstructor(i.inherit)),s=s.moduleConstructor(e)}_.isFunction(s)&&(s.template=r,fp.Module.addConstructor(i.name,s),i.disableInstantiate||(t=new s(n,i,r,a))),l.resolve(t)}),l.promise()},loadFileDependencies:function(dependencies,options){if(_.size(dependencies)){_.isArray(dependencies)||(dependencies=[dependencies]),options=_.getObject(options);var promiseDependencies=[],minify=!fp.isDev()||fpUtil.getBoolean(fpUi.router.routeManager.urlParams.minify),$freshop;return _.each(dependencies,function(item){var src,promise,type,external;if(fpUtil.isPromise(item))promiseDependencies.push(item);else{if(external=_.isObject(item)?(src=item.src,type=item.type,item.external):(src=item,type=null,!1),src=S(src),"css"==type||src.endsWith(".css")){src.contains("//")||(src=src.prepend(fp.clientAssetBaseUrl+"css/"),minify&&!src.endsWith("min.css")&&(src=src.replace(".css",".min.css"))),$freshop=$("head").find('> link[data-group="freshop"]');var fileName=src.split("/").pop().split(".")[0];$freshop.filter(fpUtil.formatString('[data-name="{0}"]',fileName)).length||(promise=fpUi.loadScript(src.s,{crossorigin:!0,"data-group":"freshop","data-name":fileName},null,{type:"css",insertBefore:item.prepend&&$freshop.first(),insertAfter:!item.prepend&&$freshop.last(),apiOptions:options.apiOptions}))}else if("js"==type||src.endsWith(".js"))if(external)promise=fpUi.loadScript(src.s);else{src.contains("//")||(src=src.prepend(fp.assetCdnUrl+"js/"),minify&&!src.endsWith(".min.js")&&(src=src.replace(".js",".min.js")));var fileName=src.split("/").pop().split(".")[0];fp.cache.file[fileName]||(fp.cache.file[fileName]=!0,promise=fp.api(src.s,null,$.extend({dataType:"text",apiKey:null},options.apiOptions)).then(function(data){if(src.contains(fp.assetCdnUrl)){var path=src.split("/");path&&(path.pop(),data=data.replace("sourceMappingURL=",fpUtil.formatString("sourceMappingURL={0}/",path.join("/"))))}var isJsonEditor=src.match(/jsoneditor(\.min)?\.js/g);src.contains("/admin/")?new Function("jQuery","$","_","moment","dateFns","jss","showdown",data).call(window,jQuery,$,_,fp.moment,dateFns,jss,showdown):0==data.indexOf("/*! admin/enclose-header.js */")?eval(data):new Function("jQuery","$","_","dateFns","jss","showdown","S","fp","util","constants","event","service","fpUtil","fpConstants","fpEvent","fpService","fpConfig",data).call(window,jQuery,$,_,dateFns,jss,showdown,S,fp,fpUtil,fpConstants,fpEvent,fpService,fpUtil,fpConstants,fpEvent,fpService,fpConfig),isJsonEditor&&fp.__initJSONEditor()}))}else"html"!=type&&!src.endsWith(".html")||(promise=fp.api(src,null,{apiKey:"sdk",dataType:"text"}));promise&&promiseDependencies.push(promise)}}),$.when.apply($,promiseDependencies).then(function(){fp.log("finished load dependencies")})}},initModules:function(e,s){fp.Module.sort();var t=[],n=[],l={},c={};function u(t,n,e){var i,r=_.isString(t.config.elementSelector)?t.config.elementSelector:t.config.name;if((n=_.getObject(n))[r]=!0,e&&_.has(l,r))return i=l[r];if(_.size(t.dependencies.init.module)){var a,o=[];if(_.each(t.dependencies.init.module,function(e){(a=c[e])&&a.enabled&&(n[e]?fp.warn(fpUtil.formatString('Circular dependency detected for initializing module "{0}" and dependency module "{1}"',r,_.isString(a.config.elementSelector)?a.config.elementSelector:a.config.name)):o.push(u(a,n,!0)))}),_.size(o))return i=$.when.apply($,o).then(function(){var e=t.init(fpUtil.getStateValue(fp.loaded,!0,s));return e.catch(function(e){e instanceof Error&&fp.notifier.notify(e,{severity:"error",metaData:{"meta data":{"Module Name":t.config.name,"Module Selector":S.getString(t.config.elementSelector).substr(0,500),"Module Layout":t.config.layout}}})}),e}),l[r]=i}return(i=t.init(fpUtil.getStateValue(fp.loaded,!0,s))).catch(function(e){e instanceof Error&&fp.notifier.notify(e,{severity:"error",metaData:{"meta data":{"Module Name":t.config.name,"Module Selector":S.getString(t.config.elementSelector).substr(0,500),"Module Layout":t.config.layout}}})}),l[r]=i}var i,r,a=fp.Module.items,o=[],d=!1;if(_.each(a,function(e){c[_.isString(e.config.elementSelector)?e.config.elementSelector:e.config.name]=e}),e!=fpConfig.modules){a=[];var f,p,h={};_.each(e,function(e){_.each(_.isArray(e)?e:[e],function(e){p=_.isString(e.elementSelector)?e.elementSelector:e.name,(f=c[p])&&(a.push(f),h[p]=f)})}),c=h}for(var m=0;m<a.length;m++)(r=a[m]).enabled&&(!fp.loaded&&r.initialized||(r.config.priority<=fpConstants.priority.MAJOR?(i=u(r),!fpConfig.disableMajorModuleDelay&&r.config.disableShowProgress?n.push(i):(d=d||(r.config.isView||r instanceof fp.Module.View),t.push(i))):o.push(r)));var g=$.when.apply($,t);return o.length&&(g=$.when(!fp.loaded&&d?fpUtil.getPromiseFromEvent(fp.events.VIEW_MODULE_RENDERED):void 0).then(function(){return _.each(o,function(e){i=u(e),n.push(i)}),{disableProgressPromise:$.when.apply($,n)}})),g},setModuleContent:function(e,t){var n=e.filter(".fp-animated-loading-container").find("> .fp-loading");n.length||(n=e.closest(".fp-animated-loading-container > .fp-loading")),e.html(t).append(n)},getPageTitle:function(e){if(e)e=S(e).stripTags().s;else{var t=this.router.stateManager.current;t.parent&&!t.parent.abstract&&(e=_.result(t.data,"title",""))}return e},setPageTitle:function(e){if(!this.router.stateManager.current.enableSEO){fp.__initialPageTitle||(fp.__initialPageTitle=window.document.title),e=this.getPageTitle(e);var t=fpConfig.siteTitleFormat,n=S.getString(this.getActiveCategory().name);n&&(t=e?t.replace("{siteTitle}",fpConfig.siteTitleCategoryFormat):fpConfig.siteTitleCategoryFormat),e=e&&t.replace("{title}",e).replace("{category}",n).replace("{siteTitle}",fpConfig.siteTitle),window.document.title=fpUtil.decodeForHtml(e||fp.__initialPageTitle)}if(fpConfig.enableSearchResultsTitle){var i=this.router.stateManager.toParams,r="";i&&(i.q&&this.router.stateManager.is(fpConfig.routeStates.product)&&(r=i.q),i.recipe_q&&this.router.stateManager.is(fpConfig.routeStates.recipe)&&(r=i.recipe_q),0<r.length&&e&&(window.document.title="Search Results: "+r+" | "+e))}},setMetaDescription:function(e){if(!this.router.stateManager.current.enableSEO){var t=$("head meta"),n=t.filter('[name="description"]').first(),i=S.getString(n.prop("content"));if(i){n.length&&!fpUtil.isDefined(n.data("storedValue"))&&n.data("storedValue",i);var r=this.router.stateManager.current;r.parent&&r.parent.abstract&&(e=n.data("storedValue"))}(e=e||i)&&(n.length||(n=$('<meta name="description" />').insertAfter(t.last())),n.prop("content",e))}},cacheTemplate:function(e,t,n){if(!e||!t)return"";var i=e.replace(fpUtil.regExp.matchSlash,"-");return fp.cache.template[i]=t,i},getTemplate:function(e,t){if(!_.isString(e))return e;var n=e.replace(fpUtil.regExp.matchSlash,"-");t||_.has(fp.cache.template,n)||fp.notifier.notify({name:"TemplateError",message:fpUtil.formatString("TemplateError: Template {0} not found.",e)},{severity:"error"});var i=fp.cache.template[n];return _.isString(i)&&((i=fp.cache.template[n]=_.template(i)).__id=e,fp.isProd()||(i.__comment=this.getComment(e))),i},renderTemplate:function(t,e,n,i){var r,a,o=fpUtil.regExp.matchHtml;if(o.lastIndex=0,_.isString(t)&&o.test(t)?r=_.template:(r=this.getTemplate(t),a=!i&&r&&r.__comment),_.isFunction(r)){"fpScope"!=(e=_.getObject(e)).__type&&(e=$.extend(e,fp.defaultScope));try{r==_.template&&(r=_.template(t)),r=r(e)}catch(e){if(!fpUtil.getBoolean(n,!0))throw e;fp.notifier.notify(e,{severity:"error",metaData:{"meta data":{Template:S.getString(t).substr(0,500)}}})}}return a&&(r=a+r),r},getComment:function(e){return"true"!=fpUi.router.routeManager.urlParams.enable_comments?"":fpUtil.formatString("\x3c!-- [{0}] --\x3e\n",fpUtil.getAttrs(e))},getComponentCacheKey:function(e,t,n){if(!e)return"";var i=fpUtil.regExp.matchNonAlphanumeric;i.lastIndex=0;var r=S(e).replace(i,"-").dasherize("-").s;return(n=n||"component")+"/"+(t=(t||"layout-0").replace("layout-","").replace("-","/"))+"/"+r+".html"},getComponentTemplate:function(e,t,n){var i=e||"layout-0";return S(i).startsWith("layout-")&&(n=_.getObject(n),i=this.getComponentCacheKey(n.componentKey,e,n.type)),this.getTemplate(i,t)},renderComponentTemplate:function(e,t,n){var i=this.getComponentTemplate(e,t,n);return _.isFunction(i)&&(i=i(t=$.extend(t,fp.defaultScope))),S.getString(i)},getTabIndex:function(e){var t=nextTabIndex;return fpUtil.isDefined(e)&&(t=fpUtil.getInteger(e,1)),nextTabIndex+=1,t},getNavigation:function(a){var e,o,t,l=fpUi.getSiteUrls().shopping_url_path;a&&fp.store.id!=a?e=$.when(fpService.storeService.get({id:a,fields:"name,lineage"},{formatForRestfulId:!0}).then(function(e){t=e}),fpUi.initSiteUrls(a)).then(function(){t&&(l=fpUi.getSiteUrls(t).shopping_url_path)}):fp.loaded||fp.__promiseStoreDependencies||(fp.__promiseStoreDependencies=$.Deferred().promise());return $.when(fp.__promiseLoadStoreDependencies,e).then(function(){function n(e,n,i){if(_.size(e)){function t(e){var t={id:e.id,sequence:fpUtil.getInteger(e.sequence),title:S.getString(e.name)};e.active&&(t.active=!0),0<=fpUtil.getInteger(e.parent_id)&&(t.parent_id=e.parent_id,t.url=s.categoryHref(e,n,i)),o[e.id]=t}function r(e){if(_.size(e.items)){var t=[];_.each(e.items,function(e){t.push(o[e.id])}),o[e.id].children=t}}var a=e[0],o={};return fpConfig.enableMobile||fp.isBot?(t(a),_.each(a.items,t),r(a)):(_.each(e,t),_.each(e,r)),(a=o[a.id])&&a.children}}var e,t,s=fpUi.router.stateManager,i={};if(o=_.getObject(getNavigation(s.root).children),_.isObject(o.shop)){var r={type:"product",relative:!1,js_navigation_path:S(l||o.shop.url).trimRight(fp.routeDelimiter+"/").s,enableTemplate:!0};l&&(o.shop.url=s.categoryHref(null,r,i)),(e=a&&fp.store.id!=a||!_.size(fp.departments)?fpUi.getCategories(a):$.Deferred().resolve({categories:fp.departments}).promise()).done(function(e){var t=n(e.categories,r,i);_.size(t)&&(o.shop.children=t)})}return!fpConfig.enableMobile&&_.isObject(o.recipe)&&(t=fpUi.getCategories(a,"recipe").done(function(e){var t=n(e.categories,{type:"recipe",relative:!1,enableTemplate:!0},i);_.size(t)&&(o.recipe.children=t)})),$.when(e,t)}).then(function(){return o})},getFulfillmentSlotDateTimeLabel:function(e,t){var n={date:null,label:"",dateLabel:"",timeLabel:"",hasEndTime:!1};if(t=_.defaults(t,{dateFormat:fpConfig.fulfillmentDateFormat,timeFormat:fpConfig.fulfillmentTimeFormat,dateTimeDelimiter:fpConfig.fulfillmentDateTimeDelimiter,dateTimeHasEndTimeDelimiter:fpConfig.fulfillmentDateTimeHasEndTimeDelimiter}),_.isObject(e)){var i=S.getString(e.slot_start).split(" "),r=1<i.length?i[1]:S.getString(i[0]),a=!1,o=_.getObject(e.fulfillmentType),s=(t.store||fp.store).timezone;S(t.timeFormat).endsWith("a-")&&(a=!0,t.timeFormat=t.timeFormat.substr(0,t.timeFormat.length-1)),n.date=dateFns.parse(e.date+" "+r);try{n.localDate=s&&dateFns.tz?dateFns.tz.toDate(e.date+"T"+r,{timeZone:s}):n.date}catch(e){fp.logError(e.message),n.localDate=n.date}dateFns.isValid(n.date)&&(n.timeLabel=dateFns.format2(n.date,t.timeFormat),a&&(n.timeLabel=S(n.timeLabel).trimRight("m").s),n.dateLabel=dateFns.format2(n.date,t.dateFormat));var l=t.dateTimeDelimiter,c=fpUtil.map.get("fulfillmentType"),u=e.fulfillment_type_id==c.get("delivery").id||"delivery"==o.identifier||e.fulfillment_type_id==c.get("drop_off").id||"drop_off"==o.identifier||fpConfig.pickUpHasEndTime&&("pickup"==o.identifier||e.fulfillment_type_id==c.get("pickup").id);if(u&&!t.enableStartTimeOnly){n.hasEndTime=u,l=t.dateTimeHasEndTimeDelimiter;var d=1<(i=S.getString(e.slot_end).split(" ")).length?i[1]:S.getString(i[0]),f=dateFns.parse(e.date+" "+d);dateFns.isValid(f)&&(f=dateFns.format2(f,t.timeFormat),a&&(f=S(f).trimRight("m").s),n.timeLabel+="-"+f)}dateFns.isValid(n.date)&&(n.label=n.dateLabel+l+n.timeLabel),e.fulfillment_type_id!=c.get("drop_ship").id&&"drop_ship"!=o.identifier||(n.label=n.dateLabel)}return n},getSlotOrderByHtml:function(e,t){var n="";if(e&&e.booking_close_minutes_prior&&e.dateTimeLabel){var i=dateFns.subMinutes(e.dateTimeLabel.localDate,e.booking_close_minutes_prior),r=new Date;if(r<=i)if(dateFns.isToday(i))if(dateFns.differenceInHours(i,r))n=fpUi.localef("shared-order-by",'<span class="font-italic">Order by</span> {0}',dateFns.format2(i,fpConfig.fulfillmentTimeFormat));else{var a=dateFns.differenceInSeconds(i,r);n=fpUi.localef("shared-order-within",'<span class="font-italic">Order within</span> {0} min {1} sec',Math.floor(a/60),a%60)}else t&&(n=fpUi.localef("shared-order-by",'<span class="font-italic">Order by</span> {0}',dateFns.format2(i,fpConfig.fulfillmentShortDateFormat)))}return n},showModal:function(a){(a=$.extend({template:"component/0/modal.html",animatedLoadingContainerClass:"fp-animated-loading-container"},a)).name=fpUtil.formatString("fp-modal-{0}",a.name||_.uniqueId());var e,o=fp.__$freshop.find(fpUtil.formatString('[data-role="modal-container"] [data-role="{0}"]',a.name)),t=_.result(a,"content"),n=fpUtil.isPromise(t),i=a.disableFade;if(n&&(a.content=fpUi.renderTemplate("component/0/animated-loading.html",null,null,!0)),o.length)fpUtil.isNull(i)&&(i=!o.hasClass("fade")),e=o.data("bs.modal"),o.find('[data-role="title"]').html(a.title),o.find('[data-role="modal-content"]').empty().append(a.content).toggleClass(a.animatedLoadingContainerClass,n);else{a.disableToggleActiveModal||($activeModal=fp.__$freshop.find(fpUtil.formatString('[data-role="modal-container"] .modal[aria-hidden="false"]:not([data-role="{0}"])',a.name)),$activeModal.length&&($activeModal.hide().prev(".modal-backdrop").hide(),i=!0,fpUi.__activeModals=_.getArray(fpUi.__activeModals),fpUi.__activeModals.push($activeModal)));var r=a.template;_.isString(r)&&(fpUtil.regExp.matchHtml.lastIndex=0,fpUtil.regExp.matchHtml.test(r)||(r=this.renderTemplate(r,a,null,!0))),a.modal=_.defaults(a.modal,{persist:!1,backdrop:fpUtil.getStateValue(a.disableClose,"static"),keyboard:!a.disableClose}),o=$(r),a.disableClose&&o.find('.modal-header [data-dismiss="modal"]').addClass("invisible"),fpUtil.isNull(i)&&(i=!o.hasClass("fade")),n&&o.one("show.bs.modal",function(){"pending"==t.state()&&o.find('[data-role="modal-content"]').addClass(a.animatedLoadingContainerClass)}),_.size(fpUi.__activeModals)&&o.one("hide.bs.modal.activeModal",function(){fpUi.__activeModals.pop().show().prev(".modal-backdrop").show()})}if(n&&(a.content=t.done(function(e){var t;e instanceof fp.Module&&(e=(t=e).$element);var n=o.find('[data-role="modal-content"]').removeClass(a.animatedLoadingContainerClass),i=n.find('[data-role="body-content"]');i.length||(i=n),n.find('[data-role="animated-loading"]').remove(),n.find(".fp-form-shop-intent").removeClass("hidden"),i.empty().append(e),t&&!t.rendered&&t.render();var r=o.data("bs.modal");r&&r.isShown&&r.focus()})),o.toggleClass("fade",!i),_.defer(function(){e?e.isShown||o.modal("show"):o.modal(a.modal)}),o.data("modalOptions",a),fpConfig.enableMobile){var s=o.find("> .modal-dialog").removeClass("modal-sm modal-md modal-lg modal-xl");a.size&&s.replaceClass("modal-dialog","modal-dialog modal-"+a.size),a.center&&s.addClass("modal-dialog-centered")}else o.removeClass("modal-sm modal-md modal-lg"),a.size&&o.replaceClass("modal","modal modal-"+a.size);return o},hideModal:function(e,t){var n=$(e);return n.length&&_.getObject(n.data("bs.modal")).isShown&&((t=_.isUndefined(t)?_.getObject(n.data("modalOptions")).disableFade:t)&&n.removeClass("fade"),n.modal("hide"),n.addClass("fade")),n},getActiveModal:function(){return fp.__$freshop.find('[data-role="modal-container"] .modal[aria-hidden="false"]')},closeActiveModal:function(e){return this.hideModal(this.getActiveModal(),e)},updateModalSize:function(e,t,n){e=$(e),fpConfig.enableMobile&&(e=e.find("> .modal-dialog")),e.replaceClass("modal-"+t,"modal-"+n)},showShopIntentModal:function(e){_.isObject(e)||(e={force:e,fulfillmentIdentifier:arguments[1],next:arguments[2]});var t=e.force,a=e.fulfillmentIdentifier,o=e.next,s=this.router.stateManager,l=fpConfig.shopIntent,n=fpUtil.map.get("fulfillmentType").items(),i=l.enabled;if(fpUtil.isNull(a)&&l.action&&(a=l.action),"shop_intent"==s.stateParams.modal&&(fpUtil.isNull(t)&&(t=!0),fpUtil.isNull(a)&&(a=s.stateParams.modal_action)),!t&&i&&l.enableTestersOnly&&(i=fpUtil.hasRole(fp.constants.adminRole.TESTER)),!t&&(!i||fp.store.id||!n.length))return $.when();if(fp.__shopIntentPromise)return fp.__shopIntentPromise;if(fp.__$shopIntentModal)return $.when();var r=a,c=!!l.enableAgeGate&&!fpUtil.getBoolean(fp.getSessionCookie().ageGate);c&&(a=null);var u,d=[],f=[],p=_.size(l.fulfillmentTypes)&&_.indexBy(l.fulfillmentTypes);function h(t){var e,n,i=_.getObject(l[t]),r=_.contains(["delivery","drop_ship"],t);r&&(e=S.getString(i.searchInstructions,fpUi.locale("shopper-intent-search-instructions","Enter Your Address")),n=i.searchType);var a=$.extend(!0,{name:"store-locator",intent:"modal",enableApiAddressSearch:r,addressSearchKey:i.addressSearchKey,disableHasAddress:i.disableHasAddress,disableLocationServices:r,enableSearchAllFulfillmentTypes:l.enableSearchAllFulfillmentTypes,searchPlaceHolder:e,searchInstructions:i.storeLocatorSearchInstructions,searchType:n,onSearch:function(e){"delivery"==t&&_.size(e)&&(1==_.size(e)?title=fpUi.localef("shopper-intent-delivery-search-success-single","Great news! We deliver to your address from our {0} store.",e[0].name):title=fpUi.locale("shopper-intent-delivery-search-success-multiple",'Great news! We deliver to your address. Click "Continue" to start shopping.'),w.find('[data-role="title"]').text(title))}},fpConfig.modules.storeLocator);return o&&(a.next=o,a.searchAgain="Please try a different search.",a.disableLocationServices=!0),i.disallowedRedirect&&_.size(i.disallowedPostalCodes)&&(a.onBeforeSearch=function(e){var t=S(e.q).trim();if(_.find(i.disallowedPostalCodes,function(e){return t.startsWith(e)}))return window.location.href=i.disallowedRedirect,$.Deferred().promise()}),a.elementSelector=$('<div data-role="store-locator"></div>').appendTo(fp.__$freshop),a.enableResponsiveContainer=!0,fpUi.loadModule(a).then(function(e){return e.scope.hashedSelectedServices[fpUtil.formatString("has_{0}",t)]=!0,e.scope.fulfillmentTypes=f,e.scope.fulfillmentType=u,e.init(!1).then(function(){return e})})}fp.__shopIntentPromise=$.Deferred().promise(),e.disableFulfillment||(l.disablePlanShopping||d.push({identifier:"plan",name:fpUi.locale("shopper-intent-plan-shopping-name","Plan"),title:fpUi.locale("shopper-intent-plan-shopping-title","Plan your shopping")}),_.each(n,function(e){p&&!_.has(p,e.identifier)||(d.push($.extend(_.pick(e,"id","identifier","name"),{title:_.getObject(l[e.identifier]).fulfillmentLabel||fpUi.localef("shopper-intent-fulfillment-action-label","Place a {0} order",S(e.name).toLowerCase())})),f.push(e))}));var m={};fp.loaded?m.rendered=!0:m.initialized=!0;var g={name:"shop-intent-modal",template:l.template||"component/0/shop-intent-modal.html",title:fpUi.localef("shopper-intent-title","Welcome to {0}",fpConfig.siteTitle),subTitle:c&&!_.size(d)?l.ageGateModalSubTitle:l.modalSubTitle||fpUi.locale("shopper-intent-sub-title","What would you like to do?"),actionTitle:l.modalActionTitle,className:"fp-shop-intent-modal"+(o?" fp-shop-intent-see-price":""),size:"md",contentImg:l.contentImg,contentImgTest:l.contentImgTest,enableAgeGate:c,ageGateSubtitle:l.ageGateSubtitle,disableClose:l.disableClose||c,items:d};if(a){u=_.getObject(_.findWhere(d,{identifier:a})),fpUi.setFulfillmentType(u.identifier,!0);var v=_.getObject(l[a]);_.contains(["delivery","drop_ship"],a)?g.title=S.getString(v.searchInstructions,fpUi.locale("shopper-intent-search-instructions","Enter Your Address")):g.title=v.title||fpUi.localef("shopper-intent-select-store-title","Select your {0} store",u.name),g.size=fpConfig.enableMobile?"vw":"lg",g.content=h(a)}function y(){var e;fp.store.id&&(fp.loaded||(e=fpUi.loadStoreDependencies(!0)),$.when(e).done(function(){fpUi.hideModal(w)}))}var b,w=fp.__$shopIntentModal=fpUi.showModal(g);return w.on("show.bs.modal.shopIntent",function(){fp.on(fp.events.STORE_AFTER_CHANGE,y);var e=w.find('[data-role="modal-content"]');b=e.html(),a||e.children().removeClass("hidden"),fpConfig.enableMobile&&w.find("> .modal-dialog").addClass("modal-vw-sm-down")}).on("shown.bs.modal.shopIntent",function(){if(a){var e=fpUtil.isPromise(g.content)?g.content:void 0;$.when(e).done(function(){w.find('[data-role="prev"]').removeClass("invisible")})}fp.setSessionCookie({shopIntentModalLastViewedAt:(new Date).getTime()})}).on("hidden.bs.modal.shopIntent",function(){"shop_intent"==s.stateParams.modal&&s.go(s.current,{modal:null,modal_action:null},{preventDefault:!0,inherit:!0}),o&&("store-locator"==a?fpUi.closeActiveModal():fp.store&&fp.store.id&&fp.ui.router.stateManager.go(o,null,{absolute:!0,reload:!0})),fp.off(fp.events.STORE_AFTER_CHANGE,y),delete fp.__$shopIntentModal,fp.__shopIntentPromise.deferred().resolve(),delete fp.__shopIntentPromise;var e={};fp.loaded?e.rendered=!0:e.initialized=!0;var t=fp.Module.getViewModule({attrs:e}),n=t&&t.config.requireStore;if(_.isObject(n)&&!n.disabled&&n.enableRedirect&&fpUtil.ensureStore(n),"store-locator"!=a){var i=fpUtil.map.get("storeFulfillmentType"),r=fpUi.getPreference("fulfillmentTypeId");(u=i.get(u&&u.identifier)).id||(u=i.get(r)),S(u.id).ne(r)&&fpUi.setFulfillmentType(u.identifier,!0)}}).on("click.modal.prev",'[data-role="prev"]',function(e){e.preventDefault(),$(this).addClass("invisible"),fpUi.updateModalSize(w,fpConfig.enableMobile?"vw":"lg","md"),w.find('[data-role="title"]').text(fpUtil.formatString("Welcome to {0}",fpConfig.siteTitle));var t=w.find('[data-role="modal-content"]').html(b).removeClass(g.animatedLoadingContainerClass);t.find('[data-role="animated-loading"]').remove(),t.children().removeClass("hidden"),l.enableAgeGate&&(t.find('[data-role="age-gate"]').toggleClass("hidden",fpUtil.getBoolean(fp.getSessionCookie().ageGate)),t.find('[data-action^="change-"]').prop("disabled",!1))}).on("click.modal.shopIntent",'[data-role="modal-content"] [data-action^="change-"]',function(e){e.preventDefault();var t=$(this).attr("data-action").split("change-")[1];if(u=_.getObject(_.findWhere(d,{identifier:t})),"plan"==t)fpUi.hideModal(w);else{w.find('[data-role="modal-content"]').html(fpUi.renderTemplate("component/0/animated-loading.html")).addClass(g.animatedLoadingContainerClass);var n,i=_.getObject(l[t]);n=_.contains(["delivery","drop_ship"],t)?S.getString(i.searchInstructions,fpUi.locale("shopper-intent-search-instructions","Enter Your Address")):i.title||fpUtil.formatString("Select your {0} store",u.name),w.find('[data-role="title"]').text(n),h(t).done(function(e){var t=w.find('[data-role="modal-content"]').removeClass(g.animatedLoadingContainerClass),n=t.find('[data-role="body-content"]');n.length||(n=t),n.empty().append(e.$element),w.find('[data-role="prev"]').removeClass("invisible"),fpUi.updateModalSize(w,"md",fpConfig.enableMobile?"vw":"lg"),e.render();var i=w.data("bs.modal");i&&i.isShown&&i.focus()})}}).on("click.modal.shopIntent",'[data-action="start-shopping"]',function(e){e.preventDefault();var t=$(this),n=t.attr("data-store-id");n&&(fp.formLoader.show(t),fp.storeChange({storeId:n,callback:function(){fp.formLoader.hide()}}))}).on("change.modal.shopIntent",'input[name="input-age_gate"]',function(e){var t=this.checked,n=w.find('[data-role="modal-content"] [data-action^="change-"]').each(function(){var e=$(this).prop("disabled",!t);t&&r&&S(e.attr("data-action")).endsWith(r)&&e.trigger("click")});fp.setSessionCookie({ageGate:fpUtil.getBoolean(t)}),t&&!n.length&&fpUi.hideModal(w)}),fp.__shopIntentPromise},showAlertMeModal:function(e,g){var t,v;fpConfig.enableBreinify&&g&&(fpUtil.map.get("storeFulfillmentType").get("drop_ship").id||(t=fpService.storeService.get({for_fulfillment_state:fp.store.state,for_fulfillment_type_id:fpUtil.map.get("fulfillmentType").get("drop_ship").id}).done(function(e){v=_.first(e.items)}),e&&e.target&&new fpUi.Loading({appendTo:e.target,promiseHide:t,showOnInstantiate:!0,destroyOnHide:!0})),$.when(t).done(function(){var m=fpUi.showModal({name:"alert-me",size:"lg",template:"component/0/modal-alert-me.html",className:"fp-modal-alert-me",title:fpUtil.formatString("{0} Alert Me",fpConfig.siteTitle),item:g,dropShipStore:v}).on("click",'[data-action="confirm"]',function(e){e.preventDefault();var t=m.find('[data-role="modal-content"]'),n=fpUtil.getValueFromNamespace("Breinify.plugins.alertMe",window),i=t.find('[data-role="alert"]');if(!n)throw fpUtil.showError("Alert Me module was not found",i),new Error("Breinify.plugins.alertMe is undefined");var r=t.closest('form[name="fp-form-alert-me"]'),a=t.find('input[name="input-mobile-phone"]'),o=a.cleanVal(),s=t.find(".fp-dropdown-alert-time").data("fp.ui.Dropdown"),l=s&&fp.S(s.getValue()).split("|");if(o&&l){var c=new fpUi.Loading({appendTo:this,showOnInstantiate:!0,destroyOnHide:!0});fpUi.disableForm(r);var u=t.find('input[name="input-fulfillment-inform"]'),d=l[2],f=fpUtil.map.get("storeFulfillmentType").get("drop_ship").id?"delivery":"store",p={id:fp.store.store_number,type:f},h={start:60*fpUtil.getInteger(l[0])*60,end:60*fpUtil.getInteger(l[1])*60,weekdays:"0"==d||"-1"==d,weekends:"1"==d||"-1"==d};"delivery"!=f&&(p.name=fp.store.name,v&&u.prop("checked")&&(p=[p]).push({id:v.store_number,type:"delivery"})),n.set(fpUtil.formatString("+1{0}",o),{email:fp.user.email,userId:fp.user.store_card_number},{sku:g.like_code,name:g.name},p,h,function(e,t){c.hide(),fpUi.enableForm(r),e&&e.message?(fpUtil.showError(e.message.replace(/\[.*?\] /,""),i),fp.notifier.notify({name:"BreinifyWarning",message:e.message},{severity:"warning"})):(a.val(""),s&&s.setValue(s.$list.first().attr("data-value")),u.prop("checked",!1),m.find('[data-action="confirm"]').prop("disabled",!0),fpUtil.showSuccess("We sent you a message! Please check your phone and confirm the alert.",i,{fadeOutMs:null}))})}}).one("show.bs.modal",function(){var e=m.find('[data-role="modal-content"]'),t=m.find('[data-action="confirm"]');e.find('input[name="input-mobile-phone"]').attr("placeholder","(xxx) xxx-xxxx").mask("(000) 000-0000",{onKeyPress:function(){t.prop("disabled",!0)},onComplete:function(){t.prop("disabled",!1)}}),e.find(".fp-dropdown-alert-time").dropdown()}).one("hidden.bs.modal",function(){m.find('[data-role="content"] input[name="input-mobile-phone"]').unmask()})}))},showAddressModal:function(){var t,n,i=$.Deferred(),r=$.extend(_.getObject(Lockr.get("deliveryAddress")),fp.user.address),a={name:"address",content:i.promise(),className:"fp-address-modal",title:"Please enter a valid CA Shipping address below to enter the Cyber Monday Event.",buttons:[{title:fpUi.locale("shared-submit","Submit"),className:"fp-btn-submit",action:"submit-address"},{title:fpUi.locale("shared-cancel","Cancel"),action:"cancel",className:"fp-btn-cancel"}]},s=fpUi.showModal(a).on("click",'[data-action="submit-address"]',function(e){s.find('form[name="fp-form-address"]').trigger("submit")}).on("submit",'form[name="fp-form-address"]',function(e){e.preventDefault();var t=$(this);if(fpUtil.validateForm(t)){var n,i,r=fp.user.address,a=fpUi.getFormValues(t),o=t.find(".fp-error");Lockr.set("deliveryAddress",a),r&&r.id&&(a.id=r.id,i=fpService.userAddressService.update(a,{errorSelector:o})),i=$.when(i).then(function(){return fpService.storeService.get({for_address:fpUtil.getFormattedAddress(a,null,",",null),for_fulfillment_type_id:fpUtil.map.get("fulfillmentType").get("drop_ship").id})}).then(function(e){if((n=_.first(e.items))&&"3003"==n.id)return fp.setStore(n,!0);n=null}).done(function(){if(n)return fpUi.closeActiveModal(),void(window.location.href="/cyber-monday");fpUtil.showError("Must enter a valid CA Shipping address to enter the Cyber Monday Event.",o)}),new fpUi.Loading({appendTo:s.find('[data-action="submit-address"]'),showOnInstantiate:!0,destroyOnHide:!0,promiseHide:i})}});fpUtil.map.load({service:fpService.serviceProviderConfigurationService,payload:{service_provider_type:"user_configuration",service_provider:"user_address"}}).then(function(){if((t=_.getObject(fpUtil.map.get("spcUserConfiguration").get("user_address").config)).default_country_code)return fpService.regionService.get({parent:t.default_country_code,is_selectable:fpConfig.enableAddressIsSelectable||void 0,sort:"name"}).done(function(e){n=e.items})}).then(function(){fpUtil.isAuthenticated()||_.removeWhere(t.address_fields,{identifier:"phone"}),i.resolve($(fpUi.renderTemplate("component/0/address-fields.html",$.extend(a,{address:r,userAddressConfig:t}))).find('form[name="fp-form-address"]').append('<input type="submit" class="hidden" />'));var e=s.find('form[name="fp-form-address"]');t.user_state||e.find('[data-role="region"]').html(fpUi.renderTemplate("component/0/address-region.html",{regions:n,renderStoreCardSettings:{addressRequired:!0},state:r.state,profile:!1,userAddressConfig:t})).find(".fp-dropdown-region").dropdown(),e.find('[data-role="city"]').html(fpUi.renderTemplate("component/0/address-city.html",{cities:null,renderStoreCardSettings:{addressRequired:!0},profile:!1,address:r,addressFieldHash:_.indexBy(t.address_fields,"identifier")})),fpUi.bindAddressAutoComplete(e)})},getLoginRedirectUrl:function(e){var t=(e=_.getObject(e)).next,n=fpUtil.getBoolean(e.autoRedirect,!0);if(fpConfig.pageInterceptUrl&&n&&(!t||t&&0<=t.indexOf(fpConfig.pageInterceptUrl))&&(t="/"),_.isFunction(t)&&(t=t()),t)try{t=decodeURIComponent(t)}catch(e){fp.notifier.notify(e),t=null}if(!e.allowAllUrls&&t&&(t=fpUi.router.routeManager.relativeUrl(t)),!t&&n&&(t=S.getString(window.document.referrer,"/")),t){var i={token:null};t=this.router.routeManager.buildUrl(t,{searchParams:i,routeSearchParams:i,inherit:!0})}return t},applyUserLocaleToUrl:function(e,t){var n=e;if(fpConfig.enableLocaleRoute&&fpUtil.isAuthenticated()&&!fp.getSessionCookie().impersonate){var i=fpConfig.enableLocale&&fp.locale,r=fp.user.locale;if(i&&r&&r!=i){var a,o,s=fpUi.router.stateManager;if(n){var l=s.getStateFromUrl(n,null,!0);a=l.state,o=_.omit(l.params,t)}else a=s.current,o=_.omit(s.stateParams,t);o.lang=r||null,n=s.href(a,o)}}return n},getAdminUrl:function(){return"admin"==fpConfig.intent?fpUi.router.location.origin():"https://admin.freshop.com"},getCheckoutUrl:function(){var e,t=fpUi.router.stateManager;return 1==_.size(fp.store.fulfillment_types)&&(e=t.get(fpUtil.formatString("{0}-{1}",fpConfig.routeStates.checkout.name,fp.store.fulfillment_types[0].identifier))),e=e||fpConfig.routeStates.checkout,t.href(e)},getOauthLoginUrl:function(){var e=fpUtil.map.get("spcUserAuthenticationType",null,!0);if(1==e.items().length&&!e.get("username_password").id){var t=fpUi.getOauthTypes()[0];return t&&t.url}},getMediaSize:function(e){if(S(fp.device.screen).eq("XS",!0))return"XS";if(!fpUtil.isInteger(e))return"";var t=fpConstants.matchContainerMin,n="LG";return e<t.SM?n="XS":e<t.MD?n="SM":e<t.LG&&(n="MD"),n},getContainerPadding:function(e){var t=0;return fpUtil.isJQuery(e)&&e.length&&e.parents(".container, .container-fluid").add(e.filter(".container, .container-fluid")).each(function(){return 0<(t=fpUtil.getInteger($(this).css("paddingLeft")))}),t},getClassName:function(e,t,n){return S.getString(fpUtil.getStateValue(e,t,n))},getItemClassName:function(e){var t=[];if(e&&e.id){var n=e.sale_configuration_type_id&&fpUtil.map.get("saleConfigurationType").get(e.sale_configuration_type_id,null,!0).identifier;n&&t.push("fp-item-"+n),_.each(e.offers,function(e){_.each(e.tags,function(e){t.push("fp-item-offer-"+e)})}),e.store_card_required&&t.push("fp-item-store_card_required")}return t.join(" ")},onProductAdClick:function(e,t,n){if(!fpUtil.isEvent(e)||!fpUtil.isProductAd(t))return $.when();n=_.defaults(n,{showProductModal:!1});var i,r,a=$(e.target),o="click"==e.type,s=a.closest(".fp-item"),l=a.closest("a"),c=a.closest(".fp-item-image"),u=n.triggerTrackUrl;if(fpUtil.isNull(u)&&!t.__hasTrackedInteraction&&(u=!1,l.length?u=!0:c.length?(u=!0,l=s.find(".fp-item-image a")):s.find(".fp-item-action:visible, .fp-item-favorite:visible").length?(a.hasClass("fp-item-favorite")||a.closest(".fp-item-action").length)&&(u=!0):(u=!0,l=s.find(".fp-item-image a"))),u&&!t.__hasTrackedInteraction){var d=fpUi.router.stateManager;fp.isDev()&&!fpUtil.getBoolean(d.stateParams.enable_track_url)?fp.log("Product Ad Interaction Track Url:",t.interaction_track_url):r=S(t.interaction_track_url).startsWith(fp.apiBaseUrl)?fp.api(t.interaction_track_url,{token:null},{apiKey:null,ignoreErrors:!0}):fpUi.preloadImage(t.interaction_track_url),!o||n.disableRedirectToDetail||n.showProductModal||(l.length&&(i=l.attr("href")),fp.ui.router.location.isCurrentPage(i)||(e.preventDefault(),fp.formLoader.show(s.find(".fp-item-image a")),$.when(r).always(function(){fp.formLoader.hide(),d.go(i,null,{absolute:!0})}))),fp.disableHasTracked||(t.__hasTrackedInteraction=!0)}if(o&&n.showProductModal)if(e.preventDefault(),"coupon"==n.displayType)fp.ui.showOfferModal(t.product&&t.product.clippable_offer);else{var f=_.size(t.products)?t.products:[t],p={},h=[];_.each(f,function(e){h.push(e.product_id),e.product_id==t.product_id&&e.interaction_track_url&&!fp.disableHasTracked&&(e.__hasTrackedInteraction=!0),p[e.product_id]=e}),fp.trigger(fp.events.PRODUCTS_MODAL_SHOW,{title:n.title||fp.ui.locale("shared-add-products-list","Add Product to List"),productIds:h,productAds:f,hashedProductAds:p})}return $.when(r)},onBannerAdClick:function(e,t,n){if(!fpUtil.isEvent(e)||!fpUtil.isBannerAd(t))return $.when();n=_.getObject(n);var i,r,a=$(e.target).closest("a"),o=n.triggerTrackUrl;return fpUtil.isNull(o)&&(o=0<a.length),o&&!t.__hasTrackedInteraction&&(fp.isDev()?fp.log("Banner Ad Interaction Track Url:",t.interaction_track_url):r=S(t.interaction_track_url).startsWith(fp.apiBaseUrl)?fp.api(t.interaction_track_url,{token:null},{apiKey:null,ignoreErrors:!0}):fpUi.preloadImage(t.interaction_track_url),n.disableRedirect||(a.length&&(i=a.attr("href")),fp.ui.router.location.isCurrentPage(i)||(e.preventDefault(),fp.formLoader.show(a),$.when(r).always(function(){fp.formLoader.hide(),fp.ui.router.stateManager.go(i,null,{absolute:!0})}))),fp.disableHasTracked||(t.__hasTrackedInteraction=!0),n.showProductModal&&fp.trigger(fp.events.PRODUCTS_MODAL_SHOW,{title:fpUi.locale("shared-add-products-list","Add Product to List"),productIds:productIds,hashedProductAds:hashedProductAds,mode:"search"})),$.when(r)},triggerTrackUrls:function(e){if(_.isObject(e)){var n,i,t=fpUi.router.routeManager.urlParams,r=fpConfig.enableMultiplex&&"false"!=t.enable_multiplex,a=!fp.isDev()||fpUtil.getBoolean(t.enable_track_url),o=[],s=[];_.each(_.isArray(e)?e:[e],function(t){n=t.track_urls?t.track_urls:t.track_url&&[t.track_url],!t.__hasTrackedUrl&&_.size(n)&&(fp.disableHasTracked||(t.__hasTrackedUrl=!0),_.each(n,function(e){e&&(s.push(e),i=S(e).startsWith(fp.apiBaseUrl),r&&i?o.push(e):a&&(i?fp.api(e,{token:null},{apiKey:null,ignoreErrors:!0}):fpUi.preloadImage(e)))}),t.product_id&&_.find(t.items||t.products,function(e){if(e.product_id==t.product_id)return e.track_url&&!fp.disableHasTracked&&(e.__hasTrackedUrl=!0),!0}))}),a?r&&o.length&&fpService.multiplexService.run(o,{enableMultiplex:!0,ignoreErrors:!0}):fp.log("Product Ad Track Urls:",s)}},getTreeifiedCategoryExts:function(e,t,n){var i,r;if(_.size(e)&&_.isObject(t)){for(var a,o,s=0;s<e.length;s++)a=e[s],_.isString(a.id)&&((o=t[a.id])?(_.defaults(a,{name:o.name,sequence:o.sequence,canonical_url:n?void 0:o.canonical_url}),_.has(o,"parent_id")&&(a.parent_id=o.parent_id),_.has(o,"js_navigation_path")&&(a.js_navigation_path=o.js_navigation_path),fpUtil.isNull(a.parent_id)&&(d=a)):(e.splice(s,1),s--));if(e.length){var l=_.indexBy(e,"id"),c=[];for(s=0;s<e.length;s++)a=e[s],fpUtil.isNull(a.parent_id)?c.push(a):l[a.parent_id]||(o=t[a.parent_id])&&(a={id:o.id,name:o.name,sequence:o.sequence,canonical_url:n?void 0:o.canonical_url},_.has(o,"parent_id")&&(a.parent_id=o.parent_id),_.has(o,"js_navigation_path")&&(a.js_navigation_path=o.js_navigation_path),e.splice(s+1,0,a),l[a.id]=a);if(i=fpUtil.indexByAndTreeify(e,{childrenField:"items",childrenSortBy:"sequence"}),1<c.length){var u,d=t[c[0].id];for(s=1;s<c.length;s++)u=t[(a=c[s]).id],_.size(u&&u.items)>_.size(d&&d.items)&&(d=u,r=a)}r=r||fpUtil.sort(e,"parent_id")[0],r=_.getObject(i[r.id])}}return{treeifiedExts:_.getObject(i),topCategoryExt:_.getObject(r)}},loadCategories:function(e){var t,n;return this.getCategories(null,null,e).done(function(e){t=e.categories,n=e.hashedCategories}).always(function(){fp.defaultDepartment=_.firstObject(t,fp.defaultDepartment),fp.departments=_.getArray(t),fp.departmentHash=_.getObject(n),fpUtil.initDepartment(),fp.trigger(fp.events.DEPARTMENTS_LOADED,fp.defaultDepartment)})},getCategories:function(e,v,t){return"true"==fpUi.router.routeManager.urlParams.disable_categories?$.Deferred().resolve({categories:[],hashedCategories:{}}):(e=fpUtil.getUndefinedIfEmpty(e),t||(t=_.uniqueId(),r=!0),i="recipe"==v?(S="categories",n=fpService.recipeCategoryService.get({store_id:e,has_recipes:!0},{handleErrors:!1,multiplexId:t}).done(function(e){y=e}),fpService.recipeService.get({store_id:e,include_categories:!0,category_id_cascade:!0,limit:0},{handleErrors:!1,multiplexId:t}).done(function(e){b=e})):(v="product",S="departments",e||fp.store.id||!fpConfig.topShopStoreId||(e=fpConfig.topShopStoreId),n=fpService.departmentService.get({store_id:e,limit:-1},{handleErrors:!1,multiplexId:t}).done(function(e){y=e}),fpService.productService.get({store_id:e,include_departments:!0,department_id_cascade:!0,limit:0},{handleErrors:!1,multiplexId:t}).done(function(e){b=e})),n=n.then(function(e,t,n,i){w=i}),r&&fpService.multiplexService.run(t),$.when(n,i).then(function(){var e,t=[],n=[],i=y&&y.items,r=b&&b[S];if(_.size(i)&&_.size(r)){i=_.indexBy(i,"id");var a,o,s,l=_.indexBy(r,"id"),c={},u="recipe"==v?"/recipe":fpConfig.urls.shopping;_.each(r,function(e){if(f=i[e.id])for(f.parent_id?t.push(f):n.push(f),s=f,o={};f;)o[f.id]?(c[f.id]||(c[f.id]=1,fp.notifier.notify({name:"CategoryError",message:fpUtil.formatString("CategoryError: Circular reference detected for {0} category ({1})",v,f.id)},{severity:"error"})),f=null):(o[f.id]=1,(f=f.parent_id?i[f.parent_id]:null)&&(l[f.id]||(f.parent_id?t.push(f):n.push(f),l[f.id]=f),fpConfig.enableMobile&&"product"==v&&(a=(a=f.__origJsNavPath)||(f.__origJsNavPath=f.js_navigation_path))&&(f.canonical_url&&(f.canonical_url=f.canonical_url.replace(a,u)),s.js_navigation_path&&(a=(a=s.__origJsNavPath)||(s.__origJsNavPath=s.js_navigation_path)),s.canonical_url&&(s.canonical_url=s.canonical_url.replace(a,u)),f.js_navigation_path=s.js_navigation_path=void 0)))});for(var d=n.length-1;0<=d;d--)t.unshift(n[d]);if(e=fpUtil.indexByAndTreeify(t,{childrenField:"items",childrenSortBy:"sequence"}),1<n.length){var f,p,h=-1,m=e[(f=t[0]).id],g=f.id;for(d=1;d<n.length;d++)g+=","+(f=t[d]).id,p=e[f.id],_.size(p&&p.items)>_.size(m&&m.items)&&(h=d);0<=h&&_.move(t,h,0),fp.notifier.notify({name:"CategoryError",message:fpUtil.formatString("CategoryError: More than one top level {0} category detected ({1})",v,g)},{severity:"error",metaData:{"meta data":{"API Url":w&&fpUtil.getApiUrl(w.url,w.data,w.method)}}})}}return{categories:t,hashedCategories:_.getObject(e)}}).promise());var y,b,n,i,S,w,r},getActiveCategory:function(){var e,t,n=fp.Module.getViewModule({configAttrs:{name:"product-detail"},attrs:{enabled:!0,initialized:!0}}),i=_.getObject(fpUtil.getTopDepartment(fp.department.id));if(n){var r=fpUtil.getValueFromNamespace("scope.item",n);e=r&&_.first(r.department_id)}return e=fpUtil.getItemId(e,fpUi.router.stateManager.stateParams.department_id||fp.moduleDepartmentId),(t=_.getObject(e&&fp.departmentHash[e])).id&&t.id!=i.id?t:{}},loadStoreDependencies:function(e){if(fpConfig.disableInitializeShopping)fp.__promiseLoadStoreDependencies=fpUtil.map.load({refresh:fp.loaded,service:fpService.serviceProviderConfigurationService,payload:{service_provider_type:"user_authentication_type"}});else{var t,n=[],i="ad_network,digital_coupons,store_card,store_setting,review_target_type,product_data,user_authentication_type,product_configuration,user_analytics",r=_.uniqueId(),a="";_.empty(fp.digitalCouponsSettings),_.empty(fp.storeCardSettings),_.each(["hasDigitalCoupon","myCouponTitle","distanceUnit","hasRewardHistory","hasReward","hasReceipt","hasSavedPayment","productReviewSettings","hasProductSubscriptions","productConfigurationConfig"],function(e){delete fp[e]}),n.push(fpUi.loadCategories(r)),fp.store.id&&fp.store.id!=fp.topStore.id&&(a&&(a+=","),a+="fulfillment_type,user_title"),fpUtil.isAuthenticated()&&(i+=",reward_history,reward,order_data,payment_type,product_subscription"),a&&(t=fpUtil.map.load({service:fpService.tagService,cacheKeyPrefix:"store_",refresh:e||fp.loaded,payload:{type:a,store_id:fp.store.id},options:{multiplexId:r}}),n.push(t)),(a=S(a)).contains("fulfillment_type")||(t=fpUtil.map.load({cacheKey:"storeFulfillmentType",refresh:!0,data:{},options:{multiplexId:r}})),a.contains("payment_type")||(t=fpUtil.map.load({cacheKey:"storePaymentType",refresh:e||fp.loaded,data:{},options:{multiplexId:r}}),n.push(t)),t=fpUtil.map.load({refresh:fp.loaded,service:fpService.serviceProviderConfigurationService,payload:{service_provider_type:i},options:{multiplexId:r}}).then(function(){var e=fpUtil.map.get("spcDigitalCoupon"),t=fpUtil.map.get("spcStoreCard");return fp.hasDigitalCoupon=0<e.items().length,fp.digitalCouponsSettings=fpUtil.getObjectFromNamespace("config",_.firstObject(e.items())),fp.myCouponTitle=fp.digitalCouponsSettings.my_coupon_title||fpConfig.myCouponTitle,fpConfig.enableCouponClipping=fp.digitalCouponsSettings.has_product_filter,fp.storeCardSettings=fpUtil.getObjectFromNamespace("config.store_card",_.firstObject(t.items())),fp.productReviewSettings=fpUtil.map.get("spcReviewTargetType").get("product").config,fp.sponsoredAdConfig={},fp.popUpSettings=fpUtil.map.get("spcStoreSetting").get("pop_up"),fp.productConfigurationConfig=fpUtil.map.get("spcProductConfiguration").get("product_find").config,fp.productConfigurationConfig&&(fp.productConfigurationConfig.disallow_substitutions&&(fpConfig.hasSubstitutions=!1),fp.productConfigurationConfig.allow_search_substitutions&&(fpConfig.hasSearchSubstitutions=!0)),fpConfig.enableUserAnalytics=0<fpUtil.map.get("spcUserAnalytic").items().length,_.find(fpUtil.map.get("spcAdNetwork",null,!0).items(),function(e){if(e.config)return fp.sponsoredAdConfig=e.config,!0}),fpUtil.isAuthenticated()&&(fp.hasRewardHistory=0<fpUtil.map.get("spcRewardHistory").items().length,fp.hasReward=0<fpUtil.map.get("spcReward").items().length,(fp.hasReward=0<fpUtil.map.get("spcReward").items().length)&&(config=fpUtil.map.get("spcReward").items()[0].config,fp.hasReward=config.reward_menu!=fp.constants.cardFieldStatus.HIDE),fp.hasReceipt=null!=fpUtil.map.get("spcOrderData").get("in_store_receipt").id,fp.hasSavedPayment=null!=fpUtil.map.get("spcPaymentType").get("saved_payment").id,fp.hasProductSubscriptions=0<fpUtil.map.get("spcProductSubscription").items().length),fpService.currencyService.get()}),n.push(t),fp.store.timezone&&fp.timeZone&&fp.timeZone!=fp.store.timezone&&n.push(fpUi.loadFileDependencies({src:"date-fns-tz.js"})),fp.__promiseLoadStoreDependencies=$.when.apply($,n),fpService.multiplexService.run(r)}return fp.__promiseLoadStoreDependencies},preloadImage:function(e,t){var n,i=_.isString(e)&&e.length?$("<img/>"):e;return e=null,fpUtil.isJQuery(i)&&S(i.prop("nodeName")).eq("img",!0)?(n=$.Deferred(),i.one("load",n.resolve).one("error",n.resolve),e&&i.attr("src",e),i[0].complete?n.resolve():t&&_.delay(function(){n.resolve()},t)):i=$(),$.when(n).then(function(){return i}).promise()},getImageSize:function(e,t){return this.preloadImage(e,t).deferred().then(function(e){e.appendTo(fp.__$freshop);var t={width:e.width(),height:e.height()};return e.remove(),t}).promise()},getOptimizedImage:function(t,n,i){var r={};if(fpConfig.enableImageOptimization&&n){var a,o,s=fpConfig.imageSizes[n];i&&_.has(s,i)||(i="md"),r.srcSet="",_.each(fpConfig.imageSizes.renderSequence,function(e){(a=s[e])&&(o=fpUtil.getImageSrc(t,{width:a},"circular"==n?fp.store.circular_pdf_config:fp.store.image_config,n),i==e&&(r.src=o),r.srcSet&&(r.srcSet+=", "),r.srcSet+=o+" "+a+"w")})}return r},updateImageGridItemWidth:function(e){if($(e).length){var t=fp.S(e.prop("className")).match(/fp-image-(?!md)\S+/gim),n=fpUtil.formatString(".fp-item-list-image{0} .fp-item",t?"."+t[0]:""),i=e.addClass("fp-transition-none").find("> .fp-item:first");fp.jss.remove(n);var r=e.outerWidth(),a=i.outerWidth();if(a){var o=Math.floor(r/a),s=fp.jss.get(n);.33*a<=r%a&&o++,s.width=s.height=fp.numeralInstance.set(r).divide(o).add(1).round(3).value()+"px",fp.jss.set(n,s)}_.delay(function(){e.removeClass("fp-transition-none")},500)}},clipOffer:function(t,n){n=_.getObject(n);var r=fpUi.router,e=r.stateManager.stateParams,a=fpConfig.storeCard,o=a.customCouponError?a.customCouponError:"phone number.";if(!fpUtil.isAuthenticated()&&!e.card){var i=$.Deferred(),s="Please sign in",l=S.getString(a.signInContent,"Please sign in to add coupons."),c="Sign In",u="Cancel";return n.enableAnonymous&&(s="Customer card number",l="Please enter a customer card number.",c=u=""),fp.trigger(fp.events.CONFIRM_MODAL_SHOW,{title:s,content:l,confirmButtonLabel:c,cancelButtonLabel:u,callback:function(e){e?n.enableAnonymous||r.routeManager.redirect(fpConfig.routeStates.login,{error:fpUi.locale("ui-sign-continue","Please sign in to continue.")}):i.resolve()}}),i.promise()}var d,f,p=n.disableCouponUpSell;if(_.has(n,"disableCouponUpSell")||(p=fpConfig.disableCouponUpSell),!t.is_clipped||t.clipped_count){var h={id:t.reference_id||t.id},m=$.extend(_.getObject(n.apiOptions),{formatForRestfulId:!0,errorFadeOutMs:1e4,childServiceCall:"clip"}),g=fpUtil.getBoolean(m.handleErrors,!0);m.handleErrors=!1,n.enableAnonymous&&e.card&&(h.card_number=e.card),fp.formLoader.show($(n.$button)),d=fpService.offerService.post(h,m).catch(function(e,t,n){if(fpUtil.isAuthenticated()){f=n;var i=fpUtil.getXhrErrorResponse(e);switch(i.error_code){case"store_card_required":case"store_card_invalid":m.enableStoreCardModalError?f=i.error_message:(f=fpUtil.formatString('{0} Please go to <a href="{1}">My Account</a>, then add a valid ',S(i.error_message).ensureEnd().s,r.stateManager.href(fpConfig.routeStates.account)),fp.storeCardSettings.store_virtual_card==fpConstants.cardFieldStatus.REQUIRED?f+=o:f+=o||fpUtil.formatString("card/key tag number under the {0} section.",S.getString(a.profileCardTitle,"Store Card")))}p&&g&&fpUtil.showError(f,m.errorSelector,{fadeOutMs:1e4})}return fpUtil.getRejectedPromise(arguments)}).done(function(e){t.is_clipped=!0,fp.trigger(fp.events.OFFER_ITEM_CLIPPED,{item:t})})}return $.when(d).always(function(){fp.formLoader.hide(),fp.isUnloading||p||(m.enableStoreCardModalError&&f?fpUi.showCardSettingsModal({error:f}):fpUi.showOfferModal(t,{disableCouponUpSell:p,enableClipOfferOnShown:!1,error:f}))})},showCardSettingsModal:function(t){if(!t||t.error){var n,e=window.location.pathname,i=fp.config.storeCard,r=fp.storeCardSettings,a={},o=i.linkCopy,s=12,l=fp.constants.cardFieldStatus,c=fp.user.address;if(c&&c.address_1&&c.postal_code&&c.phone){function u(e){var t={},n=e.find('[data-role="error"]').hide();r.store_virtual_card==l.REQUIRED&&(t.need_store_card=!0),t.card_number=fp.S(e.find('[name="input-card_number"]').val()).trim().s,fpService.userStoreCardService.create(t,{errorSelector:n}).then(function(e){fp.ui.closeActiveModal(),window.location.reload()})}i.linkCopyPerStore&&i.linkCopyPerStore[storeId]&&(o=i.linkCopyPerStore[storeId]),r.card_number_length&&0<_.size(r.card_number_length)&&(s=_.max(r.card_number_length)),r.user_date_of_birth=l.HIDE,a.hasDOBYear=null==i.showDOBYear||i.showDOBYear,a.phoneLabel=fp.config.formLabels&&null!=fp.config.formLabels.phone?fp.config.formLabels.phone:fp.ui.locale("shared-phone","Phone"),a.phoneLabelInstructions=fp.config.formLabels&&null!=fp.config.formLabels.phoneLabelInstructions?fp.config.formLabels.phoneLabelInstructions:"",a.storeCardLabel=i.linkLabel||fp.ui.locale("profile-store-card","Store Card or Key Tag #"),a.newCardLabel=r.store_request_new_card_label||i.newCardLabel||fp.ui.locale("profile-request-card","Request New Card"),a.createCardLinkCopy=o,a.cardMaxLength=s,a.storeCardNumberRequired=!0,n=fpUi.showModal({name:"Store Card Settings",template:"component/0/modal.html",className:"fp-store-card-settings-modal",title:t.title||"Store Card",content:fp.ui.renderTemplate("component/0/animated-loading.html"),buttons:[{title:fpUi.locale("shared-submit","Submit"),className:"fp-btn-submit",action:"submit"}]}).on("shown.bs.modal.storeCardSettingsModal",function(){var e=fpUi.renderTemplate("component/0/store-card-settings.html",{config:t,storeCardSettings:r,renderStoreCardSettings:a,storeCardConfig:i,intent:"modal"});n.find('[data-role="modal-content"]').html(e).find('[data-role="animated-loading"]').remove(),fpUtil.showError(t.error,n.find('[data-role="error"]'))}).on("submit",'form[name="fp-store-card-form"]',function(e){e.preventDefault();var t=$(this);fp.util.validateForm(t)&&u(t)}).on("click",'[data-action="submit"]',function(e){var t=n.find('form[name="fp-store-card-form"]');fp.util.validateForm(t)&&u(t)})}else{e=window.location.pathname;var d=$.extend({intent:"modal",next:e},fp.config.modules.account.modules.profile),f=fp.ui.showModal({name:"fp-my-account-modal",className:"fp-my-account-modal",size:"lg",title:fp.ui.locale("shared-my-account","My Account"),content:fp.ui.renderTemplate("component/0/animated-loading.html")}).on("shown.bs.modal.storeCardSettingsModal",function(){var e=f.find('[data-role="modal-content"]');d.name="profile",d.intent="modal",d.elementSelector=$('<div id="profile-modal"></div>').appendTo(f.find('[data-role="modal-content"]')),fp.ui.loadModule(d).then(function(e){return e.init()}).always(function(){e.find('[data-role="animated-loading"]').remove(),fpUtil.showError(t.error,f.find('[name="fp-form-profile"] [data-role="error"]'))})})}}},showOfferModal:function(n,t){if(n&&n.id)if(0==(t=_.getObject(t)).enableClipOfferOnShown||!fpConfig.enableClipOfferOnShown||n.is_clipped&&!n.clipped_count){var e=fpUi.router.stateManager,i=fpUtil.getBoolean(t.disableCouponUpSell,fpConfig.disableCouponUpSell),r=fpUtil.getStateValue(!i,n.product_ids),a=$(fpUi.renderTemplate("component/1/clippable-offer.html",{item:n},null,!0)).on("click",'[data-action="show-disclaimer"]',function(e){e.preventDefault(),fpUi.showModal({name:"offer-disclaimer",className:"fp-offer-disclaimer-modal",title:S.getString(n.brand,"Disclaimer"),content:n.offer_disclaimer})}).on("click",'[data-action="clip-offer"]',function(e){e.preventDefault();var t=$(this);!n.clipped_count&&n.is_clipped||fpUi.clipOffer(n,{$button:t,disableCouponUpSell:!0,apiOptions:{errorSelector:a.find('[data-role="notification"]').hide(),handleErrors:!0}}).done(function(){t.toggleClass("fp-is-offer-clipped",fpUtil.getBoolean(n.is_clipped))})});fp.trigger(fp.events.PRODUCTS_MODAL_SHOW,{title:r?"Would you like to add it to your shopping list?":n.name,mode:fpUtil.getStateValue(!i,"search"),disableSearchForNoProducts:!0,productIds:r,allowGenericItem:!1,disableNoProductsFound:!0,introContent:a,listManager:t.listManager}),fp.$productsModal.one("shown.bs.modal.offer",function(){if(t.error){var e=fpConfig.enableCouponErrorLongTerm?null:1e4;fpUtil.showError(t.error,a.find('[data-role="notification"]'),{fadeOutMs:e,handleScroll:!1})}}).one("hidden.bs.modal.offer",function(){e.go(e.current,{offer_id:null},{preventDefault:!0,inherit:!0})}),e.go(e.current,{offer_id:n.id},{preventDefault:!0,inherit:!0,enableSearchParams:t.enableSearchParams})}else{var o=$(t.target).closest(".fp-item, .fp-item-clippable-offer").find('[data-action="clip-offer"]');this.clipOffer(n,{$button:o}).done(function(){o.toggleClass("fp-is-offer-clipped",fpUtil.getBoolean(n.is_clipped))})}},showOfferDetailModal:function(e){_.size(e&&e.product_ids)&&fp.trigger(fp.events.PRODUCTS_MODAL_SHOW,{title:e.name,subTitle:e.description,productIds:e.product_ids,closeWhenNoProductsFound:!0,onClose:function(e){var t=fpUi.router.stateManager;t.go(t.current,{modal:null,modal_action_id:null},{preventDefault:!0,inherit:!0})}})},showPopUpModal:function(t,n){if(fp.ui.closeActiveModal(),t.trigger){var e=window.location.href,i=S(n).contains("age"),r=n+"_modal",a=[{title:fpUi.locale("shared-submit","Submit"),className:"fp-btn-submit",action:"submit-modal-fields"}],o=!0;if(i||a.push({title:fpUi.locale("shared-cancel","Cancel"),action:"cancel",className:"fp-btn-cancel"}),e.match(t.trigger)){var s,l=$.cookie("fp-popUp-"+n)?JSON.parse($.cookie("fp-popUp-"+n)):$.cookie("fp-popUp-"+n),c=[],u=_.filter(l,function(e){return e&&e.pop_up==n});0<_.size(u)?_.each(t.fields,function(e){!_.findWhere(u,{identifier:e.identifier})&&o&&(o=!1)}):o=!1,o||(s=fpUi.showModal({name:r,template:"component/0/modal.html",className:"fp-popup-modal"+r,title:t.title,disableClose:i,content:fp.ui.renderTemplate("component/0/animated-loading.html"),buttons:a}).on("shown.bs.modal.popUpModal",function(){var e=fpUi.renderTemplate("component/0/modal-fields.html",{config:t,fields:t.fields});s.find('[data-role="modal-content"]').html(e).find('[data-role="animated-loading"]').remove()}).on("click",'[data-action="submit-modal-fields"]',function(e){fp.util.validateForm(s.find('form[name="fp-modal-fields"]'))&&(s.find("input").each(function(e){var t=$(this);"checked"!=t.attr("checked")&&"checked"!=t.attr("radio")||c.push({pop_up:n,identifier:t.attr("name").replace("input-",""),value:t.attr("data-value")}),"text"==t.attr("type")&&c.push({pop_up:n,identifier:t.attr("name").replace("fp-input-",""),value:t.val()})}),$.cookie("fp-popUp-"+n,JSON.stringify(c),{path:"/",expires:fpUtil.getInteger(t.cookie_expires,365)}),fp.ui.displayPopUpModal(c,t))})).on("change",'input[type="radio"]',function(e){var t=$(this);t.siblings().attr("checked",!1),t.attr("checked",!0)}),o&&fp.ui.displayPopUpModal(u,t)}}},displayPopUpModal:function(e,t){var n=!0;if(!e)return n;_.each(e,function(e){"age"==e.identifier&&"no"==e.value&&(n=!1)}),n?fp.ui.closeActiveModal():t.trigger_false?window.location=t.trigger_false:window.location=fpConfig.urls.shopping},showRewardProductModal:function(e,t){if(e&&e.id){t=_.getObject(t);var n=$(fpUi.renderTemplate("component/0/reward-redemption-options-product-highlight.html",{item:e},null,!0));t.error&&fpUtil.showError(t.error,n.find('[data-role="notification"]'),{fadeOutMs:1e4,handleScroll:!1});var i=fpUi.router.stateManager,r=e.product_ids;fp.trigger(fp.events.PRODUCTS_MODAL_SHOW,{title:r?"Reward Details":e.name,productIds:r,allowGenericItem:!1,disableNoProductsFound:!0,introContent:n,mode:"search"}),i.go(i.current,{gift_id:e.id},{preventDefault:!0,inherit:!0}),fp.$productsModal.one("hidden.bs.modal",function(){i.go(i.current,{gift_id:null},{preventDefault:!0,inherit:!0})})}},postMetric:function(e,t,n,i,r){var a="true"==fpUi.router.routeManager.urlParams.enable_post_metric;if(!fp.isProd()&&!a)return fp.log(fpUtil.formatString("Total API Call Count: {0}",i)),fp.log(fpUtil.formatString("Sum of API Durations: {0}s (sum of time spent making API calls)",n)),fp.log(fpUtil.formatString("Total API Duration: {0}s (time between start of first API call and end of last API call)",t)),r&&fp.log(fpUtil.formatString("UI View Module Metric: {0}s",r)),void fp.log(fpUtil.formatString("UI Load Metric: {0}s",e));fpService.metricService.post({url:window.location.href,store_id:fp.store.id,duration:e,view_module_duration:fpUtil.getUndefinedIfEmpty(r),api_total_duration:t,api_sum_duration:n,api_call_total_count:i,pretty:void 0},{childServiceCall:"page_load"+(fp.isProd()&&!a?"":"?view_module_duration="+r),handleErrors:!1,ignoreErrors:!0})},initGoogleMapApi:function(n,i,r,e){if(e=e||fpConfig.intent,"admin"!=fpConfig.intent&&!_.contains(["location_map","location_autocomplete"],e))return $.when();var a;if(fpUtil.isNull(i)&&(i="places"),i=i&&"&libraries="+i,this.__deferredGmApi&&this.__deferredGmApi.__libriaries==i)return this.__deferredGmApi.promise();if((a=$(document.head).find('script[data-role^="gm-api-"]')).length&&(!i||S(a.attr("src")).contains(i)))return $.when();var o,s=this,l="_gmApi";return fpUtil.getValueFromNamespace("google.maps",window)&&delete window.google.maps,this.__deferredGmApi=$.Deferred(),this.__deferredGmApi.__libriaries=i,(n=n||fp.store.id)||"admin"!=e?fpService.serviceProviderConfigurationService.get({store_id:n,service_provider_type:_.contains(["location_map","location_autocomplete"],e)?e:"location"},{cache:!0}).then(function(e){if(o=fpUtil.getValueFromNamespace("config.public_api_key",_.first(e.items)))window[l]=function(){clearTimeout(s.__gmApiTimeoutId),s.__deferredGmApi&&s.__deferredGmApi.resolve()},clearTimeout(s.__gmApiTimeoutId),0<(r=fpUtil.getInteger(r,3e3))&&(s.__gmApiTimeoutId=_.delay(window[l],r)),fpUi.loadScript(fpUtil.formatString("https://maps.googleapis.com/maps/api/js?key={0}{1}&callback={2}",o,i,l),{"data-role":"gm-api-"+a.length});else if(s.__deferredGmApi){var t=fpUtil.formatString('config.public_api_key not found for store_id "{0}".',n);s.__deferredGmApi.resolve(),fp.notifier.notify({name:"GoogleMapApiWarning",message:fpUtil.formatString("GoogleMapApiWarning: {0}",t)},{severity:"warning"})}}):s.__deferredGmApi.resolve(),this.__deferredGmApi.promise().always(function(){clearTimeout(s.__gmApiTimeoutId),delete s.__gmApiTimeoutId,delete s.__deferredGmApi})},getMarkerLabel:function(e){var t=fpUtil.getValueFromNamespace("google.maps",window);if(t){if(!this.MarkerLabel){function n(e){this.options=e,this.setMap(e.map)}((this.MarkerLabel=n).prototype=new t.OverlayView).draw=function(){this.$element||(this.$element=$(fpUtil.formatString('                             <div class="fp-icon fp-icon-map-marker{2}" data-id="{0}">                                 <span class="fp-badge-icon">{1}</span>                             </div>',this.options.id,this.options.text,this.options.className)),this.getPanes().overlayImage.appendChild(this.$element[0]),self=this,t.event.addDomListener(this.$element[0],"click",function(e){e.preventDefault(),e.stopImmediatePropagation(),_.isFunction(self.options.clickHandler)&&self.options.clickHandler(e)})),this.setPosition(this.options.position)},n.prototype.remove=function(){this.$element&&(this.$element.remove(),delete this.$element)},n.prototype.getPosition=function(){return this.options.position},n.prototype.setPosition=function(e){if(this.$element){var t=this.getProjection().fromLatLngToDivPixel(e);t?this.$element.css({display:"block",top:t.y-this.$element.height(),left:t.x-.5*this.$element.width()}):this.$element.hide(),this.options.position=e}}}return new this.MarkerLabel(e)}},initMapBoxApi:function(){return fpUtil.getValueFromNamespace("mapboxgl",window)?$.when():this.__promiseMbApi?this.__promiseMbApi:(this.__promiseMbApi=fpUi.loadScript("https://api.mapbox.com/mapbox-gl-js/v0.54.0/mapbox-gl.js",{"data-role":"mb-api"}),this.__promiseMbApi.always(function(){delete fpUi.__promiseMbApi}))},getAssetCdnUrl:function(n,e){e=_.getObject(e);var i=S(n),t=_.getObject(e.imageConfig,fp.store.image_config),r=e.size,a=i.contains(".jpg")||i.contains(".png");if(t.prefix&&!i.startsWith("http",!0)&&(n=t.prefix+n),!i.startsWith("http://localhost")&&fpUtil.getBoolean(e.enableImageOptimization,fpConfig.enableImageOptimization)){var o=e.type;o||t!=fp.store.circular_pdf_config||(o="circular"),a&&_.find(t.suffixes,function(e,t){if(i.endsWith(e,!0))return n=n.replace(e,""),r=r||t,!(a=!1)}),_.isObject(r)||(r=fpConfig.imageSizes.map[r||"medium"],_.has(fpConfig.imageSizes,o)||(o="product"),r={width:fpConfig.imageSizes[o][r]}),e.otherAttributes&&(r.width||r.height)&&(r.width&&e.otherAttributes.width<r.width?(r.width=e.otherAttributes.width,r.height&&(r.height=e.otherAttributes.height)):r.height&&e.otherAttributes.height<r.height&&(r.height=e.otherAttributes.height,r.width&&(r.width=e.otherAttributes.width)));var s=r.width?"&width="+r.width:"",l=r.height?"&height="+r.height:"";if(i.startsWith("http")&&(i.contains("width")||i.contains("height")))n=(n=n.replace(/&width=\d+/,s)).replace(/&height=\d+/,l);else if(a||t.suffixes){var c=fp.assetCdnImageUrl,u=fp.hasWebp&&"jpeg"!==e.type;e.otherAttributes||"circular"!=o&&t!=fp.store.circular_pdf_config?c+="resize":(c+="convert",s=l=""),n=c+"?url="+n+(a?"":t.suffixes[e.otherAttributes?"original":"large"])+s+l+"&type="+(u?"webp":"jpeg")+"&quality="+(u?fpConfig.imageQuality[o]||40:90)}}else!a&&t.suffixes&&(r=S.getString(r,"medium"),n+=t.suffixes[r]);return n},bindAddressAutoComplete:function(a,o,s){if(s=_.isFunction(s)?{callback:s}:_.getObject(s),fpConfig.enableAddressTypeahead){a=$(a),o=S.getString(o,'[name="fp-input-{0}"]');var t=a.find(fpUtil.formatString(o,"address_1"));if(t.length){function e(e,t,n,i){if(c=e,u=n,i&&!S(e).eq(l)){var r,a=S(d.val()).trim().s;a=2==a.length&&a||_.has(s,"countryCode")&&s.countryCode||fpConfig.countryCode,l=e,fpService.locationService.get({address:e},{places:!0,types:s.types,countryCode:a,intent:s.intent}).done(function(e){r=e}).always(function(){n(r)})}}var l,c,u,d=a.find(fpUtil.formatString(o,"country"));s.enableMaxLength||t.removeAttr("maxlength"),t.attr("autocomplete","off").off("keypress.typeahead typeahead:open typeahead:close typeahead:select").on("keypress.typeahead",function(e){e.keyCode==fp.constants.keycode.RETURN&&$(this).typeahead("close")}).on("typeahead:open",function(e){t.parent().addClass("fp-tt-wrapper-open")}).on("typeahead:close",function(e){l=c=u=null,t.parent().removeClass("fp-tt-wrapper-open")}).on("typeahead:select",function(e,t,n){var i,r;t&&t.place_id&&(r=fpService.locationService.get({placeId:t.place_id},{places:!0,intent:s.intent})),$.when(r).done(function(e){i=_.firstObject(e)}).always(function(){s.disableApplyPlaceAddress||fpUi.applyPlaceAddress(a,o,i),_.isFunction(s.callback)&&s.callback(i)})}).idle("destroy").idle({onIdle:function(){c&&e(c,0,u,!0)},idle:300}).typeahead({minLength:3,highlight:!0,limit:5,hint:!1,classNames:{wrapper:"fp-typeahead-wrapper",menu:"fp-dropdown-menu",dataset:"fp-dropdown-list",suggestion:"fp-dropdown-list-item",input:"fp-tt-input",hint:"fp-tt-hint",selectable:"fp-tt-selectable",empty:"fp-tt-empty",open:"fp-tt-open",cursor:"fp-tt-cursor",highlight:"fp-tt-highlight"}},{display:function(e){return e.description},templates:{suggestion:function(e){return fpUtil.formatString('<div><a href="javascript:;" class="fp-tt-q" data-place-id="{0}"><span class="fp-icon fp-icon-map-marker"></span><span class="fp-tt-value">{1}</span></a></div>',e.place_id,e.description)}},source:e}),t.prev(".fp-tt-hint").removeAttr("fp-validate fp-autofocus")}}},applyPlaceAddress:function(t,n,e){t=$(t),n=S.getString(n,'[name="fp-input-{0}"]');var i=t.find(fpUtil.formatString(n,"address_1"));if(i.length){var r,a,o,s,l,c,u=this.getAddressFromPlace(e),d=S.getString(u.address_1),f=i.data("tt-typeahead"),p=[];_.each(["country","address_2","city","state","postal_code"],function(e){(r=t.find(fpUtil.formatString(n,e))).length&&(o="country"==e&&S(r.prop("nodeName")).eq("select",!0)?S(u.country_abbreviation).toLowerCase().s:S.getString(u[e]),a=r.val(),r.val(o),o!=a&&(p.push(r),r.parent().hasClass("fp-dropdown")&&(s=r.parent().data("fp.ui.Dropdown"))&&s.setValue(o)))}),i.val(d),f&&(f.input.query=d),_.each(p,function(e){l=$.Event("change"),c=c||l,l.handled=c.handled,e.trigger(l)})}},getAddressFromPlace:function(e){var t,n,i,r,a={},o="",s="",l="";return e&&(o=S(e.formatted_address),_.each(e&&e.address_components,function(e){switch(e.types[0]){case"street_number":l=e.long_name;break;case"premise":t=e.long_name;break;case"route":s=e.long_name;break;case"neighborhood":i=e.long_name;break;case"locality":n=e.long_name;break;case"administrative_area_level_1":a.state=e.short_name;break;case"postal_code":a.postal_code=e.long_name;break;case"country":a.country=e.long_name,a.country_abbreviation=e.short_name}switch(e.types[2]){case"sublocality_level_1":r=e.long_name}}),i&&o.contains(" "+i,!0)&&(n=i)),a.city=S.getString(n||r),a.address_1=S(l).append(" "+s).trim().getString(t).s,a},getCenterLatLng:function(e){var t,n,i={minLat:null,maxLat:null,minLng:null,maxLng:null};return _.each(e,function(e){t=e.lat||e.latitude,n=e.lng||e.longitude,fpUtil.isNull(t)||fpUtil.isNull(n)||(i.minLat=Math.min(null!=i.minLat?i.minLat:t,t),i.maxLat=Math.max(null!=i.maxLat?i.maxLat:t,t),i.minLng=Math.min(null!=i.minLng?i.minLng:n,n),i.maxLng=Math.max(null!=i.maxLng?i.maxLng:n,n))}),_.each(i,function(e,t){i[t]=null!=e?e:0}),i.lat=i.minLat+.5*(i.maxLat-i.minLat),i.lng=i.minLng+.5*(i.maxLng-i.minLng),i},setZoomAndCenterLatLng:function(e,t){var n=fpUtil.getValueFromNamespace("google.maps",window);if(n){var i=this.getCenterLatLng(t);i.minLat&&i.minLng&&i.maxLat&&i.maxLng&&(e.zoom=this.getMapZoom(i),e.center=new n.LatLng(i.lat,i.lng))}},getMapZoom:function(e){var t=5,n=3958.75*Math.acos(Math.sin(e.minLat/57.2958)*Math.sin(e.maxLat/57.2958)+Math.cos(e.minLat/57.2958)*Math.cos(e.maxLat/57.2958)*Math.cos(e.maxLng/57.2958-e.minLng/57.2958));return n<.2?t=16:n<.5?t=15:n<1?t=14:n<2?t=13:n<3?t=12:n<7?t=11:n<15?t=10:n<50?t=9:n<100?t=8:n<200?t=7:n<400?t=6:n<500?t=5:n<600?t=4:n<3e3&&(t=3),t},loadScript:function(e,t,n,i){i=_.getObject(i);var r,a=$.Deferred(),o=a.promise();if("css"==i.type){if(fp.bowser.msie&&10==fp.bowser.version)return fp.api(e,null,$.extend({dataType:"text",apiKey:null,cache:!0},_.defaults(i.apiOptions,{ignoreErrors:!0}))).then(function(e){r=$(fpUtil.formatString('<style type="text/css">{0}</style>',e)),i.insertBefore?r.insertBefore(i.insertBefore):i.insertAfter?r.insertAfter(i.insertAfter):r.appendTo($("head")[0]),t&&delete t.crossorigin,r.attr(_.getObject(t)).prop(_.getObject(n))});r=$('<link rel="stylesheet" type="text/css">'),n=$.extend({href:e},n),o=o.then(function(){fpUi.processStyleSheets()})}else r=$("<script><\/script>"),n=$.extend({async:!0,src:e},n),t=$.extend({type:"text/javascript"},t);return i.insertBefore?r.insertBefore(i.insertBefore):i.insertAfter?r.insertAfter(i.insertAfter):r.appendTo($("head")[0]),r.attr(_.getObject(t)).prop(n),r[0].onload=a.resolve,r[0].onerror=a.reject,o},generateFreshopPlugin:function(e,o,s){$.fn[e]=function(e,t,n){var i,r,a;return this.each(function(){i=$(this),(r=i.data(s))&&r.destroy(),a=$.extend(!0,{autoInit:!0},o.defaults,e),r=new o(i,a,t,n),a.autoInit&&r.init(a.autoRender),i.data(s,r)})}},changePage:function(e){var t;if(fp.trigger(fpEvent.PAGE_CHANGE),_.isString(e)){var n=$(e);n.length&&(fpUi.preInitModules(fpConfig.modules,n),t=fpUi.loadModules(fpConfig.modules,n))}return $.when(t).always(function(){fp.trigger(fpEvent.PAGE_CHANGED)})},locale:function(e,t){var n;return(e=S.getString(e))&&$.i18n&&(n=$.i18n(e))===e&&(n=null),n||t},localef:function(e,t){var n,i=this.locale(e,t),r=/{[^}]*}|\[[^\]]*\]/;return _.each(_.toArray(arguments).slice(2),function(e){e=S.getString(e),(n=_.first(r.exec(i)))&&(i="["==n.charAt(0)?i.replace(n,e+n.substr(1,n.length-2)+"</a>"):i.replace(n,e))}),i},processRouteIntent:function(t){var e;if(!fpConfig.disableInitializeShopping)switch(_.isObject(t)||(t=fpUi.router.routeManager.urlParams),t.action){case"addToCart":fp.loaded&&t.reference_id&&(e=fpService.productService.get({reference_id:t.reference_id,fields:fp.productFields}).then(function(e){if(_.size(e.items)){if(t.quantity){var n,i=t.quantity.split(","),r=_.indexBy(e.items,"reference_id");_.each(t.reference_id.split(","),function(e,t){(n=r[e])&&(n.__product_quantity=fpUtil.getFloat(i[t]))})}fp.trigger(fp.events.PRODUCTS_MODAL_SHOW,{title:t.title?t.title:"Please select which products you'd like to add",products:e.items,enableAddAll:!0,mode:"search"})}return $.when.apply($,[])}));break;case"add-to-list":if(!fp.loaded&&t.action_redirect&&t.action_product_id){var i=fpUtil.getProduct(fp.listManager.getItem(t.action_product_id,!0)),n=fpUi.router.stateManager,r=n.states;_.size(i)||(e=fpService.productService.get({id:t.action_product_id},{handleErrors:!1})),e=$.when(e).then(function(e){var t=_.size(i)?[i]:e&&e.items,n=[];return _.each(t,function(e){n.push(fp.listManager.listItemAdd(null,{item:e}))}),$.when.apply($,n)}).then(function(){if("checkout"==t.action_redirect)return fp.listManager.getSelectedList(!0).then(function(){fp.trigger(fp.events.LIST_CHECKOUT,{listManager:fp.listManager,selectedList:fp.listManager.selectedList}),"checkout"==t.action_redirect&&n.go(r.checkout,null,{reload:!0})})})}}return $.when(e)},setFulfillmentType:function(t,n){if(t||n){var i,e=fpUi.getPreference("fulfillmentTypeId"),r=e;return fpUtil.map.load(fpService.fulfillmentTypeService).then(function(){if(i=fpUtil.map.get("fulfillmentType",null,!0).get(t),(r=i.id)||n){var e={fulfillmentTypeId:r};return fp.setPrefCookie(e),fpService.preferenceService.update(e)}return $.Deferred().reject("Invalid fulfillment type").promise()}).then(function(){if(i&&i.id)return i}).done(function(){S(r).ne(e)&&fp.trigger(fp.events.FULFILLMENT_TYPE_CHANGED)})}return $.Deferred().reject("Invalid fulfillment type").promise()},getPreference:function(e){var t,n;return"fulfillmentTypeId"==e&&(t=fp.session.order_fulfillment_type_id,n=fp.user.preferred_fulfillment_type_id),t||fp.getPrefCookie()[e]||fp.session.preference[e]||fp.user.preference[e]||n},applyErrorMeta:function(e){var t=fpUi.router.location;e.metaData=_.getObject(e.metaData),metaData=e.metaData["meta data"]=_.getObject(e.metaData["meta data"]),metaData.deploy_id=fp.deployId,metaData.utc=fpUtil.formatDate(dateFns.utc(),"MM/DD/YYYY h:mm:ss.SS a"),metaData["Base Url"]=t.origin()+t.pathname(),metaData.Referrer=window.document.referrer},getMobilePhoneHtml:function(e){if(fpConfig.enableMobilePhoneHtml&&_.isString(e)&&fp.enableMobile){var t=fpUtil.regExp.matchPhone,n=fpUtil.regExp.matchNumeric,i=fpUtil.formatString;t.lastIndex=0,e=e.replace(t,function(e){return n.lastIndex=0,i('<a href="tel:{0}">{1}</a>',e.match(n).join(""),e)})}return e},getYouTubeEmbedUrl:function(e){var t,n=_.isString(e)&&e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return n&&11==n[2].length&&(t=fpUtil.formatString("https://www.youtube.com/embed/{0}",n[2])),t},intializeToolTip:function(e,t){!e&&t||e.length&&(e.popover({html:!0,placement:t.placement,trigger:"hover",content:t.content,template:'<div class="popover fp-popover-product-info fp-poopover-disclaimer '+t.className+'"><div class="arrow"></div><div class="popover-content"></div></div>',animation:!1}).on("show.bs.popover",function(e){(fp.device.xs||fp.device.hasTouch)&&e.preventDefault()}),(fp.device.xs||fp.device.hasTouch)&&e.on("click",function(e){fpUi.showModal({name:"information-modal",template:"component/0/modal.html",className:"fp-confirm-modal fp-information-modal",title:t.title,content:t.content})}))},handleApiResponseModal:function(t,e,n){var i={name:"reward-modal",template:"component/0/modal.html",className:"fp-reward-response-modal",title:t.title,content:fp.markdownConverter.makeHtml(t.body_md),buttons:[t.button_label]};n&&n.modalSuccessPreventBodyClick&&"success"==e&&(i.modal={backdrop:"static",keyboard:!1}),fpUi.showModal(i).on("click",'[data-action="confirm"]',function(e){e.preventDefault(),"close"!=t.button_url?window.location=t.button_url:fpUi.closeActiveModal()})},initSiteUrls:function(e){var t;return e||"admin"==fpConfig.intent||(e=fp.store.id),e&&(t=fpService.serviceProviderConfigurationService.get({service_provider_type:"store_setting",service_provider:"site_url",store_id:e,store_id_rollup:!0,as_of_date:void 0},{ignoreErrors:!0}).then(function(e){var t,n,i=fp.cache.hashedStoreSettings.siteUrls;_.each(e.items,function(e){_.isObject(e.config)&&(t=i[e.store_id]=_.getObject(e.config),(n=t.product_url)&&(n=t.home_url?S(n).trimLeft(t.home_url):S(n).trimRight("/").split("/").pop(),n=S(n).ensureLeft("/").trimRight("/").s),t.shopping_url_path=n||"/shop")})})),$.when(t)},getSiteUrls:function(e){"admin"==fpConfig.intent&&_.isString(e)&&(e=fp.cache.hashedAuthorizedStores[e]);var t,n=(e||fp.store).lineage;if(_.size(n))for(var i=fp.cache.hashedStoreSettings.siteUrls,r=n.length-1;0<=r&&!(t=i[n[r]]);r--);return _.getObject(t)},initBodyEvents:function(){var e=$(document),t=$(document.body),n=!1,i=function(e){"touchstart"==e.type?n=!0:n||"mousemove"!=e.type||(fp.device.usingMouse=!0),t.off(e.type,i)};e.on("touchstart mousemove",i).on("submit.fp",".fp-core form.fp-form",fpUi.preventDefault),fpConfig.enableMobilePhoneHtml&&fp.enableMobile&&t.find(".fp-clickable-phone").each(function(){var e=$(this);e.html(fpUi.getMobilePhoneHtml(e.html()))}),e.off(".modal.fp .dismiss.fp .changeStore.fp").on("click.showShopIntent.modal.fp",'[data-action^="show-shop-intent-modal"], [href^="#show-shop-intent-modal"], [data-action^="show-address-modal"], [href^="#show-address-modal"], [data-action^="show-store-locator-modal"]',fpUi.preventDefault)},bindBodyEvents:function(){$(document).off(".modal.fp .dismiss.fp .changeStore.fp").on("click.showShopIntent.modal.fp",'[data-action^="show-shop-intent-modal"], [href^="#show-shop-intent-modal"], [data-action^="show-store-locator-modal"]',function(e){e.preventDefault();var t={force:!0,fulfillmentIdentifier:$(this).attr("data-modal-action")};"show-store-locator-modal"==S($(this).attr("data-action")).s&&(t.next="/",t.fulfillmentIdentifier="store-locator"),fpUi.showShopIntentModal(t)}).on("click.showAddress.modal.fp",'[data-action^="show-address-modal"], [href^="#show-address-modal"]',function(e){e.preventDefault(),fpUi.showAddressModal(!0)}).on("click.alert.dismiss.fp",'[data-dismiss="alert"]',function(e){var t;if(t=$(e.target).closest("[data-role].alert-dismissible").attr("data-role")){var n={};n[fpUtil.formatString("dismiss-{0}",t)]=!0,fp.setPrefCookie(n)}}).on("click.showIframe.modal.fp",'[data-action="show-iframe-modal"]',function(e){e.preventDefault();var t=$(this);fpUi.showModal({name:"iframe",className:"fp-modal-iframe",template:"component/0/modal-iframe.html",title:t.text(),content:fpUtil.formatString('<div class="embed-responsive embed-responsive-vh"><iframe class="embed-responsive-item" src="{0}" allowfullscreen></iframe></div>',t.attr("href"))})}).on("click.changeStore.fp",'[data-action="change-store"]',function(e){e.preventDefault();var t=$(this),n=t.attr("data-store-id"),i=t.attr("data-store-number");(n||i)&&fp.storeChange({storeId:n,storeNumber:i,next:t.attr("data-next")})})},getBarcodeFormat:function(e,t){var n=fpConstants.barcodeFormat;return n[S(e).toLowerCase().s]||n[S(t).toLowerCase().s]||n.upc},getHash:function(e,t){_.isString(e)||(e="");var n,i,r=void 0===t?2166136261:t;for(n=0,i=e.length;n<i;n++)r^=e.charCodeAt(n),r+=(r<<1)+(r<<4)+(r<<7)+(r<<8)+(r<<24);return("0000000"+(r>>>0).toString(16)).substr(-8)},getOauthTypes:function(e){var t=fpUtil.map.get("spcUserAuthenticationType").items(),n=[];if(t.length){if(!e){var i=fpUi.router.stateManager;!(e=i.stateParams.next)&&i.is(fpConfig.routeStates.login)&&(e=fpUi.router.location.origin())}var r={app_key:fp.appKey,token:fp.session.token,return_url:e||window.location.href};_.each(t,function(e){e.config&&e.config.is_oauth&&n.push({identifier:e.service_provider.identifier,name:e.service_provider.name,url:fpUtil.getApiUrl(fpUtil.formatString("oauth2/{0}/start",e.service_provider.identifier),r,null,!1,!0)})})}return n},loaded:function(){return fpUtil.getPromiseFromEvent(fpEvent.LOADED)},verifyRecaptcha:function(t,e){var n;if(window.grecaptcha){var i=fpUtil.map.get("spcCaptcha").get("google_recaptcha");i.config&&i.config.site_key&&(n=$.Deferred(),grecaptcha.ready(function(){e=_.getObject(e),grecaptcha.execute(i.config.site_key,{action:e.action||"submit"}).then(function(e){fpService.webhookService.post(_.defaults(t,{service_provider_configuration_id:i.id,captcha_response:e,store_id:fpUtil.getStateValue(fp.isProd(),fp.topStore.id,fp.store.id)}),{childServiceCall:"recaptcha/verify",ignoreErrors:["invalid_operation","captcha_required"]}).catch(function(e,t,n,i){if(!i.disableChallenge){var r=fpUtil.getXhrErrorResponse(e);if(_.contains(i.ignoreErrors,r.error_code))return fpUi.showRecaptchaChallenge()}}).done(n.resolve)})}))}return $.when(n)},showRecaptchaChallenge:function(e){var n;if(window.grecaptcha){var t,r=_.find(fpUtil.map.get("spcCaptcha").items(),function(e){return e.service_provider&&"google_recaptcha"==e.service_provider.identifier&&e.config&&"v2"==e.config.version&&e.config.site_key});if(r)if(n=$.Deferred(),e&&(t=$(e)).length)grecaptcha.render(t[0],{sitekey:r.config.site_key,callback:n.resolve});else var i=fpUi.showModal({name:"recaptcha",template:"component/0/modal.html",className:"fp-recaptcha-modal",title:fpUi.locale("shared-verify","Verify"),disableClose:!0,content:fp.ui.renderTemplate("component/0/animated-loading.html")}).on("shown.bs.modal.recaptchaModal",function(){var t=$('<div class="fp-text-center"><div class="fp-display-inline-block" data-role="recaptcha" style="margin:0 auto;"></div></div>');$modalContent=i.find('[data-role="modal-content"]').addClass("fp-text-center"),$modalContent.find('[data-role="animated-loading"]').replaceWith(t),grecaptcha.ready(function(){var i=t.find('[data-role="recaptcha"]');grecaptcha.render(i[0],{sitekey:r.config.site_key,callback:function(e){fpService.webhookService.post({service_provider_configuration_id:r.id,captcha_response:e,store_id:fpUtil.getStateValue(fp.isProd(),fp.topStore.id,fp.store.id)},{childServiceCall:"recaptcha/verify",ignoreErrors:["invalid_operation","captcha_required"]}).done(function(){t.append('<div class="fp-margin-top">'+fpUi.localef("shared-verified","You have been verified. [Click here to reload page].",'<a href="javascript:;" data-action="reload">')+"</div>"),n.resolve(e)}).fail(function(e,t,n){fpUtil.showError(n,$modalContent.find('[data-role="alert"]')),grecaptcha.reset(i[0])})}})})}).on("click",'[data-action="reload"]',function(e){e.preventDefault(),new fpUi.Loading({appendTo:i.find('[data-role="modal-content"]'),showOnInstantiate:!0}),fp.isUnloading=freshop.unloading=!0,window.location.reload(!0)})}return $.when(n).then(function(e){return e&&(_.isObject(e)||(e={token:e}),e.challenge=!0),e})},processStyleSheets:function(){var t,r,a=_.size(fpConfig.replaceCssColor)&&fpConfig.replaceCssColor,o=fp.device.hasTouch;(o||a)&&_.each(document.styleSheets,function(e){if(t=null,(r=!!a&&S(e.href).startsWith(fp.assetCdnBaseUrl))||o)try{t=e.cssRules||e.rules}catch(e){}t&&!e.__processed&&(e.__processed=!0,_.each(t,function(n){if(o){var e=n.selectorText;e&&0<=e.indexOf(":hover")&&(n.selectorText=e.replace(":hover",":active"))}var i;a&&r&&n.style&&_.each(["color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","boxShadow"],function(t){(i=n.style[t])&&_.each(a,function(e){0<=i.indexOf(e.start)&&(n.style[t]=i.replace(e.start,e.end))})})}))})}})}();var ui=fpUtil.getNamespace("ui",fp),uDc,TEc,rFc;ui.Loading=function(e){var t;return _.isString(e)&&(e={template:e}),(e=_.getObject(e)).appendTo&&(t=$(e.appendTo).data("fp.ui.Loading")),t||(e.template=e.template||fp.ui.renderTemplate("component/0/animated-loading.html",null,null,!0),this.options=e,this.__showCount=0,this.$element=$(e.template).appendTo(fp.__$freshop),this.id=_.uniqueId(),t=this),e.showOnInstantiate&&t.show(),t},$.extend(ui.Loading.prototype,{show:function(t){if(t){if((t=_.getObject(t))instanceof Element||fpUtil.isJQuery(t))t={appendTo:t};t=$.extend(this.options,t)}else t=this.options;if(t.appendTo=$(t.appendTo),t.appendTo.length){t.css&&this.$element.css(t.css),t.containerClass||(t.containerClass="fp-animated-loading-container"),t.enableEvents&&(t.containerClass+=" fp-animated-loading-container-events"),t.appendTo.data("fp.ui.Loading",this),this.__showCount++;var n=this;clearTimeout(this.__startDelayTimeout);function e(){if(!(n.__showCount<=0||t.disableIfShown&&n.$element.filter(":visible").length)){var e=n.options.appendTo;e[0]!=fp.__$freshop[0]&&e.addClass(t.containerClass),n.$element.appendTo(e).show()}}t.startDelay?this.__startDelayTimeout=_.delay(e,t.startDelay):e(),fpUtil.isPromise(t.promiseHide)&&t.promiseHide.always(function(){n.hide()})}},hide:function(e){this.__showCount&&(e?this.__showCount=0:0<this.__showCount&&this.__showCount--,0<this.__showCount||(this.options.appendTo.removeClass(this.options.containerClass).removeData("loading fp.ui.Loading"),this.options.destroyOnHide?this.destroy():this.$element.appendTo(fp.__$freshop).hide()))},isShown:function(){return 0<this.__showCount},destroy:function(){clearTimeout(this.__startDelayTimeout),fpUtil.isJQuery(this.options.appendTo)&&this.options.appendTo.removeClass(this.options.containerClass).removeData("loading fp.ui.Loading"),this.$element.remove()}}),fpUtil.getNamespace("ui",fp).ProductActions=fp.Component.extend({construct:function(e,t,n){this._super(e,t,n),_.defaults(this.config,{listManager:fp.listManager,disableInList:!1,stopPropagation:!0,onRefreshUI:$.noop});function i(e,t){r.refreshUI(e,t)}var r=this;this.events=[{name:fpEvent.LIST_ITEM_BEFORE_CHANGE,value:i},{name:fpEvent.LIST_ITEM_CHANGED,value:i}],this.config.disableIncrementer&&this.events.push({name:fpEvent.PRODUCT_ACTION_OPEN,value:$.proxy(this.__closeActionActive,this)}),this.init()},init:function(e){this.initialized||this.$element.data("fp.ui.Component",this),this.initialized=!0,fpUtil.getBoolean(e,!0)&&this.render()},render:function(e){this.rendered=!0;var t=this.$element,n=t.closest(".fp-list,.fp-mini-list");this.inList=0<n.length,this.inFullList=this.inList&&!n.hasClass("fp-mini-list"),fpUtil.isNull(this.config.showLoading)&&(this.config.showLoading=0<t.find(".fp-btn-add").length),this.config.showLoading&&t.append('<div class="fp-overlay"></div>'+fp.ui.renderTemplate("component/0/animated-loading.html")),this.showVarietyTotal=!_.contains(["item-action-variety","item-action-list-item","item-action-search"],t.attr("data-role")),this.bindEvents();var i=this.getListItem();i&&this.refreshUI({type:fpEvent.LIST_ITEM_CHANGED},{listManager:this.config.listManager,item:i})},refreshUI:function(e,t){if(t&&t.listManager.getList().id==this.config.listManager.getList().id){var n=this.config,i=this.$element,r=i.closest(".fp-item"),a=t.item;if(this.showVarietyTotal||n.disableInList){var o=fpUtil.getProduct(n.item),s=S.getString(i.attr("data-product-id"),o.id);if(!(s&&s==a.product_id))return}else{var l=t.oldListItemId,c=n.disableInList||this.showVarietyTotal?null:i.attr("data-list-item-id");if(!(c&&c==a.id||l&&l==c))return}var u=fpUtil.getEventNs(e),d=fpConstants.listItemChangeType;switch(u){case fpEvent.LIST_ITEM_BEFORE_CHANGE:switch(t.itemChangeType){case d.ADD:case d.REMOVE:case d.INCREMENT:this.showLoading()}return}a=t.item||this.getListItem();var f,p=null!=n.addToListLabel?n.addToListLabel:fp.config.addToListLabel;if(!n.disableInList)(f=this.showVarietyTotal?fp.ui.ListManager.getItemQuantityTotal({item:a,ignoreNotAvailable:!0,forQuantityIndicator:!1,ignoreCrossed:this.inFullList,listManager:n.listManager}):fp.ui.ListManager.getItemQuantity(a,!0,!1,this.inFullList))?(p=fpUtil.getItemButtonHtml(a,f),i.addClass("fp-is-item-in-list"),i.toggleClass("fp-has-item-quantity-label",S(p).contains("fp-item-quantity-label")),r.addClass("fp-is-item-in-list"),r.find(".fp-item-quantity").text(f)):(i.removeClass("fp-is-item-in-list fp-has-item-quantity-label"),r.removeClass("fp-is-item-in-list")),this.inList&&(p=fpUtil.getItemButtonHtml(a,f));if(!fpConfig.enableQtyDropDown||!1===n.enableQtyDropDown||!a.product||!n.disableInList&&_.size(a.varieties)&&this.showVarietyTotal&&n.stopPropagation)r.removeClass("fp-is-qty-ddl"),i.find(".fp-btn-add").html(p);else{f=f||(a.product.quantity_step||1);var h=this,m={autoInit:!0,onChange:function(e){h.onQtyChanged(e,$(this).closest(".fp-dropdown-qty-wrap"),a)}},g=i.find(".fp-dropdown-qty");if(i.closest(".fp-product-carousel, .fp-scroll-list-x").length&&(m.container="dropdown-container"),fpConfig.enableMobile&&(r.addClass("fp-is-qty-ddl"),m.containerClass="fp-dropdown-qty-wrap"),g.length){g.dropdown(m);var v=g.data("fp.ui.Dropdown");v&&v.setValue(f),this.toggleQuantityInputDropdown(e,a.product,f)}else g=$(fpUi.renderTemplate("component/0/dropdown-qty.html",{item:a,quantity:f},null,!0)).find(".fp-dropdown-qty"),fpConfig.enableMobile?g.parent().insertAfter(i.find(".fp-btn-add")):i.append(g.parent()),g.dropdown(m),i.toggleClass("fp-has-product-label",!!i.find(".fp-product-label").html())}switch(u){case fpEvent.LIST_ITEM_CHANGED:if(this.hideLoading(),t.itemChangeSuccess)switch(t.itemChangeType){case d.ADD:n.item&&(n.item=a),n.disableInList||this.showVarietyTotal||i.attr("data-list-item-id",a.id);break;case d.REMOVE:i.removeAttr("data-list-item-id");break;case d.INCREMENT:i.find('[name="qty-txt"]').val(a.quantity)}}n.onRefreshUI(e,t)}},onQtyChanged:function(e,t,n){var i=this.$element.closest("form"),r=t.find('[name="fp-dropdown-qty"]'),a=fpUtil.getFloat(r.attr("data-quantity-step"),1),o=fpUtil.getFloat(n.product.quantity_maximum)||fpUtil.getFloat(fpConfig.qtyDropDownMaxAmount),s=fp.numeralInstance.set(a).multiply(o).value(),l=n.product,c=fpUtil.getFloat(n.product.quantity_maximum)||1e3,u=fpUtil.getInteger(n.product.quantity_minimum);if(0!=u&&(s+=u-a),!l){var d=this.getListItem();l=this.getProduct(d)}s<=(e=fpUtil.getFloat(e))&&e!=c?(this.toggleQuantityInputDropdown(null,l,e),t.find('[name="qty-txt"]').val(s).trigger("focus")):(e||(t.find('[name="qty-txt"]').addClass("fp-hidden"),this.config.disableIncrementer&&this.__closeActionActive()),fp.trigger(fpEvent.LIST_ITEM_INCREMENT,{listManager:this.config.listManager,item:n,quantity:e,listName:this.config.listName,listPosition:this.config.listPosition,errorSelector:(i.length?i:fpUi.getActiveModal()).find('[data-role="notification"], .fp-notification'),parentModule:this.$element.closest(".fp-module").data("fp.ui.Component")}))},onQtyInputChanged:function(e,t){var n=$(e.target),i=fpUtil.getFloat(n.val()),r=this.getListItem();if(t=t||this.getProduct(r),i||(n.val(n.parent().find('[name="fp-dropdown-qty"]').attr("data-quantity-step")),this.config.disableIncrementer&&this.__closeActionActive()),this.toggleQuantityInputDropdown(e,t,i),r&&i!=r.quantity){var a=n.closest("form");fp.trigger(fpEvent.LIST_ITEM_INCREMENT,{listManager:this.config.listManager,item:r,quantity:i,listName:this.config.listName,listPosition:this.config.listPosition,errorSelector:(a.length?a:fpUi.getActiveModal()).find('[data-role="notification"], .fp-notification'),parentModule:this.$element.closest(".fp-module").data("fp.ui.Component")})}},toggleQuantityInputDropdown:function(e,t,n){var i=this.$element,r=i.find(".fp-dropdown-qty-wrap"),a=r.find(".fp-qty-txt-wrapper"),o=r.find('input[name="qty-txt"]'),s=r.find(".fp-dropdown"),l=fpUtil.getFloat(t.quantity_maximum)||1e3,c=fpUtil.getFloat(t.quantity_maximum)||fpUtil.getFloat(fpConfig.qtyDropDownMaxAmount),u=fpUtil.getInteger(t.quantity_minimum),d=d=t.quantity_step||t.quantity_initial||1,f=d*c,p=fpUtil.getItemQuantityLabel(this.getListItem(),n,!0);0!=u&&(f+=u-d),p||(p=fpConfig.enableMobile?(t=this.getProduct())&&t.size:fpConfig.inListLabel);if(r.find(".fp-product-label").html(p),i.toggleClass("fp-has-product-label",!!p),a.length||(a=o),f<=n&&n!=l)a.removeClass("fp-hidden"),s.addClass("fp-dropdown-qty-input fp-hidden");else{s.removeClass("fp-dropdown-qty-input fp-hidden"),a.addClass("fp-hidden");var h=s.data("fp.ui.Dropdown");h&&h.setValue(n)}s.add(a).css("visibility","hidden").delay(100).css("visibility","")},getListItem:function(e){var t,n=this.config.listManager,i=this.config.disableInList||this.showVarietyTotal?null:this.$element.attr("data-list-item-id");if(i)t=n.getItem(i);else{var r=fpUtil.getProduct(this.config.item).id,a={isProductId:!0,varieties:e};(r=r||this.$element.attr("data-product-id"))||(r=this.$element.attr("data-note"))&&(delete a.isProductId,a.isGenericName=!0),t=n.getItem(r,a)}return t},getProduct:function(e){var t=fpUtil.getProduct(this.config.item);return t.id||(e=e||_.getObject(this.getListItem())).product&&(t=e.product),t.id?t:null},showLoading:function(){if(this.config.showLoading){clearTimeout(this.__loadingTimeout);var e=this;this.__loadingTimeout=_.delay(function(){e.$element.addClass("fp-animated-loading-container")},fpConstants.progress.DELAY)}},hideLoading:function(){clearTimeout(this.__loadingTimeout),this.$element.removeClass("fp-animated-loading-container")},destroy:function(e){this._super(e),fpConfig.enableMobile&&this.$element.prev('[data-action="remove-item"]').off("click.productAction.fp"),e&&this.config.disableIncrementer&&this.$element.closest(".fp-item").removeClass("fp-is-item-action-active"),this.unbindEvents()},bindEvents:function(){var e,t=$.proxy(this.onClick,this),n=this.$element;n.off("productAction.fp").on("click.productAction.fp",t).on("wheel.productAction.fp","input.fp-input-qty-txt",function(e){$(this).trigger("blur")}).on("keypress.productAction.fp","input.fp-input-qty-txt",function(e){e.keyCode==fpConstants.keycode.RETURN&&(e.preventDefault(),$(this).trigger("blur"))}).on("blur.productAction.fp","input.fp-input-qty-txt",$.proxy(this.onQtyInputChanged,this)),fpConfig.enableMobile&&(e=n.prev('[data-action="remove-item"]')).length&&e.off("click.productAction.fp").on("click.productAction.fp",t),this.config.disableIncrementer&&(n.closest(".fp-item").find('[data-action="show-item-detail"]').on("click.productAction.fp",t),$(document).off("productAction.fp").on("click.productAction.fp",$.proxy(this.__closeActionActive,this))),_.each(this.events,function(e){fp.on(e.name,e.value)})},unbindEvents:function(){var e=this.$element.off("productAction.fp");fpConfig.enableMobile&&e.prev('[data-action="remove-item"]').off("click.productAction.fp"),this.config.disableIncrementer&&e.closest(".fp-item").find('[data-action="show-item-detail"]').off("productAction.fp"),_.each(this.events,function(e){fp.off(e.name,e.value)})},onClick:function(e){e.preventDefault();var t=this.config;(t.stopPropagation||t.disableIncrementer)&&e.stopImmediatePropagation();var n=$(e.target);if(!(n.hasClass("fp-animated-loading-container")||!t.disableIncrementer&&n.hasClass("fp-item-action"))||fpConfig.enableMobile&&n.hasClass("fp-item-has-variety")){var i,r,a,o=this,s=this.$element,l={},c=t.listManager,u=n.closest("form"),d=S.getString(s.attr("data-product-id"));if(t.disableIncrementer&&d){if(n.closest(".fp-dropdown-qty-wrap").length)return;var f,p=this.getProduct();if(this.showProductDetailModal(p))f=!0;else if(n.closest('[data-action="show-item-detail"]').length&&p){var h=fp.ui.showModal({name:"productQuickViewModal",template:"component/0/modal.html",className:"fp-product-quick-view-modal",title:"Product Quick View",content:fp.ui.renderTemplate("component/0/product-list.html",{items:[p],imageUrl:fpUtil.getImageSrc(p,"medium"),itemListClass:"fp-item-list-single"})}).on("show.bs.modal",function(){var e=h.find(fpUtil.formatString('.fp-item-action[data-product-id="{0}"]',p.id)),t=e.data("fp.ui.Component");t&&t.destroy(),new fp.ui.ProductActions(e,{item:p})});f=!0}else{if(this.isActionActive)return void this.__closeActionActive();this.__openActionActive(e)&&(f=!0),n=s.find(".fp-btn-increment")}if((e=$.Event(fpEvent.PRODUCT_ACTION_OPEN)).target=s[0],fp.trigger(e),f)return}if(t.disableInList&&(i=fp.ui.getFormValues(u,{prefix:["fp-variety-"]})),r=this.getListItem(i)){l=_.getObject(r.product,l);var m=n.hasClass("fp-btn-decrement"),g=!m&&n.hasClass("fp-btn-increment"),v=!m&&!g&&n.hasClass("fp-btn-remove");if(m||g||v){if(!v&&this.showProductDetailModal(l))return;var y={listManager:c,item:r,increment:v?null:m?-1:1,listName:t.listName,listPosition:t.listPosition,errorSelector:(u.length?u:fpUi.getActiveModal()).find('[data-role="notification"], .fp-notification'),parentModule:s.closest(".fp-module").data("fp.ui.Component")};if(fpConfig.enableQtyDropDown&&this.__loadingTimeout)if(this.$element.find('[name="qty-txt"]').length){var b=fpUtil.getFloat(this.$element.find('[name="qty-txt"]').val());b!=r.quantity&&(y.quantity=b)}if(fp.trigger(v?fpEvent.LIST_ITEM_REMOVE:fpEvent.LIST_ITEM_INCREMENT,y),!r.is_crossed||!fp.store.allow_shopping_list_crossing)return}else if(!t.disableInList)return}if(l.id||(l=fpUtil.getProduct(t.item,l)),s.filter("[data-search-term]").length)fp.trigger(fpEvent.PRODUCTS_MODAL_SHOW,{title:S.getString(s.attr("data-search-title"),"Search Products"),mode:"search",searchTerm:fpUtil.getStateValue(!l.id,s.attr("data-search-term")),products:fpUtil.getStateValue(l.id,[l]),listManager:c});else{if(!l.id&&t.item&&fpUtil.isNewItem(t.item))l=t.item,i=fp.ui.getFormValues(u);else{var w=S.getString(s.attr("data-note"));w&&(l.id=fpUtil.getNewItemId(),l.note=w)}if(!this.showProductDetailModal(l)){var C=fpUtil.getObjectFromNamespace("sale_offer.config",l);!C.must_buy&&_.size(C.linked_offer_ids)&&fpService.offerService.get({id:C.linked_offer_ids.join()}).done(function(e){var t=_.unique(_.concat.apply(_,_.pluck(e.items,"product_ids")));t&&fp.trigger(fpEvent.PRODUCTS_MODAL_SHOW,{title:S.getString(C.text,"Offers"),productIds:t,listManager:c,$modal:fp.initProductsModal(!1)})}),!l.id&&d&&t.enableProductApi&&(this.showLoading(),a=fpService.productService.get(d)),$.when(a).done(function(e){e&&(l=e)}).always(function(){o.hideLoading(),l.id&&(_.size(o.scope.varietyDefault)&&!i&&(i=o.scope.varietyDefault),fp.trigger(fp.events.LIST_ITEM_ADD,{listManager:c,item:l,formValues:i,listName:t.listName,listPosition:t.listPosition,errorSelector:(u.length?u:fpUi.getActiveModal()).find('[data-role="notification"], .fp-notification'),parentModule:o.$element.closest(".fp-module").data("fp.ui.Component")}))})}}}},showProductDetailModal:function(e){var t=this.scope;if(t.varietyDefault={},e&&_.size(e.varieties)){var n=!0,i=!1,r=!1,a=!1,o=_.filter(this.config.listManager.selectedList.items,{product_id:e.id});if(n=_.size(o)<=1&&(_.each(e.varieties,function(e){t.varietyType=e,r=!!e.is_prompt,a=!!e.is_required,i=!1,_.each(e.options,function(e){e.is_default&&(t.varietyDefault[t.varietyType.identifier]=e.value,i=!0)})}),!(a||r||!i)),e.id&&this.showVarietyTotal&&!this.config.disableInList&&!n)return fp.trigger(fp.events.PRODUCT_DETAIL_MODAL_SHOW,{listManager:this.config.listManager,productId:e.id,title:e.name,disableExtras:!0}),!0}return!1},__openActionActive:function(e){var t=this.$element,n=t.closest(".fp-item"),i=this.getListItem(),r=fpUi.ListManager.getItemQuantity(i,!0,!1,this.inFullList);if(r){this.isActionActive=!0,n.addClass("fp-is-item-action-active");var a=this.getProduct(i),o=fpUtil.getFloat(a.quantity_maximum)||1e3,s=fpUtil.getFloat(a.quantity_maximum)||fpUtil.getFloat(fpConfig.qtyDropDownMaxAmount),l=l=a.quantity_step||a.quantity_initial||1;if(fp.numeralInstance.set(l).multiply(s).value()<=r&&r!=o)t.find(".fp-qty-txt-wrapper").removeClass("fp-hidden").find('input[name="qty-txt"]').trigger("focus");else{var c=t.find(".fp-dropdown").removeClass("fp-hidden").data("fp.ui.Component");c&&c.open()}return!0}},__closeActionActive:function(e){if(this.isActionActive){var t=this.$element;if(!e||e.target!=_.first(t)&&!$.contains(t,e.target)){delete this.isActionActive,t.closest(".fp-item").removeClass("fp-is-item-action-active"),t.find(".fp-qty-txt-wrapper").addClass("fp-hidden");var n=t.find(".fp-dropdown").addClass("fp-hidden").data("fp.ui.Component");n&&n.close(0)}}}}),uDc=fpUtil.getNamespace("ui",fp),uDc.Dropdown=fp.Component.extend({construct:function(e,t,n){this.$list=$(),_.isFunction(t)?t={onAfterChange:t}:_.isObject(t)||(t={}),_.defaults(t,{autoInit:!0,onOpen:$.noop,onClose:$.noop,onChange:$.noop,onAfterChange:$.noop});var i=$(e);if(i.data("fp.ui.Dropdown",this),n||t.template||!i.hasClass("fp-dropdown")||(n=i),n){this._super(e,t,n),this.isOpen=!1;var r=this;this.__close=function(e){r.close(0)},!t.container&&i.closest(".fp-product-carousel, .fp-scroll-list-x").length&&(t.container="dropdown-container"),t.container&&(r.scope.option={container:t.container}),this.init()}else this.__prepareForDestroy()},render:function(e){this._super(e);var o=this,s=this.$element,t=s.find("> .fp-dropdown-menu");if(this.scope.multiple&&s.prop("class",s.prop("class").replace("fp-dropdown","fp-dropdown fp-dropdown-multiple")),s.off().on("blur","> .fp-dropdown-value",$.proxy(o.close,o)).on("mousedown","> .fp-dropdown-value",function(e){e.preventDefault()}).on("click","> .fp-dropdown-value",function(e){e.preventDefault(),clearTimeout(o.closeTimerId),o.isOpen?o.close(0):(s.find("> .fp-dropdown-value").focus(),o.open())}).on("keydown","> .fp-dropdown-value",function(e){var t=fpConstants.keycode;switch(e.keyCode){case t.UP:case t.DOWN:e.preventDefault();break;case t.TAB:o.close(0)}}).on("keyup","> .fp-dropdown-value",function(e){e.preventDefault();var t=fpConstants.keycode;switch(e.keyCode){case t.RETURN:return void(s.data("currentTarget")&&o.__setSelected($(s.data("currentTarget"))));case t.UP:case t.DOWN:if(!s.hasClass("fp-is-dropdown-open"))return void o.open();if(!o.$list.length)return;var n=o.getSelectedItem().parent();if((n=n.length?e.keyCode==t.UP?n.prev(".fp-dropdown-list-item"):n.next(".fp-dropdown-list-item"):o.$list.first().parent()).length){var i=n.find("> a");o.__setSelected(i);var r=i.closest(".fp-dropdown-list");r.scrollTop(i.position().top+r.scrollTop()-.5*(r.parent().height()-i.height()))}return}var a=e.keyCode?String.fromCharCode(e.keyCode):"";a&&fpUtil.regExp.matchAlphanumeric.test(a)&&o.__setSelectedByStartText(a)}),this.__applyContainerEvents(),null==this.config.enabled||this.config.enabled||(s.addClass("fp-dropdown-disabled"),s.off("click")),0<fp.msie()&&t.find("> .fp-dropdown-list").off().on("scroll",function(){clearTimeout(o.closeTimerId),s.find("> .fp-dropdown-value").focus()}),this.$list=t.find(".fp-dropdown-list > li:not(.fp-dropdown-list-toggle-check-all), .fp-dropdown-list > span:not(.fp-dropdown-list-toggle-check-all)").find("a"),this.config.value)_.isArray(this.config.value)?this.setValues(this.config.value):this.setValue(this.config.value);else{var n=S.getString(this.getValue());n.length||((n=s.find('> input[type="hidden"]').first().val())?this.setValue(n):this.__setSelected(this.$list.filter('[data-selected="true"]'),!0))}},getValue:function(){return this.value},setValue:function(e){if((e=S.getString(e)).length){var t,n,i=this;this.$list.each(function(){if(t=$(this),n=fpUtil.decodeForHtml(t.attr("data-value")||t.text()),S(n).eq(e,!0))return i.__setSelected(t,!0),!1})}else this.__setSelected(null,!0)},setValues:function(e){e&&0!=e.length&&this.$list.each(function(){$this=$(this),thisValue=fpUtil.decodeForHtml($this.attr("data-value")||$this.text()),0<$.grep(e,function(e){return thisValue==e}).length&&this.__setSelected($this,!0)})},getSelectedItem:function(){return this.$list.filter(".fp-is-selected")},open:function(){var e=this.scope,t=this.$element;if(e.option&&e.option.container){var n=fp.__$freshop.find(fpUtil.formatString('[data-role="{0}"]',e.option.container)),i=t.find(".fp-dropdown-menu"),r=t.find(".fp-dropdown-value"),a=t.find(".fp-dropdown-value").offset();i.data("parent",t),i.appendTo(n),this.config.containerClass&&n.addClass(this.config.containerClass),n.css({top:a.top+r.outerHeight(),left:a.left,width:r.outerWidth()}),this.__applyContainerEvents(n)}if(clearTimeout(this.closeTimerId),this.$list.length&&!t.hasClass("fp-dropdown-disabled")&&(fp.trigger(fpEvent.DROPDOWN_CLOSE),!this.isOpen)){this.isOpen=!0,t.addClass("fp-is-dropdown-open"),$(document.body).addClass("fp-is-dropdown-open"),$(window).on("resize.dropdown."+this.id,this.__close),fp.on(fpEvent.DROPDOWN_CLOSE,this.__close);var o=this.getSelectedItem();if(o.length){t.data("startItem",o[0]);var s=o.closest(".fp-dropdown-list");s.scrollTop(o.position().top+s.scrollTop()-.5*(s.parent().height()-o.height()))}this.config.onOpen.call(t[0],this.value)}},close:function(e){var t=this,n=this.scope;if(this.isOpen){if(n.option&&n.option.container){var i=fp.__$freshop.find(fpUtil.formatString('[data-role="{0}"]',n.option.container)),r=i.find(".fp-dropdown-menu");this.config.containerClass&&i.removeClass(this.config.containerClass),r.each(function(){var e=$(this);if(e.data("parent")==t.$element)return t.$element.append(e),1==r.length&&i.off().css({top:"",left:"",width:""}),!1})}if(fpConfig.enableQtyDropDown){var a=t.$element.find('[data-selected="true"]');"0"==a.attr("data-value")&&(a.attr("data-selected",!1),t.$element.find(".fp-dropdown-list > li:first-child").find("> a").attr("data-selected",!0))}e=fpUtil.isInteger(e)?e:50,clearTimeout(this.closeTimerId),e?this.closeTimerId=setTimeout(o,e):o()}function o(){if(t.isOpen){t.isOpen=!1,clearTimeout(t.clearCurrentTargetTimeout),t.clearCurrentTargetTimeout=setTimeout(function(){t.$element.removeData("currentTarget lastSearchIndex")},50),$(document.body).removeClass("fp-is-dropdown-open"),t.$element.removeClass("fp-is-dropdown-open");var e=t.$element.data("startItem");t.$element.removeData("startItem"),null!=e&&e==t.getSelectedItem()[0]||t.config.onAfterChange.call(t.$element[0],t.value),t.config.onClose.call(t.$element[0],t.value)}}},destroy:function(e){this.config.onOpen=$.noop,this.config.onClose=$.noop,this.config.onAfterChange=$.noop,this.config.onChange=$.noop,this.close(0),e||this.setValue(),this.$element.removeData("fp.ui.Dropdown").off(),this.$element.find("> .fp-dropdown-menu > .fp-dropdown-list").off().find("> li:not(.fp-dropdown-list-toggle-check-all), > span:not(.fp-dropdown-list-toggle-check-all)").find("a").off(),this._super(e)},onChange:function(){this.config.onChange.call(this.$element[0],this.value)},__applyContainerEvents:function(t){t=t||this.$element;var n=this;t.on("mousedown","> .fp-dropdown-menu > .fp-dropdown-list",function(e){e.preventDefault(),0<fp.msie()&&setTimeout(function(){clearTimeout(n.closeTimerId)},25)}).on("focus","> .fp-dropdown-menu > .fp-dropdown-list > li a, > .fp-dropdown-menu > .fp-dropdown-list > span a",function(e){clearTimeout(n.closeTimerId),t.find("> .fp-dropdown-value").focus()}).on("click","> .fp-dropdown-menu > .fp-dropdown-list > li a, > .fp-dropdown-menu > .fp-dropdown-list > span a",function(e){e.preventDefault(),n.scope.multiple&&e.stopImmediatePropagation(),n.__setSelected($(this)),n.close(0)}).on("mouseover","> .fp-dropdown-menu > .fp-dropdown-list > li a, > .fp-dropdown-menu > .fp-dropdown-list > span a",function(e){fp.device.usingMouse&&t.data("currentTarget",this)})},__setSelected:function(e,t){var n,i,r=this;if(e)if(_.isString(e))n=i=e;else if(fpUtil.isJQuery(e)&&e.length){if(!fpUtil.getBoolean(e.attr("data-selectable"),!0))return;var a,o=this.scope.multiple;if(i=fpUtil.decodeForHtmlAttribute(e.attr("data-value")),o){var s,l,c,u="check-all"==i||"uncheck-all"==i,d=!0;l="check-all"==i||"uncheck-all"!=i&&this.__toggleSelectedItem(e),c=u?this.$list:e.parent().hasClass("fp-dropdown-list-group")?this.$list.filter('[data-group-id="'+i+'"]'):(d=!1,this.$list.filter("[data-selected=true]")),n=i="",c.each(function(){s=$(this),(l=d?l:fpUtil.getBoolean(s.attr("data-selected"),!1))&&(i&&(n+=", ",i+=","),n+=s.html(),i+=fpUtil.decodeForHtmlAttribute(s.attr("data-value"))),d&&r.__toggleSelectedItem(s,l)})}else n=e.find("> font > font").html()||e.html(),this.$list.each(function(){var e=$(this);e.attr("data-selected")&&(a=this),r.__toggleSelectedItem(e,!1)}),this.__toggleSelectedItem(e,!0);i=0<i.length?i:n}var f=fpUtil.decodeForHtmlAttribute(this.$element.attr("data-default"));n=n||(i=f);var p=this.$element.find("> .fp-dropdown-value .fp-value").html(n);p.toggleClass("fp-has-option-attribute",0<p.find(".fp-option-attribute").length),f!=fpUtil.decodeForHtmlAttribute(i)?this.$element.addClass("fp-has-value"):(i="",this.$element.removeClass("fp-has-value"));var h=this.$element.find('> input[type="hidden"]').val(i);this.value=i,t||e&&(!e||e[0]==a)||(h.trigger("change"),this.onChange())},__setSelectedByStartText:function(e,t){if(this.$list.length){var n=fpUtil.isNull(t)?this.getSelectedItem()[0]:null,i=this.$element.data("lastSearchIndex")||0,r=i;t=t||this.$list.length-1;for(var a=i;a<=t;a++){if($item=$(this.$list[a]),0==r&&n){if(n!=$item[0])continue;n=null,r=a,a++,$item=$(this.$list[a])}if(S($item.text()).trim().startsWith(e,!0)){this.__setSelected($item);var o=$item.closest(".fp-dropdown-list");return o.scrollTop($item.position().top+o.scrollTop()-.5*(o.parent().height()-$item.height())),void this.$element.data("lastSearchIndex",a+1)}}this.$element.removeData("lastSearchIndex"),0<r&&this.__setSelectedByStartText(e,r-1)}},__toggleSelectedItem:function(e,t){return(t=null!=t?t:!fpUtil.getBoolean(e.attr("data-selected"),!1))?e.addClass("fp-is-selected").attr("data-selected",!0):e.removeClass("fp-is-selected").removeAttr("data-selected"),t}}),TEc=fpUtil.getNamespace("ui",fp),TEc.DropdownPhoneCountry=fp.Component.extend({construct:function(e,t){var n=TEc.getTemplate("component/0/phone-country-dropdown.html");_.defaults(this.config,{}),this._super(e,t,n),this.init()},render:function(e){var t=this.scope;this.config.obj&&$.extend(t,this.config.obj),this._super(e),this.__initCountryCodeDropdown()},__initCountryCodeDropdown:function(){var l=this,c=this.scope;this.$element.find(".fp-dropdown-country-code").each(function(){var e,t=$(this),n=t.closest(".fp-phone-country").find(".dd-phone-input");if(t.dropdown({autoInit:!0,onChange:function(e){var t=$(this).find("a.fp-is-selected").attr("data-country-phone_code");l.__onCountryCodeChanged(n,t)}}),t&&t.data("fp.ui.Dropdown")){var i,r=c.userAddressConfig&&c.userAddressConfig.default_country_code,a=n.val(),o="fp-input-phone_alt"==n.attr("name"),s=null;0<_.size(c.address)&&(s=o?c.address.phone_alt_country:c.address.phone_country),s=s||(s=r||fp.config.countryCode||"").toLowerCase(),t.data("fp.ui.Dropdown").setValue(s),t.find(".fp-country-code-flag").val(s),i=_.findWhere(c.countryPhoneCodesHashed,{country_code:s}),_.size(i)&&(e=i.phone_country_code,a&&(a.trim(),0!=a.indexOf(e)&&0==a.indexOf("+")&&a.indexOf(" ")&&t.data("fp.ui.Dropdown").setValue(i.country_code))),n.attr("data-temp-code",e),l.__onCountryCodeChanged(n,e)}})},__onCountryCodeChanged:function(e,t){var n=e,i=n.val(),r=n.attr("data-temp-code");r&&0==i.indexOf(r)&&(i=i.replace(r,"").trim(),n.val(i)),i?0!=i.indexOf(t)&&n.val(t+" "+i):n.val(t+" "),n.attr("data-temp-code",t)}}),rFc=fpUtil.getNamespace("ui",fp),rFc.Pager=fp.Component.extend({construct:function(e,t,n){n=n||$(e).attr("data-template")||"component/1/pager.html",this._super(e,t,n),_.defaults(t,{limit:fpConstants.pager.ITEMS_PER_PAGE,defaultMaxSize:fpConstants.pager.MAX_SIZE});var i=fpConfig.pagerResponsiveMaxSize||[[0,4],[fpConstants.matchMediaMin.SM]],r=fpConfig.pagerResponsiveMaxSize||[[0,2],[fpConstants.matchMediaMin.SM]];"component/1/pager.html"==n&&_.defaults(t,{responsiveMaxSize:i,responsiveBaseWidth:window}),"component/2/pager.html"==n&&_.defaults(t,{responsiveMaxSize:r,responsiveBaseWidth:window}),_.isArray(t.responsiveMaxSize)&&fpUtil.sort(t.responsiveMaxSize)},render:function(e){var r=this.scope,a=r.stateManager,o=a.stateParams;e=_.defaults(e,{limit:o.limit||r.limit,totalItems:r.totalItems});var t=this.$element,n=this.config,i=n.responsiveMaxSize,s=n.defaultMaxSize,l=fpUtil.getInteger(o.page,1),c=fpUtil.getInteger(e.limit,n.limit),u=_.size(i);if(0<(r.limit=c)){if(u)for(var d,f=n.responsiveBaseWidth.innerWidth,p=0;p<i.length;p++)(d=i[p])[0]<=f&&(s=fpUtil.getInteger(d[1],n.defaultMaxSize));r.totalItems=fpUtil.isInteger(e.totalItems)?e.totalItems:fpUtil.getInteger(n.totalItems),r.currentPage=rFc.Pager.getPage(l,r.totalItems,c)||1,r.maxPage=Math.ceil(r.totalItems/c),r.startPage=r.currentPage-Math.floor(.5*s),r.startPage<1&&(r.startPage=1),r.endPage=r.startPage+s-1,r.endPage>r.maxPage&&(r.endPage=r.maxPage,r.startPage=r.endPage-s+1,r.startPage<1&&(r.startPage=1)),r.startItem=(r.currentPage-1)*c+1;var h=r.startItem-1+c;r.endItem=h<r.totalItems?h:r.totalItems}else r.totalItems=0,r.currentPage=r.maxPage=r.startPage=r.endPage=r.startItem=r.endItem=1;this._super(e),n.enablePageLimit&&t.find('[data-role="dropdown-page-limit"]').dropdown2({items:n.items||[{id:"25",name:"Show: 25"},{id:"50",name:"Show: 50"},{id:"100",name:"Show: 100"}],value:r.limit,selectConfig:{dropdownAutoWidth:!0},onChange:function(e){a.go(a.current,{limit:e},{inherit:!0})}}),t.toggleClass("hidden",fpUtil.getBoolean(!this.rendered||!n.enablePageLimit&&r.maxPage<=1||n.enablePageLimit&&!r.maxPage)).find(".fp-btn-next, .fp-btn-last").toggleClass("fp-disabled",r.currentPage==r.maxPage).end().find(".fp-btn-prev, .fp-btn-first").toggleClass("fp-disabled",1==r.currentPage),t.on("click",".fp-paging a",function(e){e.preventDefault();var t=$(e.target),n=fpUtil.getInteger(o.page,1),i=r.totalItems||0;switch(t.attr("data-role")){case"first":n="first";break;case"last":n="last";break;case"prev":if(1==n)return;n--;break;case"next":n++;break;default:n=fpUtil.getInteger(t.text(),1)}n=rFc.Pager.getPage(n,i,r.limit),r.currentPage!=n&&a.go(a.current,{page:n},{inherit:!0})}),this.__attachScopeEvents()},__attachScopeEvents:function(){this._super();var n=this,e=$(this.scope);_.size(this.config.responsiveMaxSize)&&e.on(fp.events.MEDIA_WIDTH_CHANGE,function(e,t){n.render()})}}),rFc.Pager.getPage=function(e,t,n){if("first"==e)return 1;t=t||0,n=n||fpConstants.pager.ITEMS_PER_PAGE;var i=rFc.router.stateManager.stateParams,r=Math.ceil(t/n);if("last"==e)return r;var a=fpUtil.getInteger(e)||(null!=i.page?1:null);return a&&(a<1?a=1:t?t<a*n&&(a=r):a=1),a},rFc.Pager.ensurePage=function(e,t,n){var i=rFc.router.stateManager,r=i.stateParams;if(1==e&&fpUtil.isNull(r.page))return!0;var a=this.getPage(e,t,n)||1;return a==e||(i.go(i.current,{page:a},{inherit:!0}),!1)},fpUtil.getNamespace("ui",fp).ResultHeader=fp.Component.extend({construct:function(e,t,n){if(n=n||$(e).attr("data-template")||"component/0/result-header.html",this._super(e,t,n),_.defaults(this.config,{enabledViews:{circular:!1,grid:!0},search:!1,labelFavorites:fp.ui.locale("shared-favorites","Favorites"),containerClass:S.getString(fp.config.containerClass,"container"),filtersLabel:fp.config.resultFiltersLabel||fp.ui.locale("shared-filters","Filters")}),!this.config.layout){var i=0;if(S(n).endsWith("result-header.html")){var r=n.match(/component\/(\d)+/i);i=r?r[1]:0}this.config.layout="layout-"+i}},render:function(e){var t,n,i,o=this,s=this.scope,r=this.$element,a=s.stateManager,l=s.stateParams,c=r.find('[data-role="pager"]');c.length&&(i=c.data("fp.ui.Pager"))&&i.destroy(!0);this._super(e),(c=r.find('[data-role="pager"]').pager({autoInit:!1})).length&&(i=c.data("fp.ui.Pager")).init(!1).done(function(){var e=_.getCollectionValue(s.limits,parseInt(s.limit,10),o.config.defaultLimit);i.render({totalItems:s.totalItems,limit:e})});if(this.config.search&&(d=_.getObject(this.config.search)),r.find('[data-role="dropdown-sort"]').dropdown({onChange:function(e){var t=s.stateManager;e=_.getCollectionValue(s.sorting,e,o.config.defaultSort),t.go(t.current,{sort:e,page:1},{inherit:!0})}}),r.find('[data-role="dropdown-limit"]').dropdown({onChange:function(e){var t,n=_.getCollectionValue(s.limits,parseInt(e,10),o.config.defaultLimit);s.totalItems&&l.page&&(t=parseInt(l.page,10))*n>s.totalItems&&(t=Math.ceil(s.totalItems/n)),a.go(a.current,{limit:n,page:t},{inherit:!0})}}),(n=(t=r.find('[data-role="dropdown-filter"]').dropdown({onChange:function(e){var t=a.current,n=t,i={page:null,filter:null};if(t.parent&&!t.parent.abstract&&t.parent!=a.root&&(n=t.parent),"all"!=e&&(i.filter=_.getCollectionValue(s.filters,e,o.config.defaultFilter),n=_.getObject(a.get(n.name+"-"+S(i.filter).trimLeft("is_").s+"-param"),n)),l.page&&(i.page=1),a.go(n,i,{inherit:!0}),d&&d.enableAutoResize){var r=o.$element.find('[data-role="search"]').data("fp.ui.Component");r&&r.resize()}}})).data("fp.ui.Dropdown"))&&!n.getValue()&&t.find(".fp-dropdown-value > .fp-value").text("Show"),d){var u=r.find('[data-role="search"]'),d=_.defaults(d,{elementSelector:u,name:"search-box",disableDropdown:!0,persistCategoryId:!0,enableWindowResize:"container-fluid"==this.config.containerClass});fp.ui.loadModule(d,this).then(function(e){return e.init()})}r.addClass(fpUtil.formatString("fp-{0}",this.config.layout)).on("click",'[data-action$="-categories"]',$.proxy(o.__toggleCategories,o)).on("click",'[data-action^="view-"]',function(e){e.preventDefault();var t=$(this),n=t.attr("data-action").split("view-")[1];if("grid"==n&&o.config.customGridUrl)window.location=o.config.customGridUrl;else if(!S(n).eq(s.stateParams.display)){t.parent().find('[data-action^="view-"]').removeClass("fp-is-selected"),t.addClass("fp-is-selected");var i=s.stateParams.display||"circular"||n,r=$.extend({},s.stateParams),a=s.stateManager.current;"circular"==(r.display=n)?(_.each(r,function(e,t){(t=S(t)).ne("q")&&!t.endsWith("_q")||delete r[t.s]}),delete r.page,delete r.limit,delete r.filter,delete r.department_id,a.parent&&!a.parent.abstract&&(a=a.parent)):"circular"==i&&delete r.page,s.stateManager.go(a,r)}}).on("click",'[data-action="print"]',function(e){e.preventDefault(),_.isFunction(o.config.onPrint)?o.config.onPrint():window.print(),fp.trigger(fp.events.TRACK_EVENT,fpConstants.trackingEvents.PrintResults)}).on("click",'a[data-action="toggle-options"]',$.proxy(o.__toggleShowOptions,o)),this.__toggleShowOptions(null,!0)},resize:function(){if(this._super(!1)){var e=this.$element.find('[data-role="search"]').data("fp.ui.Component");e&&e.resize()}},destroy:function(e){var t=this.$element.find('[data-role="pager"]');if(t.length){var n=t.data("fp.ui.Pager");n&&n.destroy(e)}this._super(e)},__toggleCategories:function(e){e.preventDefault();var t=this.scope,n="show-categories"==$(e.target).attr("data-action")&&null,i=t.stateParams.limit?t.stateParams.limit:self.__getNextLimit(n);t.stateManager.go(t.stateManager.current,{limit:i,show_categories:n},{inherit:!0})},__toggleShowOptions:function(e,t){e&&e.preventDefault();var n=this.$element.find('a[data-action="toggle-options"]'),i=this.$element.find(".fp-result-header");if(n.length){var r=n.find(".fp-btn-icon"),a=this.scope,o=fpUtil.getBoolean(a.stateParams.show_options,!1);(o=t?o:!o||null)?(r.removeClass("fp-icon-dropdown-expand").addClass("fp-icon-dropdown-collapse"),i.add(document.body).addClass("fp-is-result-controls-open")):(r.addClass("fp-icon-dropdown-expand").removeClass("fp-icon-dropdown-collapse"),i.add(document.body).removeClass("fp-is-result-controls-open")),t||a.stateManager.go(a.stateManager.current,{show_options:o},{preventDefault:!0,inherit:!0})}else i.add(document.body).addClass("fp-is-result-controls-open")},__getNextLimit:function(e){if(_.size(this.config.limits)){var t,n=(e=fpUtil.getBoolean(e,this.config.showCategories))?"shownDepartments":"hiddenDepartments",i=this.config.limits[n],r=i.values,a=this.$element.find('[data-role="dropdown-limit"]'),o=i.default,s=i.default;if(a.length){var l=a.data("fp.ui.Dropdown");o=fpUtil.getValue(parseInt(l.getValue(),10),0)}for(var c=0;c<r.length&&!(o<(t=r[c]));c++)s=t;return s}}}),fpUi.Category=fp.Component.extend({construct:function(e,t,n){n=n||fpUi.getTemplate("component/0/category.html"),this._super(e,t,n),_.defaults(this.config,{replaceElement:!0,autoRenderMaxDepth:0}),"true"==fpUi.router.routeManager.urlParams.render_child_categories&&(this.config.autoRenderMaxDepth=-1)},render:function(e){this.scope.hashedItems={},this._super(e);var o=this,s=this.scope,l=s.hashedItems;this.$element.on("click","a",function(e){if($(e.target).hasClass("fp-nav-item-icon")){e.preventDefault();var t=$(this),n=t.parent(),i=t.next("ul.fp-nav");if(-1<o.config.autoRenderMaxDepth&&!i.length&&!n.hasClass("fp-is-selected")){var r=t.attr("data-id"),a=l[r];a&&_.size(a.items)&&(i=$(fpUi.renderTemplate(o.config.template,$.extend({},s,{items:a.items,level:fpUtil.getInteger(t.attr("data-depth"))+1}))).appendTo(n))}n.toggleClass("fp-is-expanded")}})}});var ui=fpUtil.getNamespace("ui",fp),CZc,nZc,oZc,pZc,qZc,rZc,uZc,zZc,U2c,T2c,X2c,Y2c,A4c,z4c,D4c,E4c;function yZc(){var e=_.getFunction(arguments[arguments.length-1],$.noop),t={fromState:this.from,fromUrl:this.fromUrl};fp.trigger(fp.events.ROUTE_AFTER_CHANGE,t),this.current!=this.from&&fp.trigger(fp.events.STATE_AFTER_CHANGE,$.extend({},t)),e()}function AZc(){var e=_.getFunction(arguments[arguments.length-1],$.noop),t=this.getStateFromUrl(null,!1,!0),n=t.state.data,i=fpUtil.getBoolean(this.preventDefault,!1),r=!1;if(delete this.preventDefault,n.isAngularState){var a=$('#fp-admin [data-role=sub-module-content] > [data-role="ng-app"]');r=window.angular&&angular.element(a).scope()}if(!r){this.initialized||_.empty(this.stateParams);var o,s=$.extend({},this.stateParams),l=$.extend({},t.params),c=fpUtil.getUnique(s,l),u=[];if(!i){var d={toState:t.state,toParams:l,fromState:this.current,fromParams:s,toUrl:oZc.href,fromUrl:this.currentUrl,changedParams:c,clientParams:{scrollTo:void 0,redirect:{state:void 0,stateParams:void 0},promises:[]}},f=d.clientParams,p=fp.trigger(fp.events.ROUTE_BEFORE_CHANGE,d),h=f.redirect.state,m=f.redirect.stateParams;if((i=p.isDefaultPrevented())&&!f.disableRedirect){var g=h?rZc.href(h,m):this.currentUrl,v="#"+S.getString(g.split("#")[1]);return h==this.current&&window.history?window.history.back():oZc.replace(v),e(!1)}o=f.scrollTo,fp.loaded&&fpUtil.isNull(o)&&fp.Module.getViewModule()&&(o=!(fp.config.disableSmartScrollResults&&!fp.device.xs)),_.size(f.promises)&&_.concat(u,f.promises)}}if(qZc.ensureRoute(t.state,t.params))return e(!1);_.empty(this.stateParams),$.extend(this.stateParams,l),_.empty(qZc.urlParams),$.extend(qZc.urlParams,fpUtil.urlParams()),_.empty(qZc.searchParams),$.extend(qZc.searchParams,fpUtil.urlParams({includeRouteSearch:!1}));var y,b={name:t.state.name||oZc.pathname};if(_.size(this.stateParams)&&(b.stateParams=$.extend({},this.stateParams)),this.history.add(b),this.initialized&&_.size(c)&&(fp.productAdRenderId=_.now()),i)return e(!1);if(this.from=this.current,this.current=t.state,this.fromUrl=this.currentUrl,this.currentUrl=oZc.href,this.fromParams=s,this.toParams=l,this.changedParams=c,r)return $(document.body).removeClass(this.from.data.cssClass).addClass(this.current.data.cssClass),e(!1);zZc=fpUtil.getBoolean(1<arguments.length&&arguments[arguments.length-2],!1),this.current!=this.from&&fpUi.blockUI(),fpUtil.hideProgress($.when.apply($,u)).always(function(){fpUi.unblockUI()}),o&&(_.isObject(o)&&!fpUtil.isJQuery(o)&&(y=o.options,o=o.selector),fpUtil.scrollTo(o,y));this._router&&this._router.every.on()}function BZc(){var e=_.getFunction(arguments[arguments.length-1],$.noop);$(document.body).removeClass(this.from.data.cssClass).addClass(this.current.data.cssClass);var t={toState:this.current,toParams:this.toParams,fromState:this.from,fromParams:this.fromParams,toUrl:this.currentUrl,fromUrl:this.fromUrl,changedParams:this.changedParams};this.current==this.from&&!zZc||fp.trigger(fp.events.STATE_CHANGED,$.extend({},t)),fp.trigger(fp.events.ROUTE_CHANGED,t),e()}function J4c(e){var t=fpUtil.getNamespace("data.events",fp),n=t.handlers,i=t.uiHandlers;if(n||i){var r=_.isString(e)?[e]:e;_.each(r,function(e,t){_.isString(e)&&(t=e),n&&_.each(n[t],function(e){fp.clientEvents.on[e.event]&&freshop.on(e.event,e.callback)}),i&&_.each(i[t],function(e){fp.clientUiEvents.on[e.event]&&freshop.ui.on(e.event,e.selector,e.callback)}),n&&delete n[t],i&&delete i[t]})}}function K4c(e,t){var n=fpUtil.getEventNs(e);if((!fp.disableRender||n==fpEvent.INITIALIZED)&&(n==fpEvent.STORE_CHANGED&&(e=n=fpEvent.STORE_LOADED),fp.clientEvents.on[n]))try{$(freshop).trigger(e,t)}catch(e){fp.notifier.notify(e)}}function L4c(t,e){var n=fpUtil.getEventNs(t);if((!fp.disableRender||n==fpEvent.LOADED)&&fp.clientUiEvents.on[n]){if(n==fpEvent.RENDERED){var i,r=$(t.target),a=$._data(freshop.ui,"events");if(r.length&&a)_.each(a.rendered,function(e){if(i=null,e.selector)try{i=r.filter(e.selector)}catch(e){}i&&i.length&&e.handler.call(freshop.ui,t)});return}try{$(freshop.ui).trigger(t,e)}catch(e){fp.notifier.notify(e)}}}ui.PaymentEdit=fp.Component.extend({construct:function(e,t,n,i){if(n=n||$(e).attr("data-template")||"component/0/payment-edit.html",_.defaults(t,{enableLocale:!0,enableRouteChange:!1,balanceNotification:fpUi.locale("ui-payment-remaining-balance","You have a remaining balance of {0} that is due. Please select a payment method below."),loyaltyBalanceNotification:null,enableSplitPayment:fpUtil.getBoolean(fp.config.enableSplitPayment,!0),billingFields:[{identifier:"cardholder_name",label:"Cardholder Name",is_required:!0},{identifier:"first_name",label:"First Name",is_required:!0},{identifier:"last_name",label:"Last Name",is_required:!0},{identifier:"address_1",label:"Street Address",is_required:!0},{identifier:"address_2",label:"Apt./Suite",is_required:!0},{identifier:"city",label:"City",is_required:!0},{identifier:"state",label:"State/Region",is_required:!0},{identifier:"postal_code",label:"Postal Code",is_required:!0},{identifier:"phone",label:"Phone",is_required:!0}]}),this._super(e,t,n,i),!this.config.layout){var r=0;if(S(n).endsWith("payment-edit.html")){var a=n.match(/component\/(\d)+/i);r=a?a[1]:0}this.config.layout="layout-"+r}this.__uiLoader=new fpUi.Loading},init:function(t,e){this.__onCancelAcculynk(null,!0);var n=this;if(this.__savedPaymentType=this.scope.paymentType,"admin"!=this.config.intent&&fpUtil.isPromise(this.__promiseInProgress)&&"pending"==this.__promiseInProgress.state())return this.__delayedInit=function(){delete n.__delayedInit,n.init(t,e)},$.Deferred().promise();this.__initChangePaymentType=!0;var i,r,a,o,s,l,c=n.scope,u=!0;return c.order=i=_.getObject(c.order),c.fulfillmentType=_.getObject(c.fulfillmentType),c.authorizedPayment=_.getObject(c.authorizedPayment),c.loyaltyPoints=void 0,this.rendered&&this.__uiLoader.show(this.$element),this._super(!1).then(function(){var e={type:"payment_type",order_id:i.id,store_id:fpUtil.getStateValue(fpConfig.enableCheckoutSingleStep||"save_payment"==n.config.intent,c.store.id),intent:fpUtil.getStateValue("admin"==n.config.intent,"admin")};return fpService.tagService.get(e,{})}).then(function(e){if(r=_.getArray(e.items),"admin"!=n.config.intent&&!fpConfig.enableCheckoutSingleStep){if(!(l=_.find(r,function(e){return e.config&&e.config.allow_saved_payment})))return;if("save_payment"!=n.config.intent)return fpService.userMeService.get({order_id:i.id},{childServiceCall:"payment_methods"}).then(function(e){s=e.items,_.size(s)&&r.unshift({identifier:"saved_payment",sequence:-1,config:{enabled:!0,label:fpUi.locale("ui-payment-pay-saved","Pay online with saved payment")}})});r=_.filter(r,function(e){return e.config&&e.config.allow_saved_payment})}}).then(function(){c.paymentTypes=r,c.hashedPaymentTypes=a=_.indexBy(r,"identifier");var e,t=_.findWhere(i.authorized_payments,{method:"loyalty_point"});return"admin"!=n.config.intent&&a.loyalty_point&&fp.user.store_card_number&&!t&&(o=a.loyalty_point,e=n.__viewCardBalance(null,"loyalty_point").then(function(e){c.loyaltyPoints=e})),"admin"==n.config.intent&&!t||(delete a.loyalty_point,_.removeWhere(r,{identifier:"loyalty_point"})),e}).then(function(){if(!n.config.enableRouteChange||(u=_.has(n.config,"ensureStateParams")?_.result(n.config,"ensureStateParams"):n.__ensureStateParams()))return n.__initPaymentType(e)}).always(function(e){"abort"!=e&&(n.__uiLoader.hide(),c.paymentType=_.getObject(c.paymentType),c.paymentTypes=r,c.hashedPaymentTypes=_.getObject(a),c.userPaymentMethods=s,c.cardholder=_.getObject(c.cardholder),c.allowSavedPayment=l,c.enableSplitPayment=n.config.enableSplitPayment&&(1<_.size(r)||_.size(i.authorized_payment||_.first(i.authorized_payments)))&&null!=_.find(r,function(e){return e.config&&e.config.is_splittable}),c.paymentTypeLoyaltyPoint=o,c.hashedBillingFields=_.getObject(c.hashedBillingFields),u&&fpUtil.getBoolean(t,!0)&&n.render())})},render:function(e){var t=this.scope,r=t.order;if(this.__initChangePaymentType){delete this.__initChangePaymentType;var n,i=1==_.size(t.userPaymentMethods)&&fpUtil.getFloat(r.amount_due);(fp.session.preference.payment_type_id||i)&&(g=this.$element.find('[data-role="dropdown-payment-method"]').data("fp.ui.Dropdown"))&&(s="saved_payment",n=i?t.userPaymentMethods[0].id:fp.session.preference.payment_type_id,g.setValue(n)),this.__changePaymentType(s,n)}else{var a,o=this,s=t.paymentType;if(this.__savedPaymentType&&this.__savedPaymentType.identifier==s.identifier)a={},this.$element.find(fpUtil.formatString('input[data-form-group="{0}"],textarea[data-form-group="{0}"],select[data-form-group="{0}"]',s.identifier)).each(function(){if(l=$(this),c=l.attr("name")||l.attr("data-name")){var e=S.getString(l.prop("type")).toLowerCase();a[c]="radio"==e||"checkbox"==e?l.prop("checked"):fpUi.getInputValue(l)}});t.maxCapturableAmount=this.__getMaxCapturableAmount(),t.cardholder.disableCcValidate=_.contains(["acculynk_cash","acculynk_snap","payeezy_gift_card","vantiv_gift_card"],s.identifier),this.$element.find('[data-toggle="tooltip"]').tooltip("destroy"),this._super(e),this.renderSplitPayment(),this.renderLoyaltyPoints(),this.renderPayeezy(),o.renderIframe();var l,c,u,d=this.$element.addClass("fp-payment-edit"),f=d.find('input[data-name="cc_number"]').off(),p=this.__successMessage,h=this.__errorMessage;if(delete this.__successMessage,delete this.__errorMessage,(_.has(t.stateParams,"payment_success")||_.isBoolean(p))&&(t.stateManager.go(t.stateManager.current,{payment_success:null},{preventDefault:!0,inherit:!0}),fpUi.OrderManager.isPaymentNeeded(r)||(p=fpUi.locale("ui-payment-submission","Your payment submission was successful."))),p)fpUtil.showSuccess(p,d.find(".fp-notification"));else if(h)fpUtil.showWarning(h,d.find(".fp-notification"));else{var m=d.find('[data-role="balance-notification"]:visible');m.length&&fpUtil.scrollTo(m)}if(d.closest("form").replaceClass(/fp-form-(?!sm|md|lg)\S+/gim,fpUtil.formatString("fp-form-{0}",s.identifier),!0),d.find('[data-toggle="tooltip"]').tooltip(),d.find('[data-role="dropdown-month"], [data-role="dropdown-year"]').dropdown(),d.find('[data-role="dropdown-payment-option"]').dropdown({onChange:function(e){if(s.config&&s.config.enable_conversion){var t=$(this);if(t.find('input[name="fp-input-payment_currency_id"]').length){var n=t.closest("label").parent();$container=n.find('[data-role="currency-container"]').removeClass("fp-table-display fp-notification fp-warning").empty(),$container.length||($container=$('<div class="fp-padding-all-sm fp-margin-top-sm" style="margin-left:auto;margin-right:auto;" data-role="currency-container"></div>').appendTo(n));var i=fpService.orderService.post({id:r.id,amount:fpUtil.getFloat(r.amount_due),currency:e},{childServiceCall:fpUtil.formatString("checkout/{0}/get_converted_amount",s.identifier),errorSelector:d.find(".fp-notification"),formatForRestfulId:!0,handleErrors:!1}).done(function(e){var t=fpUi.localef("shared-amount-in-currency","Amount in {0}:",fp.currency.currency_iso_code),n=fpUi.localef("shared-amount-in-final-currency","Final amount in {0}:",e.currency_iso_code||e.currency);$container.addClass("fp-warning fp-table-display").html(fpUtil.formatString('                                        <div class="fp-row"><div class="fp-cell fp-text-left">'+t+'</div><div class="fp-cell fp-padding-left-sm fp-text-right">{0} {1}</div></div>                                         <div class="fp-row"><div class="fp-cell fp-text-left">'+n+'</div><div class="fp-cell fp-padding-left-sm fp-text-right">{2} {3}{4}</div></div>                                         ',fp.currency.currency_iso_code,r.amount_due,e.currency_iso_code||e.currency,e.currency_symbol,e.converted_amount))}).fail(function(e,t,n){fpUtil.showError(n,$container.addClass("fp-notification fp-margin-top-sm"))});new fpUi.Loading({appendTo:t,promiseHide:i,showOnInstantiate:!0,destroyOnHide:!0})}}}}),d.find('[data-role="dropdown-payment-method"]').dropdown({onChange:function(e){o.__changePaymentType("saved_payment",e)}}),t.cardholder.disableCcValidate||f.payment("formatCardNumber").payment("validateCardNumber",function(e){var t,n=$(this),i=n.parent(),r="",a="credit-card";t=2==o.config.version?n.prev(".input-group-prepend").find(".fp-icon").removeClass().addClass("input-group-text fp-icon"):n.prev(".fp-input-group-addon").removeClass().addClass("fp-input-group-addon"),e.card?(i.addClass("fp-is-identified"),_.has(fpConfig.cardTypes,e.card.type)&&(a=e.card.type+" fp-icon-cc-"+e.card.type)):i.removeClass("fp-is-identified"),e.valid?(r=fpConfig[S(s.identifier).startsWith("cybersource")?"cardTypeCodes":"cardTypes"][e.card.type],i.addClass("fp-is-valid")):i.removeClass("fp-is-valid"),2==o.config.version?t.addClass(fpUtil.formatString("fp-icon-{0}",a)):t.addClass(fpUtil.formatString("fp-icon fp-addon-before fp-icon-{0}",a)),d.find('input[data-name="card_type"]').val(r)}),d.on("change",'input[name="input-payment-method"][type="radio"]',function(){var n=d.find('[data-role="payment-description"]'),i=o.__changePaymentType(S.getString(this.id).split("-").pop()),r=$(this);_.delay(function(){if("pending"==i.state()){var e,t=n.height();n.remove(),e=(n=$('<div data-role="payment-description">&nbsp;</div>').insertAfter(r.next("label"))).height(),n.height(t).animate({height:e},function(){n.height("")}),fp.formLoader.show({appendTo:n,promiseHide:i})}},100)}).on("click",'input[name="input-security-code"][type="radio"]',function(e){var t=$(this);t.closest('[data-role="fp-security-codes"]').find('input[type="text"]').addClass("hidden").prop("disabled",!0).filter(fpUtil.formatString('input[data-name="{0}"]',t.attr("data-value"))).removeClass("hidden").prop("disabled",!1).focus()}).on("click",'[data-action="cancel-payment"], [data-action="change-payment-method"]',$.proxy(this.__onCancelPayment,this)).on("click",'[data-action="cancel-acculynk"]',$.proxy(this.__onCancelAcculynk,this)).on("click",'[data-action="cancel-payeezy_gift_card"]',$.proxy(this.__onCancelPayeezyGiftCard,this)),t.hashedBillingFields.country&&t.hashedBillingFields.country.show_dropdown&&d.find('[data-role="dropdown-country"]').dropdown(),_.size(a))d.find(fpUtil.formatString('input[data-form-group="{0}"],textarea[data-form-group="{0}"],select[data-form-group="{0}"]',s.identifier)).each(function(){if(l=$(this),c=l.attr("name")||l.attr("data-name"),_.has(a,c))switch(u=a[c],c){case"cc_number":l.val(u).trigger("change");break;case"exp_month":case"exp_year":var e=l.closest('[data-role^="dropdown-"]').data("fp.ui.Dropdown");e&&e.setValue(u);break;default:var t=S.getString(l.prop("type")).toLowerCase();"radio"==t||"checkbox"==t?l.prop("checked",fpUtil.getBoolean(u)):l.val(u)}});else if(fp.isLocal()){var g;d.find('input[data-name="cardholder_name"]').val("Nate Rode"),d.find('input[data-name="postal_code"]').val("14623"),d.find('input[data-name="first_name"]').val("Nate"),d.find('input[data-name="last_name"]').val("Rode"),d.find('input[data-name="cc_number"]').val("4111111111111111").trigger("change"),d.find('input[data-name="cvv_code"]').val("123"),(g=d.find('[data-role="dropdown-month"]').data("fp.ui.Dropdown"))&&g.setValue("05"),(g=d.find('[data-role="dropdown-year"]').data("fp.ui.Dropdown"))&&g.setValue("2022")}}},renderSplitPayment:function(e){var t=this.scope,n=t.paymentType;if(t.enableSplitPayment&&n.config&&n.config.is_splittable&&fpUtil.getFloat(t.order.amount_due)){var i,r=this.$element;switch(n.identifier){case"acculynk_snap":case"acculynk_cash":i=fpUtil.formatString("acculynk/split-{0}.html",this.__acculynkState||"view-balance");break;case"payeezy_gift_card":i=fpUtil.formatString("gift-card/split-{0}.html",this.__payeezyGiftCardState||"view-balance");break;default:i="split-apply-payment.html"}var a=r.find('[data-role="payment-description"]'),o=a.find('[data-role="split-apply-payment"]');o.length||(o=$('<div data-role="split-apply-payment"></div>').appendTo(a)),o.html(fpUi.renderTemplate(fpUtil.formatString("component/0/payment-edit/{0}",i),_.defaults(e,{maxCapturableAmount:this.__getMaxCapturableAmount(),paymentType:n,cardBalance:t.cardBalance}))),fp.isLocal()&&r.find('input[data-name="cc_number"]').val("4111111111111111").trigger("change")}},renderLoyaltyPoints:function(){var t=this,e=this.scope,n=e.order,i=this.$element.closest("form").find('[data-role="payment-edit-loyalty-points"]');i.length&&(i.find('input[data-name="amount"]').off().unmask(),e.loyaltyPoints&&fpUi.OrderManager.isPaymentNeeded(n)&&!_.findWhere(n.authorized_payments,{method:"loyalty_point"})?(i.removeClass("hidden").html(fpUi.renderTemplate("component/0/payment-edit/loyalty-points.html",e)),i.find('input[data-name="amount"]').mask("#0.00",{reverse:!0}).on("blur",function(){var e=$(this);e.val()||e.val("0.00"),t.__validateLoyaltyPoints(!0)}).on("keyup",function(){t.__refreshAppliedLoyaltyPoints($(this).val())})):i.addClass("hidden").html(""))},renderPayeezy:function(){if(("payeezy_v2"===this.scope.paymentType.identifier||"payeezy_v2_3d_secure"===this.scope.paymentType.identifier)&&fpUi.OrderManager.isPaymentNeeded(this.scope.order)){var n=this,e={styles:{".is-empty":{"font-size":"17px"},".is-focus":{"font-size":"17px"},".is-invalid":{color:"#d8272d","font-size":"17px"},".is-valid":{color:"#155724","font-size":"17px"}},classes:{empty:"is-empty",focus:"is-focus",invalid:"is-invalid",valid:"is-valid"},fields:{name:{selector:'[data-name="cardholder_name"]'},card:{selector:'[data-name="cc_number"]'},cvv:{selector:'[data-name="cvv_code"]'},exp:{selector:'[data-name="expiry_date"]'}}},t=this.$element.find('[data-role="input-template"]');if(t.length){var i=t.css("color"),r=t.css("fontSize");_.each(e.styles,function(e){e.color||(e.color=i),e["font-size"]=r})}firstdata.createPaymentForm(e,{preFlowHook:function(t){var e;e=_.isFunction(n.config.onInitiatePayment)?n.config.onInitiatePayment({paymentType:n.scope.paymentType}):fpService.orderService.post({id:n.scope.order.id,store_id:n.scope.order.store_id},{childServiceCall:fpUtil.formatString("checkout/{0}/initiate",n.scope.paymentType.identifier),errorSelector:n.$element.find(".fp-notification"),formatForRestfulId:!0}),$.when(e).done(function(e){t({clientToken:e.client_token,publicKeyBase64:e.publicKeyBase64})}).fail(function(){t({})})}},function(e){firstdata.__paymentForm=e})}},destroy:function(e){this._super(e),this.$element.find('[data-toggle="tooltip"]').tooltip("destroy"),this.__uiLoader&&this.__uiLoader.destroy()},busy:function(e,t){this.__busy=!0,fpUtil.isNull(t)&&(t=!0);var n=this.$element.closest("form");if(t&&fpUi.disableForm(n),!e){var i=n.find('button[type="submit"]:visible').first();i.length&&new fpUi.Loading({appendTo:i,showOnInstantiate:!0,destroyOnHide:!0})}},idle:function(e,t){delete this.__busy;var n,i=this.$element.closest("form");fpUtil.getBoolean(e,!0)&&fpUi.enableForm(i),fpUtil.hideProgress(),i.find('button[type="submit"]').each(function(){var e=$(this);(n=e.data("fp.ui.Loading"))&&n.hide(),_.isBoolean(t)&&e.prop("disabled",!t)})},validate:function(){var e=this.scope,t=this.$element,n=t.closest("form"),i=t.find(".fp-notification"),r=e.paymentType.identifier,a=fpUtil.validateForm(n,i,null,{formGroup:r});return a&&e.paymentTypeLoyaltyPoint&&e.loyaltyPoints&&e.appliedLoyaltyPoints&&(a=this.__validateLoyaltyPoints())&&e.appliedLoyaltyPoints>=fpUtil.getFloat(e.order.amount_due)&&(r=e.paymentTypeLoyaltyPoint.identifier),a&&"new"==S.getString(r,"new")&&(a=!1,fpUtil.showError(fpUi.locale("ui-payment-select-payment","Please select a payment method."),i,{showV2Alert:2==this.config.version})),a||(clearTimeout(n.data("submitTimeoutId")),n.removeData("submitTimeoutId")),a},__validateLoyaltyPoints:function(e){var t=this.scope,n=!0;if(t.paymentTypeLoyaltyPoint&&t.loyaltyPoints){var i=this.$element,r=i.closest("form"),a=i.find(".fp-notification"),o=_.getObject(t.paymentTypeLoyaltyPoint.config),s=fpUtil.getFloat(t.order.amount_due),l=fpUtil.getFloat(o.minimum_redemption_amount),c=Math.min(s,t.loyaltyPoints.remaining_balance,fpUtil.getFloat(t.paymentTypeLoyaltyPoint.max_transaction_amount)),u=r.find('[data-role="payment-edit-loyalty-points"]').find(".fp-notification");u.length&&(a=u),t.appliedLoyaltyPoints&&l&&t.appliedLoyaltyPoints<l||c&&t.appliedLoyaltyPoints>c?(n=!1,fpUtil.showError(fpUi.localef("payment-loyalty-amount-maximum-error","Please enter a minimum of {0} and a maximum of {1}",o.minimum_redemption_amount,fp.numeralInstance.set(c).format(fp.config.currencyFormat)),a)):e&&a.hide()}return n},submit:function(o,s){if(this.__busy)return $.Deferred().reject().promise();var l=this,c=this.scope,u=this.$element,d=$.Deferred(),e=u.find('input[data-name="expiry_date"]'),f="",p="";if(e.length){var t="";if(f=S(u.find('input[data-name="exp_month"]').val()).trim().s,p=S(u.find('input[data-name="exp_year"]').val()).trim().s,f&&p){var n=dateFns.parse(fpUtil.formatString("{0}-{1}-01",p,f));t=fpUtil.formatDate(dateFns.endOfMonth(n),fp.serverDateFormat)}e.val(t)}if(!this.validate())return d.reject({error:"Invalid input"}).promise();if(this.__isPassThroughFormSubmit)return d.reject().promise();s=_.getObject(s);var h,i,a=$.Deferred(),m=s.paymentType||this.scope.paymentType,g=_.getObject(m.config);if(a.then(function(e){if("save_payment"==l.config.intent||fpUi.OrderManager.isPaymentNeeded(c.order)){if((e=_.getObject(e)).error)return $.Deferred().reject(e).promise();var t,n={},i=u;switch(m.identifier){case"payeezy":var r=_.getObject(e.results);if(S(r.status).eq("failed",!0)||!fpUtil.isApiResponseSuccess(e.status))return $.Deferred().reject(r).promise();r.token&&(t=JSON.stringify(r.token));break;case"payeezy_v2":case"payeezy_v2_3d_secure":t=e.results,fpUi.getFormValues(u.closest("form"),{formGroup:m.identifier,values:n});break;case"payeezy_gift_card":switch(l.__payeezyGiftCardState=u.find('[data-role*="balance-payeezy_gift_card"]').attr("data-action"),l.__payeezyGiftCardState){case"view-balance":return l.__payeezyGiftCardState="apply-payment",i=u.closest("form").find('[data-role="view-balance-payeezy_gift_card"]'),n.card_token=S(i.find('input[data-name="card_number"]').val()).trim().s,l.__payeezyGiftCardPayloadCardCardToken=S(i.find('input[data-name="card_number"]').val()).trim().s,(a=i.find('input[data-name="scv"]:visible, input[data-name="ean"]:visible').first()).length&&(delete l.__payeezyGiftCardPayloadEan,delete l.__payeezyGiftCardPayloadScv,type=a.attr("data-name"),n[type]=S(a.val()).trim().s,"ean"==type&&(l.__payeezyGiftCardPayloadEan=n[type]),"scv"==type&&(l.__payeezyGiftCardPayloadScv=n[type])),l.__viewCardBalance(n).done(function(e){c.cardBalance=fpUtil.getStateValue("payeezy_gift_card"==c.paymentType.identifier,e.remaining_balance),l.renderSplitPayment(),l.idle(!1),u.find('[data-role="payment-description"]').find('input[data-name="amount"]').focus()});case"apply-payment":l.__payeezyGiftCardPayloadCardCardToken&&(t=l.__payeezyGiftCardPayloadCardCardToken,(g.has_scv_cards||g.has_ean_cards)&&(l.__payeezyGiftCardPayloadEan||l.__payeezyGiftCardPayloadScv)&&(l.__payeezyGiftCardPayloadEan&&l.__payeezyGiftCardPayloadEan.length&&(n.ean=l.__payeezyGiftCardPayloadEan),l.__payeezyGiftCardPayloadScv&&l.__payeezyGiftCardPayloadScv.length&&(n.scv=l.__payeezyGiftCardPayloadScv)))}break;case"vantiv_gift_card":case"vantiv_store_card_payment":var a;if(t=S(u.find('input[data-name="card_number"]').val()).trim().s,n.cardholder_name=S(u.find('[data-name="cardholder_name"]').val()).trim().s,n.csc=S(u.find('input[data-name="cvv_code"]').val()).trim().s,g.has_scv_cards||g.has_ean_cards)(a=u.find('input[data-name="scv"]:visible, input[data-name="ean"]:visible').first()).length&&(type=a.attr("data-name"),n[type]=S(a.val()).trim().s);break;case"zift":n.card_holder=S(u.find('[data-name="cardholder_name"]').val()).trim().s,n.csc=S(u.find('input[data-name="cvv_code"]').val()).trim().s,n.exp_mmyy=f+S(p).right(2).s;break;case"securenet":"save_payment"==l.config.intent&&(t=e.customerId);break;case"acculynk_snap":case"acculynk_cash":switch(l.__acculynkState=u.find('[data-role*="balance-acculynk"]').attr("data-action"),l.__acculynkState){case"view-balance":return delete l.__acculynkCardToken,delete l.__paymentSessionId,l.__showAcculynkPinpad();case"apply-payment":if(fpUtil.getFloat(c.cardBalance)<fpUtil.getFloat(u.find('[data-role="payment-description"]').find('input[data-name="amount"]').val()))return $.Deferred().reject({error:fpUtil.formatString("You entered an amount greater than this card's remaining balance of {0}.",c.cardBalance)}).promise();l.__acculynkCardToken?n.card_token=l.__acculynkCardToken:l.__paymentSessionId&&(n.session_id=l.__paymentSessionId),n.return_url=l.getPaymentIframeSrc(),s.onProcessPayment=function(e){return l.__showAcculynkPinpad(e).then(function(){return l.busy(),$.when(l.config.onProcessPayment(null,{intent:"ensurePaymentAuthorized",paymentType:m,event:s.event}))}).then(function(){fp.config.enableSplitPaymentReview||fpUi.OrderManager.isPaymentNeeded(c.order)?l.init():l.idle(null,!fpUi.OrderManager.isPaymentNeeded(c.order))})}}break;case"loyalty_point":(i=u.closest("form").find('[data-role="payment-edit-loyalty-points"]')).length||(i=u),n.amount=c.appliedLoyaltyPoints;break;case"moneris":n.data_key=e.data_key,g.enable_avs_check&&(n.street_number=S(u.find('input[data-name="street_number"]').val()).trim().s,n.street_name=S(u.find('input[data-name="street_name"]').val()).trim().s,n.street_zipcode=S(u.find('input[data-name="street_zipcode"]').val()).trim().s)}return fpUi.getFormValues(i,{formGroup:m.identifier,values:n}),(t=S.getString(t,e.token,e.id))&&(n.card_token=t),e.cvv_code&&(n.cvv_code=e.cvv_code),_.has(s,"handleErrors")||(h=!0,s.handleErrors=!1),l.__onPaymentSubmit(n,s)}}).done(function(){delete c.appliedLoyaltyPoints,s.disableIdle||"hostedPayment"==s.intent||l.idle(),d.resolve()}).fail(function(e,t,n){l.idle();var i=fpUtil.isPromise(e);if(!i||h){var r,a=e;i&&("fulfillment_slot_required"==fpUtil.getXhrErrorResponse(e).error_code?r=!0:a={error:n}),r||l.__onPaymentSubmitFail(a,o,s)}d.reject(a)}).always(function(){delete l.__isPassThroughFormSubmit}),this.__promiseInProgress||(this.__promiseInProgress=d.promise(),this.__promiseInProgress.always(function(){delete l.__promiseInProgress,_.isFunction(l.__delayedInit)?l.__delayedInit():l.__errorMessage&&(fpUtil.showError(l.__errorMessage,l.$element.find(".fp-notification"),{markdownToHtml:!0}),delete l.__errorMessage)})),this.busy(null,!_.contains(["payeezy_v2","payeezy_v2_3d_secure","moneris"],m.identifier)),"loyalty_point"!=m.identifier&&c.paymentTypeLoyaltyPoint&&c.loyaltyPoints&&c.appliedLoyaltyPoints&&!_.findWhere(c.order.authorized_payments,{method:"loyalty_point"})){var r=_.defaults({formGroup:c.paymentTypeLoyaltyPoint.identifier,paymentType:c.paymentTypeLoyaltyPoint,ensurePaymentAuthorized:c.appliedLoyaltyPoints>=fpUtil.getFloat(c.order.amount_due)},s);i=this.submit(null,r).fail(function(e){l.__errorMessage&&l.__promiseInProgress&&(delete l.__promiseInProgress,l.__onPaymentSubmitFail(e,null,r))})}return $.when(i).done(function(){if("save_payment"!=l.config.intent&&!fpUi.OrderManager.isPaymentNeeded(c.order)||_.contains(["saved_payment","in_person","pay_later","outsider","paypal","hosted_payeezy","payeezy_gift_card","plug_n_pay","plug_n_pay_2","vantiv","vantiv_gift_card","vantiv_store_card_payment","ipay88","acculynk_snap","acculynk_cash","sbm","loyalty_point","hosted_fac","cx_pay","pay_gov"],m.identifier))a.resolve();else switch(m.identifier){case"stripe":try{Stripe.setPublishableKey(g.publishable_key),Stripe.card.createToken(u,function(e,t){a.resolve(t)})}catch(e){var t={};(t.message=e)&&fp.notifier.notify({name:"CheckoutError",message:fpUtil.formatString("CheckoutError: {0}",t.message)},{severity:"error",metaData:{"meta data":{"Payment Type":m.identifier}}}),fpUtil.showError("Please notify the store their Stripe setup is misconfigured.",l.$element.find(".fp-notification")),a.reject(t)}break;case"payeezy":fp.api(fpUtil.formatString("{0}securitytokens",g.url),{"credit_card.type":S(u.find('input[data-name="card_type"]').val()).trim().s,"credit_card.cardholder_name":S(u.find('input[data-name="cardholder_name"]').val()).trim().s,"credit_card.card_number":S(u.find('input[data-name="cc_number"]').val()).stripWhiteSpace().s,"credit_card.exp_date":f+p.substr(2),"credit_card.cvv":S(u.find('input[data-name="cvv_code"]').val()).trim().s,apikey:g.api_key,js_security_key:g.js_security_key,auth:!1,ta_token:g.ta_token,type:"FDToken"},{dataType:"jsonp",prepareJsonData:!1,apiKey:null}).done(a.resolve).fail(a.reject);break;case"payeezy_v2":firstdata.__paymentForm.onSubmit(function(e){a.resolve({results:e})},function(e){var t,n=fpUi.validation.rules.required.message(),i=[],r={};_.each(e.data,function(e){e.valid||(t=S(u.find(e.selector).prev("label").text()).trim().s||e.field,i.push(e.empty?fpUtil.formatString(n,t):t+" is invalid."))}),i.length?r.error={messages:i}:r.error=e.message,e.message&&fp.notifier.notify({name:"CheckoutError",message:fpUtil.formatString("CheckoutError: {0}",e.message)},{severity:"error"}),a.reject(r)});break;case"payeezy_v2_3d_secure":firstdata.__paymentForm.onSubmit(function(e){a.resolve({results:e})},function(e){var t,n=fpUi.validation.rules.required.message(),i=[],r={};_.each(e.data,function(e){e.valid||(t=S(u.find(e.selector).prev("label").text()).trim().s||e.field,i.push(e.empty?fpUtil.formatString(n,t):t+" is invalid."))}),i.length?r.error={messages:i}:r.error=e.message,e.message&&fp.notifier.notify({name:"CheckoutError",message:fpUtil.formatString("CheckoutError: {0}",e.message)},{severity:"error"}),a.reject(r)});break;case"worldpay":var e=u.closest("form");Worldpay.useOwnForm({clientKey:g.client_key,form:e[0],reusable:!1,callback:function(e,t){"OK"!=(t=_.getObject(t)).error&&a.resolve(t)}}),l.__isPassThroughFormSubmit||(l.__isPassThroughFormSubmit=!0,e.submit());break;case"securenet":tokenizeCard({publicKey:g.public_key,card:{number:S(u.find('input[data-name="cc_number"]').val()).s,cvv:S(u.find('input[data-name="cvv_code"]').val()).trim().s,expirationDate:f+"/"+p,firstName:S(u.find('input[data-name="cardholder_first_name"]').val()).trim().s,lastName:S(u.find('input[data-name="cardholder_last_name"]').val()).trim().s,address:{zip:S(u.find('input[data-name="postal_code"],input[name="fp-input-billing_postal_code"]').first().val()).trim().s}},addToVault:"save_payment"==l.config.intent,developerApplication:{developerId:g.developer_id,version:g.developer_application_version}}).then(function(e){return(e=_.getObject(e)).success&&e.token||(e.error=e.message||"Invalid card"),e}).done(a.resolve).fail(a.reject);break;case"zift":var n=fp.user.id,i={};"admin"==fpConfig.intent&&(n=c.order.user_id,i.intent="admin"),fpService.userMeService.get(i,{childServiceCall:"payment_methods/zift/temp_pass",userId:n}).then(function(e){var i=$.Deferred(),t="ziftCallback";return window[t]=function(e,t,n){"A01"==e?i.resolve({token:n}):i.reject({error:S(t).replace(fpUi.locale("ui-payment-account-number","AccountNumber"),fpUi.locale("shared-card-number","Card Number")).s})},ProxynizationAPI.password=e.temp_pass,ProxynizationAPI.process(S(u.find('input[data-name="cc_number"]').val()).stripWhiteSpace().s,t),_.delay(function(){window[t](null,fpUi.locale("shared-error-occurred","Timeout occurred"))},6e4),i.promise()}).done(a.resolve).fail(a.reject);break;case"cybersource":fpService.orderService.post({id:c.order.id,store_id:c.order.store_id},{childServiceCall:fpUtil.formatString("checkout/{0}/initiate",m.identifier),errorSelector:u.find(".fp-notification"),formatForRestfulId:!0}).then(function(e){var i=$.Deferred();return FLEX.createToken({production:fp.isProd(),kid:e.keyId,keystore:e.jwk,encryptionType:"rsaoaep256",cardInfo:{cardNumber:S(u.find('input[data-name="cc_number"]').val()).stripWhiteSpace().s,cardType:S(u.find('input[data-name="card_type"]').val()).trim().s,cardExpirationMonth:f,cardExpirationYear:p}},function(e){if(e.error){var t=fpUtil.getValueFromNamespace("responseStatus",e.error),n=_.map(t.details,function(e){return e.message});return i.reject({error:{message:n.length?n:t.message}})}i.resolve({token:JSON.stringify(e)})}),i.promise()}).done(a.resolve).fail(a.reject);break;case"moneris":$(window).off("message.payment.fp").on("message.payment.fp",function(e){if(e.originalEvent&&S(e.originalEvent.origin).endsWith("moneris.com")){var t;try{t=JSON.parse(e.originalEvent.data)}catch(e){}t&&t.dataKey?a.resolve({data_key:t.dataKey}):a.reject({error:t&&t.errorMessage||"Token not found"}).promise()}});var r=c.paymentType.config&&c.paymentType.config.iframe_post_url||"https://esqa.moneris.com/HPPtoken/index.php";try{document.getElementById("monerisFrame").contentWindow.postMessage("tokenize",r)}catch(e){a.reject({error:"Could not access iframe"})}break;default:fp.warn(fpUtil.formatString(fpUi.locale("ui-payment-handler-not-found","Handler for payment type {0} was not found."),m.identifier)),a.reject()}}),d.promise()},__initPaymentType:function(e){var t,n,i,r,a=this,o=this.scope;if(delete this.__iframeResponse,"admin"!=this.config.intent){if(e&&!o.hashedPaymentTypes[e]&&(e=null),!e){var s=o.order;e=1==_.size(o.paymentTypes)&&(fp.config.enableCheckoutSingleStep&&!s.id||"save_payment"==this.config.intent||fpUtil.getFloat(s.amount_due)||fp.store.price_mode_id==fpUtil.map.get("storePriceMode").get("dont_show_price").id)?o.paymentTypes[0].identifier:"open"==fpUtil.map.get("orderStatus",null,!0).get(s.status_id||"open").identifier?fp.session.preference.payment_method:_.getObject(s.authorized_payment||_.first(s.authorized_payments)).method}}else e=e||o.stateParams.identifier;switch(e=e||"new",o.paymentType=i=o.hashedPaymentTypes[e]||{identifier:"new"},o.hashedBillingFields=_.indexBy(fpUtil.getValueFromNamespace("config.avs_fields",i),"identifier"),i.identifier){case"stripe":window.Stripe||(t=fpUi.loadScript("https://js.stripe.com/v2/"));break;case"payeezy_v2":case"payeezy_v2_3d_secure":fp.isLocal()&&(i.config.client_url="https://docs.paymentjs.firstdata.com/lib/uat/client-2.0.0.js"),i.config.client_url||(i.config.client_url="https://docs.paymentjs.firstdata.com/lib/prod/client-2.0.0.js"),window.firstdata||(t=fpUi.loadScript(i.config.client_url));break;case"worldpay":window.Worldpay||(t=fpUi.loadScript("https://cdn.worldpay.com/v1/worldpay.js"));break;case"securenet":window.tokenizeCard||(t=fpUi.loadScript(i.config.client_url));break;case"zift":window.ProxynizationAPI||(t=fpUi.loadScript(i.config.client_url));break;case"cybersource":window.FLEX||(t=fpUi.loadScript(fpUtil.formatString("{0}js/flex-sdk-web{1}.js",fp.assetCdnUrl,fpUtil.getStateValue(fp.isDev(),"",".min"))));break;case"loyalty_point":o.loyaltyPoints=void 0,t=this.__viewCardBalance().done(function(e){o.loyaltyPoints=e});break;case"ncr_connected_payment":t=fpService.orderService.post({id:o.order.id,store_id:o.order.store_id,return_url:this.getPaymentIframeSrc()},{childServiceCall:fpUtil.formatString("checkout/{0}/initiate",o.paymentType.identifier),errorSelector:this.$element.find(".fp-notification"),formatForRestfulId:!0}).done(function(e){a.__iframeResponse=e})}if(o.hashedBillingFields.country&&o.hashedBillingFields.country.show_dropdown&&(n=fpService.countryService.get().done(function(e){r=e.items,o.countries=r})),"payeezy_v2"==i.identifier||"payeezy_v2_3d_secure"==i.identifier)_.each(["first_name","last_name","cardholder_name"],function(e){delete o.hashedBillingFields[e]});else if(!_.size(o.hashedBillingFields)){var l={};_.each(this.config.billingFields,function(e){l[e.identifier]=e=$.extend({},e),"vantiv"==i.identifier&&(e.payment_provider_identifier="billing_"+e.identifier)}),"vantiv"==i.identifier?delete(o.hashedBillingFields=l).cardholder_name:_.contains(["stripe","payeezy","worldpay","securenet","zift"],i.identifier)&&(o.hashedBillingFields={postal_code:l.postal_code,cardholder_name:l.cardholder_name})}return $.when(t,n)},__attachScopeEvents:function(){this._super();var e=this;$(this.scope).on(fp.events.CHECKOUT_SUMMARY_REFRESHED,function(){e.__isPaymentTypeChanging||e.init()})},__changePaymentType:function(e,t){e=e||this.scope.paymentType.identifier;var n,i,r=this,a=this.scope,o=a.paymentType.identifier!=e;if(delete a.cardBalance,delete this.__acculynkCardToken,delete this.__acculynkState,delete this.__paymentSessionId,delete this.__payeezyGiftCardState,delete this.__payeezyGiftCardPayloadCardCardToken,fpUtil.isPromise(this.__promiseChangePaymentType)&&(this.__promiseChangePaymentType.deferred().reject("abort"),delete this.__promiseChangePaymentType),this.config.enableRouteChange)o=!1,a.stateManager.go(a.stateManager.current,{identifier:e},{inherit:!0});else if(this.__isPaymentTypeChanging=!0,a.paymentType=a.hashedPaymentTypes[e]||a.paymentType,_.isFunction(this.config.onChangePaymentType)){var s,l=a.enableSplitPayment&&a.paymentType.config&&a.paymentType.config.is_splittable;"saved_payment"==e&&t&&(s=this.__getPaymentTypeFromMethodId(t)),n=$.when(this.config.onChangePaymentType({paymentType:a.paymentType,savedPaymentType:s,savedPaymentMethodId:t,submitLabel:this.__getSubmitLabel(e),submitDisabled:fpUtil.getBoolean(l)})).always(function(){delete r.__isPaymentTypeChanging})}return o&&(i=this.__initPaymentType(e)),this.__promiseChangePaymentType=$.when(n,i).always(function(){r.render(),delete r.__promiseChangePaymentType}),r.__promiseChangePaymentType},__getSubmitLabel:function(e){var t;switch(e=e||this.scope.paymentType.identifier){case"plug_n_pay":case"plug_n_pay_2":t=fpUi.locale("ui-payment-online","Pay Online");break;case"vantiv":case"sbm":t=fpUi.locale("ui-payment-with-card","Pay with Credit/Debit");break;case"hosted_payeezy":case"ipay88":case"hosted_fac":case"pay_gov":t=fpUi.locale("ui-payment-securely-online","Securely Pay Online")}return t},__getPaymentTypeFromMethodId:function(e){var t=_.findWhere(this.scope.userPaymentMethods,{id:e});if(t)return _.findWhere(this.scope.paymentTypes,{id:t.service_provider_id})},__onPaymentSubmit:function(e,t){e=_.getObject(e),t=_.getObject(t);var n,i,r,a=this,o=this.scope,s=this.$element,l=o.stateManager,c=t.paymentType||this.scope.paymentType,u=_.getObject(c.config),d=t.onProcessPayment;switch(delete t.onProcessPayment,c.identifier){case"paypal":case"vantiv":case"sbm":case"hosted_fac":case"pay_gov":n="hostedPayment",e.return_url=l.href(l.current,{identifier:null,payment_success:!0},{absolute:!0,inherit:!0}),e.cancel_url=window.location.href,d=function(e){return e.next_url?(window.location.href=e.next_url,$.Deferred().promise()):(fp.notifier.notify({name:"CheckoutError",message:"CheckoutError: next_url not found in response"},{severity:"error"}),$.Deferred().reject({error:"next_url is not defined"}).promise())};break;case"hosted_payeezy":case"plug_n_pay":case"plug_n_pay_2":case"ipay88":n="hostedPayment",e.return_url=l.href(l.current,{identifier:null,payment_success:!0},{absolute:!0,inherit:!0}),d=function(e){var t=u.url,n=u.app_redirect_url;if(!n||S(n).startsWith(fpUi.router.location.origin())||e.PostURL||(e.PostURL=t,t=n),!t)return fp.notifier.notify({name:"CheckoutError",message:"CheckoutError: PostURL not found in response"},{severity:"error"}),$.Deferred().reject({error:"PostURL is not defined"}).promise();var i="",r=a.$element.closest("form");return _.each(e,function(e,t){i+=fpUtil.formatString('<input name="{0}" type="hidden" value="{1}" />',t,e)}),r.parent().find(fpUtil.formatString('[name="fp-form-{0}"]'),c.identifier).remove(),$(fpUtil.formatString('<form id="fp-form-{0}" name="fp-form-{0}" method="post" action="{1}">{2}</form>',c.identifier,t,i)).insertAfter(r).submit(),$.Deferred().promise()};break;case"acculynk_snap":case"acculynk_cash":n="hostedPayment",i=!0;break;case"cx_pay":n="hostedPayment",e.return_url=l.href(l.current,{identifier:null,payment_success:!0},{absolute:!0,inherit:!0}),d=function(e){if(e.next_url){var t="",n=a.$element.closest("form");return _.each([{name:"billing-cc-number",value:S(s.find('input[data-name="cc_number"]').val()).stripWhiteSpace().s},{name:"billing-cc-exp",value:fpUtil.formatString("{0}/{1}",S(s.find('input[data-name="exp_month"]').val()).trim().s,S(s.find('input[data-name="exp_year"]').val()).trim().s)},{name:"billing-cvv",value:S(s.find('input[data-name="cvv_code"]').val()).trim().s}],function(e){t+=fpUtil.formatString('<input name="{0}" type="hidden" value="{1}" />',e.name,e.value)}),n.parent().find(fpUtil.formatString('[name="fp-form-{0}"]'),c.identifier).remove(),$(fpUtil.formatString('<form id="fp-form-{0}" name="fp-form-{0}" method="post" action="{1}">{2}</form>',c.identifier,e.next_url,t)).insertAfter(n).submit(),$.Deferred().promise()}return $.Deferred().reject({error:"Next URL is not defined"}).promise()}}return!e.amount&&this.config.enableSplitPayment&&u.is_splittable&&(e.amount=fpUtil.getFloat(this.$element.find('input[data-name="amount"]').val())),"saved_payment"==c.identifier&&fp.session.preference.payment_type_id&&(r=this.__getPaymentTypeFromMethodId(fp.session.preference.payment_type_id)),"Vantiv"==c.name&&s.find("input[name='fp-input-save_payment_vantiv']").is(":checked")&&(e.save_payment=!0),$.when(this.config.onProcessPayment(e,{paymentType:c,savedPaymentType:r,ensurePaymentAuthorized:t.ensurePaymentAuthorized,disableSetOrder:t.disableSetOrder,enableListLoaded:i,disableIdle:t.disableIdle,handleErrors:t.handleErrors,intent:n,event:t.event})).then(d)},__onPaymentSubmitFail:function(e,t,n){fp.log("__onPaymentSubmitFail",e);var i=(e=_.getObject(e)).error||e.Error||e.ErrorMessage,r=i,a="";if(_.isObject(r))if(r=i.message||i.messages,_.isArray(r)){var o=[];_.each(r,function(e){(e=_.isObject(e)?e.description:e)&&o.push(e)}),a=fpUtil.getMessage(o,null,!0)}else a=r;else a=r;this.__promiseInProgress&&(this.__errorMessage=a)},__onCancelPayment:function(e){if(e.preventDefault(),e.stopImmediatePropagation(),_.isFunction(this.config.onCancelPayment)){var i,t,n,r,a,o=this,s=this.scope.order,l=$(e.target);if("change-payment-method"==l.attr("data-action")){var c=s.authorized_payment||_.first(s.authorized_payments),u=c&&c.display_method;if(!u)return;t=fpUtil.formatString(fpUi.locale("ui-payment-wish-continue","Continuing will cancel your current {0} authorization.<br/><br/>Are you sure you wish to continue?"),u),a=fpUtil.formatString(fpUi.locale("ui-payment-canceled-submit","Your {0} authorization was successfully canceled.<br/><br/>Please submit a new payment."),u)}else{if(!(i=l.closest("[data-id]").attr("data-id")))return;r=(n=_.findWhere(s.authorized_payments,{id:i}))&&(n.card_type||n.display_method)+(n.last_four?" ending in "+n.last_four:""),t=fpUtil.formatString(fpUi.locale("ui-payment-want-cancel","Are you sure you want to cancel this {0} authorization?"),r),a=fpUtil.formatString(fpUi.locale("ui-payment-authorization-canceled","Your {0} authorization was successfully canceled."),r)}fp.trigger(fp.events.CONFIRM_MODAL_SHOW,{title:fpUi.locale("ui-payment-canceled","Cancel Authorization"),content:t,confirmButtonLabel:fpUi.locale("shared-yes","Yes"),cancelButtonLabel:fpUi.locale("shared-no","No"),customClose:!0,callback:function(e){if(e){var t=fpUi.getActiveModal(),n=t.data("formLoader");o.__promiseInProgress=$.when(o.config.onCancelPayment(i,{errorSelector:t.find('.modal-content [data-role="notification"]')})).then(function(){fpUi.closeActiveModal(),o.__successMessage=a,delete o.scope.appliedLoyaltyPoints}).always(function(){delete o.__promiseInProgress,_.isFunction(o.__delayedInit)?o.__delayedInit():o.__errorMessage&&(fpUtil.showError(o.__errorMessage,o.$element.find(".fp-notification")),delete o.__errorMessage)}),n||(n=new fpUi.Loading,t.data("formLoader",n)),n.show({appendTo:t.find(".modal-body .fp-btn-confirm"),promiseHide:o.__promiseInProgress})}}})}},__ensureStateParams:function(e){if(!(e=_.getObject(e,this.scope.stateParams)).identifier)return!0;var t=this.scope.stateManager;return!!this.scope.hashedPaymentTypes[e.identifier]||(t.go(t.current,{identifier:null},{preventDefault:this.rendered,inherit:!0}),!1)},__getMaxCapturableAmount:function(){var e=this.scope;return fpUtil.getMin(fpUtil.getFloat(e.order.amount_due)||null,fpUtil.getFloat(e.paymentType.max_transaction_amount)||null,fpUtil.getFloat(e.cardBalance)||null)},__viewCardBalance:function(e,t){var n=this.scope,i=n.paymentType,r=n.order;t=t||i&&i.identifier;return fpService.orderService.post($.extend(e,{id:r.id}),{childServiceCall:fpUtil.formatString("checkout/{0}/balance_check",t),errorSelector:this.$element.find(".fp-notification")})},__refreshAppliedLoyaltyPoints:function(e){var t=this.scope;t.appliedLoyaltyPoints=fpUtil.getFloat(e);var n=fpUtil.getFloat(t.order.amount_due)-t.appliedLoyaltyPoints;n<0&&(n=0),this.$element.find('[data-role="remaining-balance"]').text(fp.numeralInstance.set(n).format(fp.config.currencyFormat)),this.$element.find('[data-role="payment-types"]').toggleClass("hidden",!n),n||this.$element.find(".fp-notification").hide(),this.config.onChangePaymentType({submitLabel:0!=n&&this.__getSubmitLabel()})},__getAcculynkToken:function(){var e=this.scope,t=e.order,n=e.paymentType;if(!fpUtil.validateForm(this.$element.closest("form"),null,null,{formGroup:n.identifier}))return $.Deferred().reject("invalid").promise();var i=this.$element.find('[data-role="payment-description"]'),r=this.$element.find(".fp-notification"),a=S(i.find('input[data-name="cc_number"]').val()).stripWhiteSpace().replaceAll("-","").s;return fpService.orderService.post({id:t.id},{childServiceCall:fpUtil.formatString("checkout/{0}/get_session",n.identifier),errorSelector:r,formatForRestfulId:!0}).then(function(e){var t=e.session_id;return fp.api(n.config.client_url,{Version:"2",SessionId:t,CardNumber:a,Expiration:dateFns.format2(dateFns.addYears(dateFns.setMonth(new Date,11),1),"MMYY")},{childServiceCall:fpUtil.formatString("checkout/{0}/get_session",n.identifier),errorSelector:r,apiKey:null,method:fpConstants.apiMethods.POST,prepareJsonData:!1}).then(function(e){return fp.S(e.ErrorMessage).eq("success",!0)?{SessionId:t}:$.Deferred().reject(e)})})},__initiateAcculynk:function(){var e,t=this,n=this.scope,i=n.order,r=n.paymentType;return this.__acculynkCardToken||this.__paymentSessionId||(e=this.__getAcculynkToken().then(function(e){e.CardToken?t.__acculynkCardToken=e.CardToken:e.SessionId&&(t.__paymentSessionId=e.SessionId)})),$.when(e).then(function(){return fpService.orderService.post({id:i.id,card_token:fpUtil.getUndefinedIfEmpty(t.__acculynkCardToken),session_id:fpUtil.getUndefinedIfEmpty(t.__paymentSessionId),intent:fpUtil.getStateValue("apply-payment"==t.__acculynkState,"charge","balance"),amount:fpUtil.getFloat(t.$element.find('input[data-name="amount"]').val()),return_url:t.getPaymentIframeSrc()},{childServiceCall:fpUtil.formatString("checkout/{0}/initiate",r.identifier),errorSelector:t.$element.find(".fp-notification"),formatForRestfulId:!0})})},__showAcculynkPinpad:function(r){r=_.getObject(r);var e,a=this,o=fpUtil.getValueFromNamespace("config.pinpad_url",this.scope.paymentType);return fp.isProd()&&(o="https://pinpad.paysecure.acculynk.net"),o?(r.AccuId||(delete this.__acculynkInitiateRequestId,e=this.__initiateAcculynk().done(function(e){r=e,a.__acculynkInitiateRequestId=r.fp_request_id})),$.when(e).then(function(){var e,t=$.Deferred(),n=a.$element.find('[data-role="payment-description"]'),i=n.height();return $(window).off("message.payment.fp").on("message.payment.fp",function(e){(e=e&&e.originalEvent)&&S(fp.assetCdnBaseUrl).trimRight("/").eq(e.origin)&&a.__onCloseAcculynkIframe(e.data&&e.data.error).done(t.resolve).fail(t.reject)}),a.idle(!1),a.__$description=$("<div></div>"),n.children().appendTo(a.__$description),n.html(fpUtil.formatString('<div class="fp-container-pinpad" data-role="acculynk-pinpad">{0}<iframe src="{1}"></iframe><div><a href="javascript:;" class="fp-link-secondary fp-is-enabled" data-action="cancel-acculynk">{2}</a></div></div>',"                         <div class=\"fp-text-left fp-margin-bottom\">                             Please use the mouse pointer or touch screen instead of keyboard to select the numbers.                             After you select a digit, the system will scramble the numbers before you can select the next one.                             After you are done selecting your PIN, click on 'Submit'.                         </div>                     ",a.getPaymentIframeSrc($.extend({_action:o,_method:"post"},r)),fpUi.locale("shared-cancel","Cancel"))).parent().removeClass("hidden"),e=n.height(),n.height(i).animate({height:e},function(){n.height(""),fpUtil.scrollTo(n)}),t.promise()})):$.Deferred().reject({error:"Pinpad URL is not defined"}).promise()},__onCloseAcculynkIframe:function(e){if(_.contains(["view-balance","apply-payment"],this.__acculynkState)){var t,n=this,i=this.$element,r=i.find('[data-role="payment-description"]'),a=r.height(),o=$.Deferred().promise();if(r.addClass("fp-animated-loading-container").html(fpUi.renderTemplate("component/0/animated-loading.html")).height(a).animate({height:100},o.deferred().resolve),e)t=$.Deferred().reject({error:e}).promise();else switch(this.__acculynkState){case"view-balance":this.__acculynkState="apply-payment";var s=this.scope;t=this.__viewCardBalance({request_id:n.__acculynkInitiateRequestId}).done(function(e){s.cardBalance=fpUtil.getStateValue("acculynk_cash"==s.paymentType.identifier,e.remaining_balance_cash,e.remaining_balance_snap),n.renderSplitPayment(),i.find('[data-role="payment-description"]').find('input[data-name="amount"]').focus()});break;case"apply-payment":this.__acculynkState="view-balance"}return o.then(function(){return t}).fail(function(){n.__$description&&n.__$description.children().appendTo(r.html(""))}).always(function(){e&&!n.__$description&&n.__onCancelAcculynk(),r.height("").removeClass("fp-animated-loading-container"),delete n.__$description})}},__onCancelAcculynk:function(e,t){e&&e.preventDefault();var n=this.$element.find('[data-role="payment-description"]').html("");this.__acculynkState="view-balance",this.renderSplitPayment(),this.idle(),t||n.find('input[type="text"]:visible').first().focus()},__onCancelPayeezyGiftCard:function(e,t){e&&e.preventDefault();var n=this.$element.find('[data-role="payment-description"]').html("");this.__payeezyGiftCardState="view-balance",this.renderSplitPayment(),this.idle(),t||n.find('input[type="text"]:visible').first().focus()},getPaymentIframeSrc:function(e){return e=$.extend(e,{_assetAppKey:fp.assetAppKey,origin:fpUi.router.location.origin()}),fp.isDev()&&(e._isDev=!0),fpUi.router.routeManager.buildUrl(fpUtil.formatString("{0}html/payment.html",fp.assetCdnUrl),{searchParams:e})},renderIframe:function(e){if(e=e||this.__iframeResponse,_.size(e)){var t,n=this,i=this.$element.find('[data-role="payment-description"]'),r=i.height();$(window).off("message.payment.fp").on("message.payment.fp",function(e){(e=e&&e.originalEvent)&&S(fp.assetCdnBaseUrl).trimRight("/").eq(e.origin)&&n.__onCloseIframe(e.data&&e.data.error).then(function(){return n.busy(),$.when(n.config.onProcessPayment(null,{intent:"ensurePaymentAuthorized",paymentType:n.scope.paymentType}))}).then(function(){var e,t=fpUi.OrderManager.isPaymentNeeded(n.scope.order);fp.config.enableSplitPaymentReview||t?(t&&(e=$.when(n.config.onChangePaymentType({paymentType:{identifier:null},submitLabel:n.__getSubmitLabel()}))),$.when(e).then(n.init())):n.idle(null,!t)})}),this.idle(!0,!1),this.__$description=$("<div></div>"),i.children().appendTo(this.__$description),i.html(fpUtil.formatString('<div data-role="payment-iframe" class="fp-container-iframe"><iframe src="{0}"></iframe></div>',this.getPaymentIframeSrc({_action:e.request_url}))).parent().removeClass("hidden"),t=i.height(),i.height(r).animate({height:t},function(){i.height(""),fpUtil.scrollTo(i)})}},__onCloseIframe:function(e){var t=this,n=this.$element.find('[data-role="payment-description"]'),i=n.height(),r=$.Deferred();return n.addClass("fp-animated-loading-container").html(fpUi.renderTemplate("component/0/animated-loading.html")).height(i).animate({height:100},r.resolve),r.promise().done(function(){t.__$description&&t.__$description.children().appendTo(n.html(""))}).always(function(){e&&!t.__$description&&t.__onCancelIframe(),n.height("").removeClass("fp-animated-loading-container"),delete t.__$description})}}),fp.ui.validation={rules:{required:{message:function(){return fp.ui.locale("shared-required","{0} is required.")}},"required-country-phone":{message:function(){return fp.ui.locale("shared-required","{0} is required.")}},email:{message:function(){return fp.ui.locale("shared-valid-email","{0} must be a valid email address.")},match:/^((([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))(\s*;\s*|\s*$))*$/},"postal-code":{message:function(){return fp.ui.locale("shared-valid-postal-code","{0} must be a valid postal code.")},match:/^\d{5}(?:[-\s]?\d{4})?$/},phone:{message:function(){return fp.ui.locale("shared-valid-phone-number","{0} must be a valid phone number.")},match:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/},numeric:{message:function(){return fp.ui.locale("shared-valid-number","{0} must be a valid number.")},match:/^-?\d*(\.\d+)?$/},integer:{message:function(){return fp.ui.locale("shared-valid-number","{0} must be a valid number.")},match:/^-?\d+$/},"integer-positive":{message:function(){return fp.ui.locale("shared-valid-number","{0} must be a valid number.")},match:/^\d+$/},"min-length":{message:function(){return fp.ui.locale("shared-valid-length","{0} must have at least {1} character(s).")}},"credit-card":{message:function(){return fp.ui.locale("shared-valid-credit-card","{0} must be a valid credit card.")}},"min-date":{message:function(){return fp.ui.locale("shared-valid-date","{0} must be greater than current date.")}},compare:{message:function(){return fp.ui.locale("shared-valid-comparison","{0} must be {1} {2}.")}},xss:{message:function(){return fp.ui.locale("shared-valid-value","{0} contains invalid characters.")},match:fpUtil.regExp.matchFormXssInvalidChars,negate:!0}}},fp.ui.ListManager=fp.ListManager.extend({construct:function(e){var r=this;this.events=[{name:fp.events.LIST_BEFORE_LOADED,value:function(e,t){if("list"==t.listManager.type&&t.listManager!=r){var n=fp.listManager.getList();if(n.id==t.listManager.getList().id){var i=_.findIndex(r.lists,{id:n.id});0<=i&&(r.lists[i]=n,r.selectedList.id==n.id&&(r.selectedList=n))}}}},{name:fp.events.LIST_CREATE,value:function(e,t){"list"==t.listManager.type&&(e.handled||(e.handled=!0,r.listCreate(e,t.name)))}},{name:fp.events.LIST_DELETE,value:function(e,t){"list"==t.listManager.type&&(e.handled||(e.handled=!0,r.listDelete(e,t.id)))}},{name:fp.events.LIST_ACTIVATE,value:function(e,t){"list"==t.listManager.type&&(e.handled||(e.handled=!0,r.listActivate(e,t.id)))}},{name:fp.events.LIST_RENAME,value:function(e,t){"list"==t.listManager.type&&t.listManager.getList().id==r.getList().id&&(e.handled||(e.handled=!0,r.listRename(e,t.id,t.name)))}},{name:fp.events.LIST_CHECK_TOGGLE,value:function(e,t){"list"==t.listManager.type&&t.listManager.getList().id==r.getList().id&&(e.handled||(e.handled=!0,r.listToggleChecked(e)))}},{name:fp.events.LIST_CHECKOUT,value:function(e,t){"list"==t.listManager.type&&(e.handled||(e.handled=!0,r.listCheckout(e,t)))}},{name:fp.events.LIST_ITEMS_CLEAR,value:function(e,t){"list"==t.listManager.type&&t.listManager.getList().id==r.getList().id&&(e.handled||(e.handled=!0,r.listItemsClear(e)))}},{name:fp.events.STORE_CHANGED,value:function(){fpConfig.disableInitializeShopping||!fp.loaded&&fp.__$shopIntentModal||(1!=r.options.limit?r.refreshLists():r.refreshList(!0))}}],this._super(e)},setSelectedList:function(e){this._super(e),fpUtil.isAuthenticated()&&"0"!=this.selectedList.id&&!fp.getSessionCookie().active_list_id&&fp.setSessionCookie({active_list_id:this.selectedList.id})},refreshList:function(r,e,t){var n=fp.getSessionCookie();t=$.extend(t,this.options);if((e=_.defaults(e,{sort:"updated_at!,created_at!",limit:1})).id&&e.id!=n.active_list_id)return this.listActivate(null,e.id);t&&(e.hang_for=t.hang_for,e.show_expected_rewards=t.show_expected_rewards),e.id||("0"==this.selectedList.id&&n.active_list_id?e.id=n.active_list_id:"0"!=this.selectedList.id&&(e.id=this.selectedList.id));var i,a=this,o=$.Deferred();return fpService.shoppingListService.get(this.applyPayloadOrderParams(e,!0),t).done(function(e){i=e}).always(function(){var e,t;i&&(_.has(i,"total")?e=i.items:_.has(i,"id")&&(e=[i]));var n=_.first(e);n&&n.last_updated_at&&a.selectedList.last_updated_at&&dateFns.parse(n.last_updated_at)<dateFns.parse(a.selectedList.last_updated_at)?o.resolve(a.selectedList):(a.setSelectedList(n),"0"==a.selectedList.id&&(r=!1),r&&(t=a.refreshListItems(!1,!0)),$.when(t).done(function(e){var t,n=a.selectedList,i=fp.ui.ListManager.getListQuantity(n);r&&(n.items=_.getArray(e)),n.enableCheckout=fpUtil.getBoolean(i&&fp.hasStoreFulfillment()),fp.ui.ListManager.getOneClickConfiguration(n,!1).done(function(e){t=e}).always(function(){_.size(t)?n.oneClickCheckout=t:delete n.oneClickCheckout,o.resolve(n),fp.trigger(fp.events.LIST_BEFORE_LOADED,{listManager:a,list:n}),r&&fp.trigger(fp.events.LIST_ITEMS_REFRESHED,{listManager:a,list:n}),fp.trigger(fp.events.LIST_LOADED,{listManager:a,list:n}),a==fp.listManager&&fp.trigger(fp.events.LIST_REFRESHED,{listManager:a,quantityTotal:i,listTotal:n.item_total_display,id:n.id})})}))}),o.promise()},applyPayloadOrderParams:function(e,t){var n=fp.ui.router.stateManager,i=fpConfig.routeStates;if(!n.contains(n.current,i.checkout))return e;var r=fp.session.preference;if(r.order_id)return(e=_.getObject(e)).order_id=e.for_order_id=r.order_id,r.order_store_id&&(e.store_id=r.order_store_id),t&&(e.check_order_minimum=fpUtil.getBoolean(e.check_order_minimum,!0)),this._super(e);var a=fpUtil.map.get("fulfillmentType").get(n.current.self.url).id||r.order_fulfillment_type_id;return a&&((e=_.getObject(e)).fulfillment_type_id=a,t&&(e.check_order_minimum=fpUtil.getBoolean(e.check_order_minimum,!0))),this._super(e)},refreshLists:function(n,i){var r=this;return fpService.shoppingListService.get(this.applyPayloadOrderParams({sort:"updated_at!,created_at!",limit:-1},!0)).then(function(e){var t;return r.lists=_.getArray(e.items),!n&&r.selectedList&&(t=r.selectedList),t||n&&(t=_.findWhere(r.lists,{id:n})),!t&&fpUtil.isAuthenticated()&&(t=r.lists[0]),r.setSelectedList(t),r.refreshList(!0,{},i)})},listCreate:function(e,t){if(t=$.trim(t)){var n=this;return fpService.shoppingListService.create({name:t}).then(function(e){return fp.setSessionCookie({active_list_id:e.id}),n.selectedList=$.extend({},fp.defaultList),n.getSelectedList(!0).done(function(){fp.trigger(fp.events.LIST_CREATED,{listManager:n,list:e}),fp.trigger(fp.events.LIST_ACTIVATED,{listManager:n})})})}},listDelete:function(e,t){if(!fpUtil.isNewItem(t)){var n=this;return fpService.shoppingListService.post({id:t},{childServiceCall:"delete"}).done(function(){_.removeWhere(n.lists,{id:t}),n.selectedList.id==fp.getSessionCookie().active_list_id&&fp.setSessionCookie({active_list_id:null}),n.selectedList.id==t?(n.selectedList=$.extend({},fp.defaultList),n.getSelectedList(!0).done(function(){fp.trigger(fp.events.LIST_DELETED,{listManager:n})})):fp.trigger(fp.events.LIST_DELETED,{listManager:n})})}},listRename:function(e,t,n){if((n=$.trim(n))&&!fpUtil.isNewItem(t)){var i=this;return fpService.shoppingListService.update({id:t,name:n}).done(function(e){fp.trigger(fp.events.LIST_RENAMED,{listManager:i,id:t,name:n})})}},listActivate:function(e,t,n){if(fpUtil.isNewItem(t)||this.selectedList.id==t)return $.when();fp.setSessionCookie({active_list_id:t}),this.selectedList=$.extend({},fp.defaultList);var i,r=this;return n||(i=fpService.shoppingListService.post(t,{childServiceCall:"touch"})),$.when(i).then(function(){return r.refreshList(!0).done(function(){fp.trigger(fp.events.LIST_ACTIVATED,{listManager:r})})})},listToggleChecked:function(n){var i=this,r=this.getList(),e=0==r.total_uncrossed_item_quantity,a=!e,t=e?"Uncheck All":"Check All";n.deferredModal||(n.deferredModal=$.Deferred(),fp.trigger(fp.events.CONFIRM_MODAL_SHOW,{title:t+" Confirmation",content:"Do you want to "+t.toLowerCase()+" of the items in your list?",confirmButtonLabel:"Yes",cancelButtonLabel:"No",callback:n.deferredModal.resolve})),n.deferredModal.done(function(e){if(!n.handled){if(n.handled=!0,e)for(var t=0;t<r.items.length;t++)r.items[t].is_crossed=a;fp.trigger(fp.events.LIST_CHECK_TOGGLED,{listManager:i,confirm:e}),e&&(fpUtil.isNewItem(r.id)||fpService.shoppingListService.update({id:r.id,is_crossed:a}).done(function(){i.refreshList()}).fail(function(){for(var e=0;e<r.items.length;e++)r.items[e].is_crossed=a}))}})},listItemsClear:function(e){if(!fpUtil.isNewItem(this.selectedList.id)){var n=this,i=this.selectedList;e.deferredModal||(e.deferredModal=$.Deferred(),fp.trigger(fp.events.CONFIRM_MODAL_SHOW,{title:fp.ui.locale("list-manager-clear-confirmation","Clear List Confirmation"),content:fp.ui.locale("list-manager-remove-all","Do you want to remove all of the items from your list?"),confirmButtonLabel:fp.ui.locale("shared-yes","Yes"),cancelButtonLabel:fp.ui.locale("shared-no","No"),callback:e.deferredModal.resolve})),e.deferredModal.done(function(e){if(e){var t=$.extend([],n.selectedList.items);n.selectedList.items.length=0,fpService.shoppingListService.post({id:i.id},{childServiceCall:"clear",formatForRestfulId:!0}).then(function(){return n.refreshList(!0)}).done(function(){fp.trigger(fp.events.LIST_ITEMS_CLEARED,{listManager:n,list:n.selectedList,clearedItems:t})})}})}},listCheckout:function(e,n){if(!fpUtil.isNewItem(this.selectedList.id)){n=_.getObject(n);var t,i=this,r=_.getObject(n.selectedList,this.getList()),a=0;if(!n.disableIsCrossedCheck){var o,s=fpUtil.map.get("productStatus").get("available").id;if(!s)return;_.each(r.items,function(e){e.is_crossed&&((o=fpUtil.getProduct(e)).id&&o.status_id!=s||a++)})}if(a){t=$.Deferred();var l=$.Deferred(),c=$.extend({},fpConfig.modules.list);fp.ui.showModal({name:"checkout-confirmation",className:"fp-checkout-confirmation-modal",size:"lg",title:"Checkout Confirmation",content:l.promise(),buttons:[{title:"Continue",action:"continue-checkout"}],cancelBtn:"Close"}).off("click.modal.checkoutConfirmation").on("click.modal.checkoutConfirmation",'[data-action="continue-checkout"]',function(e){e.preventDefault(),t.resolve(),fp.formLoader.show($(this))}),c.name="list",c.elementSelector=$("<div></div>").appendTo(fp.__$freshop),c.intent="modal",c.filter="is_crossed",fp.ui.loadModule(c).then(function(e){return e.init()}).always(function(){var e=$('<div><p>The following items are marked as checked off.</p><p>Please uncheck them if you wish to have them added to your cart at checkout. If you already have these items or do not wish to order them today just click "Continue".</p></div>');e.append(c.elementSelector),l.resolve(e)})}var u=fp.ui.router.stateManager,d=fpConfig.routeStates,f=$.when(t).then(function(){if(r.id!=fp.getSessionCookie().active_list_id)return i.listActivate(null,r.id)}).then(function(){return fp.session.preference.order_id?$.Deferred().resolve(fp.session):fp.clearOrderPreference()});return(f=n.isOneClick&&r.oneClickCheckout?fp.ui.ListManager.getOneClickConfiguration(r).then(function(e){var t=e;if(t){function n(){return fp.clearOrderPreference()}var i,r=fpService.tagService.get(t.payment.service_provider_id).done(function(e){paymentType=_.getObject(e)}),a=fpUtil.map.load(fpService.orderStatusService);return $.when(r,a).then(function(){return fpService.orderService.create(t.order)}).then(function(e){return i=e,fpService.preferenceService.update({order_step:2,order_store_id:i.store_id,order_fulfillment_type_id:i.fulfillment_type_id,saved_payment_method:paymentType.identifier,payment_type_id:t.payment.id},{one_click_checkout:!0},{session:!0})}).then(function(){return fpService.orderService.post({id:i.id,payment_method_id:t.payment.id,one_click_checkout:!0},{childServiceCall:fpUtil.formatString("checkout/{0}",paymentType.identifier)})}).then(function(){return fpService.orderService.update({id:i.id,shopping_list_id:i.shopping_list_id,status_id:fpUtil.map.get("orderStatus").get("user_placed").id,one_click_checkout:!0})}).then(function(){return fpService.preferenceService.update({order_id:i.id,order_step:3},{one_click_checkout:!0},{session:!0})}).then(n).done(function(){u.go(d.checkoutConfirmation,{id:i.id})}).catch(n).always(function(){fp.formLoader.hide()})}}):f.done(function(){if(n.isInit||!u.is(d.checkout))if(n.checkoutUrl)u.go(n.checkoutUrl,null,{absolute:!0});else{var e;if(n.fulfillment_type_id){var t=fpUtil.map.get("fulfillmentType").get(n.fulfillment_type_id);t.identifier&&(e=u.get(fpUtil.formatString("{0}-{1}",d.checkout.name,t.identifier)))}e=e||d.checkout,u.go(e,{slot_id:fpUtil.getNullIfEmpty(n.slot_id)})}else fp.trigger(fp.events.CHECKOUT_INIT)})).fail(function(){fp.formLoader.hide()})}},getItemWithVariety:function(t,n){if(t&&!fpUtil.isNewItem(t))return t=t.toString(),_.find(this.selectedList.items,function(e){return e.id==t&&_.isEqual(e.varieties,n)})}}),$.extend(fp.ui.ListManager,{getItemQuantity:function(e,t,n,i){if(!_.isObject(e))return 0;if(!i&&e.is_crossed&&fp.store.allow_shopping_list_crossing)return 0;t=fpUtil.getBoolean(t,!0),n=fpUtil.getBoolean(n,!1);var r=e.quantity||0;return n&&(r=e.quantity_indicator||r),r&&!t&&fp.store.id&&"available"!=fpUtil.map.get("productStatus").get(fpUtil.getProduct(e).status_id).identifier&&(r=0),r},getItemQuantityTotal:function(e){if(e=_.getObject(e),!_.isObject(e.item))return 0;var t=e.item,n=e.ignoreNotAvailable,i=e.forQuantityIndicator,r=e.ignoreCrossed,a=_.getObject(e.listManager,fp.listManager),o=fpUtil.getProduct(e.item);if(!_.size(o.varieties))return this.getItemQuantity(t,n,i,r);var s=0,l=fp.ui.ListManager.getItemQuantity;return _.each(a.getItem(o.id,{isProductId:!0,multiple:!0}),function(e){s+=l(e,n,i,r)}),s},getListQuantity:function(e){if(!_.isObject(e)){if(!fp.listManager)return 0;e=fp.listManager.getList()}return fpUtil.getInteger(e.total_checkout_item_quantity)},getIncrement:function(e){return fpUtil.getProduct(e).quantity_step||fpConfig.productIncrement},getQuantityInitial:function(e){var t=fpUtil.getProduct(e);return null!=t.quantity_initial?t.quantity_initial:fpConfig.productIncrement},getItemVariety:function(e,n){if(!(e&&e.product&&e.product.varieties))return"";var i=e.product.varieties;_.isObject(n)||(n={asList:n});var r,a,o,s,l,c="";return _.each(e.product_varieties||e.varieties,function(e,t){(r=_.findWhere(i,{identifier:t}))&&(a=_.findWhere(r.options,{value:e}))&&(n.disablePrice||(s=fp.numeralInstance.set(a.price).value())&&(l=!0),n.asList?c+=fpUtil.formatString('                         <li>                             <span class="fp-product-variety-label">{0}: {1}</span>                             '+fpUtil.getStateValue(s,'<span class="fp-product-variety-price">{2}</span>',"")+"                         </li>                     ",r.label,a.label,a.price_offset||a.price):(o=a.label,s&&(o+=" ("+(a.price_offset||a.price)+")"),c&&(c+=", "),n.prefix&&(o=n.prefix+o),n.suffix&&(o+=n.suffix),c+=r.label+": "+o))}),n.asList?fpUtil.formatString('<ul class="fp-product-variety-sub-list {0}">{1}</ul>',fpUtil.getStateValue(l,"fp-has-product-variety-price",""),c):c},getItemVarieties:function(e){var n=[];if(!_.isObject(e))return n;if(!_.isObject(e.product))return n;var i,r,a=e.product.varieties;return _.size(a)&&_.each(e.varieties,function(e,t){(i=_.findWhere(a,{identifier:t}))&&(r=_.findWhere(i.options,{value:e}))&&n.push({varietyLabel:i.label,varietyIdentifier:i.identifier,optionLabel:r.label,optionValue:e})}),n},getOneClickConfiguration:function(e,t){var n;if(!fpConfig.disableOneClick&&fpUtil.isAuthenticated()){var i=fp.user.preferred_fulfillment_type_id&&_.findWhere(fp.store.fulfillment_types,{id:fp.user.preferred_fulfillment_type_id});if(i&&fp.store["allow_order_change_by_customer_"+i.identifier]){var r,a,o,s,l,c,u={},d=_.contains(["delivery","drop_ship"],i.identifier),f=_.uniqueId(),p=fpService.userMeService.get({limit:1,store_id:fp.store.id,update_at_sort:"desc"},{childServiceCall:"payment_methods",handleErrors:t,multiplexId:f}).then(function(e){a=_.first(e.items)}),h=fpService.orderService.get({limit:1,intent:"past_orders",fulfillment_type_id:i.id,sort:"created_at!"},{handleErrors:t,multiplexId:f}).then(function(e){u=_.firstObject(e.items)});d&&(s=fpService.userAddressService.get({is_default_for_delivery:!0},{handleErrors:t,multiplexId:f}).then(function(e){l=_.firstObject(e.items)})),n=$.when(h,s,p).then(function(){l=_.getObject(l||fp.user.address);var n={for_shopping_list_id:e.id,store_id:fp.store.id,fulfillment_type_id:i.id,is_available:!0,fields:"id,sequence,fulfillment_type_id,location_id,location,date,time,slot_start,slot_end,booking_close_minutes_prior,additional_fee",sort:"date",limit:1};return c={store_id:fp.store.id,fulfillment_type_id:i.id,shopping_list_id:e.id,fulfillment_name:fp.user.display_name,fulfillment_email:fp.user.email,fulfillment_phone:l.phone||u.fulfillment_phone,bagging_type_id:u.bagging_type_id,one_click_checkout:!0},d&&(_.each(["address_1","address_2","city","state","postal_code","country"],function(e){var t="fulfillment_"+e;c[t]=n[t]=l[e]||u[t]}),delete n.fulfillment_address_2,fpConfig.enablePhoneCountryCode&&l.phone_country&&(c.fulfillment_phone_country=l.phone_country),!c.fulfillment_country&&i.config&&i.config.no_international_deliveries&&(c.fulfillment_country="United States")),fpService.storeSlotService.get(n,{handleErrors:t})}).then(function(e){if(o=_.first(e.items),_.size(o)){c.fulfillment_slot_id=o.id;var t=fp.ui.getFulfillmentSlotDateTimeLabel(o);return r=dateFns.isToday(t.date)?fpUtil.formatString("Today {0} {1}",fpUtil.getStateValue(S(i.name).eq("pick up",!0),"at","between"),t.timeLabel):t.label,_.size(a)&&_.size(c)?{payment:a,slotLabel:r,order:c}:void 0}}),fpService.multiplexService.run(f)}}return $.when(n)},setListDefaults:function(e){if(_.isObject(e)){var t=fp.config.defaultCurrencyFormat?fp.config.defaultCurrencyFormat:fp.numeralInstance.set(0).format(fp.config.currencyFormat);e.item_total=e.item_total||t,e.item_total_display=e.item_total,e.order_total=e.order_total||t,e.total_crossed_item_quantity=e.total_crossed_item_quantity||0,e.items=_.getArray(e.items)}}}),fp.ui.OrderManager=fp.ListManager.extend({construct:function(){this._super({type:"order",listItemSort:"shopper_walkpath",listIdField:"order_id",listService:fpService.orderService,listItemService:fpService.orderItemService})}}),$.extend(fp.ui.OrderManager,{isEditable:function(e,t){if(!_.isObject(e))return!1;if(this.isClosed(e))return!1;if(!e.status_id)return!0;var n=fpUtil.map,i="admin"==fpConfig.intent&&fpUtil.hasRole(fpConstants.adminRole.PERSONAL_SHOPPER),r=n.get("orderPaymentStatus").get(e.payment_status_id);if(i&&r.identifier&&"captured"!=r.identifier)return!0;switch(n.get("orderStatus").get(e.status_id).identifier){case"open":return!0;case"user_placed":if(i)return!0;if(!_.isObject(t))return!1;var a=n.get("fulfillmentType").get(e.fulfillment_type_id);return fpUtil.getBoolean(t["allow_order_change_by_customer_"+a.identifier])}return!1},isPaymentNeeded:function(e){return!(!_.isObject(e)||this.isClosed(e))&&(!e.payment_status_id||_.contains(["initiated","uncharged","insufficient","failed"],fpUtil.map.get("orderPaymentStatus").get(e.payment_status_id).identifier))},isPaymentNeededOrder:function(e){if(!_.isObject(e)||this.isClosed(e))return!1;var t=_.firstObject(e.payments).status_identifier;return!!t&&_.contains(["initiated","uncharged","insufficient","failed"],t)},isPaymentAuthorized:function(e){return!!_.isObject(e)&&_.contains(["success","authorized","captured"],fpUtil.map.get("orderPaymentStatus").get(e.payment_status_id).identifier)},isClosed:function(e){return!_.isObject(e)||_.contains(["closed","cancelled","user_cancelled"],fpUtil.map.get("orderStatus").get(e.status_id).identifier)},isTransactionCancelable:function(e){return!!_.isObject(e)&&_.contains(["initiated","authorized","captured","failed"],fpUtil.map.get("paymentStatus").get(e.status_id).identifier)},isTransactionCapturable:function(e){return!!_.isObject(e)&&(!!e.is_capturable&&_.contains(["authorized","failed"],fpUtil.map.get("paymentStatus").get(e.status_id).identifier))},getFulfillmentSlots:function(t,n,i){var e,a,r=$.Deferred(),o="id,fulfillment_type_id,location_id,date,time,slot_start,slot_end,booking_close_minutes_prior,additional_fee";return n=fpUtil.getUndefinedIfEmpty(n||t.fulfillment_type_id),t.order_slot_id&&S(t.fulfillment_type_id).eq(n)&&(e=fpService.orderSlotService.get({id:t.order_slot_id,order_id:t.id,store_id:t.store_id,fulfillment_type_id:n,fields:o},{formatForRestfulId:!0}).done(function(e){(a=e).id=t.fulfillment_slot_id})),$.when(e,fpUtil.map.load("fulfillment_types")).always(function(){var e=fp.listManager.getList().id;i=$.extend(_.pick(t,"fulfillment_address_1","fulfillment_city","fulfillment_state","fulfillment_postal_code","fulfillment_country"),{for_order_id:t.id,for_shopping_list_id:e&&"0"!=e?e:void 0,store_id:t.store_id,fulfillment_type_id:n,fields:o,sort:"date",is_available:!0},i),fpUtil.isNull(i.is_available)&&delete i.is_available,fpService.storeSlotService.get(i).then(function(e){var n=[],t={},i=_.getArray(e.items),r={dateFormat:fpConfig.fulfillmentShortDateFormat,timeFormat:fpConfig.fulfillmentShortTimeFormat};return _.isObject(a)&&!_.findWhere(i,{date:a.date,time:a.time})&&i.push(a),_.each(i,function(e){e.dateTimeLabel=fp.ui.getFulfillmentSlotDateTimeLabel(e,r),(t[e.date]||(t[e.date]=[])).push(e)}),_.each(t,function(e,t){n.push({id:t,name:e[0].dateTimeLabel.dateLabel,items:fpUtil.sort(e,"time")})}),{slots:fpUtil.sort(n,"date"),hashedSlots:t,reasons:e.reasons}}).always(r.resolve)}),r.promise()},getSlotSelectionMode:function(e){var t,n,i,r=fpUtil.getObjectFromNamespace("config.slot_selection",e);return _.each(r.options,function(e){"asap"==e.identifier?n=!0:"required"==e.identifier&&(i=!0)}),n&&i?t="optional":n?t="do_not_allow":i&&(t="required"),t||r.mode}}),function(){$.cookie.json=!0,$.fn.idle.Constructor.DEFAULTS.events="mousemove.idle keydown.idle mousedown.idle touchstart.idle";var r=$.fn.focus;$.fn.focus=function(e){if(!e&&fp.device.hasTouch&&!fp.device.usingMouse)return this;var t=this.filter("input,textarea").first(),n=t[0];if(n&&n==document.activeElement)return this;var i=r.call(this);try{n.selectionStart=n.selectionEnd=S.getString(t.val()).length}catch(e){}return i};var n=$.fn.detach;$.fn.detach=function(e,t){return t&&this.each(function(){var e=this.parentNode;if(e){var t=$('<span style="display:none !important;"></span>');e.replaceChild(t[0],this),$(this).data("attach",t)}}),n.call(this,e)},$.fn.attach=function(){return this.each(function(){var e=$(this).data("attach");e&&e.replaceWith(this)})},$.fn.outerHTML=function(){var e=this[0];if(e&&e.outerHTML)return e.outerHTML;var t=$("<p>").append(this.eq(0).clone()),n=t.html();return t.remove(),n},$.fn.center=function(){var t=$(window);return this.each(function(){var e=$(this);e.css({position:"absolute",top:(t.height()-e.height())/2+t.scrollTop()+"px",left:(t.width()-e.width())/2+t.scrollLeft()+"px"})})},$.fn.getBoundingClientRect=function(){var e=this[0],t=e&&e.ownerDocument,n={left:0,right:0,top:0,bottom:0,width:0,height:0};return t&&$.contains(t.documentElement,e)&&_.isFunction(e.getBoundingClientRect)&&$.extend(n,e.getBoundingClientRect()),n},$.fn.reflow=$.fn.redraw=function(){return this.each(function(){this.offsetHeight})},$.fn.repaint=function(){return this.each(function(){$(this).css("visibility","hidden").css("visibility","")})},$.fn.scrollTo=function(r,a){return a=_.isObject(a)?a:{axis:a},this.each(function(){var e=$(this),t=_.isString(r)?e.find(r):r;if(t.length)if("x"==a.axis){var n=t.offset().left-.5*t.outerWidth()+e.scrollLeft();a.speed?e.animate({scrollLeft:n},a.speed):e.scrollLeft(n)}else{var i=t.offset().top-.5*t.outerHeight()+e.scrollTop();a.speed?e.animate({scrollTop:i},a.speed):e.scrollTop(i)}})};var i=$.fn.modal;$.fn.modal=function(n,e){if(!this.data("bs.modal")&&(fpUtil.isNull(n)||_.isObject(n))){n=$.extend({container:fp.__$freshop.find('[data-role="modal-container"]'),persist:!0},n);var t=this;this.off("show.bs.modal.core shown.bs.modal.core hidden.bs.modal.core click.closeModal.core").on("show.bs.modal.core",function(){var e=$(document.body),t=$.scrollbarWidth();t&&e.css("padding-right",t+"px"),e.addClass("fp-modal-open"),fpUi.pauseLoading()}).on("shown.bs.modal.core",function(){var e=$(this).data("bs.modal");e&&!e.isShown||e.focus()}).on("hidden.bs.modal.core",function(){var e=$(this);e.find(".fp-notification").hide(),n.persist||e.remove();var t=$(document.body);n.container.find('.modal[aria-hidden="false"]').length||(t.removeClass("fp-modal-open"),$(document).off("focusin.bs.modal"),t.css("padding-right","")),fpUi.unpauseLoading()}).on("click.closeModal.core",'[data-action="close"], [data-action="cancel"]',function(e){e.preventDefault(),fpUi.hideModal(t)})}return i.call(this,n,e)},$.extend(i.Constructor.prototype,{enforceFocus:function(){var t=this;$(document).off("focusin.bs.modal").on("focusin.bs.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.focus(e)})},focus:function(e){var t=this.$element;$(t.find(".modal-body input[fp-autofocus]:visible, .modal-body textarea[fp-autofocus]:visible")[0]||t.find("input[fp-autofocus]:visible, textarea[fp-autofocus]:visible")[0]||t.find("input:visible, textarea:visible")[0]).trigger("focus")}});var a=i.Constructor.prototype.backdrop;i.Constructor.prototype.backdrop=function(e){var t=this;e=_.wrap(e,function(e){return t.$element.insertAfter(t.$backdrop),e()}),a.call(this,e)};var t=$.fn.tooltip,o=t.Constructor,f=o.prototype.getCalculatedOffset,e=o.prototype.show,s=o.prototype.hide;o.prototype.replaceArrow=function(e,t,n){if(e){var i=50*(1-e/t);"top"==n&&(i<6.32?i=6.32:93.57<i&&(i=93.57))}this.arrow().css(n,e?i+"%":"")},o.prototype.getCalculatedOffset=function(e,t,n,i){var r=f.call(this,e,t,n,i),a=this.getPosition(this.$viewport),o=this.tip();if("left"==e||"right"==e){var s=2*Math.abs(fpUtil.getInteger(o.css("margin-left")));if("left"==e)r.left<s&&(r.left=s);else if("right"==e){var l=a.width-n-s;r.left>l&&(r.left=l)}}else if("top"==e||"bottom"==e){var c=2*Math.abs(fpUtil.getInteger(o.css("margin-top")));if("top"==e){var u=a.scroll+c;r.top<u&&(r.top=u)}else if("bottom"==e){var d=a.height+a.scroll-i-c;r.top>d&&(r.top=d)}}return r},o.prototype.show=function(){e.call(this),o.__isShown=this.tip().hasClass("in")?this:void 0},o.prototype.hide=function(){var e=s.call(this);return o.__isShown==this&&(o.__isShown=this.tip().hasClass("in")?this:void 0),e},$.fn.tooltip=function(e){return this.data("bs.tooltip")||!fpUtil.isNull(e)&&!_.isObject(e)||(e=$.extend({container:fp.__$freshop},e)),this.length&&!o.__handleBodyClick&&e&&"click"==e.trigger&&(o.__handleBodyClick=!0,$.when($.ready).done(function(){$(document.body).on("click",function(e){if(o.__isShown&&(!o.__lastClickEvent||o.__lastClickEvent.timeStamp!=e.timeStamp)){var t,n=$(e.target),i=S(n.attr("aria-describedby")).startsWith("tooltip"),r=!i&&n.closest('[role="tooltip"]');!i&&r.length&&(t=r.data("bs.tooltip"))&&(n=t.$element,i=!0),fp.__$freshop.find('[role="tooltip"]').each(function(){(t=$(this).data("bs.tooltip"))&&(!i||i&&!t.$element.is(n))&&t.hide()})}o.__lastClickEvent=e})})),t.call(this,e)};var l=$.fn.popover,c=l.Constructor;c.prototype.replaceArrow=o.prototype.replaceArrow,c.prototype.getCalculatedOffset=o.prototype.getCalculatedOffset,$.fn.popover=function(e){if(this.data("bs.popover")||!fpUtil.isNull(e)&&!_.isObject(e))return l.call(this,e);this.off("show.bs.popover hide.bs.popover").on("show.bs.popover hide.bs.popover",function(e){var t=n.data("bs.popover");t&&(t.isShown="show"==e.type)});var n=l.call(this,e);return n.data("bs.popover").tip().off("click.dismiss.bs.popover",'[data-dismiss="popover"]').on("click.dismiss.bs.popover",'[data-dismiss="popover"]',function(){var e=n.data("bs.popover");e&&e.hide()}),n},$.fn.affix.Constructor.prototype.destroy=function(){this.$target.off("scroll.bs.affix.data-api click.bs.affix.data-api"),this.$element.removeData("bs.affix").css("top","").removeClass($.fn.affix.Constructor.RESET)},$.fn.classes=function(){var e,t=[];return this.each(function(){(e=S.getString(this.className).split(/\s+/)).length&&(t=t.concat(e))}),t},$.fn.replaceClass=function(e,t,n){if(!e)return this;t=S.getString(t)+" ",n=fpUtil.getBoolean(n,!0);var i,r,a=_.isRegExp(e);return this.each(function(){i=$(this),r=i.prop("className"),(n||r)&&(a&&(e.lastIndex=0),r&&null!=r.match(e)?(a&&(e.lastIndex=0),r=S(r).trim().replace(e,t).s,i.prop("className",r)):n&&i.addClass(t))})},$.fn.prependClass=function(e){var t,n;return this.each(function(){t=$(this),n=t.prop("className"),t.removeClass(n).addClass(e+" "+n)})},$.fn.toggleAttr=function(t,n,e){return n=S.getString(n),"boolean"==typeof e?e?this.attr(t,n):this.removeAttr(t):this.each(function(){var e=$(this);e.attr(t)?e.removeAttr(t):e.attr(t,n)})},$.fn.isBefore=function(e){var t=$(e);return!(!this.length||!t.length)&&!!(4&this[0].compareDocumentPosition(t[0]))},$.fn.isAfter=function(e){var t=$(e);return!(!this.length||!t.length)&&!!(2&this[0].compareDocumentPosition(t[0]))},$.fn.attrs=function(t,n,i){var r,a={},e=this.first()[0];return e&&(fpUtil.isNull(n)?n=t:_.isString(n)||(n=n?t:n),_.each(e.attributes,function(e){if(r=S(e.name),t){if(!r.startsWith(t))return;n&&(r=r.trimLeft(n))}i&&(r=r.underscore()),a[r.s]=e.value})),a};var u=$.param;$.param=function(t,e){if(e=null!=e?e:void 0,_.isObject(t)&&window.FormData&&t.constructor===FormData.prototype.constructor&&_.isFunction(t.entries)){var n=t.entries(),i=n.next();for(t={};i&&(fpUtil.isDefined(i.value)&&(i.value[1]instanceof File?t[i.value[0]]=_.uniqueId("file_")+i.value[1].name:t[i.value[0]]=S.getString(i.value[1])),!i.done);)i=n.next()}if(_.size(t)){var r=[];_.each(fpUtil.sort(_.keys(t)),function(e){fpUtil.isDefined(t[e])&&r.push({name:e,value:t[e]})}),t=r}return u(t,e)};var d=$.Deferred;function p(e,t,n){var i;try{e&&jQuery.isFunction(i=e.promise)?i.call(e).done(t).fail(n):e&&jQuery.isFunction(i=e.then)?i.call(e,t,n):t.call(void 0,e)}catch(e){n.call(void 0,e)}}$.Deferred=function(e){function n(){return i}var i=d.apply($,arguments),r=i.promise;return i.promise=function(e){var t=r.apply(i,arguments);return t.deferred=n,t},i},$.Deferred.exceptionHook=function(e,t){e instanceof Error&&fp.notifier.notify(e)},$.when=function(e){if(!arguments.length)return $.Deferred().resolve().promise();if(1==arguments.length&&fpUtil.isPromise(e))return e.promise();function t(t){return function(e){a[t]=this,o[t]=1<arguments.length?_.toArray(arguments):e,--i||s.resolveWith(a,o)}}function n(t){return function(e){a[t]=this,o[t]=1<arguments.length?_.toArray(arguments):e,e instanceof Error&&$.Deferred.exceptionHook(e),--i||s.resolveWith(a,o)}}var i=arguments.length,r=i,a=Array(r),o=_.toArray(arguments),s=jQuery.Deferred();if(i<=1&&(p(e,s.done(t(r)).resolve,s.fail(n(r)).reject),"pending"===s.state()||jQuery.isFunction(o[r]&&o[r].then)))return s.then();for(;r--;)p(o[r],t(r),n(r));return s.promise()},$.viewport=function(){var e=document.documentElement,t=e.scrollTop||document.body.scrollTop,n=e.scrollLeft||document.body.scrollLeft;return{left:n,right:e.clientWidth+n,top:t,bottom:e.clientHeight+t,width:e.clientWidth,height:e.clientHeight}},$.scrollbarWidth=function(){var e=$("<div></div>").css({height:"100px",overflow:"scroll",position:"absolute",top:"-9999px"}).appendTo(document.body),t=e[0],n=t.offsetWidth-t.clientWidth;return e.remove(),n};var h=fpUi.generateFreshopPlugin;h("category",ui.Category,"fp.ui.Category"),h("dropdown",ui.Dropdown,"fp.ui.Dropdown"),h("pager",ui.Pager,"fp.ui.Pager"),h("resultHeader",ui.ResultHeader,"fp.ui.ResultHeader"),h("paymentEdit",ui.PaymentEdit,"fp.ui.PaymentEdit")}(),function(c){var w;function u(o,s,e){s=$.extend({params:{}},_.isObject(s)?s:{});var t,n,i,r,a=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,c="^",u=0,d=this.segments=[],f=e?e.params:{},p=this.params=e?e.params.$$new():new w.ParamSet,h=[];function m(e,t,n,i){if(h.push(e),f[e])return f[e];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(e))throw new Error("Invalid parameter name '"+e+"' in pattern '"+o+"'");if(p[e])throw new Error("Duplicate parameter name '"+e+"' in pattern '"+o+"'");return p[e]=new w.Param(e,t,n,i),p[e]}function g(e,t,n,i){var r=["",""],a=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return a;switch(n){case!1:r=["(",")"+(i?"?":"")];break;case!0:r=["?(",")?"];break;default:r=["("+n+"|",")?"]}return a+r[0]+t+r[1]}function v(e,t){var n,i,r,a;return n=e[2]||e[3],a=s.params[n],r=o.substring(u,e.index),{id:n,regexp:i=t?e[4]:e[4]||("*"==e[1]?".*":null),segment:r,type:w.type(i||"string")||C(w.type("string"),{pattern:new RegExp(i,s.caseInsensitive?"i":void 0)}),cfg:a}}for(this.source=o;(t=a.exec(o))&&!(0<=(n=v(t,!1)).segment.indexOf("?"));)i=m(n.id,n.type,n.cfg,"path"),c+=g(n.segment,i.type.pattern.source,i.squash,i.isOptional),d.push(n.segment),u=a.lastIndex;var y=(r=o.substring(u)).indexOf("?");if(0<=y){var b=this.sourceSearch=r.substring(y);if(r=r.substring(0,y),this.sourcePath=o.substring(0,u+y),0<b.length)for(u=0;t=l.exec(b);)i=m((n=v(t,!0)).id,n.type,n.cfg,"search"),u=a.lastIndex}else this.sourcePath=o,this.sourceSearch="";c+=g(r)+(!1===s.strict?"/?":"")+"$",d.push(r),c=c.replace(")??(",")?("),this.regexp=new RegExp(c,s.caseInsensitive?"i":void 0),this.prefix=d[0],this.$$paramNames=h}function h(e){$.extend(this,e)}function C(e,t){return $.extend(Object.create(e),t)}function m(e){return void 0!==e}u.prototype.concat=function(e,t){var n={caseInsensitive:w.caseInsensitive(),strict:w.strictMode(),squash:w.defaultSquashPolicy()},i="";if((!t||!t.disableConcat)&&(i=this.sourcePath)&&S(e).startsWith("../")){e=e.replace("../","/");var r=(i=i.substr(0,i.lastIndexOf("/"))).indexOf("?");0<=r&&(i=i.substr(0,r))}return new u(i+=e,$.extend(n,t),this)},u.prototype.toString=function(){return this.source},u.prototype.exec=function(e,t){var n=this.regexp.exec(e);if(!n)return null;t=t||{};var i,r,a,o=this.parameters(),s=o.length,l=this.segments.length-1,c={};if(l!=n.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");function u(e){function t(e){return e.split("").reverse().join("")}var n=t(e).split(/-(?!\\)/),i=_.map(n,t);return _.map(i,function(e){return e.replace(/\\-/g,"-")}).reverse()}for(i=0;i<l;i++){a=o[i];var d=this.params[a],f=n[i+1];for(r=0;r<d.replace;r++)d.replace[r].from===f&&(f=d.replace[r].to);f&&!0===d.array&&(f=u(f)),c[a]=d.value(f)}for(;i<s;i++)c[a=o[i]]=this.params[a].value(t[a]);return c},u.prototype.parameters=function(e){return m(e)?this.params[e]||null:this.$$paramNames},u.prototype.validates=function(e){return this.params.$$validates(e)},u.prototype.format=function(e,t){e=e||{};var n=this.segments,i=this.parameters(),r=this.params;if(!this.validates(e))return null;var a,o,s=!1,l=n.length-1,c=i.length,u=n[0];function d(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}for(a=0;a<c;a++){var f=a<l,p=i[a],h=r[p],m=h.value(e[p]),g=h.isOptional&&(!1===h.config.emit||h.type.equals(h.value(),m)),v=!!g&&h.squash,y=h.type.encode(m);if(f){var b=n[a+1];if(!1===v)null!=y&&(_.isArray(y)?u+=_.map(y,d).join("-"):h.type.raw?u+=y:u+=encodeURIComponent(y)),u+=b;else if(!0===v){var S=u.match(/\/$/)?/\/?(.*)/:/(.*)/;u+=b.match(S)[1]}else _.isString(v)&&(u+=v+b)}else{if(null==y||g&&!1!==v)continue;_.isArray(y)||(y=[y]),u+=(s?"&":"?")+p+"="+(y=_.map(y,encodeURIComponent).join("&"+p+"=")),s=!0}}if(t)for(var w in e)w in r||(o=e[w],fpUtil.isNull(o)||(u+=(s?"&":"?")+w+"="+encodeURIComponent(o),s=!0));return u},h.prototype.is=function(e,t){return!0},h.prototype.encode=function(e,t){return e},h.prototype.decode=function(e,t){return e},h.prototype.equals=function(e,t){return e==t},h.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},h.prototype.pattern=/.*/,h.prototype.toString=function(){return"{Type:"+this.name+"}"},h.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},h.prototype.$asArray=function(e,t){if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new function(e,r){function t(e,t){return function(){return e[t].apply(e,arguments)}}function a(e){return _.isArray(e)?e:m(e)?[e]:[]}function o(e){return!e}function n(n,i){return function(e){e=a(e);var t=_.map(e,n);return!0===i?0===_.filter(t,o).length:function(e){switch(e.length){case 0:return;case 1:return"auto"===r?e[0]:e;default:return e}}(t)}}var s;this.encode=n(t(e,"encode")),this.decode=n(t(e,"decode")),this.is=n(t(e,"is"),!0),this.equals=(s=t(e,"equals"),function(e,t){var n=a(e),i=a(t);if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++)if(!s(n[r],i[r]))return!1;return!0}),this.pattern=e.pattern,this.$normalize=n(t(e,"$normalize")),this.name=e.name,this.$arrayMode=r}(this,e)};var e=c.getNamespace("ui.router",fp);e.urlMatcherFactory=new function e(){w=this;var n=!1,i=!0,d=!1;function t(e){return null!=e?e.toString().replace(/\//g,"%2F"):e}var f={},r=!0,a=[],o={string:{encode:t,decode:function(e){return null!=e?e.toString().replace(/%2F/g,"/"):e},is:function(e){return null==e||!m(e)||"string"==typeof e},pattern:/[^/]*/},int:{encode:t,decode:function(e){return parseInt(e,10)},is:function(e){return m(e)&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return!0===e||!1===e},pattern:/0|1/},date:{encode:function(e){if(this.is(e))return[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-")},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):void 0},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:JSON.stringify,decode:JSON.parse,is:_.isObject,equals:c.equals,pattern:/[^/]*/},any:{encode:$.noop,decode:$.noop,equals:c.equals,pattern:/.*/},path:{raw:!0,pattern:/.*/}};function p(e){return _.isFunction(e)||_.isArray(e)&&_.isFunction(e[e.length-1])}function s(){for(;a.length;){var e=a.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");$.extend(f[e.name],e.def())}}function l(e){$.extend(this,e||{})}e.$$getDefaultValue=function(e){return p(e.value)?_.isFunction(e.value)?e.value():void 0:e.value},this.caseInsensitive=function(e){return m(e)&&(n=e),n},this.strictMode=function(e){return m(e)&&(i=e),i},this.defaultSquashPolicy=function(e){if(!m(e))return d;if(!0!==e&&!1!==e&&!_.isString(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return d=e},this.compile=function(e,t){return new u(e,$.extend({strict:i,caseInsensitive:n},t))},this.isMatcher=function(n){if(!_.isObject(n))return!1;var i=!0;return _.forEach(u.prototype,function(e,t){_.isFunction(e)&&(i=i&&m(n[t])&&_.isFunction(n[t]))}),i},this.type=function(e,t,n){if(!m(t))return f[e];if(f.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return f[e]=new h($.extend({name:e},t)),n&&(a.push({name:e,def:n}),r||s()),this},_.forEach(o,function(e,t){f[t]=new h($.extend({name:t},e))}),f=C(f,{}),this.$get=["$injector",function(e){return r=!1,s(),_.forEach(o,function(e,t){f[t]||(f[t]=new h(e))}),this}],this.Param=function(i,e,r,t){var a=this;r=function(e){var t=_.isObject(e)?_.keys(e):[];return-1===_.indexOf(t,"value")&&-1===_.indexOf(t,"type")&&-1===_.indexOf(t,"squash")&&-1===_.indexOf(t,"array")&&(e={value:e}),e.$$fn=p(e.value)?e.value:function(){return e.value},e}(r),e=function(e,t,n){if(e.type&&t)throw new Error("Param '"+i+"' has two type configurations.");return t||(e.type?e.type instanceof h?e.type:new h(e.type):"config"===n?f.any:f.string)}(r,e,t);var n,o,s=(n={array:"search"===t&&"auto"},o=i.match(/\[\]$/)?{array:!0}:{},$.extend(n,o,r).array);"string"!==(e=s?e.$asArray(s,"search"===t):e).name||s||"path"!==t||void 0!==r.value||(r.value="");var l=void 0!==r.value,c=function(e,t){var n=e.squash;if(!t||!1===n)return!1;if(!m(n)||null==n)return d;if(!0===n||_.isString(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}(r,l),u=function(e,t,n,i){var r,a,o=[{from:"",to:n||t?void 0:""},{from:null,to:n||t?void 0:""}];return r=_.isArray(e.replace)?e.replace:[],_.isString(i)&&r.push({from:i,to:void 0}),a=_.map(r,function(e){return e.from}),_.filter(o,function(e){return-1===_.indexOf(a,e.from)}).concat(r)}(r,s,l,c);$.extend(this,{id:i,type:e,location:t,array:s,squash:c,replace:u,isOptional:l,value:function(e){var t,n;return t=e,m(e=(n=_.map(_.filter(a.replace,function(t){return function(e){return e.from===t}}(t)),function(e){return e.to})).length?n[0]:t)?a.type.$normalize(e):function(){var e=r.$$fn();if(null!=e&&!a.type.is(e))throw new Error("Default value ("+e+") for parameter '"+a.id+"' is not an instance of Type ("+a.type.name+")");return e}()},dynamic:void 0,config:r,toString:function(){return"{Param:"+i+" "+e+" squash: '"+c+"' optional: "+l+"}"}})},l.prototype={$$new:function(){return C(this,$.extend(new l,{$$parent:this}))},$$keys:function(){for(var t=[],e=[],n=this,i=_.keys(l.prototype);n;)e.push(n),n=n.$$parent;return e.reverse(),_.forEach(e,function(e){_.forEach(_.keys(e),function(e){-1===_.indexOf(t,e)&&-1===_.indexOf(i,e)&&t.push(e)})}),t},$$values:function(t){var n={},i=this;return _.forEach(i.$$keys(),function(e){n[e]=i[e].value(t&&t[e])}),n},$$equals:function(i,r){var a=!0,o=this;return _.forEach(o.$$keys(),function(e){var t=i&&i[e],n=r&&r[e];o[e].type.equals(t,n)||(a=!1)}),a},$$validates:function(e){var t,n,i,r,a,o=this.$$keys();for(t=0;t<o.length&&(n=this[o[t]],null!=(i=e[o[t]])||!n.isOptional);t++){if(r=n.type.$normalize(i),!n.type.is(r))return!1;if(a=n.config.raw?r:n.type.encode(r),_.isString(a)&&!n.type.pattern.exec(a))return!1}return!0},$$parent:void 0},this.ParamSet=l},e.UrlMatcher=u}(fp.util),nZc=fpUtil.getNamespace("ui.router",fp),oZc=window.location,CZc={},_.each(oZc,function(e,t){_.isFunction(e)?CZc[t]=$.proxy(e,oZc):CZc[t]=e}),$.extend(CZc,{origin:function(){return oZc.origin||oZc.protocol+"//"+oZc.host},hash:function(){return oZc.hash},href:function(){return oZc.href},pathname:function(e){return e?S(this.href()).trimLeft(this.origin(),!0).s:S(oZc.pathname).clean("//","/").s},port:function(){return oZc.port},protocol:function(){return oZc.protocol},search:function(){return oZc.search},toString:function(){return this.href()},isCurrentPage:function(e,t){if(!(e=S(e).trim()).length)return!0;var n=this.origin();if(e.startsWith("/")&&(e=e.prepend(n)),!e.startsWith("http",!0))return!0;if(!e.startsWith(n,!0))return!1;var i=S(this.href().substr(n.length).split("#")[0]);return e=S(e.substr(n.length).split("#")[0]),t||(i=S(i.split("?")[0]),e=S(e.split("?")[0])),i.trim("/").eq(e.trim("/"),!0)},isCurrentHost:function(e){var t=_.first(S(e).trim().ensureRight("/").match(fpUtil.regExp.matchHost));return!t||S(t).contains(oZc.hostname)}}),pZc=CZc,qZc={urlParams:fpUtil.urlParams(),searchParams:fpUtil.urlParams({includeRouteSearch:!1}),hasXhrPageLoad:null!=window.XhrMagic,ensureRoute:function(e,t){var n,i;if(e)t=_.getObject(t,{});else{n=oZc.href;var r=rZc.getStateFromUrl(n,!1,!0);e=r.state,t=_.getObject(t,r.params)}if(rZc.is(fpConfig.routeStates.logout,e))fp.trigger(fp.events.ACCOUNT_LOGOUT),i=rZc.root;else{var a=_.getObject(e.data);fpUtil.isAuthenticated()?!a.authenticate&&a.isAuthenticatedRedirect&&(i=rZc.get(a.isAuthenticatedRedirect))&&rZc.go(i):a.authenticate&&(fpConfig.guestCheckOut.enabled?(i="/",rZc.go(i,null,{absolute:!0})):(i=rZc.get(e.data.loginState)||rZc.get("login"),this.redirect(i,{error:fpUi.locale("ui-sign-continue","Please sign in to continue.")},e,t)))}if(!i&&e.redirect){var o,s=_.result(e,"redirect");if(_.isObject(s)&&s.state?(i=s.state,_.size(s.params)&&(t=s.params)):i="first-child"==s?_.first(e.menu):rZc.get(s),_.isString(e.redirect)){var l=S(e.redirect);(l.endsWith("-param")||l.endsWith("-route"))&&(o={disableHistory:!0})}i&&rZc.go(i,t,o)}if(i)return{toState:i,fromState:e,fromParams:t}},href:function(e,t,n){if(e){n.debug,t=_.getObject(t),n.enableSearchParams&&function(e){if(_.size(e)){var t,n=qZc.searchParams;for(var i in e)t=e[i],_.has(n,i)&&S(t).trim().s===S(n[i]).trim().s&&delete e[i]}}(t),n=_.getObject(n);var i,r=fp.routeDelimiter+"/";if(_.isString(e))(i=S(e).trailingSlashIt()).endsWith(fp.routeDelimiter)?i=i.ensureRight("/"):i.contains(fp.routeDelimiter)||(i=i.concat(r)),_.size(t)&&(i=i.concat(fpUtil.urlSearch(t)));else{if(!e.validates(t))return;n=_.getObject(n),i=S(e.format(t,!n.filtered))}if(n.enableSearchParams&&_.size(qZc.searchParams)){var a=i.split(r);a[0]+=0<=a[0].indexOf("?")?"&":"?",i=S(a.join()).concat(S(fpUtil.urlSearch(qZc.searchParams)).trimLeft("?")+r)}return i=i.ensureLeft("/"),n.absolute?pZc.origin()+i.s:i.s}},buildUrl:function(e,t){e=S(e||oZc.href),t=$.extend({inherit:!1},t);var n,i,r,a,o=e.split(fp.routeDelimiter),s=S(o[0].split("?")[0]),l=S(S(o[1]).split("?")[0]).trim("/");return t.inherit&&e.contains("?")&&(t.searchParams&&(n=fpUtil.urlParams({url:e.s,includeSearch:!0,includeRouteSearch:!1})),t.routeSearchParams&&e.contains(fp.routeDelimiter)&&(i=fpUtil.urlParams({url:e.s,includeSearch:!1,includeRouteSearch:!0}))),n=_.getObject(n),_.each(t.searchParams,function(e,t){fpUtil.isNull(e)?delete n[t]:n[t]=e}),r=fpUtil.urlSearch(n),i=_.getObject(i),_.each(t.routeSearchParams,function(e,t){fpUtil.isNull(e)?delete i[t]:i[t]=e}),a=fpUtil.urlSearch(i),(l.length||a)&&(l=l.prepend(fpUtil.formatString("{0}/",fp.routeDelimiter))),a&&(l=l.ensureRight("/").append(a)),fpUtil.regExp.matchHost.test(s.ensureRight("/").s)?s.match(/\.[a-z]{3,4}$/i)||(s=s.ensureRight("/")):(s=s.ensureLeft("/")).match(/\.[a-z]{3,4}$/i)||(s=s.trailingSlashIt()),s.append(r).append(l).s},redirect:function(e,t,n,i){if(_.isObject(e)){t=_.getObject(t);var r=nZc.stateManager;r.current.name==e.name&&_.isEqual(t,r.stateParams)||(n=n||r.current,i=i||r.stateParams,n&&(t.next=r.href(n.name,i)),r.go(e,t))}},getLocalRoute:function(e){if((e=S(e).trim()).length&&!rZc.getStateFromUrl(e.s).state.abstract){var t=_.first(e.ensureRight("/").match(fpUtil.regExp.matchHost));return t&&(e=e.trimLeft(t).ensureLeft("/")),e.s}},relativeUrl:function(e,t){var n=(e=S(e).trim()).s;return e=S(e).ensureRight("/").replace(fpUtil.regExp.matchHost,""),S(n).endsWith("/")||e.trimRight("/"),e.s||fpUtil.getStateValue(null!=t,t,"/")},locale:function(e){var t,n=(e=e||oZc.href).match(fpUtil.regExp.matchUrl),i=n&&n[3];return i&&_.contains(fpConfig.locales,i)&&(t=i),t=t||(_.first(fpConfig.locales)||"en")}},rZc={states:{},stateParams:{},rootStateConfig:{name:"",url:"^",views:null,abstract:!0,data:{}},history:function(){document.referrer&&_.getArray(document.referrer.match(fpUtil.regExp.matchUrl))[1]!=pZc.origin()&&fp.setCookie("fp-history",null);var r=fp.getCookie("fp-history");return{__items:function(){return fp.getCookie("fp-history")},get:function(e){var t;if(fpUtil.isInteger(e)){var n=e;n<0&&(n=_.size(r)-1+n),t=r[n]}else _.isObject(e)&&(e=e.name),t=_.findWhere(r,{name:e});return t},add:function(e){if(_.isObject(e)&&_.has(e,"name")){this.remove(e.name,!1),r[_.size(r)]=e;var t=_.size(r);if(4<t){for(var n=0;n<t-4;n++)delete r[n];a()}fp.setCookie("fp-history",r)}},remove:function(e,t){t=fpUtil.getBoolean(t,!0);var n,i={name:e};return _.find(r,function(e,t){return!!_.isMatch(e,i)&&(n=e,delete r[t],!0)}),a(),t&&fp.setCookie("fp-history",r),n},flush:function(){_.empty(r),fp.setCookie("fp-history")},back:function(e,t,n){var i,r=this.get(e);return r&&(i=r.stateParams),nZc.stateManager.go(e,$.extend(i,t),n)},href:function(e,t,n){var i,r=this.get(e);return r&&(i=r.stateParams),nZc.stateManager.href(e,$.extend(i,t),n)}};function a(){var t={},n=0;_.each(r,function(e){t[n]=e,n++}),r=t}}(),register:function(t){t=t||[];var n=this;if(this.initRootState(),"true"==qZc.urlParams.disableRoutes)return this.from=this.root,this.current=this.getStateFromUrl().state,void(this.currentUrl=oZc.href);_.each(t,function(e){S(e.url).startsWith("{{")||(n.ensureState(e.menuParent,t),n.ensureState(e.parent,t),e.parent&&!n.get(e.parent)||n.get(e.name)||n.registerState(e))}),_.each(this.states,function(e){fpUtil.sort(e.menu,"menuSequence")});var e=this.getStateFromUrl(null,!1,!0);this.from=this.root,this.current=e.state,this.currentUrl=oZc.href,$.extend(this.stateParams,e.params)},init:function(){if(this.initialized)qZc.hasXhrPageLoad&&(this.initRootState(),AZc.call(this,!0,null));else{if(this.from=this.current=this.root,delete this.fromUrl,fpConfig.enableSEOPushState&&!fp.isBot&&fpConfig.enableSEO&&window.history&&window.history.pushState){function e(e){if(!e.isDefaultPrevented()&&!$(e.target).closest(".disable-freshop-xhr-url,[disable-freshop-xhr-url]").length){var t=this.href||oZc.href,n="popstate"==e.type?rZc.currentUrl:t;pZc.isCurrentPage(n)||rZc.go(t,null,{absolute:!0,event:e})}}$(window).off("popstate.stateManager").on("popstate.stateManager",e),$(document.body).off("click.stateManager").on("click.stateManager","a[href], [data-freshop-xhr-url]",e)}this._router||(this._router=fp.Router({"/.*":$.noop}),this._router.configure({async:!0,after:$.proxy(yZc,this),before:$.proxy(AZc,this),on:$.proxy(BZc,this)})),this._router.init("/"),this.initialized=!0}},initRootState:function(){if("^"==this.rootStateConfig.url&&(this.rootStateConfig.url=fpUtil.formatString("^{0}{1}/",pZc.pathname(),fp.routeDelimiter)),this.root)return this.root.self.url=this.rootStateConfig.url,void this.rebuildState(this.root,!1);this.root=this.registerState(this.rootStateConfig)},registerState:function(e,t){t=_.getObject(t);var n=this,i=this.generateState(e,t),r=S(e.url);if(!(this.states[e.name]=i).abstract){if(!(fpConfig.enableSEO&&i.enableSEO&&i.ownParams&&i.ownParams.slug)&&r.startsWith("?")&&!r.startsWith("?{")){var a,o=r.trimLeft("?").split("&");if(o.length)i.requiredParams=_.getObject(i.requiredParams),_.each(o,function(e){a=e.split("="),i.requiredParams[S(a[0]).trim().s]=S(a[1]).trim().s||null})}_.each(e.params,function(e,t){"lang"==t||fpConfig.enableSEO&&i.enableSEO||i.requiredParams&&_.has(i.requiredParams,t)||(i.requiredParams=_.getObject(i.requiredParams),i.requiredParams[t]=e||null)}),i.parent&&(i.parent.children.push(i),i.menuParent||i.parent.menu.push(i)),i.menuParent&&_.each(i.menuParent.split(","),function(e){(e=n.get(e))&&e.menu.push(i)})}return i},generateState:function(e,t){if(!(t=_.getObject(t)).disableValidate&&(!_.isString(e.name)||0<=e.name.indexOf("@")))throw new Error("State must have a valid name");if(!t.disableValidate&&this.states.hasOwnProperty(e.name))throw new Error(fpUtil.formatString('State "{0}" is already defined',e.name));var n=$.extend({},e,{self:e,toString:function(){return this.name}});for(var i in uZc)_.isFunction(uZc[i])&&(n[i]=uZc[i](n));return n},rebuildState:function(e,t){var n=this.get(e);if(n){for(var i in t=fpUtil.getBoolean(t,!0),uZc)_.has(n.self,i)?n[i]=n.self[i]:"menu"!=i&&"children"!=i&&delete n[i];for(var i in uZc)"menu"!=i&&"children"!=i&&_.isFunction(uZc[i])&&(n[i]=uZc[i](n));if(t){var r={};function a(e){r[e.name]||(rZc.rebuildState(e),r[e.name]=1)}r[n.name]=1,_.each(n.children,a),_.each(n.menu,a)}return n}},ensureState:function(e,t){_.isString(e)&&_.isObject(t)&&(e=_.findWhere(t,{name:e}))&&(this.get(e.name)||(e.name!=e.parent?(this.ensureState(e.parent,t),e.parent&&!this.get(e.parent)||this.registerState(e)):fp.warn(fpUtil.formatString('Circular reference detected for state "{0}".',e.name))))},get:function(e){if(_.isObject(e)){if(e.url instanceof nZc.UrlMatcher)return e;e=e.name}return _.isString(e)?this.states[e]:void 0},getTopParent:function(e){if(e=this.get(e),_.isObject(e)){for(;e.parent&&!e.parent.abstract;)e=e.parent;return e}},contains:function(e,t){if(e=this.get(e),!_.isObject(e))return!1;if(t=this.get(t),!_.isObject(t))return!1;for(var n=!1;e&&!e.abstract&&!(n=this.is(e,t));)e=e.parent;return n},hasLineage:function(e,t){return this.getTopParent(e)==this.getTopParent(t||this.current)},getLocale:function(e,t){if(fpConfig.enableLocaleRoute)return(e=e||fp.locale)!=fp.locale&&e.length>t&&fp.locale.length==t&&"en"!=fp.locale&&(e=fp.locale),e},getStateFromUrl:function(e,t,n,i){var r,a,o,s,l,c,u=fp.routeDelimiter+"/",d=function(e,t){var n,i,r,a;if(e=S(e||oZc.href).replace(fpUtil.regExp.matchHost,"").ensureLeft("/"),fpConfig.enableLocaleRoute){var o=qZc.locale(oZc.origin+e.s);"en"!=o&&2==o.length&&(e=e.trimLeft(fpUtil.formatString("/{0}",o)).ensureLeft(fpUtil.formatString("/{0}-{0}",o)))}fpUtil.isAngularState(e)&&(e=e.replace("#/",fp.routeDelimiter+"/"));e.indexOf(fp.routeDelimiter)<0&&(e=e.concat(fp.routeDelimiter));n=(n=e.s).split(fp.routeDelimiter),r=n[n.length-1].split("?"),i=S(r[0]).trim("/").s,n=n[0].split("?"),n=S(n[0]).trailingSlashIt().s+fp.routeDelimiter+"/"+i,t&&(a=fpUtil.urlParams(e.s));return{url:n,params:_.getObject(a)}}(e,n),f=S(d.url).replace(u,"").trailingSlashIt().s;if(_.find(this.states,function(e){if(!e.abstract&&(r=fpConfig.enableSEO&&e.enableSEO&&e.ownParams&&e.ownParams.slug?f:d.url,i&&S(e.name).startsWith("product-detail"),S(r).startsWith(e.url.prefix)&&(l=e.url.exec(r,d.params),_.isObject(l)))){if(_.size(e.requiredParams))return c=!0,_.find(e.requiredParams,function(e,t){if(!_.has(d.params,t)||_.size(e)&&e!=d.params[t])return!(c=!1)}),c?(a=e,o=l,!(s=void 0)):void 0;a=e,o=l}}),_.isObject(a)){$.extend(d.params,o),a.mapToParentState&&(a=a.parent);var p=S(a.name);if(p.endsWith("-param")||p.endsWith("-route")){var h=this.get(a.name.replace("-param","").replace("-route",""));h&&(a=h)}}return _.isObject(a)||(a=this.root,o=a.url.exec(d.url,d.params),$.extend(d.params,o)),a==this.root&&t&&((e=S(e)).contains(fp.routeDelimiter)||(e=e.trailingSlashIt().concat(fp.routeDelimiter)),e=e.ensureRight("/"),a=this.generateState({url:e.s},{disableValidate:!0})),{state:a,params:d.params,options:fpConfig.enableSEO&&a.enableSEO?s&&{slug:s}:void 0}},getCategoryState:function(e,t){var n;if(_.isObject(e)){if(e.canonical_url&&(n=this.getStateFromUrl(e.canonical_url).state))return n;e=e.js_navigation_path}return n=e?pZc.isCurrentPage(e)?this.current:this.getStateFromUrl(e,!0).state:(t&&_.has(fpConfig.routeStates,t)&&(n=this.get(fpConfig.routeStates[t])),n||this.current)},getQ:function(){var n;return _.find(this.stateParams,function(e,t){if((t=S(t)).eq("q")||t.endsWith("_q"))return n={identifier:t.s,value:S(e).trim().s},!0}),n||{identifier:"q",value:""}},go:function(e,t,n){n=_.getObject(n);var i,r,a,o=e,s=!1;if(_.isString(o)&&n.absolute){var l=this.getStateFromUrl(o,!1,!0);if(n.event&&!(fpConfig.enableSEOPushState&&fpConfig.enableSEO&&l.state.enableSEO))return!0;if(l.state.abstract)a=o;else{if(qZc.ensureRoute(l.state,t))return s;t=t||l.params,o=l.state,a=this.href(o,t,n)}}else{if(o=this.get(o),!_.isObject(o))return s;if(a=this.href(o,t,n),n.reloadState&&pZc.isCurrentPage(a))return AZc.call(this,!0,null),s}if(!a)return s;n.absolute||(s=!_.isEqual(fpUtil.urlParams(a),qZc.urlParams));var c=fpUtil.getBoolean(n.preventDefault||n.reload,!1),u=_.has(n,"disableHistory")?n.disableHistory:c;_.isObject(o)&&(r=fpConfig.enableSEO&&o.enableSEO)&&(i=fpConfig.enableSEOPushState?this.getTopParent(o)==this.getTopParent(this.current):this.contains(o,this.current)||this.contains(this.current,o)),r||(i=pZc.isCurrentPage(a,n.absolute)),c&&(this.preventDefault=c),!n.reload&&(qZc.hasXhrPageLoad||i||n.enableReplaceState)||(fp.isUnloading=freshop.unloading=!0);var d=window.history&&window.history.replaceState;if(!fp.isUnloading&&d&&u)window.history.replaceState({},null,a),AZc.call(this,!0,null);else if(qZc.hasXhrPageLoad)fp.__$freshop.find('a[data-role="next"]').attr("href",a)[0].click();else if(n.absolute||pZc.pathname(!0)!=a){if(fpConfig.enableSEOPushState&&_.isObject(o)&&pZc.pathname()!=a.split("#")[0]){var f,p,h=a;if(_.isString(e)&&(h=e),fpConfig.enableLocale&&(f=fp.locale,p=qZc.locale(h)),S(f).eq(p,!0)&&o.enableSEO&&this.current.enableSEO&&this.hasLineage(o,this.current)){var m=t&&t.department_id,g=m&&fp.departmentHash[m]||fp.defaultDepartment;if(S(g.js_navigation_path).eq(fp.department.js_navigation_path,!0))return"popstate"!=fpUtil.getValueFromNamespace("event.type",n)&&(window.history.pushState({},document.title,h),fpService.urlService.get({g:h,locale:p,store_id:fp.topStore.id},{childServiceCall:"analyze",timeout:2e3,handleErrors:!1}).done(function(e){e.title&&(document.title=fpUtil.decodeForHtml(e.title))})),n.event&&n.event.preventDefault(),AZc.call(this),n.reload&&i&&oZc.reload(!0),!0}if(n.event)return n.reload&&i&&oZc.reload(!0),!0}oZc.href=a}if(n.reload&&i&&oZc.reload(!0),this.preventDefault){s=!1;var v=this;setTimeout(function(){delete v.preventDefault},100)}return s},href:function(e,t,n){if(e=this.get(e),!_.isObject(e))return"";if(fpConfig.enableSEO&&e.enableSEO&&!S(e.name).endsWith("-route")){var i=this.states[e.name+"-route"];i&&(e=i)}if(e.data.enableOauthLoginUrl&&(m=fp.ui.getOauthLoginUrl()))return m;e.url.source==fpUtil.formatString("/{0}/#",fp.routeDelimiter)&&(e=this.current,t=$.extend({},this.stateParams));var r,a,o,s,l,c=fpConfig.enableSEO&&e.enableSEO&&n&&_.has(n,"canonical_url"),u=this.stateParams;if(n=$.extend({lossy:!0,inherit:!1,relative:this.current,absolute:!1,filtered:!1,enableSEO:fpConfig.enableSEO&&e.enableSEO},n),!(e=e&&n.lossy?e.navigable:e))return"";t=_.getObject(t),n.inherit?(fpConfig.enableSEO&&e!=this.current&&(t=$.extend(t,{slug:null,route:null})),t=n.filtered?function(e,t,n,i){var r,a=function(e,t){var n=[];for(var i in e.path){if(e.path[i]!==t.path[i])break;n.push(e.path[i])}return n}(n,i),o={},s=[];for(var l in a)if(a[l].params&&(r=_.keys(a[l].params)).length)for(var c in r)0<=_.indexOf(s,r[c])||(s.push(r[c]),o[r[c]]=e[r[c]]);return $.extend({},o,t)}(u,t,this.current,e):$.extend({},u,t)):n.enableSEO&&e==this.current&&_.each(e.ownParams,function(e){"route"!=e.id&&!_.has(t,e.id)&&_.has(u,e.id)&&(t[e.id]=u[e.id])}),n.debug,fpConfig.enableLocaleRoute&&(o=e.abstract?(a=e.ownParams,_.keys(a)):(a=e.params,e.params.$$keys()),_.each(o,function(e){(s=a[e])&&s.config.inherit&&!_.has(t,e)&&(t[e]=u[e])}),_.has(t,"lang")&&((l=t.lang)&&(2==l.length?t.lang=fpUtil.formatString("{0}-{0}",l):(l=t.lang.split("-")[0],fpUtil.formatString("{0}-{0}",l)!=t.lang&&(l=t.lang))),l&&_.contains(fpConfig.locales,l)||(delete t.lang,l=null)),t.route&&(t.route=S(t.route).ensureLeft("/").s));if(c){if(n.canonical_url){r=S(e.url.segments[fpConfig.enableLocaleRoute?1:0]).trimRight(fp.routeDelimiter+"/");var d=n.canonical_url.match(fpUtil.regExp.matchCanonicalUrl);if(t.slug=S(d&&d[2]),t.slug.startsWith(r)&&(t.slug=t.slug.trimLeft(r),r=null),fpConfig.enableMobile){var f=t.department_id,p=f&&fp.departmentHash[f];p&&p.__origJsNavPath&&(t.slug=t.slug.replace(p.__origJsNavPath,fpConfig.urls.shopping))}t.slug=t.slug.trimLeft("/").s}t.id&&(_.has(e.params,"product_id")?(t.product_id=t.id,delete t.id):_.has(e.params,"recipe_id")&&(t.recipe_id=t.id,delete t.id))}var h=n.filtered?function(e,t,n){var i={};return _.each(e,function(e){n&&_.isUndefined(t[e])||(i[e]=t[e])}),i}(e.params.$$keys(),t):t,m=S.getString(qZc.href(e.url,h,n));if(fpConfig.enableLocaleRoute&&l&&l!=h.lang&&(m=S(m).trimLeft("/"+h.lang).ensureLeft("/"+l).s),r&&(m=S(m).trimLeft(r.trimRight("/").s).s),fpConfig.enableSEO&&e.enableSEO&&e.ownParams&&e.ownParams.slug&&-1==m.indexOf("#")){var g=fp.routeDelimiter+"/";if(0<=m.indexOf("?")?m=m.replace("?",fpUtil.formatString("{0}{1}?",S().trailingSlashIt().s,g)):0<=oZc.hash.indexOf("#")&&(m=S(m).trailingSlashIt().s+g),_.size(n.searchParams)){var v=m.split(g);v.push(fpUtil.urlSearch(n.searchParams),g,v.pop()),m=v.join("")}}return e.data.isAngularState&&(m=m.replace(fp.routeDelimiter+"/","#/")),pZc.isCurrentPage(m)&&-1!=oZc.hash.indexOf("#")||((m=S(m).trimRight(fpUtil.formatString("{0}{1}/",S().trailingSlashIt().s,fp.routeDelimiter))).contains("#")||(m=m.trailingSlashIt()),m=m.s),m},categoryHref:function(e,t,n,i){var r,a,o=e&&e.id,s=n,l="department_id";if(t.enableTemplate&&o&&t.template?r=t.template:n=_.omit(n,"department_id","category_id","coupon_department_id","page"),o){if(fpConfig.enableSEO&&!t.relative&&e.canonical_url&&(a=this.getStateFromUrl(e.canonical_url).state))return(i=_.getObject(i)).canonical_url=e.canonical_url,"recipe"==t.type&&(l="category_id"),n[l]=e.id,r=this.href(a,n,i);switch(t.js_navigation_path||(t.relative?t.js_navigation_path=S(this.current.self.url).trimLeft("^").trimRight(fp.routeDelimiter+"/").s:t.js_navigation_path=fpConfig.urls[t.type]),t.type){case"product":a=this.states.shop;break;case"circular":delete n.offer_id;break;case"recipe":l="category_id",a=this.states.recipe;break;case"coupon":l="coupon_department_id"}a&&(t.js_navigation_path||(t.js_navigation_path=S(a.self.url).trimLeft("/{lang:[a-z]{2,2}-[a-z]{2,4}}").trimRight(fp.routeDelimiter+"/").s),r=r&&r.replace(S("/js_navigation_path").trailingSlashIt().s,S(e&&e.js_navigation_path||t.js_navigation_path).trailingSlashIt().s)),r?r=r.replace(l+"=",l+"="+e.id):(n[l]=e.id,t.enableTemplate&&((s=$.extend({},n))[l]=""))}if(!r){var c=t.enableTemplate&&o&&!t.template,u=c?"/js_navigation_path":S(e&&e.js_navigation_path||t.js_navigation_path).trailingSlashIt().s;r=this.href(this.getCategoryState(fpUtil.getStateValue("product"==t.type||"recipe"==t.type,u),fpUtil.getStateValue(!t.relative,t.type)),s,i),c&&(t.template=r,r=this.categoryHref(e,t,n,i))}return r},is:function(e,t){return!!(e=this.get(e))&&e==(t=t&&this.get(t)||this.current)},isDetail:function(e,t){return _.hasAny(_.getObject(t,this.stateParams),e)},reload:function(){this.go(this.current,$.extend({},this.stateParams),{reloadState:!0})},back:function(e){var t=this.current;if(this.isDetail(["id","product_id","recipe_id"])){var n;if(!t.abstract)if(fpConfig.enableSEO&&(n=this.history.get(e+"-category")),n=n||this.history.get("recipe"!=e?"shop":e))return void this.history.back(n);return t=this.getTopParent(t),void this.go(t)}this.history.back(t.parent)},backHref:function(e){var t=this.current;if(this.isDetail(["id","product_id","recipe_id"])){var n;if(!t.abstract)if(fpConfig.enableSEO&&(n=this.history.get(e+"-category")),n=n||this.history.get("recipe"!=e?"shop":e))return this.history.href(n);return t=this.getTopParent(t),this.href(t)}return this.history.href(t.parent)}},uZc={parent:function(e){if(!e.abstract){if(e.parent)return rZc.get(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?rZc.get(t[1]):rZc.root}},data:function(e){return e.data=$.extend({},e.data),e.name&&!e.data.cssClass&&(e.data.cssClass=fpUtil.formatString("fp-state-{0}",e.name)),e.parent&&_.defaults(e.data,e.parent.data),e.data},url:function(e){var t=e.url,n={params:_.getObject(e.params),disableConcat:e.disableConcat};if(_.isString(t)){if(e.parent&&!e.parent.abstract&&e.parent.navigable){var i=e.parent.url.sourcePath;return n.params.slug&&(e.parent.url.sourcePath=S(i).replace(S(fp.routeDelimiter).trailingSlashIt().s,"").s),t=e.parent.navigable.url.concat(t,n),e.parent.url.sourcePath=i,t}return"^"==t.charAt(0)&&(t=t.substring(1)),nZc.urlMatcherFactory.compile(t,n)}if(!t||nZc.urlMatcherFactory.isMatcher(t))return t;throw new Error(fpUtil.formatString("Invalid url '{0}' in state '{1}'",t,e))},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var n=e.url&&e.url.params||new nZc.urlMatcherFactory.ParamSet;return _.each(e.params||{},function(e,t){n[t]||(n[t]=new nZc.urlMatcherFactory.Param(t,null,e,"config"))}),n},params:function(e){return e.parent&&e.parent.params?$.extend(e.parent.params.$$new(),e.ownParams):new nZc.urlMatcherFactory.ParamSet},views:function(n){var i={};return _.each(_.isUndefined(n.views)?{"":n}:n.views,function(e,t){t.indexOf("@")<0&&(t+="@"+n.parent.name),i[t]=e}),i},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?$.extend({},e.parent.includes):{};return t[e.name]=!0,t},children:function(e){return[]},menu:function(e){return[]}},zZc=!1,nZc.location=pZc,nZc.routeManager=qZc,nZc.stateManager=rZc,T2c=freshop.events={},X2c={},Y2c={},fp.clientEvents={on:X2c,trigger:Y2c},_.each({INITIALIZED:!0,LOADED:!0,SESSION_CHANGED:!0,USER_LOADED:!0,USER_CHANGED:!0,SEARCH:!0,STORE_LOADED:!0,STORE_CHANGED:!0,ROUTE_CHANGED:!0,LIST_REFRESHED:!0,MINI_LIST_HIDDEN:!0,CIRCULAR_DISPLAY_TYPE_CHANGED:!0},function(e,t){U2c=_.isString(e)?e:fpEvent[t],T2c[t]=U2c,X2c[U2c]=!0}),_.each({MINI_LIST_SHOW:!0,MINI_LIST_HIDE:!0,MEDIA_WIDTH_CHANGE:!0,RESIZE:!0},function(e,t){U2c=_.isString(e)?e:fpEvent[t],T2c[t]=U2c,Y2c[U2c]=!0}),$.extend(freshop,{on:function(e,t){return fp.clientEvents.on[e]&&_.isFunction(t)&&(fp.initialized&&e==fpEvent.INITIALIZED?_.defer(t.bind(freshop,$.Event(e))):$(this).on(e,t)),this},off:function(e,t){return fp.clientEvents.on[e]&&$(this).off(e,t),this},trigger:function(e,t,n){if(_.isString(e)&&fp.clientEvents.trigger[e]&&(n=t,t=e,e=void 0),t==fpEvent.MEDIA_WIDTH_CHANGE&&(n=_.getObject(n)),fp.clientEvents.trigger[t])return fp.trigger(t,n,e)},invoke:function(e,t,n,i,r,a){n=$.extend({},n,{cache:!1,prepareJsonData:!1,handleErrors:!1,ignoreErrors:!0});var o=fp.api(e,t,n);fp.disableRender&&(o=o.then(function(){return{}})),fpUtil.applyCallback(i,r,a,o)},login:function(e,t,n,i,r){var a=fpService.userMeService.post({email:e,password:t},{childServiceCall:"sessions"}).then(function(){return fp.initLogin({autoRedirect:!0})});fpUtil.applyCallback(n,i,r,a)},logout:function(e,t,n){fpUtil.applyCallback(e,t,n,fp.logout()).deferred().resolve()},getCurrentSession:function(e,t,n){fp.session.token?this.invoke("sessions",{token:fp.session.token},null,e,t,n):fpUtil.applyCallback(e,t,n).deferred().resolve({})},getCurrentUser:function(e,t,n){fp.session.is_user_logged_in?this.invoke("users/me",null,null,e,t,n):fpUtil.applyCallback(e,t,n).deferred().resolve({})},getCurrentStore:function(t,n,i){var e=fp.getSelectedStoreId();function r(e){e?freshop.invoke("stores/"+e,null,null,t,n,i):fpUtil.applyCallback(t,n,i).deferred().resolve({})}e?r(e):this.getCurrentUser(function(e){r(e.selected_store_id)},n)},getFulfillmentType:function(e,t,n){var i,r=$.Deferred(),a=fp.user.preference.fulfillmentTypeId||fp.getPrefCookie().fulfillmentTypeId;a||fp.user.id||!fp.session.is_user_logged_in||(i=fpService.userMeService.get().then(function(e){a=e.preference&&e.preference.fulfillmentTypeId})),$.when(i).always(function(){a?freshop.invoke("fulfillment_types/"+a,null,null,e,t,n):r.reject("No fulfillment type")}),fpUtil.applyCallback(e,t,n,r.promise())},getStores:function(e,t,n){this.invoke("stores",{limit:-1,is_selectable:!0,fields:"id,number,store_number,name,state,is_selectable"},null,e,t,n)}}),$.extend(freshop.ui,{on:function(e,t,n){if(_.isFunction(t)&&(n=t,t=void 0),fp.clientUiEvents.on[e]&&_.isFunction(n)){if(e==fpEvent.LOADED&&fp.loaded)return _.defer(n.bind(freshop.ui,$.Event(e))),this;if($(this).on(e,n),t){var i=$._data(freshop.ui,"events");if(i){var r=_.findWhere(i.rendered,{handler:n});r&&(r.selector=t)}}}return this},off:function(e,t,n){return fp.clientUiEvents.on[e]&&$(this).off(e,t,n),this},setConfig:function(e){$.extend(!0,fpConfig,e)},trigger:function(e,t,n){if(_.isString(e)&&fp.clientUiEvents.trigger[e]&&(n=t,t=e,e=void 0),fp.clientUiEvents.trigger[t])return fp.trigger(t,n,e)},getNavigation:function(e,t,n,i){_.isFunction(e)&&(i=n,n=t,t=e,e=void 0);var r=fpUi.loaded().then(function(){return fpUi.getNavigation(S.getString(e))});fp.disableRender&&(r=r.then(function(){return{}})),fpUtil.applyCallback(t,n,i,r)},setStore:function(e,t,n,i){var r=$.Deferred();fp.storeChange({storeId:e,callback:r.resolve}),fpUtil.applyCallback(t,n,i,r.promise())},setFulfillmentType:function(e,t,n,i){fpUtil.applyCallback(t,n,i,fpUi.setFulfillmentType(e))},buildRoute:fpUtil.getRoute.bind(fpUtil),getSelectedListQuantity:fpUi.ListManager.getListQuantity.bind(fpUi.ListManager),getSelectedStore:function(){return _.isObject(fpClient.store)||(fpClient.store=$.extend(!0,{},fp.store)),fpClient.store},setSelectedStore:function(e){fpClient.store=e},getConfig:function(){return fpConfig},getDeliveryAddress:function(){return _.getObject(Lockr.get("deliveryAddress"))},getLocation:function(){var e=fpUi.router.stateManager;return e.href(e.current)||""},changePage:function(e,t,n,i){fpUtil.applyCallback(t,n,i,fpUi.changePage(e))},getAssetCdnUrl:fpUi.getAssetCdnUrl.bind(fpUi),getPrefCookie:fp.getPrefCookie.bind(fp),setPrefCookie:fp.setPrefCookie.bind(fp),encodeForHtml:fpUtil.encodeForHtml.bind(fpUtil),decodeForHtml:fpUtil.decodeForHtml.bind(fpUtil)}),z4c=freshop.ui.events={},D4c={},E4c={},fp.clientUiEvents={on:D4c,trigger:E4c},_.each({LOADED:!0,SEARCH:!0,RENDERED:!0,ROUTE_CHANGED:!0},function(e,t){A4c=_.isString(e)?e:fpEvent[t],z4c[t]=A4c,D4c[A4c]=!0}),_.each({INITIALIZE:!0,RESIZE:!0,MODULE_LOAD:!0,TRACK_EVENT:!0},function(e,t){A4c=_.isString(e)?e:fpEvent[t],z4c[t]=A4c,E4c[A4c]=!0}),fpClient=fp.client={initClientEvents:function(){var n=$(fpClient);_.each(fp.clientEvents.on,function(e,t){n.on(t,K4c)}),_.each(fp.clientUiEvents.on,function(e,t){n.on(t,L4c)});var i=fp.data.events;J4c(i.handlers),J4c(i.uiHandlers),i.queue={},i.uiQueue={};function r(e,t){i.queue[fpUtil.getEventNs(e)]={event:e,data:t}}function a(e,t){i.uiQueue[fpUtil.getEventNs(e)]={event:e,data:t}}if(fp.clientCallbackReady=function(){$(function(){var e=100;e=fpUi.router.routeManager.urlParams.client_callback_hang_for||e,_.delay(function(){fp.log("Client callback ready"),_.each(fp.clientEvents.on,function(e,t){fp.off(t,r)}),_.each(fp.clientUiEvents.on,function(e,t){fp.off(t,a)}),_.each(i.queue,function(e){K4c(e.event,e.data)}),_.each(i.uiQueue,function(e){L4c(e.event,e.data)}),delete fp.data},e)}),delete fp.clientCallbackReady,delete fp.clientCallback,delete fp.clientReady},fp.clientReady)fp.clientCallbackReady();else if(fp.clientCallback){for(var e in fp.clientEvents.on)fp.on(e,r);for(var e in fp.clientUiEvents.on)fp.on(e,a)}}}}();
//# sourceMappingURL=freshop-ui.min.js.map
